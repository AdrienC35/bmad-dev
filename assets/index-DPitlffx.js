function xm(o,i){for(var r=0;r<i.length;r++){const u=i[r];if(typeof u!="string"&&!Array.isArray(u)){for(const f in u)if(f!=="default"&&!(f in o)){const l=Object.getOwnPropertyDescriptor(u,f);l&&Object.defineProperty(o,f,l.get?l:{enumerable:!0,get:()=>u[f]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const l of f)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function r(f){const l={};return f.integrity&&(l.integrity=f.integrity),f.referrerPolicy&&(l.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?l.credentials="include":f.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(f){if(f.ep)return;f.ep=!0;const l=r(f);fetch(f.href,l)}})();function vh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Fc={exports:{}},sa={},Zc={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af;function Sm(){if(af)return Oe;af=1;var o=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),k=Symbol.iterator;function C(I){return I===null||typeof I!="object"?null:(I=k&&I[k]||I["@@iterator"],typeof I=="function"?I:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function M(I,V,me){this.props=I,this.context=V,this.refs=R,this.updater=me||P}M.prototype.isReactComponent={},M.prototype.setState=function(I,V){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,V,"setState")},M.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function Z(){}Z.prototype=M.prototype;function z(I,V,me){this.props=I,this.context=V,this.refs=R,this.updater=me||P}var $=z.prototype=new Z;$.constructor=z,A($,M.prototype),$.isPureReactComponent=!0;var X=Array.isArray,fe=Object.prototype.hasOwnProperty,pe={current:null},be={key:!0,ref:!0,__self:!0,__source:!0};function Be(I,V,me){var de,le={},re=null,Ae=null;if(V!=null)for(de in V.ref!==void 0&&(Ae=V.ref),V.key!==void 0&&(re=""+V.key),V)fe.call(V,de)&&!be.hasOwnProperty(de)&&(le[de]=V[de]);var Te=arguments.length-2;if(Te===1)le.children=me;else if(1<Te){for(var We=Array(Te),wt=0;wt<Te;wt++)We[wt]=arguments[wt+2];le.children=We}if(I&&I.defaultProps)for(de in Te=I.defaultProps,Te)le[de]===void 0&&(le[de]=Te[de]);return{$$typeof:o,type:I,key:re,ref:Ae,props:le,_owner:pe.current}}function qe(I,V){return{$$typeof:o,type:I.type,key:V,ref:I.ref,props:I.props,_owner:I._owner}}function ne(I){return typeof I=="object"&&I!==null&&I.$$typeof===o}function Ne(I){var V={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(me){return V[me]})}var Me=/\/+/g;function De(I,V){return typeof I=="object"&&I!==null&&I.key!=null?Ne(""+I.key):V.toString(36)}function Fe(I,V,me,de,le){var re=typeof I;(re==="undefined"||re==="boolean")&&(I=null);var Ae=!1;if(I===null)Ae=!0;else switch(re){case"string":case"number":Ae=!0;break;case"object":switch(I.$$typeof){case o:case i:Ae=!0}}if(Ae)return Ae=I,le=le(Ae),I=de===""?"."+De(Ae,0):de,X(le)?(me="",I!=null&&(me=I.replace(Me,"$&/")+"/"),Fe(le,V,me,"",function(wt){return wt})):le!=null&&(ne(le)&&(le=qe(le,me+(!le.key||Ae&&Ae.key===le.key?"":(""+le.key).replace(Me,"$&/")+"/")+I)),V.push(le)),1;if(Ae=0,de=de===""?".":de+":",X(I))for(var Te=0;Te<I.length;Te++){re=I[Te];var We=de+De(re,Te);Ae+=Fe(re,V,me,We,le)}else if(We=C(I),typeof We=="function")for(I=We.call(I),Te=0;!(re=I.next()).done;)re=re.value,We=de+De(re,Te++),Ae+=Fe(re,V,me,We,le);else if(re==="object")throw V=String(I),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Lt(I,V,me){if(I==null)return I;var de=[],le=0;return Fe(I,de,"","",function(re){return V.call(me,re,le++)}),de}function Pe(I){if(I._status===-1){var V=I._result;V=V(),V.then(function(me){(I._status===0||I._status===-1)&&(I._status=1,I._result=me)},function(me){(I._status===0||I._status===-1)&&(I._status=2,I._result=me)}),I._status===-1&&(I._status=0,I._result=V)}if(I._status===1)return I._result.default;throw I._result}var Ue={current:null},q={transition:null},ge={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:q,ReactCurrentOwner:pe};function G(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Lt,forEach:function(I,V,me){Lt(I,function(){V.apply(this,arguments)},me)},count:function(I){var V=0;return Lt(I,function(){V++}),V},toArray:function(I){return Lt(I,function(V){return V})||[]},only:function(I){if(!ne(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Oe.Component=M,Oe.Fragment=r,Oe.Profiler=f,Oe.PureComponent=z,Oe.StrictMode=u,Oe.Suspense=g,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Oe.act=G,Oe.cloneElement=function(I,V,me){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var de=A({},I.props),le=I.key,re=I.ref,Ae=I._owner;if(V!=null){if(V.ref!==void 0&&(re=V.ref,Ae=pe.current),V.key!==void 0&&(le=""+V.key),I.type&&I.type.defaultProps)var Te=I.type.defaultProps;for(We in V)fe.call(V,We)&&!be.hasOwnProperty(We)&&(de[We]=V[We]===void 0&&Te!==void 0?Te[We]:V[We])}var We=arguments.length-2;if(We===1)de.children=me;else if(1<We){Te=Array(We);for(var wt=0;wt<We;wt++)Te[wt]=arguments[wt+2];de.children=Te}return{$$typeof:o,type:I.type,key:le,ref:re,props:de,_owner:Ae}},Oe.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},Oe.createElement=Be,Oe.createFactory=function(I){var V=Be.bind(null,I);return V.type=I,V},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(I){return{$$typeof:_,render:I}},Oe.isValidElement=ne,Oe.lazy=function(I){return{$$typeof:x,_payload:{_status:-1,_result:I},_init:Pe}},Oe.memo=function(I,V){return{$$typeof:w,type:I,compare:V===void 0?null:V}},Oe.startTransition=function(I){var V=q.transition;q.transition={};try{I()}finally{q.transition=V}},Oe.unstable_act=G,Oe.useCallback=function(I,V){return Ue.current.useCallback(I,V)},Oe.useContext=function(I){return Ue.current.useContext(I)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(I){return Ue.current.useDeferredValue(I)},Oe.useEffect=function(I,V){return Ue.current.useEffect(I,V)},Oe.useId=function(){return Ue.current.useId()},Oe.useImperativeHandle=function(I,V,me){return Ue.current.useImperativeHandle(I,V,me)},Oe.useInsertionEffect=function(I,V){return Ue.current.useInsertionEffect(I,V)},Oe.useLayoutEffect=function(I,V){return Ue.current.useLayoutEffect(I,V)},Oe.useMemo=function(I,V){return Ue.current.useMemo(I,V)},Oe.useReducer=function(I,V,me){return Ue.current.useReducer(I,V,me)},Oe.useRef=function(I){return Ue.current.useRef(I)},Oe.useState=function(I){return Ue.current.useState(I)},Oe.useSyncExternalStore=function(I,V,me){return Ue.current.useSyncExternalStore(I,V,me)},Oe.useTransition=function(){return Ue.current.useTransition()},Oe.version="18.3.1",Oe}var lf;function yh(){return lf||(lf=1,Zc.exports=Sm()),Zc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf;function km(){if(uf)return sa;uf=1;var o=yh(),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,f=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(_,g,w){var x,k={},C=null,P=null;w!==void 0&&(C=""+w),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(P=g.ref);for(x in g)u.call(g,x)&&!l.hasOwnProperty(x)&&(k[x]=g[x]);if(_&&_.defaultProps)for(x in g=_.defaultProps,g)k[x]===void 0&&(k[x]=g[x]);return{$$typeof:i,type:_,key:C,ref:P,props:k,_owner:f.current}}return sa.Fragment=r,sa.jsx=d,sa.jsxs=d,sa}var cf;function bm(){return cf||(cf=1,Fc.exports=km()),Fc.exports}var E=bm(),W=yh();const fa=vh(W),Lm=xm({__proto__:null,default:fa},[W]);var ql={},Hc={exports:{}},Vt={},Wc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf;function Cm(){return hf||(hf=1,(function(o){function i(q,ge){var G=q.length;q.push(ge);e:for(;0<G;){var I=G-1>>>1,V=q[I];if(0<f(V,ge))q[I]=ge,q[G]=V,G=I;else break e}}function r(q){return q.length===0?null:q[0]}function u(q){if(q.length===0)return null;var ge=q[0],G=q.pop();if(G!==ge){q[0]=G;e:for(var I=0,V=q.length,me=V>>>1;I<me;){var de=2*(I+1)-1,le=q[de],re=de+1,Ae=q[re];if(0>f(le,G))re<V&&0>f(Ae,le)?(q[I]=Ae,q[re]=G,I=re):(q[I]=le,q[de]=G,I=de);else if(re<V&&0>f(Ae,G))q[I]=Ae,q[re]=G,I=re;else break e}}return ge}function f(q,ge){var G=q.sortIndex-ge.sortIndex;return G!==0?G:q.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;o.unstable_now=function(){return l.now()}}else{var d=Date,_=d.now();o.unstable_now=function(){return d.now()-_}}var g=[],w=[],x=1,k=null,C=3,P=!1,A=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(q){for(var ge=r(w);ge!==null;){if(ge.callback===null)u(w);else if(ge.startTime<=q)u(w),ge.sortIndex=ge.expirationTime,i(g,ge);else break;ge=r(w)}}function X(q){if(R=!1,$(q),!A)if(r(g)!==null)A=!0,Pe(fe);else{var ge=r(w);ge!==null&&Ue(X,ge.startTime-q)}}function fe(q,ge){A=!1,R&&(R=!1,Z(Be),Be=-1),P=!0;var G=C;try{for($(ge),k=r(g);k!==null&&(!(k.expirationTime>ge)||q&&!Ne());){var I=k.callback;if(typeof I=="function"){k.callback=null,C=k.priorityLevel;var V=I(k.expirationTime<=ge);ge=o.unstable_now(),typeof V=="function"?k.callback=V:k===r(g)&&u(g),$(ge)}else u(g);k=r(g)}if(k!==null)var me=!0;else{var de=r(w);de!==null&&Ue(X,de.startTime-ge),me=!1}return me}finally{k=null,C=G,P=!1}}var pe=!1,be=null,Be=-1,qe=5,ne=-1;function Ne(){return!(o.unstable_now()-ne<qe)}function Me(){if(be!==null){var q=o.unstable_now();ne=q;var ge=!0;try{ge=be(!0,q)}finally{ge?De():(pe=!1,be=null)}}else pe=!1}var De;if(typeof z=="function")De=function(){z(Me)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Lt=Fe.port2;Fe.port1.onmessage=Me,De=function(){Lt.postMessage(null)}}else De=function(){M(Me,0)};function Pe(q){be=q,pe||(pe=!0,De())}function Ue(q,ge){Be=M(function(){q(o.unstable_now())},ge)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(q){q.callback=null},o.unstable_continueExecution=function(){A||P||(A=!0,Pe(fe))},o.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):qe=0<q?Math.floor(1e3/q):5},o.unstable_getCurrentPriorityLevel=function(){return C},o.unstable_getFirstCallbackNode=function(){return r(g)},o.unstable_next=function(q){switch(C){case 1:case 2:case 3:var ge=3;break;default:ge=C}var G=C;C=ge;try{return q()}finally{C=G}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(q,ge){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=C;C=q;try{return ge()}finally{C=G}},o.unstable_scheduleCallback=function(q,ge,G){var I=o.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?I+G:I):G=I,q){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=G+V,q={id:x++,callback:ge,priorityLevel:q,startTime:G,expirationTime:V,sortIndex:-1},G>I?(q.sortIndex=G,i(w,q),r(g)===null&&q===r(w)&&(R?(Z(Be),Be=-1):R=!0,Ue(X,G-I))):(q.sortIndex=V,i(g,q),A||P||(A=!0,Pe(fe))),q},o.unstable_shouldYield=Ne,o.unstable_wrapCallback=function(q){var ge=C;return function(){var G=C;C=ge;try{return q.apply(this,arguments)}finally{C=G}}}})(Vc)),Vc}var df;function Pm(){return df||(df=1,Wc.exports=Cm()),Wc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff;function Em(){if(ff)return Vt;ff=1;var o=yh(),i=Pm();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,f={};function l(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(f[e]=n,e=0;e<n.length;e++)u.add(n[e])}var _=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},k={};function C(e){return g.call(k,e)?!0:g.call(x,e)?!1:w.test(e)?k[e]=!0:(x[e]=!0,!1)}function P(e,n,a,h){if(a!==null&&a.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A(e,n,a,h){if(n===null||typeof n>"u"||P(e,n,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function R(e,n,a,h,m,v,S){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=a,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=S}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){M[e]=new R(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];M[n]=new R(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){M[e]=new R(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){M[e]=new R(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){M[e]=new R(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){M[e]=new R(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){M[e]=new R(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){M[e]=new R(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){M[e]=new R(e,5,!1,e.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Z,z);M[n]=new R(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Z,z);M[n]=new R(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Z,z);M[n]=new R(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){M[e]=new R(e,1,!1,e.toLowerCase(),null,!1,!1)}),M.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){M[e]=new R(e,1,!1,e.toLowerCase(),null,!0,!0)});function $(e,n,a,h){var m=M.hasOwnProperty(n)?M[n]:null;(m!==null?m.type!==0:h||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(A(n,a,m,h)&&(a=null),h||m===null?C(n)&&(a===null?e.removeAttribute(n):e.setAttribute(n,""+a)):m.mustUseProperty?e[m.propertyName]=a===null?m.type===3?!1:"":a:(n=m.attributeName,h=m.attributeNamespace,a===null?e.removeAttribute(n):(m=m.type,a=m===3||m===4&&a===!0?"":""+a,h?e.setAttributeNS(h,n,a):e.setAttribute(n,a))))}var X=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),pe=Symbol.for("react.portal"),be=Symbol.for("react.fragment"),Be=Symbol.for("react.strict_mode"),qe=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),Ne=Symbol.for("react.context"),Me=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Lt=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),q=Symbol.iterator;function ge(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,I;function V(e){if(I===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);I=n&&n[1]||""}return`
`+I+e}var me=!1;function de(e,n){if(!e||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(H){var h=H}Reflect.construct(e,[],n)}else{try{n.call()}catch(H){h=H}e.call(n.prototype)}else{try{throw Error()}catch(H){h=H}e()}}catch(H){if(H&&h&&typeof H.stack=="string"){for(var m=H.stack.split(`
`),v=h.stack.split(`
`),S=m.length-1,T=v.length-1;1<=S&&0<=T&&m[S]!==v[T];)T--;for(;1<=S&&0<=T;S--,T--)if(m[S]!==v[T]){if(S!==1||T!==1)do if(S--,T--,0>T||m[S]!==v[T]){var N=`
`+m[S].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=S&&0<=T);break}}}finally{me=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?V(e):""}function le(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=de(e.type,!1),e;case 11:return e=de(e.type.render,!1),e;case 1:return e=de(e.type,!0),e;default:return""}}function re(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case be:return"Fragment";case pe:return"Portal";case qe:return"Profiler";case Be:return"StrictMode";case De:return"Suspense";case Fe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ne:return(e.displayName||"Context")+".Consumer";case ne:return(e._context.displayName||"Context")+".Provider";case Me:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Lt:return n=e.displayName||null,n!==null?n:re(e.type)||"Memo";case Pe:n=e._payload,e=e._init;try{return re(e(n))}catch{}}return null}function Ae(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(n);case 8:return n===Be?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Te(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function We(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function wt(e){var n=We(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),h=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,v=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return m.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function yi(e){e._valueTracker||(e._valueTracker=wt(e))}function wi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),h="";return e&&(h=We(e)?e.checked?"true":"false":e.value),e=h,e!==a?(n.setValue(e),!0):!1}function xi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ro(e,n){var a=n.checked;return G({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function so(e,n){var a=n.defaultValue==null?"":n.defaultValue,h=n.checked!=null?n.checked:n.defaultChecked;a=Te(n.value!=null?n.value:a),e._wrapperState={initialChecked:h,initialValue:a,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function oo(e,n){n=n.checked,n!=null&&$(e,"checked",n,!1)}function ur(e,n){oo(e,n);var a=Te(n.value),h=n.type;if(a!=null)h==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?ao(e,n.type,a):n.hasOwnProperty("defaultValue")&&ao(e,n.type,Te(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function cr(e,n,a){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var h=n.type;if(!(h!=="submit"&&h!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,a||n===e.value||(e.value=n),e.defaultValue=n}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function ao(e,n,a){(n!=="number"||xi(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Si=Array.isArray;function Nn(e,n,a,h){if(e=e.options,n){n={};for(var m=0;m<a.length;m++)n["$"+a[m]]=!0;for(a=0;a<e.length;a++)m=n.hasOwnProperty("$"+e[a].value),e[a].selected!==m&&(e[a].selected=m),m&&h&&(e[a].defaultSelected=!0)}else{for(a=""+Te(a),n=null,m=0;m<e.length;m++){if(e[m].value===a){e[m].selected=!0,h&&(e[m].defaultSelected=!0);return}n!==null||e[m].disabled||(n=e[m])}n!==null&&(n.selected=!0)}}function Gr(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return G({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lo(e,n){var a=n.value;if(a==null){if(a=n.children,n=n.defaultValue,a!=null){if(n!=null)throw Error(r(92));if(Si(a)){if(1<a.length)throw Error(r(93));a=a[0]}n=a}n==null&&(n=""),a=n}e._wrapperState={initialValue:Te(a)}}function La(e,n){var a=Te(n.value),h=Te(n.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),n.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),h!=null&&(e.defaultValue=""+h)}function Ca(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Kr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jr(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Kr(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hr,Pa=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,a,h,m){MSApp.execUnsafeLocalFunction(function(){return e(n,a,h,m)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(hr=hr||document.createElement("div"),hr.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=hr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ki(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vu=["Webkit","ms","Moz","O"];Object.keys(bi).forEach(function(e){vu.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),bi[n]=bi[e]})});function uo(e,n,a){return n==null||typeof n=="boolean"||n===""?"":a||typeof n!="number"||n===0||bi.hasOwnProperty(e)&&bi[e]?(""+n).trim():n+"px"}function Qr(e,n){e=e.style;for(var a in n)if(n.hasOwnProperty(a)){var h=a.indexOf("--")===0,m=uo(a,n[a],h);a==="float"&&(a="cssFloat"),h?e.setProperty(a,m):e[a]=m}}var Ea=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function co(e,n){if(n){if(Ea[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function Vn(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=null;function fo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yr=null,qn=null,Gn=null;function Ta(e){if(e=oi(e)){if(typeof Yr!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Ls(n),Yr(e.stateNode,e.type,n))}}function Oa(e){qn?Gn?Gn.push(e):Gn=[e]:qn=e}function Ra(){if(qn){var e=qn,n=Gn;if(Gn=qn=null,Ta(e),n)for(e=0;e<n.length;e++)Ta(n[e])}}function Aa(e,n){return e(n)}function Na(){}var po=!1;function Xr(e,n,a){if(po)return e(n,a);po=!0;try{return Aa(e,n,a)}finally{po=!1,(qn!==null||Gn!==null)&&(Na(),Ra())}}function dr(e,n){var a=e.stateNode;if(a===null)return null;var h=Ls(a);if(h===null)return null;a=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var mo=!1;if(_)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){mo=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{mo=!1}function yu(e,n,a,h,m,v,S,T,N){var H=Array.prototype.slice.call(arguments,3);try{n.apply(a,H)}catch(Q){this.onError(Q)}}var Ct=!1,ue=null,pr=!1,es=null,Ia={onError:function(e){Ct=!0,ue=e}};function ja(e,n,a,h,m,v,S,T,N){Ct=!1,ue=null,yu.apply(Ia,arguments)}function _o(e,n,a,h,m,v,S,T,N){if(ja.apply(this,arguments),Ct){if(Ct){var H=ue;Ct=!1,ue=null}else throw Error(r(198));pr||(pr=!0,es=H)}}function In(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function Kn(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function go(e){if(In(e)!==e)throw Error(r(188))}function wu(e){var n=e.alternate;if(!n){if(n=In(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,h=n;;){var m=a.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){a=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===a)return go(m),e;if(v===h)return go(m),n;v=v.sibling}throw Error(r(188))}if(a.return!==h.return)a=m,h=v;else{for(var S=!1,T=m.child;T;){if(T===a){S=!0,a=m,h=v;break}if(T===h){S=!0,h=m,a=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===a){S=!0,a=v,h=m;break}if(T===h){S=!0,h=v,a=m;break}T=T.sibling}if(!S)throw Error(r(189))}}if(a.alternate!==h)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function Ma(e){return e=wu(e),e!==null?za(e):null}function za(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=za(e);if(n!==null)return n;e=e.sibling}return null}var Ba=i.unstable_scheduleCallback,vo=i.unstable_cancelCallback,xu=i.unstable_shouldYield,ts=i.unstable_requestPaint,et=i.unstable_now,Su=i.unstable_getCurrentPriorityLevel,yo=i.unstable_ImmediatePriority,Da=i.unstable_UserBlockingPriority,ns=i.unstable_NormalPriority,wo=i.unstable_LowPriority,Li=i.unstable_IdlePriority,mr=null,qt=null;function _r(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(mr,e,void 0,(e.current.flags&128)===128)}catch{}}var Ce=Math.clz32?Math.clz32:Ci,Qe=Math.log,is=Math.LN2;function Ci(e){return e>>>=0,e===0?32:31-(Qe(e)/is|0)|0}var yn=64,Pi=4194304;function Le(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ge(e,n){var a=e.pendingLanes;if(a===0)return 0;var h=0,m=e.suspendedLanes,v=e.pingedLanes,S=a&268435455;if(S!==0){var T=S&~m;T!==0?h=Le(T):(v&=S,v!==0&&(h=Le(v)))}else S=a&~m,S!==0?h=Le(S):v!==0&&(h=Le(v));if(h===0)return 0;if(n!==0&&n!==h&&(n&m)===0&&(m=h&-h,v=n&-n,m>=v||m===16&&(v&4194240)!==0))return n;if((h&4)!==0&&(h|=a&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=h;0<n;)a=31-Ce(n),m=1<<a,h|=e[a],n&=~m;return h}function xo(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rs(e,n){for(var a=e.suspendedLanes,h=e.pingedLanes,m=e.expirationTimes,v=e.pendingLanes;0<v;){var S=31-Ce(v),T=1<<S,N=m[S];N===-1?((T&a)===0||(T&h)!==0)&&(m[S]=xo(T,n)):N<=n&&(e.expiredLanes|=T),v&=~T}}function Pt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ua(){var e=yn;return yn<<=1,(yn&4194240)===0&&(yn=64),e}function Ei(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Gt(e,n,a){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Ce(n),e[n]=a}function st(e,n){var a=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<a;){var m=31-Ce(a),v=1<<m;n[m]=0,h[m]=-1,e[m]=-1,a&=~v}}function wn(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var h=31-Ce(a),m=1<<h;m&n|e[h]&n&&(e[h]|=n),a&=~m}}var Ie=0;function Ti(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ss,Jn,os,as,gr,vr=!1,Oi=[],Kt=null,xn=null,an=null,yr=new Map,Se=new Map,dt=[],Ze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function So(e,n){switch(e){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":yr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Se.delete(n.pointerId)}}function Qn(e,n,a,h,m,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:a,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},n!==null&&(n=oi(n),n!==null&&Jn(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),e)}function ko(e,n,a,h,m){switch(n){case"focusin":return Kt=Qn(Kt,e,n,a,h,m),!0;case"dragenter":return xn=Qn(xn,e,n,a,h,m),!0;case"mouseover":return an=Qn(an,e,n,a,h,m),!0;case"pointerover":var v=m.pointerId;return yr.set(v,Qn(yr.get(v)||null,e,n,a,h,m)),!0;case"gotpointercapture":return v=m.pointerId,Se.set(v,Qn(Se.get(v)||null,e,n,a,h,m)),!0}return!1}function ls(e){var n=si(e.target);if(n!==null){var a=In(n);if(a!==null){if(n=a.tag,n===13){if(n=Kn(a),n!==null){e.blockedOn=n,gr(e.priority,function(){os(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ln(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=hs(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var h=new a.constructor(a.type,a);ho=h,a.target.dispatchEvent(h),ho=null}else return n=oi(a),n!==null&&Jn(n),e.blockedOn=a,!1;n.shift()}return!0}function us(e,n,a){ln(e)&&a.delete(n)}function wr(){vr=!1,Kt!==null&&ln(Kt)&&(Kt=null),xn!==null&&ln(xn)&&(xn=null),an!==null&&ln(an)&&(an=null),yr.forEach(us),Se.forEach(us)}function tt(e,n){e.blockedOn===n&&(e.blockedOn=null,vr||(vr=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,wr)))}function Jt(e){function n(m){return tt(m,e)}if(0<Oi.length){tt(Oi[0],e);for(var a=1;a<Oi.length;a++){var h=Oi[a];h.blockedOn===e&&(h.blockedOn=null)}}for(Kt!==null&&tt(Kt,e),xn!==null&&tt(xn,e),an!==null&&tt(an,e),yr.forEach(n),Se.forEach(n),a=0;a<dt.length;a++)h=dt[a],h.blockedOn===e&&(h.blockedOn=null);for(;0<dt.length&&(a=dt[0],a.blockedOn===null);)ls(a),a.blockedOn===null&&dt.shift()}var Yn=X.ReactCurrentBatchConfig,xr=!0;function ku(e,n,a,h){var m=Ie,v=Yn.transition;Yn.transition=null;try{Ie=1,Sr(e,n,a,h)}finally{Ie=m,Yn.transition=v}}function $a(e,n,a,h){var m=Ie,v=Yn.transition;Yn.transition=null;try{Ie=4,Sr(e,n,a,h)}finally{Ie=m,Yn.transition=v}}function Sr(e,n,a,h){if(xr){var m=hs(e,n,a,h);if(m===null)t(e,n,h,cs,a),So(e,h);else if(ko(m,e,n,a,h))h.stopPropagation();else if(So(e,h),n&4&&-1<Ze.indexOf(e)){for(;m!==null;){var v=oi(m);if(v!==null&&ss(v),v=hs(e,n,a,h),v===null&&t(e,n,h,cs,a),v===m)break;m=v}m!==null&&h.stopPropagation()}else t(e,n,h,null,a)}}var cs=null;function hs(e,n,a,h){if(cs=null,e=fo(h),e=si(e),e!==null)if(n=In(e),n===null)e=null;else if(a=n.tag,a===13){if(e=Kn(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return cs=e,null}function Re(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Su()){case yo:return 1;case Da:return 4;case ns:case wo:return 16;case Li:return 536870912;default:return 16}default:return 16}}var jn=null,It=null,Mn=null;function bo(){if(Mn)return Mn;var e,n=It,a=n.length,h,m="value"in jn?jn.value:jn.textContent,v=m.length;for(e=0;e<a&&n[e]===m[e];e++);var S=a-e;for(h=1;h<=S&&n[a-h]===m[v-h];h++);return Mn=m.slice(e,1<h?1-h:void 0)}function ds(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ri(){return!0}function Fa(){return!1}function Et(e){function n(a,h,m,v,S){this._reactName=a,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ri:Fa,this.isPropagationStopped=Fa,this}return G(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),n}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=Et(Ai),Xn=G({},Ai,{view:0,detail:0}),bu=Et(Xn),Dt,Co,Ni,Qt=G({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ti,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ni&&(Ni&&e.type==="mousemove"?(Dt=e.screenX-Ni.screenX,Co=e.screenY-Ni.screenY):Co=Dt=0,Ni=e),Dt)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),Po=Et(Qt),Za=G({},Qt,{dataTransfer:0}),Eo=Et(Za),Lu=G({},Xn,{relatedTarget:0}),fs=Et(Lu),Ha=G({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),Cu=Et(Ha),Pu=G({},Ai,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),To=Et(Pu),Eu=G({},Ai,{data:0}),Oo=Et(Eu),Wa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ei[e])?!!n[e]:!1}function ti(){return Tu}var Ut=G({},Xn,{key:function(e){if(e.key){var n=Wa[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ps[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ti,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Va=Et(Ut),qa=G({},Qt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=Et(qa),Ro=G({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ti}),Ao=Et(Ro),Ou=G({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ru=Et(Ou),Ka=G({},Qt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Au=Et(Ka),Yt=[9,13,27,32],zn=_&&"CompositionEvent"in window,kr=null;_&&"documentMode"in document&&(kr=document.documentMode);var Sn=_&&"TextEvent"in window&&!kr,Ja=_&&(!zn||kr&&8<kr&&11>=kr),ni=" ",Qa=!1;function Ii(e,n){switch(e){case"keyup":return Yt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function No(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kn=!1;function Nu(e,n){switch(e){case"compositionend":return No(n);case"keypress":return n.which!==32?null:(Qa=!0,ni);case"textInput":return e=n.data,e===ni&&Qa?null:e;default:return null}}function Bn(e,n){if(kn)return e==="compositionend"||!zn&&Ii(e,n)?(e=bo(),Mn=It=jn=null,kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ja&&n.locale!=="ko"?null:n.data;default:return null}}var ms={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ya(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ms[e.type]:n==="textarea"}function _s(e,n,a,h){Oa(h),n=c(n,"onChange"),0<n.length&&(a=new Lo("onChange","change",null,a,h),e.push({event:a,listeners:n}))}var br=null,jt=null;function Iu(e){Fo(e,0)}function bn(e){var n=ai(e);if(wi(n))return e}function ju(e,n){if(e==="change")return n}var un=!1;if(_){var ji;if(_){var gs="oninput"in document;if(!gs){var vs=document.createElement("div");vs.setAttribute("oninput","return;"),gs=typeof vs.oninput=="function"}ji=gs}else ji=!1;un=ji&&(!document.documentMode||9<document.documentMode)}function Lr(){br&&(br.detachEvent("onpropertychange",ys),jt=br=null)}function ys(e){if(e.propertyName==="value"&&bn(jt)){var n=[];_s(n,jt,e,fo(e)),Xr(Iu,n)}}function ws(e,n,a){e==="focusin"?(Lr(),br=n,jt=a,br.attachEvent("onpropertychange",ys)):e==="focusout"&&Lr()}function Mi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bn(jt)}function xs(e,n){if(e==="click")return bn(n)}function Io(e,n){if(e==="input"||e==="change")return bn(n)}function Xa(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Xt=typeof Object.is=="function"?Object.is:Xa;function Dn(e,n){if(Xt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),h=Object.keys(n);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var m=a[h];if(!g.call(n,m)||!Xt(e[m],n[m]))return!1}return!0}function el(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jo(e,n){var a=el(e);e=0;for(var h;a;){if(a.nodeType===3){if(h=e+a.textContent.length,e<=n&&h>=n)return{node:a,offset:n-e};e=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=el(a)}}function tl(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?tl(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Mo(){for(var e=window,n=xi();n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=xi(e.document)}return n}function zo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function cn(e){var n=Mo(),a=e.focusedElem,h=e.selectionRange;if(n!==a&&a&&a.ownerDocument&&tl(a.ownerDocument.documentElement,a)){if(h!==null&&zo(a)){if(n=h.start,e=h.end,e===void 0&&(e=n),"selectionStart"in a)a.selectionStart=n,a.selectionEnd=Math.min(e,a.value.length);else if(e=(n=a.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var m=a.textContent.length,v=Math.min(h.start,m);h=h.end===void 0?v:Math.min(h.end,m),!e.extend&&v>h&&(m=h,h=v,v=m),m=jo(a,v);var S=jo(a,h);m&&S&&(e.rangeCount!==1||e.anchorNode!==m.node||e.anchorOffset!==m.offset||e.focusNode!==S.node||e.focusOffset!==S.offset)&&(n=n.createRange(),n.setStart(m.node,m.offset),e.removeAllRanges(),v>h?(e.addRange(n),e.extend(S.node,S.offset)):(n.setEnd(S.node,S.offset),e.addRange(n)))}}for(n=[],e=a;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<n.length;a++)e=n[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ss=_&&"documentMode"in document&&11>=document.documentMode,zi=null,Bi=null,Cr=null,ks=!1;function nl(e,n,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ks||zi==null||zi!==xi(h)||(h=zi,"selectionStart"in h&&zo(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Cr&&Dn(Cr,h)||(Cr=h,h=c(Bi,"onSelect"),0<h.length&&(n=new Lo("onSelect","select",null,n,a),e.push({event:n,listeners:h}),n.target=zi)))}function Un(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Di={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionend:Un("Transition","TransitionEnd")},$n={},Bo={};_&&(Bo=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function Pr(e){if($n[e])return $n[e];if(!Di[e])return e;var n=Di[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Bo)return $n[e]=n[a];return e}var il=Pr("animationend"),hn=Pr("animationiteration"),Do=Pr("animationstart"),Uo=Pr("transitionend"),Ui=new Map,rl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function en(e,n){Ui.set(e,n),l(n,[e])}for(var ii=0;ii<rl.length;ii++){var bs=rl[ii],sl=bs.toLowerCase(),Mu=bs[0].toUpperCase()+bs.slice(1);en(sl,"on"+Mu)}en(il,"onAnimationEnd"),en(hn,"onAnimationIteration"),en(Do,"onAnimationStart"),en("dblclick","onDoubleClick"),en("focusin","onFocus"),en("focusout","onBlur"),en(Uo,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ol=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function $o(e,n,a){var h=e.type||"unknown-event";e.currentTarget=a,_o(h,n,void 0,e),e.currentTarget=null}function Fo(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var h=e[a],m=h.event;h=h.listeners;e:{var v=void 0;if(n)for(var S=h.length-1;0<=S;S--){var T=h[S],N=T.instance,H=T.currentTarget;if(T=T.listener,N!==v&&m.isPropagationStopped())break e;$o(m,T,H),v=N}else for(S=0;S<h.length;S++){if(T=h[S],N=T.instance,H=T.currentTarget,T=T.listener,N!==v&&m.isPropagationStopped())break e;$o(m,T,H),v=N}}}if(pr)throw e=es,pr=!1,es=null,e}function He(e,n){var a=n[Wi];a===void 0&&(a=n[Wi]=new Set);var h=e+"__bubble";a.has(h)||(al(n,e,2,!1),a.add(h))}function Zo(e,n,a){var h=0;n&&(h|=4),al(a,e,h,n)}var Er="_reactListening"+Math.random().toString(36).slice(2);function Fi(e){if(!e[Er]){e[Er]=!0,u.forEach(function(a){a!=="selectionchange"&&(ol.has(a)||Zo(a,!1,e),Zo(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Er]||(n[Er]=!0,Zo("selectionchange",!1,n))}}function al(e,n,a,h){switch(Re(n)){case 1:var m=ku;break;case 4:m=$a;break;default:m=Sr}a=m.bind(null,n,a,e),m=void 0,!mo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),h?m!==void 0?e.addEventListener(n,a,{capture:!0,passive:m}):e.addEventListener(n,a,!0):m!==void 0?e.addEventListener(n,a,{passive:m}):e.addEventListener(n,a,!1)}function t(e,n,a,h,m){var v=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var T=h.stateNode.containerInfo;if(T===m||T.nodeType===8&&T.parentNode===m)break;if(S===4)for(S=h.return;S!==null;){var N=S.tag;if((N===3||N===4)&&(N=S.stateNode.containerInfo,N===m||N.nodeType===8&&N.parentNode===m))return;S=S.return}for(;T!==null;){if(S=si(T),S===null)return;if(N=S.tag,N===5||N===6){h=v=S;continue e}T=T.parentNode}}h=h.return}Xr(function(){var H=v,Q=fo(a),Y=[];e:{var J=Ui.get(e);if(J!==void 0){var ie=Lo,oe=e;switch(e){case"keypress":if(ds(a)===0)break e;case"keydown":case"keyup":ie=Va;break;case"focusin":oe="focus",ie=fs;break;case"focusout":oe="blur",ie=fs;break;case"beforeblur":case"afterblur":ie=fs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Eo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Ao;break;case il:case hn:case Do:ie=Cu;break;case Uo:ie=Ru;break;case"scroll":ie=bu;break;case"wheel":ie=Au;break;case"copy":case"cut":case"paste":ie=To;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ga}var ae=(n&4)!==0,lt=!ae&&e==="scroll",D=ae?J!==null?J+"Capture":null:J;ae=[];for(var j=H,U;j!==null;){U=j;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,D!==null&&(ee=dr(j,D),ee!=null&&ae.push(s(j,ee,U)))),lt)break;j=j.return}0<ae.length&&(J=new ie(J,oe,null,a,Q),Y.push({event:J,listeners:ae}))}}if((n&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",ie=e==="mouseout"||e==="pointerout",J&&a!==ho&&(oe=a.relatedTarget||a.fromElement)&&(si(oe)||oe[$e]))break e;if((ie||J)&&(J=Q.window===Q?Q:(J=Q.ownerDocument)?J.defaultView||J.parentWindow:window,ie?(oe=a.relatedTarget||a.toElement,ie=H,oe=oe?si(oe):null,oe!==null&&(lt=In(oe),oe!==lt||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ie=null,oe=H),ie!==oe)){if(ae=Po,ee="onMouseLeave",D="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(ae=Ga,ee="onPointerLeave",D="onPointerEnter",j="pointer"),lt=ie==null?J:ai(ie),U=oe==null?J:ai(oe),J=new ae(ee,j+"leave",ie,a,Q),J.target=lt,J.relatedTarget=U,ee=null,si(Q)===H&&(ae=new ae(D,j+"enter",oe,a,Q),ae.target=U,ae.relatedTarget=lt,ee=ae),lt=ee,ie&&oe)t:{for(ae=ie,D=oe,j=0,U=ae;U;U=p(U))j++;for(U=0,ee=D;ee;ee=p(ee))U++;for(;0<j-U;)ae=p(ae),j--;for(;0<U-j;)D=p(D),U--;for(;j--;){if(ae===D||D!==null&&ae===D.alternate)break t;ae=p(ae),D=p(D)}ae=null}else ae=null;ie!==null&&y(Y,J,ie,ae,!1),oe!==null&&lt!==null&&y(Y,lt,oe,ae,!0)}}e:{if(J=H?ai(H):window,ie=J.nodeName&&J.nodeName.toLowerCase(),ie==="select"||ie==="input"&&J.type==="file")var ce=ju;else if(Ya(J))if(un)ce=Io;else{ce=Mi;var ve=ws}else(ie=J.nodeName)&&ie.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ce=xs);if(ce&&(ce=ce(e,H))){_s(Y,ce,a,Q);break e}ve&&ve(e,J,H),e==="focusout"&&(ve=J._wrapperState)&&ve.controlled&&J.type==="number"&&ao(J,"number",J.value)}switch(ve=H?ai(H):window,e){case"focusin":(Ya(ve)||ve.contentEditable==="true")&&(zi=ve,Bi=H,Cr=null);break;case"focusout":Cr=Bi=zi=null;break;case"mousedown":ks=!0;break;case"contextmenu":case"mouseup":case"dragend":ks=!1,nl(Y,a,Q);break;case"selectionchange":if(Ss)break;case"keydown":case"keyup":nl(Y,a,Q)}var ye;if(zn)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else kn?Ii(e,a)&&(ke="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Ja&&a.locale!=="ko"&&(kn||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&kn&&(ye=bo()):(jn=Q,It="value"in jn?jn.value:jn.textContent,kn=!0)),ve=c(H,ke),0<ve.length&&(ke=new Oo(ke,e,null,a,Q),Y.push({event:ke,listeners:ve}),ye?ke.data=ye:(ye=No(a),ye!==null&&(ke.data=ye)))),(ye=Sn?Nu(e,a):Bn(e,a))&&(H=c(H,"onBeforeInput"),0<H.length&&(Q=new Oo("onBeforeInput","beforeinput",null,a,Q),Y.push({event:Q,listeners:H}),Q.data=ye))}Fo(Y,n)})}function s(e,n,a){return{instance:e,listener:n,currentTarget:a}}function c(e,n){for(var a=n+"Capture",h=[];e!==null;){var m=e,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=dr(e,a),v!=null&&h.unshift(s(e,v,m)),v=dr(e,n),v!=null&&h.push(s(e,v,m))),e=e.return}return h}function p(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function y(e,n,a,h,m){for(var v=n._reactName,S=[];a!==null&&a!==h;){var T=a,N=T.alternate,H=T.stateNode;if(N!==null&&N===h)break;T.tag===5&&H!==null&&(T=H,m?(N=dr(a,v),N!=null&&S.unshift(s(a,N,T))):m||(N=dr(a,v),N!=null&&S.push(s(a,N,T)))),a=a.return}S.length!==0&&e.push({event:n,listeners:S})}var b=/\r\n?/g,O=/\u0000|\uFFFD/g;function B(e){return(typeof e=="string"?e:""+e).replace(b,`
`).replace(O,"")}function F(e,n,a){if(n=B(n),B(e)!==n&&a)throw Error(r(425))}function K(){}var te=null,_e=null;function Ee(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ft=typeof setTimeout=="function"?setTimeout:void 0,ut=typeof clearTimeout=="function"?clearTimeout:void 0,Mt=typeof Promise=="function"?Promise:void 0,Tt=typeof queueMicrotask=="function"?queueMicrotask:typeof Mt<"u"?function(e){return Mt.resolve(null).then(e).catch(Zi)}:ft;function Zi(e){setTimeout(function(){throw e})}function Ho(e,n){var a=n,h=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(h===0){e.removeChild(m),Jt(n);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=m}while(a);Jt(n)}function Fn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function ll(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}var ri=Math.random().toString(36).slice(2),dn="__reactFiber$"+ri,Hi="__reactProps$"+ri,$e="__reactContainer$"+ri,Wi="__reactEvents$"+ri,zu="__reactListeners$"+ri,Bu="__reactHandles$"+ri;function si(e){var n=e[dn];if(n)return n;for(var a=e.parentNode;a;){if(n=a[$e]||a[dn]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=ll(e);e!==null;){if(a=e[dn])return a;e=ll(e)}return n}e=a,a=e.parentNode}return null}function oi(e){return e=e[dn]||e[$e],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Ls(e){return e[Hi]||null}var Du=[],Cs=-1;function Vi(e){return{current:e}}function Ye(e){0>Cs||(e.current=Du[Cs],Du[Cs]=null,Cs--)}function Ke(e,n){Cs++,Du[Cs]=e.current,e.current=n}var qi={},Ot=Vi(qi),$t=Vi(!1),Tr=qi;function Ps(e,n){var a=e.type.contextTypes;if(!a)return qi;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===n)return h.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in a)m[v]=n[v];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=m),m}function Ft(e){return e=e.childContextTypes,e!=null}function ul(){Ye($t),Ye(Ot)}function Eh(e,n,a){if(Ot.current!==qi)throw Error(r(168));Ke(Ot,n),Ke($t,a)}function Th(e,n,a){var h=e.stateNode;if(n=n.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var m in h)if(!(m in n))throw Error(r(108,Ae(e)||"Unknown",m));return G({},a,h)}function cl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qi,Tr=Ot.current,Ke(Ot,e),Ke($t,$t.current),!0}function Oh(e,n,a){var h=e.stateNode;if(!h)throw Error(r(169));a?(e=Th(e,n,Tr),h.__reactInternalMemoizedMergedChildContext=e,Ye($t),Ye(Ot),Ke(Ot,e)):Ye($t),Ke($t,a)}var li=null,hl=!1,Uu=!1;function Rh(e){li===null?li=[e]:li.push(e)}function Up(e){hl=!0,Rh(e)}function Gi(){if(!Uu&&li!==null){Uu=!0;var e=0,n=Ie;try{var a=li;for(Ie=1;e<a.length;e++){var h=a[e];do h=h(!0);while(h!==null)}li=null,hl=!1}catch(m){throw li!==null&&(li=li.slice(e+1)),Ba(yo,Gi),m}finally{Ie=n,Uu=!1}}return null}var Es=[],Ts=0,dl=null,fl=0,fn=[],pn=0,Or=null,ui=1,ci="";function Rr(e,n){Es[Ts++]=fl,Es[Ts++]=dl,dl=e,fl=n}function Ah(e,n,a){fn[pn++]=ui,fn[pn++]=ci,fn[pn++]=Or,Or=e;var h=ui;e=ci;var m=32-Ce(h)-1;h&=~(1<<m),a+=1;var v=32-Ce(n)+m;if(30<v){var S=m-m%5;v=(h&(1<<S)-1).toString(32),h>>=S,m-=S,ui=1<<32-Ce(n)+m|a<<m|h,ci=v+e}else ui=1<<v|a<<m|h,ci=e}function $u(e){e.return!==null&&(Rr(e,1),Ah(e,1,0))}function Fu(e){for(;e===dl;)dl=Es[--Ts],Es[Ts]=null,fl=Es[--Ts],Es[Ts]=null;for(;e===Or;)Or=fn[--pn],fn[pn]=null,ci=fn[--pn],fn[pn]=null,ui=fn[--pn],fn[pn]=null}var tn=null,nn=null,Xe=!1,Ln=null;function Nh(e,n){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=n,a.return=e,n=e.deletions,n===null?(e.deletions=[a],e.flags|=16):n.push(a)}function Ih(e,n){switch(e.tag){case 5:var a=e.type;return n=n.nodeType!==1||a.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,tn=e,nn=Fn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,tn=e,nn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(a=Or!==null?{id:ui,overflow:ci}:null,e.memoizedState={dehydrated:n,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=n,a.return=e,e.child=a,tn=e,nn=null,!0):!1;default:return!1}}function Zu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hu(e){if(Xe){var n=nn;if(n){var a=n;if(!Ih(e,n)){if(Zu(e))throw Error(r(418));n=Fn(a.nextSibling);var h=tn;n&&Ih(e,n)?Nh(h,a):(e.flags=e.flags&-4097|2,Xe=!1,tn=e)}}else{if(Zu(e))throw Error(r(418));e.flags=e.flags&-4097|2,Xe=!1,tn=e}}}function jh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tn=e}function pl(e){if(e!==tn)return!1;if(!Xe)return jh(e),Xe=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Ee(e.type,e.memoizedProps)),n&&(n=nn)){if(Zu(e))throw Mh(),Error(r(418));for(;n;)Nh(e,n),n=Fn(n.nextSibling)}if(jh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(n===0){nn=Fn(e.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++}e=e.nextSibling}nn=null}}else nn=tn?Fn(e.stateNode.nextSibling):null;return!0}function Mh(){for(var e=nn;e;)e=Fn(e.nextSibling)}function Os(){nn=tn=null,Xe=!1}function Wu(e){Ln===null?Ln=[e]:Ln.push(e)}var $p=X.ReactCurrentBatchConfig;function Wo(e,n,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var h=a.stateNode}if(!h)throw Error(r(147,e));var m=h,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(S){var T=m.refs;S===null?delete T[v]:T[v]=S},n._stringRef=v,n)}if(typeof e!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,e))}return e}function ml(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function zh(e){var n=e._init;return n(e._payload)}function Bh(e){function n(D,j){if(e){var U=D.deletions;U===null?(D.deletions=[j],D.flags|=16):U.push(j)}}function a(D,j){if(!e)return null;for(;j!==null;)n(D,j),j=j.sibling;return null}function h(D,j){for(D=new Map;j!==null;)j.key!==null?D.set(j.key,j):D.set(j.index,j),j=j.sibling;return D}function m(D,j){return D=nr(D,j),D.index=0,D.sibling=null,D}function v(D,j,U){return D.index=U,e?(U=D.alternate,U!==null?(U=U.index,U<j?(D.flags|=2,j):U):(D.flags|=2,j)):(D.flags|=1048576,j)}function S(D){return e&&D.alternate===null&&(D.flags|=2),D}function T(D,j,U,ee){return j===null||j.tag!==6?(j=Mc(U,D.mode,ee),j.return=D,j):(j=m(j,U),j.return=D,j)}function N(D,j,U,ee){var ce=U.type;return ce===be?Q(D,j,U.props.children,ee,U.key):j!==null&&(j.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Pe&&zh(ce)===j.type)?(ee=m(j,U.props),ee.ref=Wo(D,j,U),ee.return=D,ee):(ee=Dl(U.type,U.key,U.props,null,D.mode,ee),ee.ref=Wo(D,j,U),ee.return=D,ee)}function H(D,j,U,ee){return j===null||j.tag!==4||j.stateNode.containerInfo!==U.containerInfo||j.stateNode.implementation!==U.implementation?(j=zc(U,D.mode,ee),j.return=D,j):(j=m(j,U.children||[]),j.return=D,j)}function Q(D,j,U,ee,ce){return j===null||j.tag!==7?(j=Dr(U,D.mode,ee,ce),j.return=D,j):(j=m(j,U),j.return=D,j)}function Y(D,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Mc(""+j,D.mode,U),j.return=D,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case fe:return U=Dl(j.type,j.key,j.props,null,D.mode,U),U.ref=Wo(D,null,j),U.return=D,U;case pe:return j=zc(j,D.mode,U),j.return=D,j;case Pe:var ee=j._init;return Y(D,ee(j._payload),U)}if(Si(j)||ge(j))return j=Dr(j,D.mode,U,null),j.return=D,j;ml(D,j)}return null}function J(D,j,U,ee){var ce=j!==null?j.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ce!==null?null:T(D,j,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case fe:return U.key===ce?N(D,j,U,ee):null;case pe:return U.key===ce?H(D,j,U,ee):null;case Pe:return ce=U._init,J(D,j,ce(U._payload),ee)}if(Si(U)||ge(U))return ce!==null?null:Q(D,j,U,ee,null);ml(D,U)}return null}function ie(D,j,U,ee,ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return D=D.get(U)||null,T(j,D,""+ee,ce);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case fe:return D=D.get(ee.key===null?U:ee.key)||null,N(j,D,ee,ce);case pe:return D=D.get(ee.key===null?U:ee.key)||null,H(j,D,ee,ce);case Pe:var ve=ee._init;return ie(D,j,U,ve(ee._payload),ce)}if(Si(ee)||ge(ee))return D=D.get(U)||null,Q(j,D,ee,ce,null);ml(j,ee)}return null}function oe(D,j,U,ee){for(var ce=null,ve=null,ye=j,ke=j=0,yt=null;ye!==null&&ke<U.length;ke++){ye.index>ke?(yt=ye,ye=null):yt=ye.sibling;var ze=J(D,ye,U[ke],ee);if(ze===null){ye===null&&(ye=yt);break}e&&ye&&ze.alternate===null&&n(D,ye),j=v(ze,j,ke),ve===null?ce=ze:ve.sibling=ze,ve=ze,ye=yt}if(ke===U.length)return a(D,ye),Xe&&Rr(D,ke),ce;if(ye===null){for(;ke<U.length;ke++)ye=Y(D,U[ke],ee),ye!==null&&(j=v(ye,j,ke),ve===null?ce=ye:ve.sibling=ye,ve=ye);return Xe&&Rr(D,ke),ce}for(ye=h(D,ye);ke<U.length;ke++)yt=ie(ye,D,ke,U[ke],ee),yt!==null&&(e&&yt.alternate!==null&&ye.delete(yt.key===null?ke:yt.key),j=v(yt,j,ke),ve===null?ce=yt:ve.sibling=yt,ve=yt);return e&&ye.forEach(function(ir){return n(D,ir)}),Xe&&Rr(D,ke),ce}function ae(D,j,U,ee){var ce=ge(U);if(typeof ce!="function")throw Error(r(150));if(U=ce.call(U),U==null)throw Error(r(151));for(var ve=ce=null,ye=j,ke=j=0,yt=null,ze=U.next();ye!==null&&!ze.done;ke++,ze=U.next()){ye.index>ke?(yt=ye,ye=null):yt=ye.sibling;var ir=J(D,ye,ze.value,ee);if(ir===null){ye===null&&(ye=yt);break}e&&ye&&ir.alternate===null&&n(D,ye),j=v(ir,j,ke),ve===null?ce=ir:ve.sibling=ir,ve=ir,ye=yt}if(ze.done)return a(D,ye),Xe&&Rr(D,ke),ce;if(ye===null){for(;!ze.done;ke++,ze=U.next())ze=Y(D,ze.value,ee),ze!==null&&(j=v(ze,j,ke),ve===null?ce=ze:ve.sibling=ze,ve=ze);return Xe&&Rr(D,ke),ce}for(ye=h(D,ye);!ze.done;ke++,ze=U.next())ze=ie(ye,D,ke,ze.value,ee),ze!==null&&(e&&ze.alternate!==null&&ye.delete(ze.key===null?ke:ze.key),j=v(ze,j,ke),ve===null?ce=ze:ve.sibling=ze,ve=ze);return e&&ye.forEach(function(wm){return n(D,wm)}),Xe&&Rr(D,ke),ce}function lt(D,j,U,ee){if(typeof U=="object"&&U!==null&&U.type===be&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case fe:e:{for(var ce=U.key,ve=j;ve!==null;){if(ve.key===ce){if(ce=U.type,ce===be){if(ve.tag===7){a(D,ve.sibling),j=m(ve,U.props.children),j.return=D,D=j;break e}}else if(ve.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Pe&&zh(ce)===ve.type){a(D,ve.sibling),j=m(ve,U.props),j.ref=Wo(D,ve,U),j.return=D,D=j;break e}a(D,ve);break}else n(D,ve);ve=ve.sibling}U.type===be?(j=Dr(U.props.children,D.mode,ee,U.key),j.return=D,D=j):(ee=Dl(U.type,U.key,U.props,null,D.mode,ee),ee.ref=Wo(D,j,U),ee.return=D,D=ee)}return S(D);case pe:e:{for(ve=U.key;j!==null;){if(j.key===ve)if(j.tag===4&&j.stateNode.containerInfo===U.containerInfo&&j.stateNode.implementation===U.implementation){a(D,j.sibling),j=m(j,U.children||[]),j.return=D,D=j;break e}else{a(D,j);break}else n(D,j);j=j.sibling}j=zc(U,D.mode,ee),j.return=D,D=j}return S(D);case Pe:return ve=U._init,lt(D,j,ve(U._payload),ee)}if(Si(U))return oe(D,j,U,ee);if(ge(U))return ae(D,j,U,ee);ml(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,j!==null&&j.tag===6?(a(D,j.sibling),j=m(j,U),j.return=D,D=j):(a(D,j),j=Mc(U,D.mode,ee),j.return=D,D=j),S(D)):a(D,j)}return lt}var Rs=Bh(!0),Dh=Bh(!1),_l=Vi(null),gl=null,As=null,Vu=null;function qu(){Vu=As=gl=null}function Gu(e){var n=_l.current;Ye(_l),e._currentValue=n}function Ku(e,n,a){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===a)break;e=e.return}}function Ns(e,n){gl=e,Vu=As=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Zt=!0),e.firstContext=null)}function mn(e){var n=e._currentValue;if(Vu!==e)if(e={context:e,memoizedValue:n,next:null},As===null){if(gl===null)throw Error(r(308));As=e,gl.dependencies={lanes:0,firstContext:e}}else As=As.next=e;return n}var Ar=null;function Ju(e){Ar===null?Ar=[e]:Ar.push(e)}function Uh(e,n,a,h){var m=n.interleaved;return m===null?(a.next=a,Ju(n)):(a.next=m.next,m.next=a),n.interleaved=a,hi(e,h)}function hi(e,n){e.lanes|=n;var a=e.alternate;for(a!==null&&(a.lanes|=n),a=e,e=e.return;e!==null;)e.childLanes|=n,a=e.alternate,a!==null&&(a.childLanes|=n),a=e,e=e.return;return a.tag===3?a.stateNode:null}var Ki=!1;function Qu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $h(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function di(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ji(e,n,a){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(je&2)!==0){var m=h.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),h.pending=n,hi(e,a)}return m=h.interleaved,m===null?(n.next=n,Ju(h)):(n.next=m.next,m.next=n),h.interleaved=n,hi(e,a)}function vl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194240)!==0)){var h=n.lanes;h&=e.pendingLanes,a|=h,n.lanes=a,wn(e,a)}}function Fh(e,n){var a=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var m=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?m=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?m=v=n:v=v.next=n}else m=v=n;a={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,effects:h.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}function yl(e,n,a,h){var m=e.updateQueue;Ki=!1;var v=m.firstBaseUpdate,S=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var N=T,H=N.next;N.next=null,S===null?v=H:S.next=H,S=N;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==S&&(T===null?Q.firstBaseUpdate=H:T.next=H,Q.lastBaseUpdate=N))}if(v!==null){var Y=m.baseState;S=0,Q=H=N=null,T=v;do{var J=T.lane,ie=T.eventTime;if((h&J)===J){Q!==null&&(Q=Q.next={eventTime:ie,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var oe=e,ae=T;switch(J=n,ie=a,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){Y=oe.call(ie,Y,J);break e}Y=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,J=typeof oe=="function"?oe.call(ie,Y,J):oe,J==null)break e;Y=G({},Y,J);break e;case 2:Ki=!0}}T.callback!==null&&T.lane!==0&&(e.flags|=64,J=m.effects,J===null?m.effects=[T]:J.push(T))}else ie={eventTime:ie,lane:J,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(H=Q=ie,N=Y):Q=Q.next=ie,S|=J;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;J=T,T=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);if(Q===null&&(N=Y),m.baseState=N,m.firstBaseUpdate=H,m.lastBaseUpdate=Q,n=m.shared.interleaved,n!==null){m=n;do S|=m.lane,m=m.next;while(m!==n)}else v===null&&(m.shared.lanes=0);jr|=S,e.lanes=S,e.memoizedState=Y}}function Zh(e,n,a){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var h=e[n],m=h.callback;if(m!==null){if(h.callback=null,h=a,typeof m!="function")throw Error(r(191,m));m.call(h)}}}var Vo={},Zn=Vi(Vo),qo=Vi(Vo),Go=Vi(Vo);function Nr(e){if(e===Vo)throw Error(r(174));return e}function Yu(e,n){switch(Ke(Go,n),Ke(qo,e),Ke(Zn,Vo),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Jr(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Jr(n,e)}Ye(Zn),Ke(Zn,n)}function Is(){Ye(Zn),Ye(qo),Ye(Go)}function Hh(e){Nr(Go.current);var n=Nr(Zn.current),a=Jr(n,e.type);n!==a&&(Ke(qo,e),Ke(Zn,a))}function Xu(e){qo.current===e&&(Ye(Zn),Ye(qo))}var nt=Vi(0);function wl(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ec=[];function tc(){for(var e=0;e<ec.length;e++)ec[e]._workInProgressVersionPrimary=null;ec.length=0}var xl=X.ReactCurrentDispatcher,nc=X.ReactCurrentBatchConfig,Ir=0,it=null,pt=null,gt=null,Sl=!1,Ko=!1,Jo=0,Fp=0;function Rt(){throw Error(r(321))}function ic(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Xt(e[a],n[a]))return!1;return!0}function rc(e,n,a,h,m,v){if(Ir=v,it=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,xl.current=e===null||e.memoizedState===null?Vp:qp,e=a(h,m),Ko){v=0;do{if(Ko=!1,Jo=0,25<=v)throw Error(r(301));v+=1,gt=pt=null,n.updateQueue=null,xl.current=Gp,e=a(h,m)}while(Ko)}if(xl.current=Ll,n=pt!==null&&pt.next!==null,Ir=0,gt=pt=it=null,Sl=!1,n)throw Error(r(300));return e}function sc(){var e=Jo!==0;return Jo=0,e}function Hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?it.memoizedState=gt=e:gt=gt.next=e,gt}function _n(){if(pt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var n=gt===null?it.memoizedState:gt.next;if(n!==null)gt=n,pt=e;else{if(e===null)throw Error(r(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},gt===null?it.memoizedState=gt=e:gt=gt.next=e}return gt}function Qo(e,n){return typeof n=="function"?n(e):n}function oc(e){var n=_n(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var h=pt,m=h.baseQueue,v=a.pending;if(v!==null){if(m!==null){var S=m.next;m.next=v.next,v.next=S}h.baseQueue=m=v,a.pending=null}if(m!==null){v=m.next,h=h.baseState;var T=S=null,N=null,H=v;do{var Q=H.lane;if((Ir&Q)===Q)N!==null&&(N=N.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),h=H.hasEagerState?H.eagerState:e(h,H.action);else{var Y={lane:Q,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};N===null?(T=N=Y,S=h):N=N.next=Y,it.lanes|=Q,jr|=Q}H=H.next}while(H!==null&&H!==v);N===null?S=h:N.next=T,Xt(h,n.memoizedState)||(Zt=!0),n.memoizedState=h,n.baseState=S,n.baseQueue=N,a.lastRenderedState=h}if(e=a.interleaved,e!==null){m=e;do v=m.lane,it.lanes|=v,jr|=v,m=m.next;while(m!==e)}else m===null&&(a.lanes=0);return[n.memoizedState,a.dispatch]}function ac(e){var n=_n(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var h=a.dispatch,m=a.pending,v=n.memoizedState;if(m!==null){a.pending=null;var S=m=m.next;do v=e(v,S.action),S=S.next;while(S!==m);Xt(v,n.memoizedState)||(Zt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),a.lastRenderedState=v}return[v,h]}function Wh(){}function Vh(e,n){var a=it,h=_n(),m=n(),v=!Xt(h.memoizedState,m);if(v&&(h.memoizedState=m,Zt=!0),h=h.queue,lc(Kh.bind(null,a,h,e),[e]),h.getSnapshot!==n||v||gt!==null&&gt.memoizedState.tag&1){if(a.flags|=2048,Yo(9,Gh.bind(null,a,h,m,n),void 0,null),vt===null)throw Error(r(349));(Ir&30)!==0||qh(a,n,m)}return m}function qh(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=it.updateQueue,n===null?(n={lastEffect:null,stores:null},it.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Gh(e,n,a,h){n.value=a,n.getSnapshot=h,Jh(n)&&Qh(e)}function Kh(e,n,a){return a(function(){Jh(n)&&Qh(e)})}function Jh(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Xt(e,a)}catch{return!0}}function Qh(e){var n=hi(e,1);n!==null&&Tn(n,e,1,-1)}function Yh(e){var n=Hn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:e},n.queue=e,e=e.dispatch=Wp.bind(null,it,e),[n.memoizedState,e]}function Yo(e,n,a,h){return e={tag:e,create:n,destroy:a,deps:h,next:null},n=it.updateQueue,n===null?(n={lastEffect:null,stores:null},it.updateQueue=n,n.lastEffect=e.next=e):(a=n.lastEffect,a===null?n.lastEffect=e.next=e:(h=a.next,a.next=e,e.next=h,n.lastEffect=e)),e}function Xh(){return _n().memoizedState}function kl(e,n,a,h){var m=Hn();it.flags|=e,m.memoizedState=Yo(1|n,a,void 0,h===void 0?null:h)}function bl(e,n,a,h){var m=_n();h=h===void 0?null:h;var v=void 0;if(pt!==null){var S=pt.memoizedState;if(v=S.destroy,h!==null&&ic(h,S.deps)){m.memoizedState=Yo(n,a,v,h);return}}it.flags|=e,m.memoizedState=Yo(1|n,a,v,h)}function ed(e,n){return kl(8390656,8,e,n)}function lc(e,n){return bl(2048,8,e,n)}function td(e,n){return bl(4,2,e,n)}function nd(e,n){return bl(4,4,e,n)}function id(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function rd(e,n,a){return a=a!=null?a.concat([e]):null,bl(4,4,id.bind(null,n,e),a)}function uc(){}function sd(e,n){var a=_n();n=n===void 0?null:n;var h=a.memoizedState;return h!==null&&n!==null&&ic(n,h[1])?h[0]:(a.memoizedState=[e,n],e)}function od(e,n){var a=_n();n=n===void 0?null:n;var h=a.memoizedState;return h!==null&&n!==null&&ic(n,h[1])?h[0]:(e=e(),a.memoizedState=[e,n],e)}function ad(e,n,a){return(Ir&21)===0?(e.baseState&&(e.baseState=!1,Zt=!0),e.memoizedState=a):(Xt(a,n)||(a=Ua(),it.lanes|=a,jr|=a,e.baseState=!0),n)}function Zp(e,n){var a=Ie;Ie=a!==0&&4>a?a:4,e(!0);var h=nc.transition;nc.transition={};try{e(!1),n()}finally{Ie=a,nc.transition=h}}function ld(){return _n().memoizedState}function Hp(e,n,a){var h=er(e);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},ud(e))cd(n,a);else if(a=Uh(e,n,a,h),a!==null){var m=Bt();Tn(a,e,h,m),hd(a,n,h)}}function Wp(e,n,a){var h=er(e),m={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(ud(e))cd(n,m);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var S=n.lastRenderedState,T=v(S,a);if(m.hasEagerState=!0,m.eagerState=T,Xt(T,S)){var N=n.interleaved;N===null?(m.next=m,Ju(n)):(m.next=N.next,N.next=m),n.interleaved=m;return}}catch{}finally{}a=Uh(e,n,m,h),a!==null&&(m=Bt(),Tn(a,e,h,m),hd(a,n,h))}}function ud(e){var n=e.alternate;return e===it||n!==null&&n===it}function cd(e,n){Ko=Sl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function hd(e,n,a){if((a&4194240)!==0){var h=n.lanes;h&=e.pendingLanes,a|=h,n.lanes=a,wn(e,a)}}var Ll={readContext:mn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},Vp={readContext:mn,useCallback:function(e,n){return Hn().memoizedState=[e,n===void 0?null:n],e},useContext:mn,useEffect:ed,useImperativeHandle:function(e,n,a){return a=a!=null?a.concat([e]):null,kl(4194308,4,id.bind(null,n,e),a)},useLayoutEffect:function(e,n){return kl(4194308,4,e,n)},useInsertionEffect:function(e,n){return kl(4,2,e,n)},useMemo:function(e,n){var a=Hn();return n=n===void 0?null:n,e=e(),a.memoizedState=[e,n],e},useReducer:function(e,n,a){var h=Hn();return n=a!==void 0?a(n):n,h.memoizedState=h.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},h.queue=e,e=e.dispatch=Hp.bind(null,it,e),[h.memoizedState,e]},useRef:function(e){var n=Hn();return e={current:e},n.memoizedState=e},useState:Yh,useDebugValue:uc,useDeferredValue:function(e){return Hn().memoizedState=e},useTransition:function(){var e=Yh(!1),n=e[0];return e=Zp.bind(null,e[1]),Hn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,a){var h=it,m=Hn();if(Xe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),vt===null)throw Error(r(349));(Ir&30)!==0||qh(h,n,a)}m.memoizedState=a;var v={value:a,getSnapshot:n};return m.queue=v,ed(Kh.bind(null,h,v,e),[e]),h.flags|=2048,Yo(9,Gh.bind(null,h,v,a,n),void 0,null),a},useId:function(){var e=Hn(),n=vt.identifierPrefix;if(Xe){var a=ci,h=ui;a=(h&~(1<<32-Ce(h)-1)).toString(32)+a,n=":"+n+"R"+a,a=Jo++,0<a&&(n+="H"+a.toString(32)),n+=":"}else a=Fp++,n=":"+n+"r"+a.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},qp={readContext:mn,useCallback:sd,useContext:mn,useEffect:lc,useImperativeHandle:rd,useInsertionEffect:td,useLayoutEffect:nd,useMemo:od,useReducer:oc,useRef:Xh,useState:function(){return oc(Qo)},useDebugValue:uc,useDeferredValue:function(e){var n=_n();return ad(n,pt.memoizedState,e)},useTransition:function(){var e=oc(Qo)[0],n=_n().memoizedState;return[e,n]},useMutableSource:Wh,useSyncExternalStore:Vh,useId:ld,unstable_isNewReconciler:!1},Gp={readContext:mn,useCallback:sd,useContext:mn,useEffect:lc,useImperativeHandle:rd,useInsertionEffect:td,useLayoutEffect:nd,useMemo:od,useReducer:ac,useRef:Xh,useState:function(){return ac(Qo)},useDebugValue:uc,useDeferredValue:function(e){var n=_n();return pt===null?n.memoizedState=e:ad(n,pt.memoizedState,e)},useTransition:function(){var e=ac(Qo)[0],n=_n().memoizedState;return[e,n]},useMutableSource:Wh,useSyncExternalStore:Vh,useId:ld,unstable_isNewReconciler:!1};function Cn(e,n){if(e&&e.defaultProps){n=G({},n),e=e.defaultProps;for(var a in e)n[a]===void 0&&(n[a]=e[a]);return n}return n}function cc(e,n,a,h){n=e.memoizedState,a=a(h,n),a=a==null?n:G({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Cl={isMounted:function(e){return(e=e._reactInternals)?In(e)===e:!1},enqueueSetState:function(e,n,a){e=e._reactInternals;var h=Bt(),m=er(e),v=di(h,m);v.payload=n,a!=null&&(v.callback=a),n=Ji(e,v,m),n!==null&&(Tn(n,e,m,h),vl(n,e,m))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var h=Bt(),m=er(e),v=di(h,m);v.tag=1,v.payload=n,a!=null&&(v.callback=a),n=Ji(e,v,m),n!==null&&(Tn(n,e,m,h),vl(n,e,m))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Bt(),h=er(e),m=di(a,h);m.tag=2,n!=null&&(m.callback=n),n=Ji(e,m,h),n!==null&&(Tn(n,e,h,a),vl(n,e,h))}};function dd(e,n,a,h,m,v,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,v,S):n.prototype&&n.prototype.isPureReactComponent?!Dn(a,h)||!Dn(m,v):!0}function fd(e,n,a){var h=!1,m=qi,v=n.contextType;return typeof v=="object"&&v!==null?v=mn(v):(m=Ft(n)?Tr:Ot.current,h=n.contextTypes,v=(h=h!=null)?Ps(e,m):qi),n=new n(a,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Cl,e.stateNode=n,n._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=m,e.__reactInternalMemoizedMaskedChildContext=v),n}function pd(e,n,a,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,h),n.state!==e&&Cl.enqueueReplaceState(n,n.state,null)}function hc(e,n,a,h){var m=e.stateNode;m.props=a,m.state=e.memoizedState,m.refs={},Qu(e);var v=n.contextType;typeof v=="object"&&v!==null?m.context=mn(v):(v=Ft(n)?Tr:Ot.current,m.context=Ps(e,v)),m.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(cc(e,n,v,a),m.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(n=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),n!==m.state&&Cl.enqueueReplaceState(m,m.state,null),yl(e,a,m,h),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4194308)}function js(e,n){try{var a="",h=n;do a+=le(h),h=h.return;while(h);var m=a}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:m,digest:null}}function dc(e,n,a){return{value:e,source:null,stack:a??null,digest:n??null}}function fc(e,n){try{console.error(n.value)}catch(a){setTimeout(function(){throw a})}}var Kp=typeof WeakMap=="function"?WeakMap:Map;function md(e,n,a){a=di(-1,a),a.tag=3,a.payload={element:null};var h=n.value;return a.callback=function(){Nl||(Nl=!0,Ec=h),fc(e,n)},a}function _d(e,n,a){a=di(-1,a),a.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var m=n.value;a.payload=function(){return h(m)},a.callback=function(){fc(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){fc(e,n),typeof h!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var S=n.stack;this.componentDidCatch(n.value,{componentStack:S!==null?S:""})}),a}function gd(e,n,a){var h=e.pingCache;if(h===null){h=e.pingCache=new Kp;var m=new Set;h.set(n,m)}else m=h.get(n),m===void 0&&(m=new Set,h.set(n,m));m.has(a)||(m.add(a),e=um.bind(null,e,n,a),n.then(e,e))}function vd(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function yd(e,n,a,h,m){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(n=di(-1,1),n.tag=2,Ji(a,n,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=m,e)}var Jp=X.ReactCurrentOwner,Zt=!1;function zt(e,n,a,h){n.child=e===null?Dh(n,null,a,h):Rs(n,e.child,a,h)}function wd(e,n,a,h,m){a=a.render;var v=n.ref;return Ns(n,m),h=rc(e,n,a,h,v,m),a=sc(),e!==null&&!Zt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~m,fi(e,n,m)):(Xe&&a&&$u(n),n.flags|=1,zt(e,n,h,m),n.child)}function xd(e,n,a,h,m){if(e===null){var v=a.type;return typeof v=="function"&&!jc(v)&&v.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(n.tag=15,n.type=v,Sd(e,n,v,h,m)):(e=Dl(a.type,null,h,n,n.mode,m),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&m)===0){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:Dn,a(S,h)&&e.ref===n.ref)return fi(e,n,m)}return n.flags|=1,e=nr(v,h),e.ref=n.ref,e.return=n,n.child=e}function Sd(e,n,a,h,m){if(e!==null){var v=e.memoizedProps;if(Dn(v,h)&&e.ref===n.ref)if(Zt=!1,n.pendingProps=h=v,(e.lanes&m)!==0)(e.flags&131072)!==0&&(Zt=!0);else return n.lanes=e.lanes,fi(e,n,m)}return pc(e,n,a,h,m)}function kd(e,n,a){var h=n.pendingProps,m=h.children,v=e!==null?e.memoizedState:null;if(h.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(zs,rn),rn|=a;else{if((a&1073741824)===0)return e=v!==null?v.baseLanes|a:a,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ke(zs,rn),rn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:a,Ke(zs,rn),rn|=h}else v!==null?(h=v.baseLanes|a,n.memoizedState=null):h=a,Ke(zs,rn),rn|=h;return zt(e,n,m,a),n.child}function bd(e,n){var a=n.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(n.flags|=512,n.flags|=2097152)}function pc(e,n,a,h,m){var v=Ft(a)?Tr:Ot.current;return v=Ps(n,v),Ns(n,m),a=rc(e,n,a,h,v,m),h=sc(),e!==null&&!Zt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~m,fi(e,n,m)):(Xe&&h&&$u(n),n.flags|=1,zt(e,n,a,m),n.child)}function Ld(e,n,a,h,m){if(Ft(a)){var v=!0;cl(n)}else v=!1;if(Ns(n,m),n.stateNode===null)El(e,n),fd(n,a,h),hc(n,a,h,m),h=!0;else if(e===null){var S=n.stateNode,T=n.memoizedProps;S.props=T;var N=S.context,H=a.contextType;typeof H=="object"&&H!==null?H=mn(H):(H=Ft(a)?Tr:Ot.current,H=Ps(n,H));var Q=a.getDerivedStateFromProps,Y=typeof Q=="function"||typeof S.getSnapshotBeforeUpdate=="function";Y||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==h||N!==H)&&pd(n,S,h,H),Ki=!1;var J=n.memoizedState;S.state=J,yl(n,h,S,m),N=n.memoizedState,T!==h||J!==N||$t.current||Ki?(typeof Q=="function"&&(cc(n,a,Q,h),N=n.memoizedState),(T=Ki||dd(n,a,T,h,J,N,H))?(Y||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(n.flags|=4194308)):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=N),S.props=h,S.state=N,S.context=H,h=T):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{S=n.stateNode,$h(e,n),T=n.memoizedProps,H=n.type===n.elementType?T:Cn(n.type,T),S.props=H,Y=n.pendingProps,J=S.context,N=a.contextType,typeof N=="object"&&N!==null?N=mn(N):(N=Ft(a)?Tr:Ot.current,N=Ps(n,N));var ie=a.getDerivedStateFromProps;(Q=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==Y||J!==N)&&pd(n,S,h,N),Ki=!1,J=n.memoizedState,S.state=J,yl(n,h,S,m);var oe=n.memoizedState;T!==Y||J!==oe||$t.current||Ki?(typeof ie=="function"&&(cc(n,a,ie,h),oe=n.memoizedState),(H=Ki||dd(n,a,H,h,J,oe,N)||!1)?(Q||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,oe,N),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,oe,N)),typeof S.componentDidUpdate=="function"&&(n.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=oe),S.props=h,S.state=oe,S.context=N,h=H):(typeof S.componentDidUpdate!="function"||T===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),h=!1)}return mc(e,n,a,h,v,m)}function mc(e,n,a,h,m,v){bd(e,n);var S=(n.flags&128)!==0;if(!h&&!S)return m&&Oh(n,a,!1),fi(e,n,v);h=n.stateNode,Jp.current=n;var T=S&&typeof a.getDerivedStateFromError!="function"?null:h.render();return n.flags|=1,e!==null&&S?(n.child=Rs(n,e.child,null,v),n.child=Rs(n,null,T,v)):zt(e,n,T,v),n.memoizedState=h.state,m&&Oh(n,a,!0),n.child}function Cd(e){var n=e.stateNode;n.pendingContext?Eh(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Eh(e,n.context,!1),Yu(e,n.containerInfo)}function Pd(e,n,a,h,m){return Os(),Wu(m),n.flags|=256,zt(e,n,a,h),n.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function gc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ed(e,n,a){var h=n.pendingProps,m=nt.current,v=!1,S=(n.flags&128)!==0,T;if((T=S)||(T=e!==null&&e.memoizedState===null?!1:(m&2)!==0),T?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(m|=1),Ke(nt,m&1),e===null)return Hu(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(S=h.children,e=h.fallback,v?(h=n.mode,v=n.child,S={mode:"hidden",children:S},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Ul(S,h,0,null),e=Dr(e,h,a,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=gc(a),n.memoizedState=_c,e):vc(n,S));if(m=e.memoizedState,m!==null&&(T=m.dehydrated,T!==null))return Qp(e,n,S,h,T,m,a);if(v){v=h.fallback,S=n.mode,m=e.child,T=m.sibling;var N={mode:"hidden",children:h.children};return(S&1)===0&&n.child!==m?(h=n.child,h.childLanes=0,h.pendingProps=N,n.deletions=null):(h=nr(m,N),h.subtreeFlags=m.subtreeFlags&14680064),T!==null?v=nr(T,v):(v=Dr(v,S,a,null),v.flags|=2),v.return=n,h.return=n,h.sibling=v,n.child=h,h=v,v=n.child,S=e.child.memoizedState,S=S===null?gc(a):{baseLanes:S.baseLanes|a,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=e.childLanes&~a,n.memoizedState=_c,h}return v=e.child,e=v.sibling,h=nr(v,{mode:"visible",children:h.children}),(n.mode&1)===0&&(h.lanes=a),h.return=n,h.sibling=null,e!==null&&(a=n.deletions,a===null?(n.deletions=[e],n.flags|=16):a.push(e)),n.child=h,n.memoizedState=null,h}function vc(e,n){return n=Ul({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Pl(e,n,a,h){return h!==null&&Wu(h),Rs(n,e.child,null,a),e=vc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Qp(e,n,a,h,m,v,S){if(a)return n.flags&256?(n.flags&=-257,h=dc(Error(r(422))),Pl(e,n,S,h)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=h.fallback,m=n.mode,h=Ul({mode:"visible",children:h.children},m,0,null),v=Dr(v,m,S,null),v.flags|=2,h.return=n,v.return=n,h.sibling=v,n.child=h,(n.mode&1)!==0&&Rs(n,e.child,null,S),n.child.memoizedState=gc(S),n.memoizedState=_c,v);if((n.mode&1)===0)return Pl(e,n,S,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var T=h.dgst;return h=T,v=Error(r(419)),h=dc(v,h,void 0),Pl(e,n,S,h)}if(T=(S&e.childLanes)!==0,Zt||T){if(h=vt,h!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|S))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,hi(e,m),Tn(h,e,m,-1))}return Ic(),h=dc(Error(r(421))),Pl(e,n,S,h)}return m.data==="$?"?(n.flags|=128,n.child=e.child,n=cm.bind(null,e),m._reactRetry=n,null):(e=v.treeContext,nn=Fn(m.nextSibling),tn=n,Xe=!0,Ln=null,e!==null&&(fn[pn++]=ui,fn[pn++]=ci,fn[pn++]=Or,ui=e.id,ci=e.overflow,Or=n),n=vc(n,h.children),n.flags|=4096,n)}function Td(e,n,a){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),Ku(e.return,n,a)}function yc(e,n,a,h,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=a,v.tailMode=m)}function Od(e,n,a){var h=n.pendingProps,m=h.revealOrder,v=h.tail;if(zt(e,n,h.children,a),h=nt.current,(h&2)!==0)h=h&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Td(e,a,n);else if(e.tag===19)Td(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(Ke(nt,h),(n.mode&1)===0)n.memoizedState=null;else switch(m){case"forwards":for(a=n.child,m=null;a!==null;)e=a.alternate,e!==null&&wl(e)===null&&(m=a),a=a.sibling;a=m,a===null?(m=n.child,n.child=null):(m=a.sibling,a.sibling=null),yc(n,!1,m,a,v);break;case"backwards":for(a=null,m=n.child,n.child=null;m!==null;){if(e=m.alternate,e!==null&&wl(e)===null){n.child=m;break}e=m.sibling,m.sibling=a,a=m,m=e}yc(n,!0,a,null,v);break;case"together":yc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function El(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function fi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),jr|=n.lanes,(a&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=nr(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=nr(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Yp(e,n,a){switch(n.tag){case 3:Cd(n),Os();break;case 5:Hh(n);break;case 1:Ft(n.type)&&cl(n);break;case 4:Yu(n,n.stateNode.containerInfo);break;case 10:var h=n.type._context,m=n.memoizedProps.value;Ke(_l,h._currentValue),h._currentValue=m;break;case 13:if(h=n.memoizedState,h!==null)return h.dehydrated!==null?(Ke(nt,nt.current&1),n.flags|=128,null):(a&n.child.childLanes)!==0?Ed(e,n,a):(Ke(nt,nt.current&1),e=fi(e,n,a),e!==null?e.sibling:null);Ke(nt,nt.current&1);break;case 19:if(h=(a&n.childLanes)!==0,(e.flags&128)!==0){if(h)return Od(e,n,a);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ke(nt,nt.current),h)break;return null;case 22:case 23:return n.lanes=0,kd(e,n,a)}return fi(e,n,a)}var Rd,wc,Ad,Nd;Rd=function(e,n){for(var a=n.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},wc=function(){},Ad=function(e,n,a,h){var m=e.memoizedProps;if(m!==h){e=n.stateNode,Nr(Zn.current);var v=null;switch(a){case"input":m=ro(e,m),h=ro(e,h),v=[];break;case"select":m=G({},m,{value:void 0}),h=G({},h,{value:void 0}),v=[];break;case"textarea":m=Gr(e,m),h=Gr(e,h),v=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=K)}co(a,h);var S;a=null;for(H in m)if(!h.hasOwnProperty(H)&&m.hasOwnProperty(H)&&m[H]!=null)if(H==="style"){var T=m[H];for(S in T)T.hasOwnProperty(S)&&(a||(a={}),a[S]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(f.hasOwnProperty(H)?v||(v=[]):(v=v||[]).push(H,null));for(H in h){var N=h[H];if(T=m!=null?m[H]:void 0,h.hasOwnProperty(H)&&N!==T&&(N!=null||T!=null))if(H==="style")if(T){for(S in T)!T.hasOwnProperty(S)||N&&N.hasOwnProperty(S)||(a||(a={}),a[S]="");for(S in N)N.hasOwnProperty(S)&&T[S]!==N[S]&&(a||(a={}),a[S]=N[S])}else a||(v||(v=[]),v.push(H,a)),a=N;else H==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,T=T?T.__html:void 0,N!=null&&T!==N&&(v=v||[]).push(H,N)):H==="children"?typeof N!="string"&&typeof N!="number"||(v=v||[]).push(H,""+N):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(f.hasOwnProperty(H)?(N!=null&&H==="onScroll"&&He("scroll",e),v||T===N||(v=[])):(v=v||[]).push(H,N))}a&&(v=v||[]).push("style",a);var H=v;(n.updateQueue=H)&&(n.flags|=4)}},Nd=function(e,n,a,h){a!==h&&(n.flags|=4)};function Xo(e,n){if(!Xe)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function At(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,h=0;if(n)for(var m=e.child;m!==null;)a|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)a|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=h,e.childLanes=a,n}function Xp(e,n,a){var h=n.pendingProps;switch(Fu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(n),null;case 1:return Ft(n.type)&&ul(),At(n),null;case 3:return h=n.stateNode,Is(),Ye($t),Ye(Ot),tc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(pl(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ln!==null&&(Rc(Ln),Ln=null))),wc(e,n),At(n),null;case 5:Xu(n);var m=Nr(Go.current);if(a=n.type,e!==null&&n.stateNode!=null)Ad(e,n,a,h,m),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!h){if(n.stateNode===null)throw Error(r(166));return At(n),null}if(e=Nr(Zn.current),pl(n)){h=n.stateNode,a=n.type;var v=n.memoizedProps;switch(h[dn]=n,h[Hi]=v,e=(n.mode&1)!==0,a){case"dialog":He("cancel",h),He("close",h);break;case"iframe":case"object":case"embed":He("load",h);break;case"video":case"audio":for(m=0;m<$i.length;m++)He($i[m],h);break;case"source":He("error",h);break;case"img":case"image":case"link":He("error",h),He("load",h);break;case"details":He("toggle",h);break;case"input":so(h,v),He("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},He("invalid",h);break;case"textarea":lo(h,v),He("invalid",h)}co(a,v),m=null;for(var S in v)if(v.hasOwnProperty(S)){var T=v[S];S==="children"?typeof T=="string"?h.textContent!==T&&(v.suppressHydrationWarning!==!0&&F(h.textContent,T,e),m=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&F(h.textContent,T,e),m=["children",""+T]):f.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&He("scroll",h)}switch(a){case"input":yi(h),cr(h,v,!0);break;case"textarea":yi(h),Ca(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=K)}h=m,n.updateQueue=h,h!==null&&(n.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kr(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=S.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=S.createElement(a,{is:h.is}):(e=S.createElement(a),a==="select"&&(S=e,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):e=S.createElementNS(e,a),e[dn]=n,e[Hi]=h,Rd(e,n,!1,!1),n.stateNode=e;e:{switch(S=Vn(a,h),a){case"dialog":He("cancel",e),He("close",e),m=h;break;case"iframe":case"object":case"embed":He("load",e),m=h;break;case"video":case"audio":for(m=0;m<$i.length;m++)He($i[m],e);m=h;break;case"source":He("error",e),m=h;break;case"img":case"image":case"link":He("error",e),He("load",e),m=h;break;case"details":He("toggle",e),m=h;break;case"input":so(e,h),m=ro(e,h),He("invalid",e);break;case"option":m=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},m=G({},h,{value:void 0}),He("invalid",e);break;case"textarea":lo(e,h),m=Gr(e,h),He("invalid",e);break;default:m=h}co(a,m),T=m;for(v in T)if(T.hasOwnProperty(v)){var N=T[v];v==="style"?Qr(e,N):v==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Pa(e,N)):v==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&ki(e,N):typeof N=="number"&&ki(e,""+N):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(f.hasOwnProperty(v)?N!=null&&v==="onScroll"&&He("scroll",e):N!=null&&$(e,v,N,S))}switch(a){case"input":yi(e),cr(e,h,!1);break;case"textarea":yi(e),Ca(e);break;case"option":h.value!=null&&e.setAttribute("value",""+Te(h.value));break;case"select":e.multiple=!!h.multiple,v=h.value,v!=null?Nn(e,!!h.multiple,v,!1):h.defaultValue!=null&&Nn(e,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(e.onclick=K)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return At(n),null;case 6:if(e&&n.stateNode!=null)Nd(e,n,e.memoizedProps,h);else{if(typeof h!="string"&&n.stateNode===null)throw Error(r(166));if(a=Nr(Go.current),Nr(Zn.current),pl(n)){if(h=n.stateNode,a=n.memoizedProps,h[dn]=n,(v=h.nodeValue!==a)&&(e=tn,e!==null))switch(e.tag){case 3:F(h.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&F(h.nodeValue,a,(e.mode&1)!==0)}v&&(n.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[dn]=n,n.stateNode=h}return At(n),null;case 13:if(Ye(nt),h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xe&&nn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Mh(),Os(),n.flags|=98560,v=!1;else if(v=pl(n),h!==null&&h.dehydrated!==null){if(e===null){if(!v)throw Error(r(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[dn]=n}else Os(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;At(n),v=!1}else Ln!==null&&(Rc(Ln),Ln=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=a,n):(h=h!==null,h!==(e!==null&&e.memoizedState!==null)&&h&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(nt.current&1)!==0?mt===0&&(mt=3):Ic())),n.updateQueue!==null&&(n.flags|=4),At(n),null);case 4:return Is(),wc(e,n),e===null&&Fi(n.stateNode.containerInfo),At(n),null;case 10:return Gu(n.type._context),At(n),null;case 17:return Ft(n.type)&&ul(),At(n),null;case 19:if(Ye(nt),v=n.memoizedState,v===null)return At(n),null;if(h=(n.flags&128)!==0,S=v.rendering,S===null)if(h)Xo(v,!1);else{if(mt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(S=wl(e),S!==null){for(n.flags|=128,Xo(v,!1),h=S.updateQueue,h!==null&&(n.updateQueue=h,n.flags|=4),n.subtreeFlags=0,h=a,a=n.child;a!==null;)v=a,e=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,e=S.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Ke(nt,nt.current&1|2),n.child}e=e.sibling}v.tail!==null&&et()>Bs&&(n.flags|=128,h=!0,Xo(v,!1),n.lanes=4194304)}else{if(!h)if(e=wl(S),e!==null){if(n.flags|=128,h=!0,a=e.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),Xo(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Xe)return At(n),null}else 2*et()-v.renderingStartTime>Bs&&a!==1073741824&&(n.flags|=128,h=!0,Xo(v,!1),n.lanes=4194304);v.isBackwards?(S.sibling=n.child,n.child=S):(a=v.last,a!==null?a.sibling=S:n.child=S,v.last=S)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=et(),n.sibling=null,a=nt.current,Ke(nt,h?a&1|2:a&1),n):(At(n),null);case 22:case 23:return Nc(),h=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(n.flags|=8192),h&&(n.mode&1)!==0?(rn&1073741824)!==0&&(At(n),n.subtreeFlags&6&&(n.flags|=8192)):At(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function em(e,n){switch(Fu(n),n.tag){case 1:return Ft(n.type)&&ul(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Is(),Ye($t),Ye(Ot),tc(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Xu(n),null;case 13:if(Ye(nt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Os()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ye(nt),null;case 4:return Is(),null;case 10:return Gu(n.type._context),null;case 22:case 23:return Nc(),null;case 24:return null;default:return null}}var Tl=!1,Nt=!1,tm=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ms(e,n){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ot(e,n,h)}else a.current=null}function xc(e,n,a){try{a()}catch(h){ot(e,n,h)}}var Id=!1;function nm(e,n){if(te=xr,e=Mo(),zo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,T=-1,N=-1,H=0,Q=0,Y=e,J=null;t:for(;;){for(var ie;Y!==a||m!==0&&Y.nodeType!==3||(T=S+m),Y!==v||h!==0&&Y.nodeType!==3||(N=S+h),Y.nodeType===3&&(S+=Y.nodeValue.length),(ie=Y.firstChild)!==null;)J=Y,Y=ie;for(;;){if(Y===e)break t;if(J===a&&++H===m&&(T=S),J===v&&++Q===h&&(N=S),(ie=Y.nextSibling)!==null)break;Y=J,J=Y.parentNode}Y=ie}a=T===-1||N===-1?null:{start:T,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(_e={focusedElem:e,selectionRange:a},xr=!1,se=n;se!==null;)if(n=se,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,se=e;else for(;se!==null;){n=se;try{var oe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,lt=oe.memoizedState,D=n.stateNode,j=D.getSnapshotBeforeUpdate(n.elementType===n.type?ae:Cn(n.type,ae),lt);D.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var U=n.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ee){ot(n,n.return,ee)}if(e=n.sibling,e!==null){e.return=n.return,se=e;break}se=n.return}return oe=Id,Id=!1,oe}function ea(e,n,a){var h=n.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&e)===e){var v=m.destroy;m.destroy=void 0,v!==void 0&&xc(n,a,v)}m=m.next}while(m!==h)}}function Ol(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var h=a.create;a.destroy=h()}a=a.next}while(a!==n)}}function Sc(e){var n=e.ref;if(n!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof n=="function"?n(e):n.current=e}}function jd(e){var n=e.alternate;n!==null&&(e.alternate=null,jd(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[dn],delete n[Hi],delete n[Wi],delete n[zu],delete n[Bu])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Md(e){return e.tag===5||e.tag===3||e.tag===4}function zd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Md(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kc(e,n,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?a.nodeType===8?a.parentNode.insertBefore(e,n):a.insertBefore(e,n):(a.nodeType===8?(n=a.parentNode,n.insertBefore(e,a)):(n=a,n.appendChild(e)),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=K));else if(h!==4&&(e=e.child,e!==null))for(kc(e,n,a),e=e.sibling;e!==null;)kc(e,n,a),e=e.sibling}function bc(e,n,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(bc(e,n,a),e=e.sibling;e!==null;)bc(e,n,a),e=e.sibling}var xt=null,Pn=!1;function Qi(e,n,a){for(a=a.child;a!==null;)Bd(e,n,a),a=a.sibling}function Bd(e,n,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(mr,a)}catch{}switch(a.tag){case 5:Nt||Ms(a,n);case 6:var h=xt,m=Pn;xt=null,Qi(e,n,a),xt=h,Pn=m,xt!==null&&(Pn?(e=xt,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):xt.removeChild(a.stateNode));break;case 18:xt!==null&&(Pn?(e=xt,a=a.stateNode,e.nodeType===8?Ho(e.parentNode,a):e.nodeType===1&&Ho(e,a),Jt(e)):Ho(xt,a.stateNode));break;case 4:h=xt,m=Pn,xt=a.stateNode.containerInfo,Pn=!0,Qi(e,n,a),xt=h,Pn=m;break;case 0:case 11:case 14:case 15:if(!Nt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var v=m,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&xc(a,n,S),m=m.next}while(m!==h)}Qi(e,n,a);break;case 1:if(!Nt&&(Ms(a,n),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(T){ot(a,n,T)}Qi(e,n,a);break;case 21:Qi(e,n,a);break;case 22:a.mode&1?(Nt=(h=Nt)||a.memoizedState!==null,Qi(e,n,a),Nt=h):Qi(e,n,a);break;default:Qi(e,n,a)}}function Dd(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new tm),n.forEach(function(h){var m=hm.bind(null,e,h);a.has(h)||(a.add(h),h.then(m,m))})}}function En(e,n){var a=n.deletions;if(a!==null)for(var h=0;h<a.length;h++){var m=a[h];try{var v=e,S=n,T=S;e:for(;T!==null;){switch(T.tag){case 5:xt=T.stateNode,Pn=!1;break e;case 3:xt=T.stateNode.containerInfo,Pn=!0;break e;case 4:xt=T.stateNode.containerInfo,Pn=!0;break e}T=T.return}if(xt===null)throw Error(r(160));Bd(v,S,m),xt=null,Pn=!1;var N=m.alternate;N!==null&&(N.return=null),m.return=null}catch(H){ot(m,n,H)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Ud(n,e),n=n.sibling}function Ud(e,n){var a=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(En(n,e),Wn(e),h&4){try{ea(3,e,e.return),Ol(3,e)}catch(ae){ot(e,e.return,ae)}try{ea(5,e,e.return)}catch(ae){ot(e,e.return,ae)}}break;case 1:En(n,e),Wn(e),h&512&&a!==null&&Ms(a,a.return);break;case 5:if(En(n,e),Wn(e),h&512&&a!==null&&Ms(a,a.return),e.flags&32){var m=e.stateNode;try{ki(m,"")}catch(ae){ot(e,e.return,ae)}}if(h&4&&(m=e.stateNode,m!=null)){var v=e.memoizedProps,S=a!==null?a.memoizedProps:v,T=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&oo(m,v),Vn(T,S);var H=Vn(T,v);for(S=0;S<N.length;S+=2){var Q=N[S],Y=N[S+1];Q==="style"?Qr(m,Y):Q==="dangerouslySetInnerHTML"?Pa(m,Y):Q==="children"?ki(m,Y):$(m,Q,Y,H)}switch(T){case"input":ur(m,v);break;case"textarea":La(m,v);break;case"select":var J=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var ie=v.value;ie!=null?Nn(m,!!v.multiple,ie,!1):J!==!!v.multiple&&(v.defaultValue!=null?Nn(m,!!v.multiple,v.defaultValue,!0):Nn(m,!!v.multiple,v.multiple?[]:"",!1))}m[Hi]=v}catch(ae){ot(e,e.return,ae)}}break;case 6:if(En(n,e),Wn(e),h&4){if(e.stateNode===null)throw Error(r(162));m=e.stateNode,v=e.memoizedProps;try{m.nodeValue=v}catch(ae){ot(e,e.return,ae)}}break;case 3:if(En(n,e),Wn(e),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Jt(n.containerInfo)}catch(ae){ot(e,e.return,ae)}break;case 4:En(n,e),Wn(e);break;case 13:En(n,e),Wn(e),m=e.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Pc=et())),h&4&&Dd(e);break;case 22:if(Q=a!==null&&a.memoizedState!==null,e.mode&1?(Nt=(H=Nt)||Q,En(n,e),Nt=H):En(n,e),Wn(e),h&8192){if(H=e.memoizedState!==null,(e.stateNode.isHidden=H)&&!Q&&(e.mode&1)!==0)for(se=e,Q=e.child;Q!==null;){for(Y=se=Q;se!==null;){switch(J=se,ie=J.child,J.tag){case 0:case 11:case 14:case 15:ea(4,J,J.return);break;case 1:Ms(J,J.return);var oe=J.stateNode;if(typeof oe.componentWillUnmount=="function"){h=J,a=J.return;try{n=h,oe.props=n.memoizedProps,oe.state=n.memoizedState,oe.componentWillUnmount()}catch(ae){ot(h,a,ae)}}break;case 5:Ms(J,J.return);break;case 22:if(J.memoizedState!==null){Zd(Y);continue}}ie!==null?(ie.return=J,se=ie):Zd(Y)}Q=Q.sibling}e:for(Q=null,Y=e;;){if(Y.tag===5){if(Q===null){Q=Y;try{m=Y.stateNode,H?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=Y.stateNode,N=Y.memoizedProps.style,S=N!=null&&N.hasOwnProperty("display")?N.display:null,T.style.display=uo("display",S))}catch(ae){ot(e,e.return,ae)}}}else if(Y.tag===6){if(Q===null)try{Y.stateNode.nodeValue=H?"":Y.memoizedProps}catch(ae){ot(e,e.return,ae)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===e)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===e)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===e)break e;Q===Y&&(Q=null),Y=Y.return}Q===Y&&(Q=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:En(n,e),Wn(e),h&4&&Dd(e);break;case 21:break;default:En(n,e),Wn(e)}}function Wn(e){var n=e.flags;if(n&2){try{e:{for(var a=e.return;a!==null;){if(Md(a)){var h=a;break e}a=a.return}throw Error(r(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(ki(m,""),h.flags&=-33);var v=zd(e);bc(e,v,m);break;case 3:case 4:var S=h.stateNode.containerInfo,T=zd(e);kc(e,T,S);break;default:throw Error(r(161))}}catch(N){ot(e,e.return,N)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function im(e,n,a){se=e,$d(e)}function $d(e,n,a){for(var h=(e.mode&1)!==0;se!==null;){var m=se,v=m.child;if(m.tag===22&&h){var S=m.memoizedState!==null||Tl;if(!S){var T=m.alternate,N=T!==null&&T.memoizedState!==null||Nt;T=Tl;var H=Nt;if(Tl=S,(Nt=N)&&!H)for(se=m;se!==null;)S=se,N=S.child,S.tag===22&&S.memoizedState!==null?Hd(m):N!==null?(N.return=S,se=N):Hd(m);for(;v!==null;)se=v,$d(v),v=v.sibling;se=m,Tl=T,Nt=H}Fd(e)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,se=v):Fd(e)}}function Fd(e){for(;se!==null;){var n=se;if((n.flags&8772)!==0){var a=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Nt||Ol(5,n);break;case 1:var h=n.stateNode;if(n.flags&4&&!Nt)if(a===null)h.componentDidMount();else{var m=n.elementType===n.type?a.memoizedProps:Cn(n.type,a.memoizedProps);h.componentDidUpdate(m,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Zh(n,v,h);break;case 3:var S=n.updateQueue;if(S!==null){if(a=null,n.child!==null)switch(n.child.tag){case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}Zh(n,S,a)}break;case 5:var T=n.stateNode;if(a===null&&n.flags&4){a=T;var N=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var H=n.alternate;if(H!==null){var Q=H.memoizedState;if(Q!==null){var Y=Q.dehydrated;Y!==null&&Jt(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Nt||n.flags&512&&Sc(n)}catch(J){ot(n,n.return,J)}}if(n===e){se=null;break}if(a=n.sibling,a!==null){a.return=n.return,se=a;break}se=n.return}}function Zd(e){for(;se!==null;){var n=se;if(n===e){se=null;break}var a=n.sibling;if(a!==null){a.return=n.return,se=a;break}se=n.return}}function Hd(e){for(;se!==null;){var n=se;try{switch(n.tag){case 0:case 11:case 15:var a=n.return;try{Ol(4,n)}catch(N){ot(n,a,N)}break;case 1:var h=n.stateNode;if(typeof h.componentDidMount=="function"){var m=n.return;try{h.componentDidMount()}catch(N){ot(n,m,N)}}var v=n.return;try{Sc(n)}catch(N){ot(n,v,N)}break;case 5:var S=n.return;try{Sc(n)}catch(N){ot(n,S,N)}}}catch(N){ot(n,n.return,N)}if(n===e){se=null;break}var T=n.sibling;if(T!==null){T.return=n.return,se=T;break}se=n.return}}var rm=Math.ceil,Rl=X.ReactCurrentDispatcher,Lc=X.ReactCurrentOwner,gn=X.ReactCurrentBatchConfig,je=0,vt=null,ct=null,St=0,rn=0,zs=Vi(0),mt=0,ta=null,jr=0,Al=0,Cc=0,na=null,Ht=null,Pc=0,Bs=1/0,pi=null,Nl=!1,Ec=null,Yi=null,Il=!1,Xi=null,jl=0,ia=0,Tc=null,Ml=-1,zl=0;function Bt(){return(je&6)!==0?et():Ml!==-1?Ml:Ml=et()}function er(e){return(e.mode&1)===0?1:(je&2)!==0&&St!==0?St&-St:$p.transition!==null?(zl===0&&(zl=Ua()),zl):(e=Ie,e!==0||(e=window.event,e=e===void 0?16:Re(e.type)),e)}function Tn(e,n,a,h){if(50<ia)throw ia=0,Tc=null,Error(r(185));Gt(e,a,h),((je&2)===0||e!==vt)&&(e===vt&&((je&2)===0&&(Al|=a),mt===4&&tr(e,St)),Wt(e,h),a===1&&je===0&&(n.mode&1)===0&&(Bs=et()+500,hl&&Gi()))}function Wt(e,n){var a=e.callbackNode;rs(e,n);var h=Ge(e,e===vt?St:0);if(h===0)a!==null&&vo(a),e.callbackNode=null,e.callbackPriority=0;else if(n=h&-h,e.callbackPriority!==n){if(a!=null&&vo(a),n===1)e.tag===0?Up(Vd.bind(null,e)):Rh(Vd.bind(null,e)),Tt(function(){(je&6)===0&&Gi()}),a=null;else{switch(Ti(h)){case 1:a=yo;break;case 4:a=Da;break;case 16:a=ns;break;case 536870912:a=Li;break;default:a=ns}a=ef(a,Wd.bind(null,e))}e.callbackPriority=n,e.callbackNode=a}}function Wd(e,n){if(Ml=-1,zl=0,(je&6)!==0)throw Error(r(327));var a=e.callbackNode;if(Ds()&&e.callbackNode!==a)return null;var h=Ge(e,e===vt?St:0);if(h===0)return null;if((h&30)!==0||(h&e.expiredLanes)!==0||n)n=Bl(e,h);else{n=h;var m=je;je|=2;var v=Gd();(vt!==e||St!==n)&&(pi=null,Bs=et()+500,zr(e,n));do try{am();break}catch(T){qd(e,T)}while(!0);qu(),Rl.current=v,je=m,ct!==null?n=0:(vt=null,St=0,n=mt)}if(n!==0){if(n===2&&(m=Pt(e),m!==0&&(h=m,n=Oc(e,m))),n===1)throw a=ta,zr(e,0),tr(e,h),Wt(e,et()),a;if(n===6)tr(e,h);else{if(m=e.current.alternate,(h&30)===0&&!sm(m)&&(n=Bl(e,h),n===2&&(v=Pt(e),v!==0&&(h=v,n=Oc(e,v))),n===1))throw a=ta,zr(e,0),tr(e,h),Wt(e,et()),a;switch(e.finishedWork=m,e.finishedLanes=h,n){case 0:case 1:throw Error(r(345));case 2:Br(e,Ht,pi);break;case 3:if(tr(e,h),(h&130023424)===h&&(n=Pc+500-et(),10<n)){if(Ge(e,0)!==0)break;if(m=e.suspendedLanes,(m&h)!==h){Bt(),e.pingedLanes|=e.suspendedLanes&m;break}e.timeoutHandle=ft(Br.bind(null,e,Ht,pi),n);break}Br(e,Ht,pi);break;case 4:if(tr(e,h),(h&4194240)===h)break;for(n=e.eventTimes,m=-1;0<h;){var S=31-Ce(h);v=1<<S,S=n[S],S>m&&(m=S),h&=~v}if(h=m,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*rm(h/1960))-h,10<h){e.timeoutHandle=ft(Br.bind(null,e,Ht,pi),h);break}Br(e,Ht,pi);break;case 5:Br(e,Ht,pi);break;default:throw Error(r(329))}}}return Wt(e,et()),e.callbackNode===a?Wd.bind(null,e):null}function Oc(e,n){var a=na;return e.current.memoizedState.isDehydrated&&(zr(e,n).flags|=256),e=Bl(e,n),e!==2&&(n=Ht,Ht=a,n!==null&&Rc(n)),e}function Rc(e){Ht===null?Ht=e:Ht.push.apply(Ht,e)}function sm(e){for(var n=e;;){if(n.flags&16384){var a=n.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var m=a[h],v=m.getSnapshot;m=m.value;try{if(!Xt(v(),m))return!1}catch{return!1}}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function tr(e,n){for(n&=~Cc,n&=~Al,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var a=31-Ce(n),h=1<<a;e[a]=-1,n&=~h}}function Vd(e){if((je&6)!==0)throw Error(r(327));Ds();var n=Ge(e,0);if((n&1)===0)return Wt(e,et()),null;var a=Bl(e,n);if(e.tag!==0&&a===2){var h=Pt(e);h!==0&&(n=h,a=Oc(e,h))}if(a===1)throw a=ta,zr(e,0),tr(e,n),Wt(e,et()),a;if(a===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Br(e,Ht,pi),Wt(e,et()),null}function Ac(e,n){var a=je;je|=1;try{return e(n)}finally{je=a,je===0&&(Bs=et()+500,hl&&Gi())}}function Mr(e){Xi!==null&&Xi.tag===0&&(je&6)===0&&Ds();var n=je;je|=1;var a=gn.transition,h=Ie;try{if(gn.transition=null,Ie=1,e)return e()}finally{Ie=h,gn.transition=a,je=n,(je&6)===0&&Gi()}}function Nc(){rn=zs.current,Ye(zs)}function zr(e,n){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,ut(a)),ct!==null)for(a=ct.return;a!==null;){var h=a;switch(Fu(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ul();break;case 3:Is(),Ye($t),Ye(Ot),tc();break;case 5:Xu(h);break;case 4:Is();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:Gu(h.type._context);break;case 22:case 23:Nc()}a=a.return}if(vt=e,ct=e=nr(e.current,null),St=rn=n,mt=0,ta=null,Cc=Al=jr=0,Ht=na=null,Ar!==null){for(n=0;n<Ar.length;n++)if(a=Ar[n],h=a.interleaved,h!==null){a.interleaved=null;var m=h.next,v=a.pending;if(v!==null){var S=v.next;v.next=m,h.next=S}a.pending=h}Ar=null}return e}function qd(e,n){do{var a=ct;try{if(qu(),xl.current=Ll,Sl){for(var h=it.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Sl=!1}if(Ir=0,gt=pt=it=null,Ko=!1,Jo=0,Lc.current=null,a===null||a.return===null){mt=1,ta=n,ct=null;break}e:{var v=e,S=a.return,T=a,N=n;if(n=St,T.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var H=N,Q=T,Y=Q.tag;if((Q.mode&1)===0&&(Y===0||Y===11||Y===15)){var J=Q.alternate;J?(Q.updateQueue=J.updateQueue,Q.memoizedState=J.memoizedState,Q.lanes=J.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ie=vd(S);if(ie!==null){ie.flags&=-257,yd(ie,S,T,v,n),ie.mode&1&&gd(v,H,n),n=ie,N=H;var oe=n.updateQueue;if(oe===null){var ae=new Set;ae.add(N),n.updateQueue=ae}else oe.add(N);break e}else{if((n&1)===0){gd(v,H,n),Ic();break e}N=Error(r(426))}}else if(Xe&&T.mode&1){var lt=vd(S);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),yd(lt,S,T,v,n),Wu(js(N,T));break e}}v=N=js(N,T),mt!==4&&(mt=2),na===null?na=[v]:na.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var D=md(v,N,n);Fh(v,D);break e;case 1:T=N;var j=v.type,U=v.stateNode;if((v.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Yi===null||!Yi.has(U)))){v.flags|=65536,n&=-n,v.lanes|=n;var ee=_d(v,T,n);Fh(v,ee);break e}}v=v.return}while(v!==null)}Jd(a)}catch(ce){n=ce,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function Gd(){var e=Rl.current;return Rl.current=Ll,e===null?Ll:e}function Ic(){(mt===0||mt===3||mt===2)&&(mt=4),vt===null||(jr&268435455)===0&&(Al&268435455)===0||tr(vt,St)}function Bl(e,n){var a=je;je|=2;var h=Gd();(vt!==e||St!==n)&&(pi=null,zr(e,n));do try{om();break}catch(m){qd(e,m)}while(!0);if(qu(),je=a,Rl.current=h,ct!==null)throw Error(r(261));return vt=null,St=0,mt}function om(){for(;ct!==null;)Kd(ct)}function am(){for(;ct!==null&&!xu();)Kd(ct)}function Kd(e){var n=Xd(e.alternate,e,rn);e.memoizedProps=e.pendingProps,n===null?Jd(e):ct=n,Lc.current=null}function Jd(e){var n=e;do{var a=n.alternate;if(e=n.return,(n.flags&32768)===0){if(a=Xp(a,n,rn),a!==null){ct=a;return}}else{if(a=em(a,n),a!==null){a.flags&=32767,ct=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,ct=null;return}}if(n=n.sibling,n!==null){ct=n;return}ct=n=e}while(n!==null);mt===0&&(mt=5)}function Br(e,n,a){var h=Ie,m=gn.transition;try{gn.transition=null,Ie=1,lm(e,n,a,h)}finally{gn.transition=m,Ie=h}return null}function lm(e,n,a,h){do Ds();while(Xi!==null);if((je&6)!==0)throw Error(r(327));a=e.finishedWork;var m=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var v=a.lanes|a.childLanes;if(st(e,v),e===vt&&(ct=vt=null,St=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Il||(Il=!0,ef(ns,function(){return Ds(),null})),v=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||v){v=gn.transition,gn.transition=null;var S=Ie;Ie=1;var T=je;je|=4,Lc.current=null,nm(e,a),Ud(a,e),cn(_e),xr=!!te,_e=te=null,e.current=a,im(a),ts(),je=T,Ie=S,gn.transition=v}else e.current=a;if(Il&&(Il=!1,Xi=e,jl=m),v=e.pendingLanes,v===0&&(Yi=null),_r(a.stateNode),Wt(e,et()),n!==null)for(h=e.onRecoverableError,a=0;a<n.length;a++)m=n[a],h(m.value,{componentStack:m.stack,digest:m.digest});if(Nl)throw Nl=!1,e=Ec,Ec=null,e;return(jl&1)!==0&&e.tag!==0&&Ds(),v=e.pendingLanes,(v&1)!==0?e===Tc?ia++:(ia=0,Tc=e):ia=0,Gi(),null}function Ds(){if(Xi!==null){var e=Ti(jl),n=gn.transition,a=Ie;try{if(gn.transition=null,Ie=16>e?16:e,Xi===null)var h=!1;else{if(e=Xi,Xi=null,jl=0,(je&6)!==0)throw Error(r(331));var m=je;for(je|=4,se=e.current;se!==null;){var v=se,S=v.child;if((se.flags&16)!==0){var T=v.deletions;if(T!==null){for(var N=0;N<T.length;N++){var H=T[N];for(se=H;se!==null;){var Q=se;switch(Q.tag){case 0:case 11:case 15:ea(8,Q,v)}var Y=Q.child;if(Y!==null)Y.return=Q,se=Y;else for(;se!==null;){Q=se;var J=Q.sibling,ie=Q.return;if(jd(Q),Q===H){se=null;break}if(J!==null){J.return=ie,se=J;break}se=ie}}}var oe=v.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var lt=ae.sibling;ae.sibling=null,ae=lt}while(ae!==null)}}se=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,se=S;else e:for(;se!==null;){if(v=se,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ea(9,v,v.return)}var D=v.sibling;if(D!==null){D.return=v.return,se=D;break e}se=v.return}}var j=e.current;for(se=j;se!==null;){S=se;var U=S.child;if((S.subtreeFlags&2064)!==0&&U!==null)U.return=S,se=U;else e:for(S=j;se!==null;){if(T=se,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Ol(9,T)}}catch(ce){ot(T,T.return,ce)}if(T===S){se=null;break e}var ee=T.sibling;if(ee!==null){ee.return=T.return,se=ee;break e}se=T.return}}if(je=m,Gi(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(mr,e)}catch{}h=!0}return h}finally{Ie=a,gn.transition=n}}return!1}function Qd(e,n,a){n=js(a,n),n=md(e,n,1),e=Ji(e,n,1),n=Bt(),e!==null&&(Gt(e,1,n),Wt(e,n))}function ot(e,n,a){if(e.tag===3)Qd(e,e,a);else for(;n!==null;){if(n.tag===3){Qd(n,e,a);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Yi===null||!Yi.has(h))){e=js(a,e),e=_d(n,e,1),n=Ji(n,e,1),e=Bt(),n!==null&&(Gt(n,1,e),Wt(n,e));break}}n=n.return}}function um(e,n,a){var h=e.pingCache;h!==null&&h.delete(n),n=Bt(),e.pingedLanes|=e.suspendedLanes&a,vt===e&&(St&a)===a&&(mt===4||mt===3&&(St&130023424)===St&&500>et()-Pc?zr(e,0):Cc|=a),Wt(e,n)}function Yd(e,n){n===0&&((e.mode&1)===0?n=1:(n=Pi,Pi<<=1,(Pi&130023424)===0&&(Pi=4194304)));var a=Bt();e=hi(e,n),e!==null&&(Gt(e,n,a),Wt(e,a))}function cm(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Yd(e,a)}function hm(e,n){var a=0;switch(e.tag){case 13:var h=e.stateNode,m=e.memoizedState;m!==null&&(a=m.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(r(314))}h!==null&&h.delete(n),Yd(e,a)}var Xd;Xd=function(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps||$t.current)Zt=!0;else{if((e.lanes&a)===0&&(n.flags&128)===0)return Zt=!1,Yp(e,n,a);Zt=(e.flags&131072)!==0}else Zt=!1,Xe&&(n.flags&1048576)!==0&&Ah(n,fl,n.index);switch(n.lanes=0,n.tag){case 2:var h=n.type;El(e,n),e=n.pendingProps;var m=Ps(n,Ot.current);Ns(n,a),m=rc(null,n,h,e,m,a);var v=sc();return n.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ft(h)?(v=!0,cl(n)):v=!1,n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Qu(n),m.updater=Cl,n.stateNode=m,m._reactInternals=n,hc(n,h,e,a),n=mc(null,n,h,!0,v,a)):(n.tag=0,Xe&&v&&$u(n),zt(null,n,m,a),n=n.child),n;case 16:h=n.elementType;e:{switch(El(e,n),e=n.pendingProps,m=h._init,h=m(h._payload),n.type=h,m=n.tag=fm(h),e=Cn(h,e),m){case 0:n=pc(null,n,h,e,a);break e;case 1:n=Ld(null,n,h,e,a);break e;case 11:n=wd(null,n,h,e,a);break e;case 14:n=xd(null,n,h,Cn(h.type,e),a);break e}throw Error(r(306,h,""))}return n;case 0:return h=n.type,m=n.pendingProps,m=n.elementType===h?m:Cn(h,m),pc(e,n,h,m,a);case 1:return h=n.type,m=n.pendingProps,m=n.elementType===h?m:Cn(h,m),Ld(e,n,h,m,a);case 3:e:{if(Cd(n),e===null)throw Error(r(387));h=n.pendingProps,v=n.memoizedState,m=v.element,$h(e,n),yl(n,h,null,a);var S=n.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){m=js(Error(r(423)),n),n=Pd(e,n,h,a,m);break e}else if(h!==m){m=js(Error(r(424)),n),n=Pd(e,n,h,a,m);break e}else for(nn=Fn(n.stateNode.containerInfo.firstChild),tn=n,Xe=!0,Ln=null,a=Dh(n,null,h,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Os(),h===m){n=fi(e,n,a);break e}zt(e,n,h,a)}n=n.child}return n;case 5:return Hh(n),e===null&&Hu(n),h=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,S=m.children,Ee(h,m)?S=null:v!==null&&Ee(h,v)&&(n.flags|=32),bd(e,n),zt(e,n,S,a),n.child;case 6:return e===null&&Hu(n),null;case 13:return Ed(e,n,a);case 4:return Yu(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Rs(n,null,h,a):zt(e,n,h,a),n.child;case 11:return h=n.type,m=n.pendingProps,m=n.elementType===h?m:Cn(h,m),wd(e,n,h,m,a);case 7:return zt(e,n,n.pendingProps,a),n.child;case 8:return zt(e,n,n.pendingProps.children,a),n.child;case 12:return zt(e,n,n.pendingProps.children,a),n.child;case 10:e:{if(h=n.type._context,m=n.pendingProps,v=n.memoizedProps,S=m.value,Ke(_l,h._currentValue),h._currentValue=S,v!==null)if(Xt(v.value,S)){if(v.children===m.children&&!$t.current){n=fi(e,n,a);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var T=v.dependencies;if(T!==null){S=v.child;for(var N=T.firstContext;N!==null;){if(N.context===h){if(v.tag===1){N=di(-1,a&-a),N.tag=2;var H=v.updateQueue;if(H!==null){H=H.shared;var Q=H.pending;Q===null?N.next=N:(N.next=Q.next,Q.next=N),H.pending=N}}v.lanes|=a,N=v.alternate,N!==null&&(N.lanes|=a),Ku(v.return,a,n),T.lanes|=a;break}N=N.next}}else if(v.tag===10)S=v.type===n.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(r(341));S.lanes|=a,T=S.alternate,T!==null&&(T.lanes|=a),Ku(S,a,n),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===n){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}zt(e,n,m.children,a),n=n.child}return n;case 9:return m=n.type,h=n.pendingProps.children,Ns(n,a),m=mn(m),h=h(m),n.flags|=1,zt(e,n,h,a),n.child;case 14:return h=n.type,m=Cn(h,n.pendingProps),m=Cn(h.type,m),xd(e,n,h,m,a);case 15:return Sd(e,n,n.type,n.pendingProps,a);case 17:return h=n.type,m=n.pendingProps,m=n.elementType===h?m:Cn(h,m),El(e,n),n.tag=1,Ft(h)?(e=!0,cl(n)):e=!1,Ns(n,a),fd(n,h,m),hc(n,h,m,a),mc(null,n,h,!0,e,a);case 19:return Od(e,n,a);case 22:return kd(e,n,a)}throw Error(r(156,n.tag))};function ef(e,n){return Ba(e,n)}function dm(e,n,a,h){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,n,a,h){return new dm(e,n,a,h)}function jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fm(e){if(typeof e=="function")return jc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Me)return 11;if(e===Lt)return 14}return 2}function nr(e,n){var a=e.alternate;return a===null?(a=vn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Dl(e,n,a,h,m,v){var S=2;if(h=e,typeof e=="function")jc(e)&&(S=1);else if(typeof e=="string")S=5;else e:switch(e){case be:return Dr(a.children,m,v,n);case Be:S=8,m|=8;break;case qe:return e=vn(12,a,n,m|2),e.elementType=qe,e.lanes=v,e;case De:return e=vn(13,a,n,m),e.elementType=De,e.lanes=v,e;case Fe:return e=vn(19,a,n,m),e.elementType=Fe,e.lanes=v,e;case Ue:return Ul(a,m,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ne:S=10;break e;case Ne:S=9;break e;case Me:S=11;break e;case Lt:S=14;break e;case Pe:S=16,h=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=vn(S,a,n,m),n.elementType=e,n.type=h,n.lanes=v,n}function Dr(e,n,a,h){return e=vn(7,e,h,n),e.lanes=a,e}function Ul(e,n,a,h){return e=vn(22,e,h,n),e.elementType=Ue,e.lanes=a,e.stateNode={isHidden:!1},e}function Mc(e,n,a){return e=vn(6,e,null,n),e.lanes=a,e}function zc(e,n,a){return n=vn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function pm(e,n,a,h,m){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ei(0),this.expirationTimes=Ei(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Bc(e,n,a,h,m,v,S,T,N){return e=new pm(e,n,a,T,N),n===1?(n=1,v===!0&&(n|=8)):n=0,v=vn(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qu(v),e}function mm(e,n,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:h==null?null:""+h,children:e,containerInfo:n,implementation:a}}function tf(e){if(!e)return qi;e=e._reactInternals;e:{if(In(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ft(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var a=e.type;if(Ft(a))return Th(e,a,n)}return n}function nf(e,n,a,h,m,v,S,T,N){return e=Bc(a,h,!0,e,m,v,S,T,N),e.context=tf(null),a=e.current,h=Bt(),m=er(a),v=di(h,m),v.callback=n??null,Ji(a,v,m),e.current.lanes=m,Gt(e,m,h),Wt(e,h),e}function $l(e,n,a,h){var m=n.current,v=Bt(),S=er(m);return a=tf(a),n.context===null?n.context=a:n.pendingContext=a,n=di(v,S),n.payload={element:e},h=h===void 0?null:h,h!==null&&(n.callback=h),e=Ji(m,n,S),e!==null&&(Tn(e,m,S,v),vl(e,m,S)),S}function Fl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rf(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Dc(e,n){rf(e,n),(e=e.alternate)&&rf(e,n)}function _m(){return null}var sf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Uc(e){this._internalRoot=e}Zl.prototype.render=Uc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));$l(e,n,null,null)},Zl.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Mr(function(){$l(null,e,null,null)}),n[$e]=null}};function Zl(e){this._internalRoot=e}Zl.prototype.unstable_scheduleHydration=function(e){if(e){var n=as();e={blockedOn:null,target:e,priority:n};for(var a=0;a<dt.length&&n!==0&&n<dt[a].priority;a++);dt.splice(a,0,e),a===0&&ls(e)}};function $c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function of(){}function gm(e,n,a,h,m){if(m){if(typeof h=="function"){var v=h;h=function(){var H=Fl(S);v.call(H)}}var S=nf(n,h,e,0,null,!1,!1,"",of);return e._reactRootContainer=S,e[$e]=S.current,Fi(e.nodeType===8?e.parentNode:e),Mr(),S}for(;m=e.lastChild;)e.removeChild(m);if(typeof h=="function"){var T=h;h=function(){var H=Fl(N);T.call(H)}}var N=Bc(e,0,!1,null,null,!1,!1,"",of);return e._reactRootContainer=N,e[$e]=N.current,Fi(e.nodeType===8?e.parentNode:e),Mr(function(){$l(n,N,a,h)}),N}function Wl(e,n,a,h,m){var v=a._reactRootContainer;if(v){var S=v;if(typeof m=="function"){var T=m;m=function(){var N=Fl(S);T.call(N)}}$l(n,S,e,m)}else S=gm(a,n,e,m,h);return Fl(S)}ss=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var a=Le(n.pendingLanes);a!==0&&(wn(n,a|1),Wt(n,et()),(je&6)===0&&(Bs=et()+500,Gi()))}break;case 13:Mr(function(){var h=hi(e,1);if(h!==null){var m=Bt();Tn(h,e,1,m)}}),Dc(e,1)}},Jn=function(e){if(e.tag===13){var n=hi(e,134217728);if(n!==null){var a=Bt();Tn(n,e,134217728,a)}Dc(e,134217728)}},os=function(e){if(e.tag===13){var n=er(e),a=hi(e,n);if(a!==null){var h=Bt();Tn(a,e,n,h)}Dc(e,n)}},as=function(){return Ie},gr=function(e,n){var a=Ie;try{return Ie=e,n()}finally{Ie=a}},Yr=function(e,n,a){switch(n){case"input":if(ur(e,a),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<a.length;n++){var h=a[n];if(h!==e&&h.form===e.form){var m=Ls(h);if(!m)throw Error(r(90));wi(h),ur(h,m)}}}break;case"textarea":La(e,a);break;case"select":n=a.value,n!=null&&Nn(e,!!a.multiple,n,!1)}},Aa=Ac,Na=Mr;var vm={usingClientEntryPoint:!1,Events:[oi,ai,Ls,Oa,Ra,Ac]},ra={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ym={bundleType:ra.bundleType,version:ra.version,rendererPackageName:ra.rendererPackageName,rendererConfig:ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ma(e),e===null?null:e.stateNode},findFiberByHostInstance:ra.findFiberByHostInstance||_m,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{mr=Vl.inject(ym),qt=Vl}catch{}}return Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vm,Vt.createPortal=function(e,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(n))throw Error(r(200));return mm(e,n,null,a)},Vt.createRoot=function(e,n){if(!$c(e))throw Error(r(299));var a=!1,h="",m=sf;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),n=Bc(e,1,!1,null,null,a,!1,h,m),e[$e]=n.current,Fi(e.nodeType===8?e.parentNode:e),new Uc(n)},Vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Ma(n),e=e===null?null:e.stateNode,e},Vt.flushSync=function(e){return Mr(e)},Vt.hydrate=function(e,n,a){if(!Hl(n))throw Error(r(200));return Wl(null,e,n,!0,a)},Vt.hydrateRoot=function(e,n,a){if(!$c(e))throw Error(r(405));var h=a!=null&&a.hydratedSources||null,m=!1,v="",S=sf;if(a!=null&&(a.unstable_strictMode===!0&&(m=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),n=nf(n,null,e,1,a??null,m,!1,v,S),e[$e]=n.current,Fi(e),h)for(e=0;e<h.length;e++)a=h[e],m=a._getVersion,m=m(a._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[a,m]:n.mutableSourceEagerHydrationData.push(a,m);return new Zl(n)},Vt.render=function(e,n,a){if(!Hl(n))throw Error(r(200));return Wl(null,e,n,!1,a)},Vt.unmountComponentAtNode=function(e){if(!Hl(e))throw Error(r(40));return e._reactRootContainer?(Mr(function(){Wl(null,null,e,!1,function(){e._reactRootContainer=null,e[$e]=null})}),!0):!1},Vt.unstable_batchedUpdates=Ac,Vt.unstable_renderSubtreeIntoContainer=function(e,n,a,h){if(!Hl(a))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Wl(e,n,a,!1,h)},Vt.version="18.3.1-next-f1338f8080-20240426",Vt}var pf;function Xf(){if(pf)return Hc.exports;pf=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(i){console.error(i)}}return o(),Hc.exports=Em(),Hc.exports}var mf;function Tm(){if(mf)return ql;mf=1;var o=Xf();return ql.createRoot=o.createRoot,ql.hydrateRoot=o.hydrateRoot,ql}var Om=Tm();const Rm=vh(Om);var Am=Xf();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pa(){return pa=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(o[u]=r[u])}return o},pa.apply(this,arguments)}var or;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(or||(or={}));const _f="popstate";function Nm(o){o===void 0&&(o={});function i(u,f){let{pathname:l,search:d,hash:_}=u.location;return nh("",{pathname:l,search:d,hash:_},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function r(u,f){return typeof f=="string"?f:nu(f)}return jm(i,r,null,o)}function rt(o,i){if(o===!1||o===null||typeof o>"u")throw new Error(i)}function wh(o,i){if(!o){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Im(){return Math.random().toString(36).substr(2,8)}function gf(o,i){return{usr:o.state,key:o.key,idx:i}}function nh(o,i,r,u){return r===void 0&&(r=null),pa({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof i=="string"?Xs(i):i,{state:r,key:i&&i.key||u||Im()})}function nu(o){let{pathname:i="/",search:r="",hash:u=""}=o;return r&&r!=="?"&&(i+=r.charAt(0)==="?"?r:"?"+r),u&&u!=="#"&&(i+=u.charAt(0)==="#"?u:"#"+u),i}function Xs(o){let i={};if(o){let r=o.indexOf("#");r>=0&&(i.hash=o.substr(r),o=o.substr(0,r));let u=o.indexOf("?");u>=0&&(i.search=o.substr(u),o=o.substr(0,u)),o&&(i.pathname=o)}return i}function jm(o,i,r,u){u===void 0&&(u={});let{window:f=document.defaultView,v5Compat:l=!1}=u,d=f.history,_=or.Pop,g=null,w=x();w==null&&(w=0,d.replaceState(pa({},d.state,{idx:w}),""));function x(){return(d.state||{idx:null}).idx}function k(){_=or.Pop;let M=x(),Z=M==null?null:M-w;w=M,g&&g({action:_,location:R.location,delta:Z})}function C(M,Z){_=or.Push;let z=nh(R.location,M,Z);w=x()+1;let $=gf(z,w),X=R.createHref(z);try{d.pushState($,"",X)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;f.location.assign(X)}l&&g&&g({action:_,location:R.location,delta:1})}function P(M,Z){_=or.Replace;let z=nh(R.location,M,Z);w=x();let $=gf(z,w),X=R.createHref(z);d.replaceState($,"",X),l&&g&&g({action:_,location:R.location,delta:0})}function A(M){let Z=f.location.origin!=="null"?f.location.origin:f.location.href,z=typeof M=="string"?M:nu(M);return z=z.replace(/ $/,"%20"),rt(Z,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,Z)}let R={get action(){return _},get location(){return o(f,d)},listen(M){if(g)throw new Error("A history only accepts one active listener");return f.addEventListener(_f,k),g=M,()=>{f.removeEventListener(_f,k),g=null}},createHref(M){return i(f,M)},createURL:A,encodeLocation(M){let Z=A(M);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:C,replace:P,go(M){return d.go(M)}};return R}var vf;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(vf||(vf={}));function Mm(o,i,r){return r===void 0&&(r="/"),zm(o,i,r)}function zm(o,i,r,u){let f=typeof i=="string"?Xs(i):i,l=Ys(f.pathname||"/",r);if(l==null)return null;let d=ep(o);Bm(d);let _=null;for(let g=0;_==null&&g<d.length;++g){let w=Km(l);_=qm(d[g],w)}return _}function ep(o,i,r,u){i===void 0&&(i=[]),r===void 0&&(r=[]),u===void 0&&(u="");let f=(l,d,_)=>{let g={relativePath:_===void 0?l.path||"":_,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};g.relativePath.startsWith("/")&&(rt(g.relativePath.startsWith(u),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+u+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(u.length));let w=ar([u,g.relativePath]),x=r.concat(g);l.children&&l.children.length>0&&(rt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),ep(l.children,i,x,w)),!(l.path==null&&!l.index)&&i.push({path:w,score:Wm(w,l.index),routesMeta:x})};return o.forEach((l,d)=>{var _;if(l.path===""||!((_=l.path)!=null&&_.includes("?")))f(l,d);else for(let g of tp(l.path))f(l,d,g)}),i}function tp(o){let i=o.split("/");if(i.length===0)return[];let[r,...u]=i,f=r.endsWith("?"),l=r.replace(/\?$/,"");if(u.length===0)return f?[l,""]:[l];let d=tp(u.join("/")),_=[];return _.push(...d.map(g=>g===""?l:[l,g].join("/"))),f&&_.push(...d),_.map(g=>o.startsWith("/")&&g===""?"/":g)}function Bm(o){o.sort((i,r)=>i.score!==r.score?r.score-i.score:Vm(i.routesMeta.map(u=>u.childrenIndex),r.routesMeta.map(u=>u.childrenIndex)))}const Dm=/^:[\w-]+$/,Um=3,$m=2,Fm=1,Zm=10,Hm=-2,yf=o=>o==="*";function Wm(o,i){let r=o.split("/"),u=r.length;return r.some(yf)&&(u+=Hm),i&&(u+=$m),r.filter(f=>!yf(f)).reduce((f,l)=>f+(Dm.test(l)?Um:l===""?Fm:Zm),u)}function Vm(o,i){return o.length===i.length&&o.slice(0,-1).every((u,f)=>u===i[f])?o[o.length-1]-i[i.length-1]:0}function qm(o,i,r){let{routesMeta:u}=o,f={},l="/",d=[];for(let _=0;_<u.length;++_){let g=u[_],w=_===u.length-1,x=l==="/"?i:i.slice(l.length)||"/",k=ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:w},x),C=g.route;if(!k)return null;Object.assign(f,k.params),d.push({params:f,pathname:ar([l,k.pathname]),pathnameBase:e_(ar([l,k.pathnameBase])),route:C}),k.pathnameBase!=="/"&&(l=ar([l,k.pathnameBase]))}return d}function ih(o,i){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[r,u]=Gm(o.path,o.caseSensitive,o.end),f=i.match(r);if(!f)return null;let l=f[0],d=l.replace(/(.)\/+$/,"$1"),_=f.slice(1);return{params:u.reduce((w,x,k)=>{let{paramName:C,isOptional:P}=x;if(C==="*"){let R=_[k]||"";d=l.slice(0,l.length-R.length).replace(/(.)\/+$/,"$1")}const A=_[k];return P&&!A?w[C]=void 0:w[C]=(A||"").replace(/%2F/g,"/"),w},{}),pathname:l,pathnameBase:d,pattern:o}}function Gm(o,i,r){i===void 0&&(i=!1),r===void 0&&(r=!0),wh(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let u=[],f="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,_,g)=>(u.push({paramName:_,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(u.push({paramName:"*"}),f+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?f+="\\/*$":o!==""&&o!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,i?void 0:"i"),u]}function Km(o){try{return o.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return wh(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),o}}function Ys(o,i){if(i==="/")return o;if(!o.toLowerCase().startsWith(i.toLowerCase()))return null;let r=i.endsWith("/")?i.length-1:i.length,u=o.charAt(r);return u&&u!=="/"?null:o.slice(r)||"/"}const Jm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qm=o=>Jm.test(o);function Ym(o,i){i===void 0&&(i="/");let{pathname:r,search:u="",hash:f=""}=typeof o=="string"?Xs(o):o,l;if(r)if(Qm(r))l=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),wh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+r))}r.startsWith("/")?l=wf(r.substring(1),"/"):l=wf(r,i)}else l=i;return{pathname:l,search:t_(u),hash:n_(f)}}function wf(o,i){let r=i.replace(/\/+$/,"").split("/");return o.split("/").forEach(f=>{f===".."?r.length>1&&r.pop():f!=="."&&r.push(f)}),r.length>1?r.join("/"):"/"}function qc(o,i,r,u){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(u)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xm(o){return o.filter((i,r)=>r===0||i.route.path&&i.route.path.length>0)}function xh(o,i){let r=Xm(o);return i?r.map((u,f)=>f===r.length-1?u.pathname:u.pathnameBase):r.map(u=>u.pathnameBase)}function Sh(o,i,r,u){u===void 0&&(u=!1);let f;typeof o=="string"?f=Xs(o):(f=pa({},o),rt(!f.pathname||!f.pathname.includes("?"),qc("?","pathname","search",f)),rt(!f.pathname||!f.pathname.includes("#"),qc("#","pathname","hash",f)),rt(!f.search||!f.search.includes("#"),qc("#","search","hash",f)));let l=o===""||f.pathname==="",d=l?"/":f.pathname,_;if(d==null)_=r;else{let k=i.length-1;if(!u&&d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),k-=1;f.pathname=C.join("/")}_=k>=0?i[k]:"/"}let g=Ym(f,_),w=d&&d!=="/"&&d.endsWith("/"),x=(l||d===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(w||x)&&(g.pathname+="/"),g}const ar=o=>o.join("/").replace(/\/\/+/g,"/"),e_=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),t_=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,n_=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function i_(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const np=["post","put","patch","delete"];new Set(np);const r_=["get",...np];new Set(r_);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ma(){return ma=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(o[u]=r[u])}return o},ma.apply(this,arguments)}const au=W.createContext(null),ip=W.createContext(null),_i=W.createContext(null),lu=W.createContext(null),gi=W.createContext({outlet:null,matches:[],isDataRoute:!1}),rp=W.createContext(null);function s_(o,i){let{relative:r}=i===void 0?{}:i;eo()||rt(!1);let{basename:u,navigator:f}=W.useContext(_i),{hash:l,pathname:d,search:_}=uu(o,{relative:r}),g=d;return u!=="/"&&(g=d==="/"?u:ar([u,d])),f.createHref({pathname:g,search:_,hash:l})}function eo(){return W.useContext(lu)!=null}function to(){return eo()||rt(!1),W.useContext(lu).location}function sp(o){W.useContext(_i).static||W.useLayoutEffect(o)}function no(){let{isDataRoute:o}=W.useContext(gi);return o?y_():o_()}function o_(){eo()||rt(!1);let o=W.useContext(au),{basename:i,future:r,navigator:u}=W.useContext(_i),{matches:f}=W.useContext(gi),{pathname:l}=to(),d=JSON.stringify(xh(f,r.v7_relativeSplatPath)),_=W.useRef(!1);return sp(()=>{_.current=!0}),W.useCallback(function(w,x){if(x===void 0&&(x={}),!_.current)return;if(typeof w=="number"){u.go(w);return}let k=Sh(w,JSON.parse(d),l,x.relative==="path");o==null&&i!=="/"&&(k.pathname=k.pathname==="/"?i:ar([i,k.pathname])),(x.replace?u.replace:u.push)(k,x.state,x)},[i,u,d,l,o])}function a_(){let{matches:o}=W.useContext(gi),i=o[o.length-1];return i?i.params:{}}function uu(o,i){let{relative:r}=i===void 0?{}:i,{future:u}=W.useContext(_i),{matches:f}=W.useContext(gi),{pathname:l}=to(),d=JSON.stringify(xh(f,u.v7_relativeSplatPath));return W.useMemo(()=>Sh(o,JSON.parse(d),l,r==="path"),[o,d,l,r])}function l_(o,i){return u_(o,i)}function u_(o,i,r,u){eo()||rt(!1);let{navigator:f}=W.useContext(_i),{matches:l}=W.useContext(gi),d=l[l.length-1],_=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let w=to(),x;if(i){var k;let M=typeof i=="string"?Xs(i):i;g==="/"||(k=M.pathname)!=null&&k.startsWith(g)||rt(!1),x=M}else x=w;let C=x.pathname||"/",P=C;if(g!=="/"){let M=g.replace(/^\//,"").split("/");P="/"+C.replace(/^\//,"").split("/").slice(M.length).join("/")}let A=Mm(o,{pathname:P}),R=p_(A&&A.map(M=>Object.assign({},M,{params:Object.assign({},_,M.params),pathname:ar([g,f.encodeLocation?f.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:ar([g,f.encodeLocation?f.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,r,u);return i&&R?W.createElement(lu.Provider,{value:{location:ma({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:or.Pop}},R):R}function c_(){let o=v_(),i=i_(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),r=o instanceof Error?o.stack:null,f={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},i),r?W.createElement("pre",{style:f},r):null,null)}const h_=W.createElement(c_,null);class d_ extends W.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,r){return r.location!==i.location||r.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:r.error,location:r.location,revalidation:i.revalidation||r.revalidation}}componentDidCatch(i,r){console.error("React Router caught the following error during render",i,r)}render(){return this.state.error!==void 0?W.createElement(gi.Provider,{value:this.props.routeContext},W.createElement(rp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f_(o){let{routeContext:i,match:r,children:u}=o,f=W.useContext(au);return f&&f.static&&f.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=r.route.id),W.createElement(gi.Provider,{value:i},u)}function p_(o,i,r,u){var f;if(i===void 0&&(i=[]),r===void 0&&(r=null),u===void 0&&(u=null),o==null){var l;if(!r)return null;if(r.errors)o=r.matches;else if((l=u)!=null&&l.v7_partialHydration&&i.length===0&&!r.initialized&&r.matches.length>0)o=r.matches;else return null}let d=o,_=(f=r)==null?void 0:f.errors;if(_!=null){let x=d.findIndex(k=>k.route.id&&(_==null?void 0:_[k.route.id])!==void 0);x>=0||rt(!1),d=d.slice(0,Math.min(d.length,x+1))}let g=!1,w=-1;if(r&&u&&u.v7_partialHydration)for(let x=0;x<d.length;x++){let k=d[x];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(w=x),k.route.id){let{loaderData:C,errors:P}=r,A=k.route.loader&&C[k.route.id]===void 0&&(!P||P[k.route.id]===void 0);if(k.route.lazy||A){g=!0,w>=0?d=d.slice(0,w+1):d=[d[0]];break}}}return d.reduceRight((x,k,C)=>{let P,A=!1,R=null,M=null;r&&(P=_&&k.route.id?_[k.route.id]:void 0,R=k.route.errorElement||h_,g&&(w<0&&C===0?(w_("route-fallback"),A=!0,M=null):w===C&&(A=!0,M=k.route.hydrateFallbackElement||null)));let Z=i.concat(d.slice(0,C+1)),z=()=>{let $;return P?$=R:A?$=M:k.route.Component?$=W.createElement(k.route.Component,null):k.route.element?$=k.route.element:$=x,W.createElement(f_,{match:k,routeContext:{outlet:x,matches:Z,isDataRoute:r!=null},children:$})};return r&&(k.route.ErrorBoundary||k.route.errorElement||C===0)?W.createElement(d_,{location:r.location,revalidation:r.revalidation,component:R,error:P,children:z(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):z()},null)}var op=(function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o})(op||{}),ap=(function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o})(ap||{});function m_(o){let i=W.useContext(au);return i||rt(!1),i}function __(o){let i=W.useContext(ip);return i||rt(!1),i}function g_(o){let i=W.useContext(gi);return i||rt(!1),i}function lp(o){let i=g_(),r=i.matches[i.matches.length-1];return r.route.id||rt(!1),r.route.id}function v_(){var o;let i=W.useContext(rp),r=__(),u=lp();return i!==void 0?i:(o=r.errors)==null?void 0:o[u]}function y_(){let{router:o}=m_(op.UseNavigateStable),i=lp(ap.UseNavigateStable),r=W.useRef(!1);return sp(()=>{r.current=!0}),W.useCallback(function(f,l){l===void 0&&(l={}),r.current&&(typeof f=="number"?o.navigate(f):o.navigate(f,ma({fromRouteId:i},l)))},[o,i])}const xf={};function w_(o,i,r){xf[o]||(xf[o]=!0)}function x_(o,i){o==null||o.v7_startTransition,o==null||o.v7_relativeSplatPath}function S_(o){let{to:i,replace:r,state:u,relative:f}=o;eo()||rt(!1);let{future:l,static:d}=W.useContext(_i),{matches:_}=W.useContext(gi),{pathname:g}=to(),w=no(),x=Sh(i,xh(_,l.v7_relativeSplatPath),g,f==="path"),k=JSON.stringify(x);return W.useEffect(()=>w(JSON.parse(k),{replace:r,state:u,relative:f}),[w,k,f,r,u]),null}function Fr(o){rt(!1)}function k_(o){let{basename:i="/",children:r=null,location:u,navigationType:f=or.Pop,navigator:l,static:d=!1,future:_}=o;eo()&&rt(!1);let g=i.replace(/^\/*/,"/"),w=W.useMemo(()=>({basename:g,navigator:l,static:d,future:ma({v7_relativeSplatPath:!1},_)}),[g,_,l,d]);typeof u=="string"&&(u=Xs(u));let{pathname:x="/",search:k="",hash:C="",state:P=null,key:A="default"}=u,R=W.useMemo(()=>{let M=Ys(x,g);return M==null?null:{location:{pathname:M,search:k,hash:C,state:P,key:A},navigationType:f}},[g,x,k,C,P,A,f]);return R==null?null:W.createElement(_i.Provider,{value:w},W.createElement(lu.Provider,{children:r,value:R}))}function b_(o){let{children:i,location:r}=o;return l_(rh(i),r)}new Promise(()=>{});function rh(o,i){i===void 0&&(i=[]);let r=[];return W.Children.forEach(o,(u,f)=>{if(!W.isValidElement(u))return;let l=[...i,f];if(u.type===W.Fragment){r.push.apply(r,rh(u.props.children,l));return}u.type!==Fr&&rt(!1),!u.props.index||!u.props.children||rt(!1);let d={id:u.props.id||l.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(d.children=rh(u.props.children,l)),r.push(d)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(o[u]=r[u])}return o},iu.apply(this,arguments)}function up(o,i){if(o==null)return{};var r={},u=Object.keys(o),f,l;for(l=0;l<u.length;l++)f=u[l],!(i.indexOf(f)>=0)&&(r[f]=o[f]);return r}function L_(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function C_(o,i){return o.button===0&&(!i||i==="_self")&&!L_(o)}const P_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],E_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],T_="6";try{window.__reactRouterVersion=T_}catch{}const O_=W.createContext({isTransitioning:!1}),R_="startTransition",Sf=Lm[R_];function A_(o){let{basename:i,children:r,future:u,window:f}=o,l=W.useRef();l.current==null&&(l.current=Nm({window:f,v5Compat:!0}));let d=l.current,[_,g]=W.useState({action:d.action,location:d.location}),{v7_startTransition:w}=u||{},x=W.useCallback(k=>{w&&Sf?Sf(()=>g(k)):g(k)},[g,w]);return W.useLayoutEffect(()=>d.listen(x),[d,x]),W.useEffect(()=>x_(u),[u]),W.createElement(k_,{basename:i,children:r,location:_.location,navigationType:_.action,navigator:d,future:u})}const N_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j_=W.forwardRef(function(i,r){let{onClick:u,relative:f,reloadDocument:l,replace:d,state:_,target:g,to:w,preventScrollReset:x,viewTransition:k}=i,C=up(i,P_),{basename:P}=W.useContext(_i),A,R=!1;if(typeof w=="string"&&I_.test(w)&&(A=w,N_))try{let $=new URL(window.location.href),X=w.startsWith("//")?new URL($.protocol+w):new URL(w),fe=Ys(X.pathname,P);X.origin===$.origin&&fe!=null?w=fe+X.search+X.hash:R=!0}catch{}let M=s_(w,{relative:f}),Z=B_(w,{replace:d,state:_,target:g,preventScrollReset:x,relative:f,viewTransition:k});function z($){u&&u($),$.defaultPrevented||Z($)}return W.createElement("a",iu({},C,{href:A||M,onClick:R||l?u:z,ref:r,target:g}))}),M_=W.forwardRef(function(i,r){let{"aria-current":u="page",caseSensitive:f=!1,className:l="",end:d=!1,style:_,to:g,viewTransition:w,children:x}=i,k=up(i,E_),C=uu(g,{relative:k.relative}),P=to(),A=W.useContext(ip),{navigator:R,basename:M}=W.useContext(_i),Z=A!=null&&D_(C)&&w===!0,z=R.encodeLocation?R.encodeLocation(C).pathname:C.pathname,$=P.pathname,X=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;f||($=$.toLowerCase(),X=X?X.toLowerCase():null,z=z.toLowerCase()),X&&M&&(X=Ys(X,M)||X);const fe=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let pe=$===z||!d&&$.startsWith(z)&&$.charAt(fe)==="/",be=X!=null&&(X===z||!d&&X.startsWith(z)&&X.charAt(z.length)==="/"),Be={isActive:pe,isPending:be,isTransitioning:Z},qe=pe?u:void 0,ne;typeof l=="function"?ne=l(Be):ne=[l,pe?"active":null,be?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let Ne=typeof _=="function"?_(Be):_;return W.createElement(j_,iu({},k,{"aria-current":qe,className:ne,ref:r,style:Ne,to:g,viewTransition:w}),typeof x=="function"?x(Be):x)});var sh;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(sh||(sh={}));var kf;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(kf||(kf={}));function z_(o){let i=W.useContext(au);return i||rt(!1),i}function B_(o,i){let{target:r,replace:u,state:f,preventScrollReset:l,relative:d,viewTransition:_}=i===void 0?{}:i,g=no(),w=to(),x=uu(o,{relative:d});return W.useCallback(k=>{if(C_(k,r)){k.preventDefault();let C=u!==void 0?u:nu(w)===nu(x);g(o,{replace:C,state:f,preventScrollReset:l,relative:d,viewTransition:_})}},[w,g,x,u,f,r,o,l,d,_])}function D_(o,i){i===void 0&&(i={});let r=W.useContext(O_);r==null&&rt(!1);let{basename:u}=z_(sh.useViewTransitionState),f=uu(o,{relative:i.relative});if(!r.isTransitioning)return!1;let l=Ys(r.currentLocation.pathname,u)||r.currentLocation.pathname,d=Ys(r.nextLocation.pathname,u)||r.nextLocation.pathname;return ih(f.pathname,d)!=null||ih(f.pathname,l)!=null}function cu(o,i){var r={};for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&i.indexOf(u)<0&&(r[u]=o[u]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,u=Object.getOwnPropertySymbols(o);f<u.length;f++)i.indexOf(u[f])<0&&Object.prototype.propertyIsEnumerable.call(o,u[f])&&(r[u[f]]=o[u[f]]);return r}function U_(o,i,r,u){function f(l){return l instanceof r?l:new r(function(d){d(l)})}return new(r||(r=Promise))(function(l,d){function _(x){try{w(u.next(x))}catch(k){d(k)}}function g(x){try{w(u.throw(x))}catch(k){d(k)}}function w(x){x.done?l(x.value):f(x.value).then(_,g)}w((u=u.apply(o,i||[])).next())})}const $_=o=>o?(...i)=>o(...i):(...i)=>fetch(...i);class kh extends Error{constructor(i,r="FunctionsError",u){super(i),this.name=r,this.context=u}}class F_ extends kh{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class bf extends kh{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class Lf extends kh{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var oh;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(oh||(oh={}));class Z_{constructor(i,{headers:r={},customFetch:u,region:f=oh.Any}={}){this.url=i,this.headers=r,this.region=f,this.fetch=$_(u)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i){return U_(this,arguments,void 0,function*(r,u={}){var f;let l,d;try{const{headers:_,method:g,body:w,signal:x,timeout:k}=u;let C={},{region:P}=u;P||(P=this.region);const A=new URL(`${this.url}/${r}`);P&&P!=="any"&&(C["x-region"]=P,A.searchParams.set("forceFunctionRegion",P));let R;w&&(_&&!Object.prototype.hasOwnProperty.call(_,"Content-Type")||!_)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(C["Content-Type"]="application/octet-stream",R=w):typeof w=="string"?(C["Content-Type"]="text/plain",R=w):typeof FormData<"u"&&w instanceof FormData?R=w:(C["Content-Type"]="application/json",R=JSON.stringify(w)):w&&typeof w!="string"&&!(typeof Blob<"u"&&w instanceof Blob)&&!(w instanceof ArrayBuffer)&&!(typeof FormData<"u"&&w instanceof FormData)?R=JSON.stringify(w):R=w;let M=x;k&&(d=new AbortController,l=setTimeout(()=>d.abort(),k),x?(M=d.signal,x.addEventListener("abort",()=>d.abort())):M=d.signal);const Z=yield this.fetch(A.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},C),this.headers),_),body:R,signal:M}).catch(fe=>{throw new F_(fe)}),z=Z.headers.get("x-relay-error");if(z&&z==="true")throw new bf(Z);if(!Z.ok)throw new Lf(Z);let $=((f=Z.headers.get("Content-Type"))!==null&&f!==void 0?f:"text/plain").split(";")[0].trim(),X;return $==="application/json"?X=yield Z.json():$==="application/octet-stream"||$==="application/pdf"?X=yield Z.blob():$==="text/event-stream"?X=Z:$==="multipart/form-data"?X=yield Z.formData():X=yield Z.text(),{data:X,error:null,response:Z}}catch(_){return{data:null,error:_,response:_ instanceof Lf||_ instanceof bf?_.context:void 0}}finally{l&&clearTimeout(l)}})}}var H_=class extends Error{constructor(o){super(o.message),this.name="PostgrestError",this.details=o.details,this.hint=o.hint,this.code=o.code}},W_=class{constructor(o){var i,r,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(i=o.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=o.signal,this.isMaybeSingle=(r=o.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(u=o.urlLengthLimit)!==null&&u!==void 0?u:8e3,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=new Headers(this.headers),this.headers.set(o,i),this}then(o,i){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let d=null,_=null,g=null,w=l.status,x=l.statusText;if(l.ok){var k,C;if(r.method!=="HEAD"){var P;const Z=await l.text();Z===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((P=r.headers.get("Accept"))===null||P===void 0)&&P.includes("application/vnd.pgrst.plan+text"))?_=Z:_=JSON.parse(Z))}const R=(k=r.headers.get("Prefer"))===null||k===void 0?void 0:k.match(/count=(exact|planned|estimated)/),M=(C=l.headers.get("content-range"))===null||C===void 0?void 0:C.split("/");R&&M&&M.length>1&&(g=parseInt(M[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(_)&&(_.length>1?(d={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,g=null,w=406,x="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{var A;const R=await l.text();try{d=JSON.parse(R),Array.isArray(d)&&l.status===404&&(_=[],d=null,w=200,x="OK")}catch{l.status===404&&R===""?(w=204,x="No Content"):d={message:R}}if(d&&r.isMaybeSingle&&(!(d==null||(A=d.details)===null||A===void 0)&&A.includes("0 rows"))&&(d=null,w=200,x="OK"),d&&r.shouldThrowOnError)throw new H_(d)}return{error:d,data:_,count:g,status:w,statusText:x}});return this.shouldThrowOnError||(f=f.catch(l=>{var d;let _="",g="",w="";const x=l==null?void 0:l.cause;if(x){var k,C,P,A;const Z=(k=x==null?void 0:x.message)!==null&&k!==void 0?k:"",z=(C=x==null?void 0:x.code)!==null&&C!==void 0?C:"";_=`${(P=l==null?void 0:l.name)!==null&&P!==void 0?P:"FetchError"}: ${l==null?void 0:l.message}`,_+=`

Caused by: ${(A=x==null?void 0:x.name)!==null&&A!==void 0?A:"Error"}: ${Z}`,z&&(_+=` (${z})`),x!=null&&x.stack&&(_+=`
${x.stack}`)}else{var R;_=(R=l==null?void 0:l.stack)!==null&&R!==void 0?R:""}const M=this.url.toString().length;return(l==null?void 0:l.name)==="AbortError"||(l==null?void 0:l.code)==="ABORT_ERR"?(w="",g="Request was aborted (timeout or manual cancellation)",M>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${M} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((x==null?void 0:x.name)==="HeadersOverflowError"||(x==null?void 0:x.code)==="UND_ERR_HEADERS_OVERFLOW")&&(w="",g="HTTP headers exceeded server limits (typically 16KB)",M>this.urlLengthLimit&&(g+=`. Your request URL is ${M} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,details:_,hint:g,code:w},data:null,count:null,status:0,statusText:""}})),f.then(o,i)}returns(){return this}overrideTypes(){return this}},V_=class extends W_{select(o){let i=!1;const r=(o??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:i=!0,nullsFirst:r,foreignTable:u,referencedTable:f=u}={}){const l=f?`${f}.order`:"order",d=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${d?`${d},`:""}${o}.${i?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:i,referencedTable:r=i}={}){const u=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(u,`${o}`),this}range(o,i,{foreignTable:r,referencedTable:u=r}={}){const f=typeof u>"u"?"offset":`${u}.offset`,l=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this.url.searchParams.set(l,`${i-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:i=!1,settings:r=!1,buffers:u=!1,wal:f=!1,format:l="text"}={}){var d;const _=[o?"analyze":null,i?"verbose":null,r?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),g=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${_};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};const Cf=new RegExp("[,()]");var Vs=class extends V_{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}regexMatch(o,i){return this.url.searchParams.append(o,`match.${i}`),this}regexIMatch(o,i){return this.url.searchParams.append(o,`imatch.${i}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}isDistinct(o,i){return this.url.searchParams.append(o,`isdistinct.${i}`),this}in(o,i){const r=Array.from(new Set(i)).map(u=>typeof u=="string"&&Cf.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`in.(${r})`),this}notIn(o,i){const r=Array.from(new Set(i)).map(u=>typeof u=="string"&&Cf.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`not.in.(${r})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:r,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(o,`${f}fts${l}.${i}`),this}match(o){return Object.entries(o).forEach(([i,r])=>{this.url.searchParams.append(i,`eq.${r}`)}),this}not(o,i,r){return this.url.searchParams.append(o,`not.${i}.${r}`),this}or(o,{foreignTable:i,referencedTable:r=i}={}){const u=r?`${r}.or`:"or";return this.url.searchParams.append(u,`(${o})`),this}filter(o,i,r){return this.url.searchParams.append(o,`${i}.${r}`),this}},q_=class{constructor(o,{headers:i={},schema:r,fetch:u,urlLengthLimit:f=8e3}){this.url=o,this.headers=new Headers(i),this.schema=r,this.fetch=u,this.urlLengthLimit=f}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(o,i){const{head:r=!1,count:u}=i??{},f=r?"HEAD":"GET";let l=!1;const d=(o??"*").split("").map(w=>/\s/.test(w)&&!l?"":(w==='"'&&(l=!l),w)).join(""),{url:_,headers:g}=this.cloneRequestState();return _.searchParams.set("select",d),u&&g.append("Prefer",`count=${u}`),new Vs({method:f,url:_,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(o,{count:i,defaultToNull:r=!0}={}){var u;const f="POST",{url:l,headers:d}=this.cloneRequestState();if(i&&d.append("Prefer",`count=${i}`),r||d.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((g,w)=>g.concat(Object.keys(w)),[]);if(_.length>0){const g=[...new Set(_)].map(w=>`"${w}"`);l.searchParams.set("columns",g.join(","))}}return new Vs({method:f,url:l,headers:d,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(o,{onConflict:i,ignoreDuplicates:r=!1,count:u,defaultToNull:f=!0}={}){var l;const d="POST",{url:_,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),i!==void 0&&_.searchParams.set("on_conflict",i),u&&g.append("Prefer",`count=${u}`),f||g.append("Prefer","missing=default"),Array.isArray(o)){const w=o.reduce((x,k)=>x.concat(Object.keys(k)),[]);if(w.length>0){const x=[...new Set(w)].map(k=>`"${k}"`);_.searchParams.set("columns",x.join(","))}}return new Vs({method:d,url:_,headers:g,schema:this.schema,body:o,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(o,{count:i}={}){var r;const u="PATCH",{url:f,headers:l}=this.cloneRequestState();return i&&l.append("Prefer",`count=${i}`),new Vs({method:u,url:f,headers:l,schema:this.schema,body:o,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:o}={}){var i;const r="DELETE",{url:u,headers:f}=this.cloneRequestState();return o&&f.append("Prefer",`count=${o}`),new Vs({method:r,url:u,headers:f,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}};function _a(o){"@babel/helpers - typeof";return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_a(o)}function G_(o,i){if(_a(o)!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var u=r.call(o,i);if(_a(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function K_(o){var i=G_(o,"string");return _a(i)=="symbol"?i:i+""}function J_(o,i,r){return(i=K_(i))in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}function Pf(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);i&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(o,f).enumerable})),r.push.apply(r,u)}return r}function Gl(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?Pf(Object(r),!0).forEach(function(u){J_(o,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):Pf(Object(r)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(r,u))})}return o}var Q_=class cp{constructor(i,{headers:r={},schema:u,fetch:f,timeout:l,urlLengthLimit:d=8e3}={}){this.url=i,this.headers=new Headers(r),this.schemaName=u,this.urlLengthLimit=d;const _=f??globalThis.fetch;l!==void 0&&l>0?this.fetch=(g,w)=>{const x=new AbortController,k=setTimeout(()=>x.abort(),l),C=w==null?void 0:w.signal;if(C){if(C.aborted)return clearTimeout(k),_(g,w);const P=()=>{clearTimeout(k),x.abort()};return C.addEventListener("abort",P,{once:!0}),_(g,Gl(Gl({},w),{},{signal:x.signal})).finally(()=>{clearTimeout(k),C.removeEventListener("abort",P)})}return _(g,Gl(Gl({},w),{},{signal:x.signal})).finally(()=>clearTimeout(k))}:this.fetch=_}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new q_(new URL(`${this.url}/${i}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(i){return new cp(this.url,{headers:this.headers,schema:i,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(i,r={},{head:u=!1,get:f=!1,count:l}={}){var d;let _;const g=new URL(`${this.url}/rpc/${i}`);let w;const x=P=>P!==null&&typeof P=="object"&&(!Array.isArray(P)||P.some(x)),k=u&&Object.values(r).some(x);k?(_="POST",w=r):u||f?(_=u?"HEAD":"GET",Object.entries(r).filter(([P,A])=>A!==void 0).map(([P,A])=>[P,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([P,A])=>{g.searchParams.append(P,A)})):(_="POST",w=r);const C=new Headers(this.headers);return k?C.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&C.set("Prefer",`count=${l}`),new Vs({method:_,url:g,headers:C,schema:this.schemaName,body:w,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}};class Y_{constructor(){}static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const u=r.versions;if(u&&u.node){const f=u.node,l=parseInt(f.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let r=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(r+=`

Suggested solution: ${i.workaround}`),new Error(r)}static createWebSocket(i,r){const u=this.getWebSocketConstructor();return new u(i,r)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const X_="2.95.3",eg=`realtime-js/${X_}`,tg="1.0.0",hp="2.0.0",Ef=hp,ah=1e4,ng=1e3,ig=100;var rr;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(rr||(rr={}));var _t;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(_t||(_t={}));var An;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(An||(An={}));var lh;(function(o){o.websocket="websocket"})(lh||(lh={}));var Hr;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Hr||(Hr={}));class rg{constructor(i){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=i??[]}encode(i,r){if(i.event===this.BROADCAST_EVENT&&!(i.payload instanceof ArrayBuffer)&&typeof i.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(i));let u=[i.join_ref,i.ref,i.topic,i.event,i.payload];return r(JSON.stringify(u))}_binaryEncodeUserBroadcastPush(i){var r;return this._isArrayBuffer((r=i.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(i):this._encodeJsonUserBroadcastPush(i)}_encodeBinaryUserBroadcastPush(i){var r,u;const f=(u=(r=i.payload)===null||r===void 0?void 0:r.payload)!==null&&u!==void 0?u:new ArrayBuffer(0);return this._encodeUserBroadcastPush(i,this.BINARY_ENCODING,f)}_encodeJsonUserBroadcastPush(i){var r,u;const f=(u=(r=i.payload)===null||r===void 0?void 0:r.payload)!==null&&u!==void 0?u:{},d=new TextEncoder().encode(JSON.stringify(f)).buffer;return this._encodeUserBroadcastPush(i,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(i,r,u){var f,l;const d=i.topic,_=(f=i.ref)!==null&&f!==void 0?f:"",g=(l=i.join_ref)!==null&&l!==void 0?l:"",w=i.payload.event,x=this.allowedMetadataKeys?this._pick(i.payload,this.allowedMetadataKeys):{},k=Object.keys(x).length===0?"":JSON.stringify(x);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`ref length ${_.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`userEvent length ${w.length} exceeds maximum of 255`);if(k.length>255)throw new Error(`metadata length ${k.length} exceeds maximum of 255`);const C=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+_.length+d.length+w.length+k.length,P=new ArrayBuffer(this.HEADER_LENGTH+C);let A=new DataView(P),R=0;A.setUint8(R++,this.KINDS.userBroadcastPush),A.setUint8(R++,g.length),A.setUint8(R++,_.length),A.setUint8(R++,d.length),A.setUint8(R++,w.length),A.setUint8(R++,k.length),A.setUint8(R++,r),Array.from(g,Z=>A.setUint8(R++,Z.charCodeAt(0))),Array.from(_,Z=>A.setUint8(R++,Z.charCodeAt(0))),Array.from(d,Z=>A.setUint8(R++,Z.charCodeAt(0))),Array.from(w,Z=>A.setUint8(R++,Z.charCodeAt(0))),Array.from(k,Z=>A.setUint8(R++,Z.charCodeAt(0)));var M=new Uint8Array(P.byteLength+u.byteLength);return M.set(new Uint8Array(P),0),M.set(new Uint8Array(u),P.byteLength),M.buffer}decode(i,r){if(this._isArrayBuffer(i)){let u=this._binaryDecode(i);return r(u)}if(typeof i=="string"){const u=JSON.parse(i),[f,l,d,_,g]=u;return r({join_ref:f,ref:l,topic:d,event:_,payload:g})}return r({})}_binaryDecode(i){const r=new DataView(i),u=r.getUint8(0),f=new TextDecoder;switch(u){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(i,r,f)}}_decodeUserBroadcast(i,r,u){const f=r.getUint8(1),l=r.getUint8(2),d=r.getUint8(3),_=r.getUint8(4);let g=this.HEADER_LENGTH+4;const w=u.decode(i.slice(g,g+f));g=g+f;const x=u.decode(i.slice(g,g+l));g=g+l;const k=u.decode(i.slice(g,g+d));g=g+d;const C=i.slice(g,i.byteLength),P=_===this.JSON_ENCODING?JSON.parse(u.decode(C)):C,A={type:this.BROADCAST_EVENT,event:x,payload:P};return d>0&&(A.meta=JSON.parse(k)),{join_ref:null,ref:null,topic:w,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(i){var r;return i instanceof ArrayBuffer||((r=i==null?void 0:i.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(i,r){return!i||typeof i!="object"?{}:Object.fromEntries(Object.entries(i).filter(([u])=>r.includes(u)))}}class dp{constructor(i,r){this.callback=i,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Je||(Je={}));const Tf=(o,i,r={})=>{var u;const f=(u=r.skipTypes)!==null&&u!==void 0?u:[];return i?Object.keys(i).reduce((l,d)=>(l[d]=sg(d,o,i,f),l),{}):{}},sg=(o,i,r,u)=>{const f=i.find(_=>_.name===o),l=f==null?void 0:f.type,d=r[o];return l&&!u.includes(l)?fp(l,d):uh(d)},fp=(o,i)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return ug(i,r)}switch(o){case Je.bool:return og(i);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return ag(i);case Je.json:case Je.jsonb:return lg(i);case Je.timestamp:return cg(i);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return uh(i);default:return uh(i)}},uh=o=>o,og=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},ag=o=>{if(typeof o=="string"){const i=parseFloat(o);if(!Number.isNaN(i))return i}return o},lg=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch{return o}return o},ug=(o,i)=>{if(typeof o!="string")return o;const r=o.length-1,u=o[r];if(o[0]==="{"&&u==="}"){let l;const d=o.slice(1,r);try{l=JSON.parse("["+d+"]")}catch{l=d?d.split(","):[]}return l.map(_=>fp(i,_))}return o},cg=o=>typeof o=="string"?o.replace(" ","T"):o,pp=o=>{const i=new URL(o);return i.protocol=i.protocol.replace(/^ws/i,"http"),i.pathname=i.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),i.pathname===""||i.pathname==="/"?i.pathname="/api/broadcast":i.pathname=i.pathname+"/api/broadcast",i.href};class Gc{constructor(i,r,u={},f=ah){this.channel=i,this.event=r,this.payload=u,this.timeout=f,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,r){var u;return this._hasReceived(i)&&r((u=this.receivedResp)===null||u===void 0?void 0:u.response),this.recHooks.push({status:i,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:r}){this.recHooks.filter(u=>u.status===i).forEach(u=>u.callback(r))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var Of;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Of||(Of={}));class ha{constructor(i,r){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const u=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(u.state,{},f=>{const{onJoin:l,onLeave:d,onSync:_}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ha.syncState(this.state,f,l,d),this.pendingDiffs.forEach(g=>{this.state=ha.syncDiff(this.state,g,l,d)}),this.pendingDiffs=[],_()}),this.channel._on(u.diff,{},f=>{const{onJoin:l,onLeave:d,onSync:_}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(f):(this.state=ha.syncDiff(this.state,f,l,d),_())}),this.onJoin((f,l,d)=>{this.channel._trigger("presence",{event:"join",key:f,currentPresences:l,newPresences:d})}),this.onLeave((f,l,d)=>{this.channel._trigger("presence",{event:"leave",key:f,currentPresences:l,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,r,u,f){const l=this.cloneDeep(i),d=this.transformState(r),_={},g={};return this.map(l,(w,x)=>{d[w]||(g[w]=x)}),this.map(d,(w,x)=>{const k=l[w];if(k){const C=x.map(M=>M.presence_ref),P=k.map(M=>M.presence_ref),A=x.filter(M=>P.indexOf(M.presence_ref)<0),R=k.filter(M=>C.indexOf(M.presence_ref)<0);A.length>0&&(_[w]=A),R.length>0&&(g[w]=R)}else _[w]=x}),this.syncDiff(l,{joins:_,leaves:g},u,f)}static syncDiff(i,r,u,f){const{joins:l,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return u||(u=()=>{}),f||(f=()=>{}),this.map(l,(_,g)=>{var w;const x=(w=i[_])!==null&&w!==void 0?w:[];if(i[_]=this.cloneDeep(g),x.length>0){const k=i[_].map(P=>P.presence_ref),C=x.filter(P=>k.indexOf(P.presence_ref)<0);i[_].unshift(...C)}u(_,x,g)}),this.map(d,(_,g)=>{let w=i[_];if(!w)return;const x=g.map(k=>k.presence_ref);w=w.filter(k=>x.indexOf(k.presence_ref)<0),i[_]=w,f(_,w,g),w.length===0&&delete i[_]}),i}static map(i,r){return Object.getOwnPropertyNames(i).map(u=>r(u,i[u]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((r,u)=>{const f=i[u];return"metas"in f?r[u]=f.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[u]=f,r},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rf;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Rf||(Rf={}));var da;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(da||(da={}));var mi;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(mi||(mi={}));class Ks{constructor(i,r={config:{}},u){var f,l;if(this.topic=i,this.params=r,this.socket=u,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gc(this,An.join,this.params,this.timeout),this.rejoinTimer=new dp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(An.reply,{},(d,_)=>{this._trigger(this._replyEventName(_),d)}),this.presence=new ha(this),this.broadcastEndpointURL=pp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(f=this.params.config)===null||f===void 0?void 0:f.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(i,r=this.timeout){var u,f,l;if(this.socket.isConnected()||this.socket.connect(),this.state==_t.closed){const{config:{broadcast:d,presence:_,private:g}}=this.params,w=(f=(u=this.bindings.postgres_changes)===null||u===void 0?void 0:u.map(P=>P.filter))!==null&&f!==void 0?f:[],x=!!this.bindings[da.PRESENCE]&&this.bindings[da.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,k={},C={broadcast:d,presence:Object.assign(Object.assign({},_),{enabled:x}),postgres_changes:w,private:g};this.socket.accessTokenValue&&(k.access_token=this.socket.accessTokenValue),this._onError(P=>i==null?void 0:i(mi.CHANNEL_ERROR,P)),this._onClose(()=>i==null?void 0:i(mi.CLOSED)),this.updateJoinPayload(Object.assign({config:C},k)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:P})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),P===void 0){i==null||i(mi.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,M=(A=R==null?void 0:R.length)!==null&&A!==void 0?A:0,Z=[];for(let z=0;z<M;z++){const $=R[z],{filter:{event:X,schema:fe,table:pe,filter:be}}=$,Be=P&&P[z];if(Be&&Be.event===X&&Ks.isFilterValueEqual(Be.schema,fe)&&Ks.isFilterValueEqual(Be.table,pe)&&Ks.isFilterValueEqual(Be.filter,be))Z.push(Object.assign(Object.assign({},$),{id:Be.id}));else{this.unsubscribe(),this.state=_t.errored,i==null||i(mi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Z,i&&i(mi.SUBSCRIBED);return}}).receive("error",P=>{this.state=_t.errored,i==null||i(mi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(P).join(", ")||"error")))}).receive("timeout",()=>{i==null||i(mi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,r={}){return await this.send({type:"presence",event:"track",payload:i},r.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,r,u){return this.state===_t.joined&&i===da.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(i,r,u)}async httpSend(i,r,u={}){var f;if(r==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:r,private:this.private}]})},_=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(f=u.timeout)!==null&&f!==void 0?f:this.timeout);if(_.status===202)return{success:!0};let g=_.statusText;try{const w=await _.json();g=w.error||w.message||g}catch{}return Promise.reject(new Error(g))}async send(i,r={}){var u,f;if(!this._canPush()&&i.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:d}=i,_={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(_.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:_,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:d,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(u=r.timeout)!==null&&u!==void 0?u:this.timeout);return await((f=w.body)===null||f===void 0?void 0:f.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var d,_,g;const w=this._push(i.type,i,r.timeout||this.timeout);i.type==="broadcast"&&!(!((g=(_=(d=this.params)===null||d===void 0?void 0:d.config)===null||_===void 0?void 0:_.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),w.receive("ok",()=>l("ok")),w.receive("error",()=>l("error")),w.receive("timeout",()=>l("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=_t.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(An.close,"leave",this._joinRef())};this.joinPush.destroy();let u=null;return new Promise(f=>{u=new Gc(this,An.leave,{},i),u.receive("ok",()=>{r(),f("ok")}).receive("timeout",()=>{r(),f("timed out")}).receive("error",()=>{f("error")}),u.send(),this._canPush()||u.trigger("ok",{})}).finally(()=>{u==null||u.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_t.closed,this.bindings={}}async _fetchWithTimeout(i,r,u){const f=new AbortController,l=setTimeout(()=>f.abort(),u),d=await this.socket.fetch(i,Object.assign(Object.assign({},r),{signal:f.signal}));return clearTimeout(l),d}_push(i,r,u=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let f=new Gc(this,i,r,u);return this._canPush()?f.send():this._addToPushBuffer(f),f}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>ig){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(i,r,u){return r}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,r,u){var f,l;const d=i.toLocaleLowerCase(),{close:_,error:g,leave:w,join:x}=An;if(u&&[_,g,w,x].indexOf(d)>=0&&u!==this._joinRef())return;let C=this._onMessage(d,r,u);if(r&&!C)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(f=this.bindings.postgres_changes)===null||f===void 0||f.filter(P=>{var A,R,M;return((A=P.filter)===null||A===void 0?void 0:A.event)==="*"||((M=(R=P.filter)===null||R===void 0?void 0:R.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===d}).map(P=>P.callback(C,u)):(l=this.bindings[d])===null||l===void 0||l.filter(P=>{var A,R,M,Z,z,$;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in P){const X=P.id,fe=(A=P.filter)===null||A===void 0?void 0:A.event;return X&&((R=r.ids)===null||R===void 0?void 0:R.includes(X))&&(fe==="*"||(fe==null?void 0:fe.toLocaleLowerCase())===((M=r.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const X=(z=(Z=P==null?void 0:P.filter)===null||Z===void 0?void 0:Z.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return X==="*"||X===(($=r==null?void 0:r.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===d}).map(P=>{if(typeof C=="object"&&"ids"in C){const A=C.data,{schema:R,table:M,commit_timestamp:Z,type:z,errors:$}=A;C=Object.assign(Object.assign({},{schema:R,table:M,commit_timestamp:Z,eventType:z,new:{},old:{},errors:$}),this._getPayloadRecords(A))}P.callback(C,u)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,r,u){const f=i.toLocaleLowerCase(),l={type:f,filter:r,callback:u};return this.bindings[f]?this.bindings[f].push(l):this.bindings[f]=[l],this}_off(i,r){const u=i.toLocaleLowerCase();return this.bindings[u]&&(this.bindings[u]=this.bindings[u].filter(f=>{var l;return!(((l=f.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===u&&Ks.isEqual(f.filter,r))})),this}static isEqual(i,r){if(Object.keys(i).length!==Object.keys(r).length)return!1;for(const u in i)if(i[u]!==r[u])return!1;return!0}static isFilterValueEqual(i,r){return(i??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(An.close,{},i)}_onError(i){this._on(An.error,{},r=>i(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const r={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(r.new=Tf(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(r.old=Tf(i.columns,i.old_record)),r}}const Kc=()=>{},Kl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hg=[1e3,2e3,5e3,1e4],dg=1e4,fg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pg{constructor(i,r){var u;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ah,this.transport=null,this.heartbeatIntervalMs=Kl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kc,this.ref=0,this.reconnectTimer=null,this.vsn=Ef,this.logger=Kc,this.conn=null,this.sendBuffer=[],this.serializer=new rg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=f=>f?(...l)=>f(...l):(...l)=>fetch(...l),!(!((u=r==null?void 0:r.params)===null||u===void 0)&&u.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${i}/${lh.websocket}`,this.httpEndpoint=pp(i),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Y_.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const r=i.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(i,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const u=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(u),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(i?this.conn.close(i,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const r=await i.unsubscribe();return r==="ok"&&this._remove(i),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const i=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,r,u){this.logger(i,r,u)}connectionState(){switch(this.conn&&this.conn.readyState){case rr.connecting:return Hr.Connecting;case rr.open:return Hr.Open;case rr.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,r={config:{}}){const u=`realtime:${i}`,f=this.getChannels().find(l=>l.topic===u);if(f)return f;{const l=new Ks(`realtime:${i}`,r,this);return this.channels.push(l),l}}push(i){const{topic:r,event:u,payload:f,ref:l}=i,d=()=>{this.encode(i,_=>{var g;(g=this.conn)===null||g===void 0||g.send(_)})};this.log("push",`${r} ${u} (${l})`,f),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(ng,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Kl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let r=this.channels.find(u=>u.topic===i&&(u._isJoined()||u._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${i}"`),r.unsubscribe())}_remove(i){this.channels=this.channels.filter(r=>r.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const w=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",w)}catch(x){this.log("error","error in heartbeat callback",x)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:u,event:f,payload:l,ref:d}=r,_=d?`(${d})`:"",g=l.status||"";this.log("receive",`${g} ${u} ${f} ${_}`.trim(),l),this.channels.filter(w=>w._isMember(u)).forEach(w=>w._trigger(f,l,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(i){var r;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i),this.conn.readyState===rr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===rr.open||this.conn.readyState===rr.connecting)try{this.conn.close()}catch(i){this.log("error","Error closing connection",i)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(i){var r;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(i=>i._trigger(An.error))}_appendParams(i,r){if(Object.keys(r).length===0)return i;const u=i.match(/\?/)?"&":"?",f=new URLSearchParams(r);return`${i}${u}${f}`}_workerObjectUrl(i){let r;if(i)r=i;else{const u=new Blob([fg],{type:"application/javascript"});r=URL.createObjectURL(u)}return r}_setConnectionState(i,r=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(i=null){let r,u=!1;if(i)r=i,u=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(f){this.log("error","Error fetching access token from callback",f),r=this.accessTokenValue}else r=this.accessTokenValue;u?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(f=>{const l={access_token:r,version:eg};r&&f.updateJoinPayload(l),f.joinedOnce&&f._isJoined()&&f._push(An.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${i}`,r)})}_triggerStateCallbacks(i,r){try{this.stateChangeCallbacks[i].forEach(u=>{try{u(r)}catch(f){this.log("error",`error in ${i} callback`,f)}})}catch(u){this.log("error",`error triggering ${i} callbacks`,u)}}_setupReconnectionTimer(){this.reconnectTimer=new dp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var r,u,f,l,d,_,g,w,x,k,C,P;switch(this.transport=(r=i==null?void 0:i.transport)!==null&&r!==void 0?r:null,this.timeout=(u=i==null?void 0:i.timeout)!==null&&u!==void 0?u:ah,this.heartbeatIntervalMs=(f=i==null?void 0:i.heartbeatIntervalMs)!==null&&f!==void 0?f:Kl.HEARTBEAT_INTERVAL,this.worker=(l=i==null?void 0:i.worker)!==null&&l!==void 0?l:!1,this.accessToken=(d=i==null?void 0:i.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(_=i==null?void 0:i.heartbeatCallback)!==null&&_!==void 0?_:Kc,this.vsn=(g=i==null?void 0:i.vsn)!==null&&g!==void 0?g:Ef,i!=null&&i.params&&(this.params=i.params),i!=null&&i.logger&&(this.logger=i.logger),(i!=null&&i.logLevel||i!=null&&i.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=i==null?void 0:i.reconnectAfterMs)!==null&&w!==void 0?w:(A=>hg[A-1]||dg),this.vsn){case tg:this.encode=(x=i==null?void 0:i.encode)!==null&&x!==void 0?x:((A,R)=>R(JSON.stringify(A))),this.decode=(k=i==null?void 0:i.decode)!==null&&k!==void 0?k:((A,R)=>R(JSON.parse(A)));break;case hp:this.encode=(C=i==null?void 0:i.encode)!==null&&C!==void 0?C:this.serializer.encode.bind(this.serializer),this.decode=(P=i==null?void 0:i.decode)!==null&&P!==void 0?P:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i==null?void 0:i.workerUrl}}}var ga=class extends Error{constructor(o,i){var r;super(o),this.name="IcebergError",this.status=i.status,this.icebergType=i.icebergType,this.icebergCode=i.icebergCode,this.details=i.details,this.isCommitStateUnknown=i.icebergType==="CommitStateUnknownException"||[500,502,504].includes(i.status)&&((r=i.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function mg(o,i,r){const u=new URL(i,o);if(r)for(const[f,l]of Object.entries(r))l!==void 0&&u.searchParams.set(f,l);return u.toString()}async function _g(o){return!o||o.type==="none"?{}:o.type==="bearer"?{Authorization:`Bearer ${o.token}`}:o.type==="header"?{[o.name]:o.value}:o.type==="custom"?await o.getHeaders():{}}function gg(o){const i=o.fetchImpl??globalThis.fetch;return{async request({method:r,path:u,query:f,body:l,headers:d}){const _=mg(o.baseUrl,u,f),g=await _g(o.auth),w=await i(_,{method:r,headers:{...l?{"Content-Type":"application/json"}:{},...g,...d},body:l?JSON.stringify(l):void 0}),x=await w.text(),k=(w.headers.get("content-type")||"").includes("application/json"),C=k&&x?JSON.parse(x):x;if(!w.ok){const P=k?C:void 0,A=P==null?void 0:P.error;throw new ga((A==null?void 0:A.message)??`Request failed with status ${w.status}`,{status:w.status,icebergType:A==null?void 0:A.type,icebergCode:A==null?void 0:A.code,details:P})}return{status:w.status,headers:w.headers,data:C}}}}function Jl(o){return o.join("")}var vg=class{constructor(o,i=""){this.client=o,this.prefix=i}async listNamespaces(o){const i=o?{parent:Jl(o.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:i})).data.namespaces.map(u=>({namespace:u}))}async createNamespace(o,i){const r={namespace:o.namespace,properties:i==null?void 0:i.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(o){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jl(o.namespace)}`})}async loadNamespaceMetadata(o){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(o.namespace)}`})).data.properties}}async namespaceExists(o){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jl(o.namespace)}`}),!0}catch(i){if(i instanceof ga&&i.status===404)return!1;throw i}}async createNamespaceIfNotExists(o,i){try{return await this.createNamespace(o,i)}catch(r){if(r instanceof ga&&r.status===409)return;throw r}}};function Us(o){return o.join("")}var yg=class{constructor(o,i="",r){this.client=o,this.prefix=i,this.accessDelegation=r}async listTables(o){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Us(o.namespace)}/tables`})).data.identifiers}async createTable(o,i){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Us(o.namespace)}/tables`,body:i,headers:r})).data.metadata}async updateTable(o,i){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Us(o.namespace)}/tables/${o.name}`,body:i});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(o,i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Us(o.namespace)}/tables/${o.name}`,query:{purgeRequested:String((i==null?void 0:i.purge)??!1)}})}async loadTable(o){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Us(o.namespace)}/tables/${o.name}`,headers:i})).data.metadata}async tableExists(o){const i={};this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Us(o.namespace)}/tables/${o.name}`,headers:i}),!0}catch(r){if(r instanceof ga&&r.status===404)return!1;throw r}}async createTableIfNotExists(o,i){try{return await this.createTable(o,i)}catch(r){if(r instanceof ga&&r.status===409)return await this.loadTable({namespace:o.namespace,name:i.name});throw r}}},wg=class{constructor(o){var u;let i="v1";o.catalogName&&(i+=`/${o.catalogName}`);const r=o.baseUrl.endsWith("/")?o.baseUrl:`${o.baseUrl}/`;this.client=gg({baseUrl:r,auth:o.auth,fetchImpl:o.fetch}),this.accessDelegation=(u=o.accessDelegation)==null?void 0:u.join(","),this.namespaceOps=new vg(this.client,i),this.tableOps=new yg(this.client,i,this.accessDelegation)}async listNamespaces(o){return this.namespaceOps.listNamespaces(o)}async createNamespace(o,i){return this.namespaceOps.createNamespace(o,i)}async dropNamespace(o){await this.namespaceOps.dropNamespace(o)}async loadNamespaceMetadata(o){return this.namespaceOps.loadNamespaceMetadata(o)}async listTables(o){return this.tableOps.listTables(o)}async createTable(o,i){return this.tableOps.createTable(o,i)}async updateTable(o,i){return this.tableOps.updateTable(o,i)}async dropTable(o,i){await this.tableOps.dropTable(o,i)}async loadTable(o){return this.tableOps.loadTable(o)}async namespaceExists(o){return this.namespaceOps.namespaceExists(o)}async tableExists(o){return this.tableOps.tableExists(o)}async createNamespaceIfNotExists(o,i){return this.namespaceOps.createNamespaceIfNotExists(o,i)}async createTableIfNotExists(o,i){return this.tableOps.createTableIfNotExists(o,i)}},hu=class extends Error{constructor(o,i="storage",r,u){super(o),this.__isStorageError=!0,this.namespace=i,this.name=i==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=u}};function du(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}var Ql=class extends hu{constructor(o,i,r,u="storage"){super(o,u,i,r),this.name=u==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mp=class extends hu{constructor(o,i,r="storage"){super(o,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=i}};const xg=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),Sg=o=>{if(typeof o!="object"||o===null)return!1;const i=Object.getPrototypeOf(o);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},ch=o=>{if(Array.isArray(o))return o.map(r=>ch(r));if(typeof o=="function"||o!==Object(o))return o;const i={};return Object.entries(o).forEach(([r,u])=>{const f=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));i[f]=ch(u)}),i},kg=o=>!o||typeof o!="string"||o.length===0||o.length>100||o.trim()!==o||o.includes("/")||o.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(o);function va(o){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},va(o)}function bg(o,i){if(va(o)!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var u=r.call(o,i);if(va(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function Lg(o){var i=bg(o,"string");return va(i)=="symbol"?i:i+""}function Cg(o,i,r){return(i=Lg(i))in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}function Af(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);i&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(o,f).enumerable})),r.push.apply(r,u)}return r}function xe(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?Af(Object(r),!0).forEach(function(u){Cg(o,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):Af(Object(r)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(r,u))})}return o}const Nf=o=>{var i;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(i=o.error)===null||i===void 0?void 0:i.message)||JSON.stringify(o)},Pg=async(o,i,r,u)=>{if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!(r!=null&&r.noResolveJson)){const f=o,l=f.status||500;if(typeof f.json=="function")f.json().then(d=>{const _=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||l+"";i(new Ql(Nf(d),l,_,u))}).catch(()=>{if(u==="vectors"){const d=l+"";i(new Ql(f.statusText||`HTTP ${l} error`,l,d,u))}else{const d=l+"";i(new Ql(f.statusText||`HTTP ${l} error`,l,d,u))}});else{const d=l+"";i(new Ql(f.statusText||`HTTP ${l} error`,l,d,u))}}else i(new mp(Nf(o),o,u))},Eg=(o,i,r,u)=>{const f={method:o,headers:(i==null?void 0:i.headers)||{}};return o==="GET"||o==="HEAD"||!u?xe(xe({},f),r):(Sg(u)?(f.headers=xe({"Content-Type":"application/json"},i==null?void 0:i.headers),f.body=JSON.stringify(u)):f.body=u,i!=null&&i.duplex&&(f.duplex=i.duplex),xe(xe({},f),r))};async function oa(o,i,r,u,f,l,d){return new Promise((_,g)=>{o(r,Eg(i,u,f,l)).then(w=>{if(!w.ok)throw w;if(u!=null&&u.noResolveJson)return w;if(d==="vectors"){const x=w.headers.get("content-type");if(w.headers.get("content-length")==="0"||w.status===204)return{};if(!x||!x.includes("application/json"))return{}}return w.json()}).then(w=>_(w)).catch(w=>Pg(w,g,u,d))})}function _p(o="storage"){return{get:async(i,r,u,f)=>oa(i,"GET",r,u,f,void 0,o),post:async(i,r,u,f,l)=>oa(i,"POST",r,f,l,u,o),put:async(i,r,u,f,l)=>oa(i,"PUT",r,f,l,u,o),head:async(i,r,u,f)=>oa(i,"HEAD",r,xe(xe({},u),{},{noResolveJson:!0}),f,void 0,o),remove:async(i,r,u,f,l)=>oa(i,"DELETE",r,f,l,u,o)}}const Tg=_p("storage"),{get:ya,post:Rn,put:hh,head:Og,remove:bh}=Tg,on=_p("vectors");var io=class{constructor(o,i={},r,u="storage"){this.shouldThrowOnError=!1,this.url=o,this.headers=i,this.fetch=xg(r),this.namespace=u}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(o){var i=this;try{return{data:await o(),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(du(r))return{data:null,error:r};throw r}}},Rg=class{constructor(o,i){this.downloadFn=o,this.shouldThrowOnError=i}then(o,i){return this.execute().then(o,i)}async execute(){var o=this;try{return{data:(await o.downloadFn()).body,error:null}}catch(i){if(o.shouldThrowOnError)throw i;if(du(i))return{data:null,error:i};throw i}}};let gp;gp=Symbol.toStringTag;var Ag=class{constructor(o,i){this.downloadFn=o,this.shouldThrowOnError=i,this[gp]="BlobDownloadBuilder",this.promise=null}asStream(){return new Rg(this.downloadFn,this.shouldThrowOnError)}then(o,i){return this.getPromise().then(o,i)}catch(o){return this.getPromise().catch(o)}finally(o){return this.getPromise().finally(o)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var o=this;try{return{data:await(await o.downloadFn()).blob(),error:null}}catch(i){if(o.shouldThrowOnError)throw i;if(du(i))return{data:null,error:i};throw i}}};const Ng={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},If={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ig=class extends io{constructor(o,i={},r,u){super(o,i,u,"storage"),this.bucketId=r}async uploadOrUpdate(o,i,r,u){var f=this;return f.handleOperation(async()=>{let l;const d=xe(xe({},If),u);let _=xe(xe({},f.headers),o==="POST"&&{"x-upsert":String(d.upsert)});const g=d.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),g&&l.append("metadata",f.encodeMetadata(g)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",d.cacheControl),g&&!l.has("metadata")&&l.append("metadata",f.encodeMetadata(g))):(l=r,_["cache-control"]=`max-age=${d.cacheControl}`,_["content-type"]=d.contentType,g&&(_["x-metadata"]=f.toBase64(f.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!d.duplex&&(d.duplex="half")),u!=null&&u.headers&&(_=xe(xe({},_),u.headers));const w=f._removeEmptyFolders(i),x=f._getFinalPath(w),k=await(o=="PUT"?hh:Rn)(f.fetch,`${f.url}/object/${x}`,l,xe({headers:_},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{path:w,id:k.Id,fullPath:k.Key}})}async upload(o,i,r){return this.uploadOrUpdate("POST",o,i,r)}async uploadToSignedUrl(o,i,r,u){var f=this;const l=f._removeEmptyFolders(o),d=f._getFinalPath(l),_=new URL(f.url+`/object/upload/sign/${d}`);return _.searchParams.set("token",i),f.handleOperation(async()=>{let g;const w=xe({upsert:If.upsert},u),x=xe(xe({},f.headers),{"x-upsert":String(w.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",w.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",w.cacheControl)):(g=r,x["cache-control"]=`max-age=${w.cacheControl}`,x["content-type"]=w.contentType),{path:l,fullPath:(await hh(f.fetch,_.toString(),g,{headers:x})).Key}})}async createSignedUploadUrl(o,i){var r=this;return r.handleOperation(async()=>{let u=r._getFinalPath(o);const f=xe({},r.headers);i!=null&&i.upsert&&(f["x-upsert"]="true");const l=await Rn(r.fetch,`${r.url}/object/upload/sign/${u}`,{},{headers:f}),d=new URL(r.url+l.url),_=d.searchParams.get("token");if(!_)throw new hu("No token returned by API");return{signedUrl:d.toString(),path:o,token:_}})}async update(o,i,r){return this.uploadOrUpdate("PUT",o,i,r)}async move(o,i,r){var u=this;return u.handleOperation(async()=>await Rn(u.fetch,`${u.url}/object/move`,{bucketId:u.bucketId,sourceKey:o,destinationKey:i,destinationBucket:r==null?void 0:r.destinationBucket},{headers:u.headers}))}async copy(o,i,r){var u=this;return u.handleOperation(async()=>({path:(await Rn(u.fetch,`${u.url}/object/copy`,{bucketId:u.bucketId,sourceKey:o,destinationKey:i,destinationBucket:r==null?void 0:r.destinationBucket},{headers:u.headers})).Key}))}async createSignedUrl(o,i,r){var u=this;return u.handleOperation(async()=>{let f=u._getFinalPath(o),l=await Rn(u.fetch,`${u.url}/object/sign/${f}`,xe({expiresIn:i},r!=null&&r.transform?{transform:r.transform}:{}),{headers:u.headers});const d=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${u.url}${l.signedURL}${d}`)}})}async createSignedUrls(o,i,r){var u=this;return u.handleOperation(async()=>{const f=await Rn(u.fetch,`${u.url}/object/sign/${u.bucketId}`,{expiresIn:i,paths:o},{headers:u.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return f.map(d=>xe(xe({},d),{},{signedUrl:d.signedURL?encodeURI(`${u.url}${d.signedURL}${l}`):null}))})}download(o,i,r){const u=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),l=f?`?${f}`:"",d=this._getFinalPath(o),_=()=>ya(this.fetch,`${this.url}/${u}/${d}${l}`,{headers:this.headers,noResolveJson:!0},r);return new Ag(_,this.shouldThrowOnError)}async info(o){var i=this;const r=i._getFinalPath(o);return i.handleOperation(async()=>ch(await ya(i.fetch,`${i.url}/object/info/${r}`,{headers:i.headers})))}async exists(o){var i=this;const r=i._getFinalPath(o);try{return await Og(i.fetch,`${i.url}/object/${r}`,{headers:i.headers}),{data:!0,error:null}}catch(u){if(i.shouldThrowOnError)throw u;if(du(u)&&u instanceof mp){const f=u.originalError;if([400,404].includes(f==null?void 0:f.status))return{data:!1,error:u}}throw u}}getPublicUrl(o,i){const r=this._getFinalPath(o),u=[],f=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";f!==""&&u.push(f);const l=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});d!==""&&u.push(d);let _=u.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${_}`)}}}async remove(o){var i=this;return i.handleOperation(async()=>await bh(i.fetch,`${i.url}/object/${i.bucketId}`,{prefixes:o},{headers:i.headers}))}async list(o,i,r){var u=this;return u.handleOperation(async()=>{const f=xe(xe(xe({},Ng),i),{},{prefix:o||""});return await Rn(u.fetch,`${u.url}/object/list/${u.bucketId}`,f,{headers:u.headers},r)})}async listV2(o,i){var r=this;return r.handleOperation(async()=>{const u=xe({},o);return await Rn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,u,{headers:r.headers},i)})}encodeMetadata(o){return JSON.stringify(o)}toBase64(o){return typeof Buffer<"u"?Buffer.from(o).toString("base64"):btoa(o)}_getFinalPath(o){return`${this.bucketId}/${o.replace(/^\/+/,"")}`}_removeEmptyFolders(o){return o.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(o){const i=[];return o.width&&i.push(`width=${o.width}`),o.height&&i.push(`height=${o.height}`),o.resize&&i.push(`resize=${o.resize}`),o.format&&i.push(`format=${o.format}`),o.quality&&i.push(`quality=${o.quality}`),i.join("&")}};const jg="2.95.3",ka={"X-Client-Info":`storage-js/${jg}`};var Mg=class extends io{constructor(o,i={},r,u){const f=new URL(o);u!=null&&u.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase."));const l=f.href.replace(/\/$/,""),d=xe(xe({},ka),i);super(l,d,r,"storage")}async listBuckets(o){var i=this;return i.handleOperation(async()=>{const r=i.listBucketOptionsToQueryString(o);return await ya(i.fetch,`${i.url}/bucket${r}`,{headers:i.headers})})}async getBucket(o){var i=this;return i.handleOperation(async()=>await ya(i.fetch,`${i.url}/bucket/${o}`,{headers:i.headers}))}async createBucket(o,i={public:!1}){var r=this;return r.handleOperation(async()=>await Rn(r.fetch,`${r.url}/bucket`,{id:o,name:o,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:r.headers}))}async updateBucket(o,i){var r=this;return r.handleOperation(async()=>await hh(r.fetch,`${r.url}/bucket/${o}`,{id:o,name:o,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(o){var i=this;return i.handleOperation(async()=>await Rn(i.fetch,`${i.url}/bucket/${o}/empty`,{},{headers:i.headers}))}async deleteBucket(o){var i=this;return i.handleOperation(async()=>await bh(i.fetch,`${i.url}/bucket/${o}`,{},{headers:i.headers}))}listBucketOptionsToQueryString(o){const i={};return o&&("limit"in o&&(i.limit=String(o.limit)),"offset"in o&&(i.offset=String(o.offset)),o.search&&(i.search=o.search),o.sortColumn&&(i.sortColumn=o.sortColumn),o.sortOrder&&(i.sortOrder=o.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}},zg=class extends io{constructor(o,i={},r){const u=o.replace(/\/$/,""),f=xe(xe({},ka),i);super(u,f,r,"storage")}async createBucket(o){var i=this;return i.handleOperation(async()=>await Rn(i.fetch,`${i.url}/bucket`,{name:o},{headers:i.headers}))}async listBuckets(o){var i=this;return i.handleOperation(async()=>{const r=new URLSearchParams;(o==null?void 0:o.limit)!==void 0&&r.set("limit",o.limit.toString()),(o==null?void 0:o.offset)!==void 0&&r.set("offset",o.offset.toString()),o!=null&&o.sortColumn&&r.set("sortColumn",o.sortColumn),o!=null&&o.sortOrder&&r.set("sortOrder",o.sortOrder),o!=null&&o.search&&r.set("search",o.search);const u=r.toString(),f=u?`${i.url}/bucket?${u}`:`${i.url}/bucket`;return await ya(i.fetch,f,{headers:i.headers})})}async deleteBucket(o){var i=this;return i.handleOperation(async()=>await bh(i.fetch,`${i.url}/bucket/${o}`,{},{headers:i.headers}))}from(o){var i=this;if(!kg(o))throw new hu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new wg({baseUrl:this.url,catalogName:o,auth:{type:"custom",getHeaders:async()=>i.headers},fetch:this.fetch}),u=this.shouldThrowOnError;return new Proxy(r,{get(f,l){const d=f[l];return typeof d!="function"?d:async(..._)=>{try{return{data:await d.apply(f,_),error:null}}catch(g){if(u)throw g;return{data:null,error:g}}}}})}},Bg=class extends io{constructor(o,i={},r){const u=o.replace(/\/$/,""),f=xe(xe({},ka),{},{"Content-Type":"application/json"},i);super(u,f,r,"vectors")}async createIndex(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/CreateIndex`,o,{headers:i.headers})||{})}async getIndex(o,i){var r=this;return r.handleOperation(async()=>await on.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:o,indexName:i},{headers:r.headers}))}async listIndexes(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/ListIndexes`,o,{headers:i.headers}))}async deleteIndex(o,i){var r=this;return r.handleOperation(async()=>await on.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:o,indexName:i},{headers:r.headers})||{})}},Dg=class extends io{constructor(o,i={},r){const u=o.replace(/\/$/,""),f=xe(xe({},ka),{},{"Content-Type":"application/json"},i);super(u,f,r,"vectors")}async putVectors(o){var i=this;if(o.vectors.length<1||o.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/PutVectors`,o,{headers:i.headers})||{})}async getVectors(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/GetVectors`,o,{headers:i.headers}))}async listVectors(o){var i=this;if(o.segmentCount!==void 0){if(o.segmentCount<1||o.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(o.segmentIndex!==void 0&&(o.segmentIndex<0||o.segmentIndex>=o.segmentCount))throw new Error(`segmentIndex must be between 0 and ${o.segmentCount-1}`)}return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/ListVectors`,o,{headers:i.headers}))}async queryVectors(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/QueryVectors`,o,{headers:i.headers}))}async deleteVectors(o){var i=this;if(o.keys.length<1||o.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/DeleteVectors`,o,{headers:i.headers})||{})}},Ug=class extends io{constructor(o,i={},r){const u=o.replace(/\/$/,""),f=xe(xe({},ka),{},{"Content-Type":"application/json"},i);super(u,f,r,"vectors")}async createBucket(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/CreateVectorBucket`,{vectorBucketName:o},{headers:i.headers})||{})}async getBucket(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/GetVectorBucket`,{vectorBucketName:o},{headers:i.headers}))}async listBuckets(o={}){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/ListVectorBuckets`,o,{headers:i.headers}))}async deleteBucket(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/DeleteVectorBucket`,{vectorBucketName:o},{headers:i.headers})||{})}},$g=class extends Ug{constructor(o,i={}){super(o,i.headers||{},i.fetch)}from(o){return new Fg(this.url,this.headers,o,this.fetch)}async createBucket(o){var i=()=>super.createBucket,r=this;return i().call(r,o)}async getBucket(o){var i=()=>super.getBucket,r=this;return i().call(r,o)}async listBuckets(o={}){var i=()=>super.listBuckets,r=this;return i().call(r,o)}async deleteBucket(o){var i=()=>super.deleteBucket,r=this;return i().call(r,o)}},Fg=class extends Bg{constructor(o,i,r,u){super(o,i,u),this.vectorBucketName=r}async createIndex(o){var i=()=>super.createIndex,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(o={}){var i=()=>super.listIndexes,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(o){var i=()=>super.getIndex,r=this;return i().call(r,r.vectorBucketName,o)}async deleteIndex(o){var i=()=>super.deleteIndex,r=this;return i().call(r,r.vectorBucketName,o)}index(o){return new Zg(this.url,this.headers,this.vectorBucketName,o,this.fetch)}},Zg=class extends Dg{constructor(o,i,r,u,f){super(o,i,f),this.vectorBucketName=r,this.indexName=u}async putVectors(o){var i=()=>super.putVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(o){var i=()=>super.getVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(o={}){var i=()=>super.listVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(o){var i=()=>super.queryVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(o){var i=()=>super.deleteVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Hg=class extends Mg{constructor(o,i={},r,u){super(o,i,r,u)}from(o){return new Ig(this.url,this.headers,o,this.fetch)}get vectors(){return new $g(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zg(this.url+"/iceberg",this.headers,this.fetch)}};const vp="2.95.3",qs=30*1e3,dh=3,Jc=dh*qs,Wg="http://localhost:9999",Vg="supabase.auth.token",qg={"X-Client-Info":`gotrue-js/${vp}`},fh="X-Supabase-Api-Version",yp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kg=600*1e3;class wa extends Error{constructor(i,r,u){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=u}}function he(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class Jg extends wa{constructor(i,r,u){super(i,r,u),this.name="AuthApiError",this.status=r,this.code=u}}function Qg(o){return he(o)&&o.name==="AuthApiError"}class Wr extends wa{constructor(i,r){super(i),this.name="AuthUnknownError",this.originalError=r}}class vi extends wa{constructor(i,r,u,f){super(i,u,f),this.name=r,this.status=u}}class sn extends vi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qc(o){return he(o)&&o.name==="AuthSessionMissingError"}class $s extends vi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yl extends vi{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class Xl extends vi{constructor(i,r=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Yg(o){return he(o)&&o.name==="AuthImplicitGrantRedirectError"}class jf extends vi{constructor(i,r=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xg extends vi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ph extends vi{constructor(i,r){super(i,"AuthRetryableFetchError",r,void 0)}}function Yc(o){return he(o)&&o.name==="AuthRetryableFetchError"}class Mf extends vi{constructor(i,r,u){super(i,"AuthWeakPasswordError",r,"weak_password"),this.reasons=u}}class mh extends vi{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const ru="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zf=` 	
\r=`.split(""),ev=(()=>{const o=new Array(128);for(let i=0;i<o.length;i+=1)o[i]=-1;for(let i=0;i<zf.length;i+=1)o[zf[i].charCodeAt(0)]=-2;for(let i=0;i<ru.length;i+=1)o[ru[i].charCodeAt(0)]=i;return o})();function Bf(o,i,r){if(o!==null)for(i.queue=i.queue<<8|o,i.queuedBits+=8;i.queuedBits>=6;){const u=i.queue>>i.queuedBits-6&63;r(ru[u]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const u=i.queue>>i.queuedBits-6&63;r(ru[u]),i.queuedBits-=6}}function wp(o,i,r){const u=ev[o];if(u>-1)for(i.queue=i.queue<<6|u,i.queuedBits+=6;i.queuedBits>=8;)r(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(u===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Df(o){const i=[],r=d=>{i.push(String.fromCodePoint(d))},u={utf8seq:0,codepoint:0},f={queue:0,queuedBits:0},l=d=>{iv(d,u,r)};for(let d=0;d<o.length;d+=1)wp(o.charCodeAt(d),f,l);return i.join("")}function tv(o,i){if(o<=127){i(o);return}else if(o<=2047){i(192|o>>6),i(128|o&63);return}else if(o<=65535){i(224|o>>12),i(128|o>>6&63),i(128|o&63);return}else if(o<=1114111){i(240|o>>18),i(128|o>>12&63),i(128|o>>6&63),i(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function nv(o,i){for(let r=0;r<o.length;r+=1){let u=o.charCodeAt(r);if(u>55295&&u<=56319){const f=(u-55296)*1024&65535;u=(o.charCodeAt(r+1)-56320&65535|f)+65536,r+=1}tv(u,i)}}function iv(o,i,r){if(i.utf8seq===0){if(o<=127){r(o);return}for(let u=1;u<6;u+=1)if((o>>7-u&1)===0){i.utf8seq=u;break}if(i.utf8seq===2)i.codepoint=o&31;else if(i.utf8seq===3)i.codepoint=o&15;else if(i.utf8seq===4)i.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|o&63,i.utf8seq-=1,i.utf8seq===0&&r(i.codepoint)}}function Js(o){const i=[],r={queue:0,queuedBits:0},u=f=>{i.push(f)};for(let f=0;f<o.length;f+=1)wp(o.charCodeAt(f),r,u);return new Uint8Array(i)}function rv(o){const i=[];return nv(o,r=>i.push(r)),new Uint8Array(i)}function Vr(o){const i=[],r={queue:0,queuedBits:0},u=f=>{i.push(f)};return o.forEach(f=>Bf(f,r,u)),Bf(null,r,u),i.join("")}function sv(o){return Math.round(Date.now()/1e3)+o}function ov(){return Symbol("auth-callback")}const bt=()=>typeof window<"u"&&typeof document<"u",Ur={tested:!1,writable:!1},xp=()=>{if(!bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ur.tested)return Ur.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Ur.tested=!0,Ur.writable=!0}catch{Ur.tested=!0,Ur.writable=!1}return Ur.writable};function av(o){const i={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((f,l)=>{i[l]=f})}catch{}return r.searchParams.forEach((u,f)=>{i[f]=u}),i}const Sp=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),lv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Gs=async(o,i,r)=>{await o.setItem(i,JSON.stringify(r))},$r=async(o,i)=>{const r=await o.getItem(i);if(!r)return null;try{return JSON.parse(r)}catch{return r}},kt=async(o,i)=>{await o.removeItem(i)};class fu{constructor(){this.promise=new fu.promiseConstructor((i,r)=>{this.resolve=i,this.reject=r})}}fu.promiseConstructor=Promise;function eu(o){const i=o.split(".");if(i.length!==3)throw new mh("Invalid JWT structure");for(let u=0;u<i.length;u++)if(!Gg.test(i[u]))throw new mh("JWT not in base64url format");return{header:JSON.parse(Df(i[0])),payload:JSON.parse(Df(i[1])),signature:Js(i[2]),raw:{header:i[0],payload:i[1]}}}async function uv(o){return await new Promise(i=>{setTimeout(()=>i(null),o)})}function cv(o,i){return new Promise((u,f)=>{(async()=>{for(let l=0;l<1/0;l++)try{const d=await o(l);if(!i(l,null,d)){u(d);return}}catch(d){if(!i(l,d)){f(d);return}}})()})}function hv(o){return("0"+o.toString(16)).substr(-2)}function dv(){const i=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",u=r.length;let f="";for(let l=0;l<56;l++)f+=r.charAt(Math.floor(Math.random()*u));return f}return crypto.getRandomValues(i),Array.from(i,hv).join("")}async function fv(o){const r=new TextEncoder().encode(o),u=await crypto.subtle.digest("SHA-256",r),f=new Uint8Array(u);return Array.from(f).map(l=>String.fromCharCode(l)).join("")}async function pv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await fv(o);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fs(o,i,r=!1){const u=dv();let f=u;r&&(f+="/PASSWORD_RECOVERY"),await Gs(o,`${i}-code-verifier`,f);const l=await pv(u);return[l,u===l?"plain":"s256"]}const mv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _v(o){const i=o.headers.get(fh);if(!i||!i.match(mv))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function gv(o){if(!o)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(o<=i)throw new Error("JWT has expired")}function vv(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zs(o){if(!yv.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xc(){const o={};return new Proxy(o,{get:(i,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const u=r.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wv(o,i){return new Proxy(o,{get:(r,u,f)=>{if(u==="__isInsecureUserWarningProxy")return!0;if(typeof u=="symbol"){const l=u.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,u,f)}return!i.value&&typeof u=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i.value=!0),Reflect.get(r,u,f)}})}function Uf(o){return JSON.parse(JSON.stringify(o))}const Zr=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),xv=[502,503,504];async function $f(o){var i;if(!lv(o))throw new ph(Zr(o),0);if(xv.includes(o.status))throw new ph(Zr(o),o.status);let r;try{r=await o.json()}catch(l){throw new Wr(Zr(l),l)}let u;const f=_v(o);if(f&&f.getTime()>=yp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?u=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(u=r.error_code),u){if(u==="weak_password")throw new Mf(Zr(r),o.status,((i=r.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(u==="session_not_found")throw new sn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0))throw new Mf(Zr(r),o.status,r.weak_password.reasons);throw new Jg(Zr(r),o.status||500,u)}const Sv=(o,i,r,u)=>{const f={method:o,headers:(i==null?void 0:i.headers)||{}};return o==="GET"?f:(f.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i==null?void 0:i.headers),f.body=JSON.stringify(u),Object.assign(Object.assign({},f),r))};async function we(o,i,r,u){var f;const l=Object.assign({},u==null?void 0:u.headers);l[fh]||(l[fh]=yp["2024-01-01"].name),u!=null&&u.jwt&&(l.Authorization=`Bearer ${u.jwt}`);const d=(f=u==null?void 0:u.query)!==null&&f!==void 0?f:{};u!=null&&u.redirectTo&&(d.redirect_to=u.redirectTo);const _=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",g=await kv(o,i,r+_,{headers:l,noResolveJson:u==null?void 0:u.noResolveJson},{},u==null?void 0:u.body);return u!=null&&u.xform?u==null?void 0:u.xform(g):{data:Object.assign({},g),error:null}}async function kv(o,i,r,u,f,l){const d=Sv(i,u,f,l);let _;try{_=await o(r,Object.assign({},d))}catch(g){throw console.error(g),new ph(Zr(g),0)}if(_.ok||await $f(_),u!=null&&u.noResolveJson)return _;try{return await _.json()}catch(g){await $f(g)}}function On(o){var i;let r=null;Cv(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=sv(o.expires_in)));const u=(i=o.user)!==null&&i!==void 0?i:o;return{data:{session:r,user:u},error:null}}function Ff(o){const i=On(o);return!i.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,u)=>r&&typeof u=="string",!0)&&(i.data.weak_password=o.weak_password),i}function sr(o){var i;return{data:{user:(i=o.user)!==null&&i!==void 0?i:o},error:null}}function bv(o){return{data:o,error:null}}function Lv(o){const{action_link:i,email_otp:r,hashed_token:u,redirect_to:f,verification_type:l}=o,d=cu(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),_={action_link:i,email_otp:r,hashed_token:u,redirect_to:f,verification_type:l},g=Object.assign({},d);return{data:{properties:_,user:g},error:null}}function Zf(o){return o}function Cv(o){return o.access_token&&o.refresh_token&&o.expires_in}const eh=["global","local","others"];class Pv{constructor({url:i="",headers:r={},fetch:u}){this.url=i,this.headers=r,this.fetch=Sp(u),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(i,r=eh[0]){if(eh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${eh.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(u){if(he(u))return{data:null,error:u};throw u}}async inviteUserByEmail(i,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:sr})}catch(u){if(he(u))return{data:{user:null},error:u};throw u}}async generateLink(i){try{const{options:r}=i,u=cu(i,["options"]),f=Object.assign(Object.assign({},u),r);return"newEmail"in u&&(f.new_email=u==null?void 0:u.newEmail,delete f.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:f,headers:this.headers,xform:Lv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(i){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:sr})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(i){var r,u,f,l,d,_,g;try{const w={nextPage:null,lastPage:0,total:0},x=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(u=(r=i==null?void 0:i.page)===null||r===void 0?void 0:r.toString())!==null&&u!==void 0?u:"",per_page:(l=(f=i==null?void 0:i.perPage)===null||f===void 0?void 0:f.toString())!==null&&l!==void 0?l:""},xform:Zf});if(x.error)throw x.error;const k=await x.json(),C=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,P=(g=(_=x.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&g!==void 0?g:[];return P.length>0&&(P.forEach(A=>{const R=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(A.split(";")[1].split("=")[1]);w[`${M}Page`]=R}),w.total=parseInt(C)),{data:Object.assign(Object.assign({},k),w),error:null}}catch(w){if(he(w))return{data:{users:[]},error:w};throw w}}async getUserById(i){Zs(i);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:sr})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(i,r){Zs(i);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:r,headers:this.headers,xform:sr})}catch(u){if(he(u))return{data:{user:null},error:u};throw u}}async deleteUser(i,r=!1){Zs(i);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:r},xform:sr})}catch(u){if(he(u))return{data:{user:null},error:u};throw u}}async _listFactors(i){Zs(i.userId);try{const{data:r,error:u}=await we(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:f=>({data:{factors:f},error:null})});return{data:r,error:u}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(i){Zs(i.userId),Zs(i.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _listOAuthClients(i){var r,u,f,l,d,_,g;try{const w={nextPage:null,lastPage:0,total:0},x=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(u=(r=i==null?void 0:i.page)===null||r===void 0?void 0:r.toString())!==null&&u!==void 0?u:"",per_page:(l=(f=i==null?void 0:i.perPage)===null||f===void 0?void 0:f.toString())!==null&&l!==void 0?l:""},xform:Zf});if(x.error)throw x.error;const k=await x.json(),C=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,P=(g=(_=x.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&g!==void 0?g:[];return P.length>0&&(P.forEach(A=>{const R=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(A.split(";")[1].split("=")[1]);w[`${M}Page`]=R}),w.total=parseInt(C)),{data:Object.assign(Object.assign({},k),w),error:null}}catch(w){if(he(w))return{data:{clients:[]},error:w};throw w}}async _createOAuthClient(i){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _getOAuthClient(i){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _updateOAuthClient(i,r){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${i}`,{body:r,headers:this.headers,xform:u=>({data:u,error:null})})}catch(u){if(he(u))return{data:null,error:u};throw u}}async _deleteOAuthClient(i){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(i){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${i}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}}function Hf(o={}){return{getItem:i=>o[i]||null,setItem:(i,r)=>{o[i]=r},removeItem:i=>{delete o[i]}}}const Hs={debug:!!(globalThis&&xp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kp extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class Ev extends kp{}async function Tv(o,i,r){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,i);const u=new globalThis.AbortController;return i>0&&setTimeout(()=>{u.abort(),Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:u.signal},async f=>{if(f){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,f.name);try{return await r()}finally{Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,f.name)}}else{if(i===0)throw Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Ev(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Hs.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ov(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function bp(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function Rv(o){return parseInt(o,16)}function Av(o){const i=new TextEncoder().encode(o);return"0x"+Array.from(i,u=>u.toString(16).padStart(2,"0")).join("")}function Nv(o){var i;const{chainId:r,domain:u,expirationTime:f,issuedAt:l=new Date,nonce:d,notBefore:_,requestId:g,resources:w,scheme:x,uri:k,version:C}=o;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!k)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(C!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${C}`);if(!((i=o.statement)===null||i===void 0)&&i.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const P=bp(o.address),A=x?`${x}://${u}`:u,R=o.statement?`${o.statement}
`:"",M=`${A} wants you to sign in with your Ethereum account:
${P}

${R}`;let Z=`URI: ${k}
Version: ${C}
Chain ID: ${r}${d?`
Nonce: ${d}`:""}
Issued At: ${l.toISOString()}`;if(f&&(Z+=`
Expiration Time: ${f.toISOString()}`),_&&(Z+=`
Not Before: ${_.toISOString()}`),g&&(Z+=`
Request ID: ${g}`),w){let z=`
Resources:`;for(const $ of w){if(!$||typeof $!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${$}`);z+=`
- ${$}`}Z+=z}return`${M}
${Z}`}class ht extends Error{constructor({message:i,code:r,cause:u,name:f}){var l;super(i,{cause:u}),this.__isWebAuthnError=!0,this.name=(l=f??(u instanceof Error?u.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class su extends ht{constructor(i,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:i}),this.name="WebAuthnUnknownError",this.originalError=r}}function Iv({error:o,options:i}){var r,u,f;const{publicKey:l}=i;if(!l)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(i.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(i.mediation==="conditional"&&((u=l.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((f=l.authenticatorSelection)===null||f===void 0?void 0:f.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new ht({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return l.pubKeyCredParams.filter(_=>_.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const d=window.location.hostname;if(Lp(d)){if(l.rp.id!==d)return new ht({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function jv({error:o,options:i}){const{publicKey:r}=i;if(!r)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(i.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new ht({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const u=window.location.hostname;if(Lp(u)){if(r.rpId!==u)return new ht({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class Mv{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const i=new AbortController;return this.controller=i,i.signal}cancelCeremony(){if(this.controller){const i=new Error("Manually cancelling existing WebAuthn API call");i.name="AbortError",this.controller.abort(i),this.controller=void 0}}}const zv=new Mv;function Bv(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:i,user:r,excludeCredentials:u}=o,f=cu(o,["challenge","user","excludeCredentials"]),l=Js(i).buffer,d=Object.assign(Object.assign({},r),{id:Js(r.id).buffer}),_=Object.assign(Object.assign({},f),{challenge:l,user:d});if(u&&u.length>0){_.excludeCredentials=new Array(u.length);for(let g=0;g<u.length;g++){const w=u[g];_.excludeCredentials[g]=Object.assign(Object.assign({},w),{id:Js(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return _}function Dv(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:i,allowCredentials:r}=o,u=cu(o,["challenge","allowCredentials"]),f=Js(i).buffer,l=Object.assign(Object.assign({},u),{challenge:f});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const _=r[d];l.allowCredentials[d]=Object.assign(Object.assign({},_),{id:Js(_.id).buffer,type:_.type||"public-key",transports:_.transports})}}return l}function Uv(o){var i;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o;return{id:o.id,rawId:o.id,response:{attestationObject:Vr(new Uint8Array(o.response.attestationObject)),clientDataJSON:Vr(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(i=r.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function $v(o){var i;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o,u=o.getClientExtensionResults(),f=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:Vr(new Uint8Array(f.authenticatorData)),clientDataJSON:Vr(new Uint8Array(f.clientDataJSON)),signature:Vr(new Uint8Array(f.signature)),userHandle:f.userHandle?Vr(new Uint8Array(f.userHandle)):void 0},type:"public-key",clientExtensionResults:u,authenticatorAttachment:(i=r.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function Lp(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Wf(){var o,i;return!!(bt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator==null?void 0:navigator.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.get)=="function")}async function Fv(o){try{const i=await navigator.credentials.create(o);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new su("Browser returned unexpected credential type",i)}:{data:null,error:new su("Empty credential response",i)}}catch(i){return{data:null,error:Iv({error:i,options:o})}}}async function Zv(o){try{const i=await navigator.credentials.get(o);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new su("Browser returned unexpected credential type",i)}:{data:null,error:new su("Empty credential response",i)}}catch(i){return{data:null,error:jv({error:i,options:o})}}}const Hv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Wv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ou(...o){const i=f=>f!==null&&typeof f=="object"&&!Array.isArray(f),r=f=>f instanceof ArrayBuffer||ArrayBuffer.isView(f),u={};for(const f of o)if(f)for(const l in f){const d=f[l];if(d!==void 0)if(Array.isArray(d))u[l]=d;else if(r(d))u[l]=d;else if(i(d)){const _=u[l];i(_)?u[l]=ou(_,d):u[l]=ou(d)}else u[l]=d}return u}function Vv(o,i){return ou(Hv,o,i||{})}function qv(o,i){return ou(Wv,o,i||{})}class Gv{constructor(i){this.client=i,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(i){return this.client.mfa.enroll(Object.assign(Object.assign({},i),{factorType:"webauthn"}))}async _challenge({factorId:i,webauthn:r,friendlyName:u,signal:f},l){var d;try{const{data:_,error:g}=await this.client.mfa.challenge({factorId:i,webauthn:r});if(!_)return{data:null,error:g};const w=f??zv.createNewAbortSignal();if(_.webauthn.type==="create"){const{user:x}=_.webauthn.credential_options.publicKey;if(!x.name){const k=u;if(k)x.name=`${x.id}:${k}`;else{const P=(await this.client.getUser()).data.user,A=((d=P==null?void 0:P.user_metadata)===null||d===void 0?void 0:d.name)||(P==null?void 0:P.email)||(P==null?void 0:P.id)||"User";x.name=`${x.id}:${A}`}}x.displayName||(x.displayName=x.name)}switch(_.webauthn.type){case"create":{const x=Vv(_.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:k,error:C}=await Fv({publicKey:x,signal:w});return k?{data:{factorId:i,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:k}},error:null}:{data:null,error:C}}case"request":{const x=qv(_.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:k,error:C}=await Zv(Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:x,signal:w}));return k?{data:{factorId:i,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:k}},error:null}:{data:null,error:C}}}}catch(_){return he(_)?{data:null,error:_}:{data:null,error:new Wr("Unexpected error in challenge",_)}}}async _verify({challengeId:i,factorId:r,webauthn:u}){return this.client.mfa.verify({factorId:r,challengeId:i,webauthn:u})}async _authenticate({factorId:i,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:u=typeof window<"u"?[window.location.origin]:void 0,signal:f}={}},l){if(!r)return{data:null,error:new wa("rpId is required for WebAuthn authentication")};try{if(!Wf())return{data:null,error:new Wr("Browser does not support WebAuthn",null)};const{data:d,error:_}=await this.challenge({factorId:i,webauthn:{rpId:r,rpOrigins:u},signal:f},{request:l});if(!d)return{data:null,error:_};const{webauthn:g}=d;return this._verify({factorId:i,challengeId:d.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:u,credential_response:g.credential_response}})}catch(d){return he(d)?{data:null,error:d}:{data:null,error:new Wr("Unexpected error in authenticate",d)}}}async _register({friendlyName:i,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:u=typeof window<"u"?[window.location.origin]:void 0,signal:f}={}},l){if(!r)return{data:null,error:new wa("rpId is required for WebAuthn registration")};try{if(!Wf())return{data:null,error:new Wr("Browser does not support WebAuthn",null)};const{data:d,error:_}=await this._enroll({friendlyName:i});if(!d)return await this.client.mfa.listFactors().then(x=>{var k;return(k=x.data)===null||k===void 0?void 0:k.all.find(C=>C.factor_type==="webauthn"&&C.friendly_name===i&&C.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:_};const{data:g,error:w}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:r,rpOrigins:u},signal:f},{create:l});return g?this._verify({factorId:d.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:u,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:w}}catch(d){return he(d)?{data:null,error:d}:{data:null,error:new Wr("Unexpected error in register",d)}}}}Ov();const Kv={url:Wg,storageKey:Vg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Vf(o,i,r){return await r()}const Ws={};class xa{get jwks(){var i,r;return(r=(i=Ws[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(i){Ws[this.storageKey]=Object.assign(Object.assign({},Ws[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,r;return(r=(i=Ws[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){Ws[this.storageKey]=Object.assign(Object.assign({},Ws[this.storageKey]),{cachedAt:i})}constructor(i){var r,u,f;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},Kv),i);if(this.storageKey=l.storageKey,this.instanceID=(r=xa.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,xa.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&bt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Pv({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Sp(l.fetch),this.lock=l.lock||Vf,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&bt()&&(!((u=globalThis==null?void 0:globalThis.navigator)===null||u===void 0)&&u.locks)?this.lock=Tv:this.lock=Vf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Gv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:xp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Hf(this.memoryStorage)),bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(f=this.broadcastChannel)===null||f===void 0||f.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(_){this._debug("#broadcastChannel","error",_)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(i){if(this.throwOnError&&i&&i.error)throw i.error;return i}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${vp}) ${new Date().toISOString()}`}_debug(...i){return this.logDebugMessages&&this.logger(this._logPrefix(),...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{let r={},u="none";if(bt()&&(r=av(window.location.href),this._isImplicitGrantCallback(r)?u="implicit":await this._isPKCECallback(r)&&(u="pkce")),bt()&&this.detectSessionInUrl&&u!=="none"){const{data:f,error:l}=await this._getSessionFromURL(r,u);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Yg(l)){const g=(i=l.details)===null||i===void 0?void 0:i.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:d,redirectType:_}=f;return this._debug("#_initialize()","detected session in URL",d,"redirect type",_),await this._saveSession(d),setTimeout(async()=>{_==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return he(r)?this._returnResult({error:r}):this._returnResult({error:new Wr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var r,u,f;try{const l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(u=(r=i==null?void 0:i.options)===null||r===void 0?void 0:r.data)!==null&&u!==void 0?u:{},gotrue_meta_security:{captcha_token:(f=i==null?void 0:i.options)===null||f===void 0?void 0:f.captchaToken}},xform:On}),{data:d,error:_}=l;if(_||!d)return this._returnResult({data:{user:null,session:null},error:_});const g=d.session,w=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(l){if(he(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(i){var r,u,f;try{let l;if("email"in i){const{email:x,password:k,options:C}=i;let P=null,A=null;this.flowType==="pkce"&&([P,A]=await Fs(this.storage,this.storageKey)),l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:C==null?void 0:C.emailRedirectTo,body:{email:x,password:k,data:(r=C==null?void 0:C.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken},code_challenge:P,code_challenge_method:A},xform:On})}else if("phone"in i){const{phone:x,password:k,options:C}=i;l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:k,data:(u=C==null?void 0:C.data)!==null&&u!==void 0?u:{},channel:(f=C==null?void 0:C.channel)!==null&&f!==void 0?f:"sms",gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken}},xform:On})}else throw new Yl("You must provide either an email or phone number and a password");const{data:d,error:_}=l;if(_||!d)return await kt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:_});const g=d.session,w=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(l){if(await kt(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(i){try{let r;if("email"in i){const{email:l,password:d,options:_}=i;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:d,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Ff})}else if("phone"in i){const{phone:l,password:d,options:_}=i;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:d,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Ff})}else throw new Yl("You must provide either an email or phone number and a password");const{data:u,error:f}=r;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u||!u.session||!u.user){const l=new $s;return this._returnResult({data:{user:null,session:null},error:l})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign({user:u.user,session:u.session},u.weak_password?{weakPassword:u.weak_password}:null),error:f})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(i){var r,u,f,l;return await this._handleProviderSignIn(i.provider,{redirectTo:(r=i.options)===null||r===void 0?void 0:r.redirectTo,scopes:(u=i.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=i.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:(l=i.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:r}=i;switch(r){case"ethereum":return await this.signInWithEthereum(i);case"solana":return await this.signInWithSolana(i);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(i){var r,u,f,l,d,_,g,w,x,k,C;let P,A;if("message"in i)P=i.message,A=i.signature;else{const{chain:R,wallet:M,statement:Z,options:z}=i;let $;if(bt())if(typeof M=="object")$=M;else{const qe=window;if("ethereum"in qe&&typeof qe.ethereum=="object"&&"request"in qe.ethereum&&typeof qe.ethereum.request=="function")$=qe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=M}const X=new URL((r=z==null?void 0:z.url)!==null&&r!==void 0?r:window.location.href),fe=await $.request({method:"eth_requestAccounts"}).then(qe=>qe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!fe||fe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const pe=bp(fe[0]);let be=(u=z==null?void 0:z.signInWithEthereum)===null||u===void 0?void 0:u.chainId;if(!be){const qe=await $.request({method:"eth_chainId"});be=Rv(qe)}const Be={domain:X.host,address:pe,statement:Z,uri:X.href,version:"1",chainId:be,nonce:(f=z==null?void 0:z.signInWithEthereum)===null||f===void 0?void 0:f.nonce,issuedAt:(d=(l=z==null?void 0:z.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(_=z==null?void 0:z.signInWithEthereum)===null||_===void 0?void 0:_.expirationTime,notBefore:(g=z==null?void 0:z.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(w=z==null?void 0:z.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(x=z==null?void 0:z.signInWithEthereum)===null||x===void 0?void 0:x.resources};P=Nv(Be),A=await $.request({method:"personal_sign",params:[Av(P),pe]})}try{const{data:R,error:M}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:P,signature:A},!((k=i.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(C=i.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:On});if(M)throw M;if(!R||!R.session||!R.user){const Z=new $s;return this._returnResult({data:{user:null,session:null},error:Z})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:M})}catch(R){if(he(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(i){var r,u,f,l,d,_,g,w,x,k,C,P;let A,R;if("message"in i)A=i.message,R=i.signature;else{const{chain:M,wallet:Z,statement:z,options:$}=i;let X;if(bt())if(typeof Z=="object")X=Z;else{const pe=window;if("solana"in pe&&typeof pe.solana=="object"&&("signIn"in pe.solana&&typeof pe.solana.signIn=="function"||"signMessage"in pe.solana&&typeof pe.solana.signMessage=="function"))X=pe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Z!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=Z}const fe=new URL((r=$==null?void 0:$.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in X&&X.signIn){const pe=await X.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},$==null?void 0:$.signInWithSolana),{version:"1",domain:fe.host,uri:fe.href}),z?{statement:z}:null));let be;if(Array.isArray(pe)&&pe[0]&&typeof pe[0]=="object")be=pe[0];else if(pe&&typeof pe=="object"&&"signedMessage"in pe&&"signature"in pe)be=pe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in be&&"signature"in be&&(typeof be.signedMessage=="string"||be.signedMessage instanceof Uint8Array)&&be.signature instanceof Uint8Array)A=typeof be.signedMessage=="string"?be.signedMessage:new TextDecoder().decode(be.signedMessage),R=be.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in X)||typeof X.signMessage!="function"||!("publicKey"in X)||typeof X!="object"||!X.publicKey||!("toBase58"in X.publicKey)||typeof X.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${fe.host} wants you to sign in with your Solana account:`,X.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${fe.href}`,`Issued At: ${(f=(u=$==null?void 0:$.signInWithSolana)===null||u===void 0?void 0:u.issuedAt)!==null&&f!==void 0?f:new Date().toISOString()}`,...!((l=$==null?void 0:$.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${$.signInWithSolana.notBefore}`]:[],...!((d=$==null?void 0:$.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${$.signInWithSolana.expirationTime}`]:[],...!((_=$==null?void 0:$.signInWithSolana)===null||_===void 0)&&_.chainId?[`Chain ID: ${$.signInWithSolana.chainId}`]:[],...!((g=$==null?void 0:$.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${$.signInWithSolana.nonce}`]:[],...!((w=$==null?void 0:$.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${$.signInWithSolana.requestId}`]:[],...!((k=(x=$==null?void 0:$.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||k===void 0)&&k.length?["Resources",...$.signInWithSolana.resources.map(be=>`- ${be}`)]:[]].join(`
`);const pe=await X.signMessage(new TextEncoder().encode(A),"utf8");if(!pe||!(pe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=pe}}try{const{data:M,error:Z}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:Vr(R)},!((C=i.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(P=i.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:On});if(Z)throw Z;if(!M||!M.session||!M.user){const z=new $s;return this._returnResult({data:{user:null,session:null},error:z})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:Z})}catch(M){if(he(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async _exchangeCodeForSession(i){const r=await $r(this.storage,`${this.storageKey}-code-verifier`),[u,f]=(r??"").split("/");try{if(!u&&this.flowType==="pkce")throw new Xg;const{data:l,error:d}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:u},xform:On});if(await kt(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!l||!l.session||!l.user){const _=new $s;return this._returnResult({data:{user:null,session:null,redirectType:null},error:_})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:f??null}),error:d})}catch(l){if(await kt(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(i){try{const{options:r,provider:u,token:f,access_token:l,nonce:d}=i,_=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:u,id_token:f,access_token:l,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:On}),{data:g,error:w}=_;if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!g||!g.session||!g.user){const x=new $s;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:w})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(i){var r,u,f,l,d;try{if("email"in i){const{email:_,options:g}=i;let w=null,x=null;this.flowType==="pkce"&&([w,x]=await Fs(this.storage,this.storageKey));const{error:k}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:_,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(u=g==null?void 0:g.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:w,code_challenge_method:x},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:k})}if("phone"in i){const{phone:_,options:g}=i,{data:w,error:x}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:_,data:(f=g==null?void 0:g.data)!==null&&f!==void 0?f:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(d=g==null?void 0:g.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:w==null?void 0:w.message_id},error:x})}throw new Yl("You must provide either an email or phone number.")}catch(_){if(await kt(this.storage,`${this.storageKey}-code-verifier`),he(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async verifyOtp(i){var r,u;try{let f,l;"options"in i&&(f=(r=i.options)===null||r===void 0?void 0:r.redirectTo,l=(u=i.options)===null||u===void 0?void 0:u.captchaToken);const{data:d,error:_}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:l}}),redirectTo:f,xform:On});if(_)throw _;if(!d)throw new Error("An error occurred on token verification.");const g=d.session,w=d.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(f){if(he(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithSSO(i){var r,u,f,l,d;try{let _=null,g=null;this.flowType==="pkce"&&([_,g]=await Fs(this.storage,this.storageKey));const w=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(u=(r=i.options)===null||r===void 0?void 0:r.redirectTo)!==null&&u!==void 0?u:void 0}),!((f=i==null?void 0:i.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:_,code_challenge_method:g}),headers:this.headers,xform:bv});return!((l=w.data)===null||l===void 0)&&l.url&&bt()&&!(!((d=i.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(w.data.url),this._returnResult(w)}catch(_){if(await kt(this.storage,`${this.storageKey}-code-verifier`),he(_))return this._returnResult({data:null,error:_});throw _}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:r},error:u}=i;if(u)throw u;if(!r)throw new sn;const{error:f}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:f})})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async resend(i){try{const r=`${this.url}/resend`;if("email"in i){const{email:u,type:f,options:l}=i,{error:d}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:u,type:f,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in i){const{phone:u,type:f,options:l}=i,{data:d,error:_}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:u,type:f,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:_})}throw new Yl("You must provide either an email or phone number and a type")}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(i,r){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const u=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),f=(async()=>(await u,await r()))();return this.pendingInLock.push((async()=>{try{await f}catch{}})()),f}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const u=r();for(this.pendingInLock.push((async()=>{try{await u}catch{}})()),await u;this.pendingInLock.length;){const f=[...this.pendingInLock];await Promise.all(f),this.pendingInLock.splice(0,f.length)}return await u}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await i(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const r=await $r(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?i=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const u=i.expires_at?i.expires_at*1e3-Date.now()<Jc:!1;if(this._debug("#__loadSession()",`session has${u?"":" not"} expired`,"expires_at",i.expires_at),!u){if(this.userStorage){const d=await $r(this.userStorage,this.storageKey+"-user");d!=null&&d.user?i.user=d.user:i.user=Xc()}if(this.storage.isServer&&i.user&&!i.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};i.user=wv(i.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:i},error:null}}const{data:f,error:l}=await this._callRefreshToken(i.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:f},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(i){if(i)return await this._getUser(i);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(i){try{return i?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:sr}):await this._useSession(async r=>{var u,f,l;const{data:d,error:_}=r;if(_)throw _;return!(!((u=d.session)===null||u===void 0)&&u.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(f=d.session)===null||f===void 0?void 0:f.access_token)!==null&&l!==void 0?l:void 0,xform:sr})})}catch(r){if(he(r))return Qc(r)&&(await this._removeSession(),await kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(i,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(i,r))}async _updateUser(i,r={}){try{return await this._useSession(async u=>{const{data:f,error:l}=u;if(l)throw l;if(!f.session)throw new sn;const d=f.session;let _=null,g=null;this.flowType==="pkce"&&i.email!=null&&([_,g]=await Fs(this.storage,this.storageKey));const{data:w,error:x}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:_,code_challenge_method:g}),jwt:d.access_token,xform:sr});if(x)throw x;return d.user=w.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(u){if(await kt(this.storage,`${this.storageKey}-code-verifier`),he(u))return this._returnResult({data:{user:null},error:u});throw u}}async setSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new sn;const r=Date.now()/1e3;let u=r,f=!0,l=null;const{payload:d}=eu(i.access_token);if(d.exp&&(u=d.exp,f=u<=r),f){const{data:_,error:g}=await this._callRefreshToken(i.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!_)return{data:{user:null,session:null},error:null};l=_}else{const{data:_,error:g}=await this._getUser(i.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});l={access_token:i.access_token,refresh_token:i.refresh_token,user:_.user,token_type:"bearer",expires_in:u-r,expires_at:u},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(he(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async r=>{var u;if(!i){const{data:d,error:_}=r;if(_)throw _;i=(u=d.session)!==null&&u!==void 0?u:void 0}if(!(i!=null&&i.refresh_token))throw new sn;const{data:f,error:l}=await this._callRefreshToken(i.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):f?this._returnResult({data:{user:f.user,session:f},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(i,r){try{if(!bt())throw new Xl("No browser detected.");if(i.error||i.error_description||i.error_code)throw new Xl(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new jf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new jf("No code detected.");const{data:z,error:$}=await this._exchangeCodeForSession(i.code);if($)throw $;const X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:u,provider_refresh_token:f,access_token:l,refresh_token:d,expires_in:_,expires_at:g,token_type:w}=i;if(!l||!_||!d||!w)throw new Xl("No session defined in URL");const x=Math.round(Date.now()/1e3),k=parseInt(_);let C=x+k;g&&(C=parseInt(g));const P=C-x;P*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${k}s`);const A=C-k;x-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,C,x):x-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,C,x);const{data:R,error:M}=await this._getUser(l);if(M)throw M;const Z={provider_token:u,provider_refresh_token:f,access_token:l,expires_in:k,expires_at:C,refresh_token:d,token_type:w,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:Z,redirectType:i.type},error:null})}catch(u){if(he(u))return this._returnResult({data:{session:null,redirectType:null},error:u});throw u}}_isImplicitGrantCallback(i){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),i):!!(i.access_token||i.error_description)}async _isPKCECallback(i){const r=await $r(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&r)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async r=>{var u;const{data:f,error:l}=r;if(l&&!Qc(l))return this._returnResult({error:l});const d=(u=f.session)===null||u===void 0?void 0:u.access_token;if(d){const{error:_}=await this.admin.signOut(d,i);if(_&&!(Qg(_)&&(_.status===404||_.status===401||_.status===403)||Qc(_)))return this._returnResult({error:_})}return i!=="others"&&(await this._removeSession(),await kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(i){const r=ov(),u={id:r,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,u),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:u}}}async _emitInitialSession(i){return await this._useSession(async r=>{var u,f;try{const{data:{session:l},error:d}=r;if(d)throw d;await((u=this.stateChangeEmitters.get(i))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",i,"session",l)}catch(l){await((f=this.stateChangeEmitters.get(i))===null||f===void 0?void 0:f.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",l),console.error(l)}})}async resetPasswordForEmail(i,r={}){let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Fs(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:u,code_challenge_method:f,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(await kt(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var i;try{const{data:r,error:u}=await this.getUser();if(u)throw u;return this._returnResult({data:{identities:(i=r.user.identities)!==null&&i!==void 0?i:[]},error:null})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(i){return"token"in i?this.linkIdentityIdToken(i):this.linkIdentityOAuth(i)}async linkIdentityOAuth(i){var r;try{const{data:u,error:f}=await this._useSession(async l=>{var d,_,g,w,x;const{data:k,error:C}=l;if(C)throw C;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(d=i.options)===null||d===void 0?void 0:d.redirectTo,scopes:(_=i.options)===null||_===void 0?void 0:_.scopes,queryParams:(g=i.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",P,{headers:this.headers,jwt:(x=(w=k.session)===null||w===void 0?void 0:w.access_token)!==null&&x!==void 0?x:void 0})});if(f)throw f;return bt()&&!(!((r=i.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(u==null?void 0:u.url),this._returnResult({data:{provider:i.provider,url:u==null?void 0:u.url},error:null})}catch(u){if(he(u))return this._returnResult({data:{provider:i.provider,url:null},error:u});throw u}}async linkIdentityIdToken(i){return await this._useSession(async r=>{var u;try{const{error:f,data:{session:l}}=r;if(f)throw f;const{options:d,provider:_,token:g,access_token:w,nonce:x}=i,k=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(u=l==null?void 0:l.access_token)!==null&&u!==void 0?u:void 0,body:{provider:_,id_token:g,access_token:w,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:On}),{data:C,error:P}=k;return P?this._returnResult({data:{user:null,session:null},error:P}):!C||!C.session||!C.user?this._returnResult({data:{user:null,session:null},error:new $s}):(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("USER_UPDATED",C.session)),this._returnResult({data:C,error:P}))}catch(f){if(await kt(this.storage,`${this.storageKey}-code-verifier`),he(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}})}async unlinkIdentity(i){try{return await this._useSession(async r=>{var u,f;const{data:l,error:d}=r;if(d)throw d;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(f=(u=l.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(i){const r=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(r,"begin");try{const u=Date.now();return await cv(async f=>(f>0&&await uv(200*Math.pow(2,f-1)),this._debug(r,"refreshing attempt",f),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:On})),(f,l)=>{const d=200*Math.pow(2,f);return l&&Yc(l)&&Date.now()+d-u<qs})}catch(u){if(this._debug(r,"error",u),he(u))return this._returnResult({data:{session:null,user:null},error:u});throw u}finally{this._debug(r,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,r){const u=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",r,"url",u),bt()&&!r.skipBrowserRedirect&&window.location.assign(u),{data:{provider:i,url:u},error:null}}async _recoverAndRefresh(){var i,r;const u="#_recoverAndRefresh()";this._debug(u,"begin");try{const f=await $r(this.storage,this.storageKey);if(f&&this.userStorage){let d=await $r(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:f.user},await Gs(this.userStorage,this.storageKey+"-user",d)),f.user=(i=d==null?void 0:d.user)!==null&&i!==void 0?i:Xc()}else if(f&&!f.user&&!f.user){const d=await $r(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(f.user=d.user,await kt(this.storage,this.storageKey+"-user"),await Gs(this.storage,this.storageKey,f)):f.user=Xc()}if(this._debug(u,"session from storage",f),!this._isValidSession(f)){this._debug(u,"session is not valid"),f!==null&&await this._removeSession();return}const l=((r=f.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Jc;if(this._debug(u,`session has${l?"":" not"} expired with margin of ${Jc}s`),l){if(this.autoRefreshToken&&f.refresh_token){const{error:d}=await this._callRefreshToken(f.refresh_token);d&&(console.error(d),Yc(d)||(this._debug(u,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(f.user&&f.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:_}=await this._getUser(f.access_token);!_&&(d!=null&&d.user)?(f.user=d.user,await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)):this._debug(u,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(u,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",f)}catch(f){this._debug(u,"error",f),console.error(f);return}finally{this._debug(u,"end")}}async _callRefreshToken(i){var r,u;if(!i)throw new sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const f=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(f,"begin");try{this.refreshingDeferred=new fu;const{data:l,error:d}=await this._refreshAccessToken(i);if(d)throw d;if(!l.session)throw new sn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const _={data:l.session,error:null};return this.refreshingDeferred.resolve(_),_}catch(l){if(this._debug(f,"error",l),he(l)){const d={data:null,error:l};return Yc(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(u=this.refreshingDeferred)===null||u===void 0||u.reject(l),l}finally{this.refreshingDeferred=null,this._debug(f,"end")}}async _notifyAllSubscribers(i,r,u=!0){const f=`#_notifyAllSubscribers(${i})`;this._debug(f,"begin",r,`broadcast = ${u}`);try{this.broadcastChannel&&u&&this.broadcastChannel.postMessage({event:i,session:r});const l=[],d=Array.from(this.stateChangeEmitters.values()).map(async _=>{try{await _.callback(i,r)}catch(g){l.push(g)}});if(await Promise.all(d),l.length>0){for(let _=0;_<l.length;_+=1)console.error(l[_]);throw l[0]}}finally{this._debug(f,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0,await kt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},i),u=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!u&&r.user&&await Gs(this.userStorage,this.storageKey+"-user",{user:r.user});const f=Object.assign({},r);delete f.user;const l=Uf(f);await Gs(this.storage,this.storageKey,l)}else{const f=Uf(r);await Gs(this.storage,this.storageKey,f)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await kt(this.storage,this.storageKey),await kt(this.storage,this.storageKey+"-code-verifier"),await kt(this.storage,this.storageKey+"-user"),this.userStorage&&await kt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",i)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async r=>{const{data:{session:u}}=r;if(!u||!u.refresh_token||!u.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const f=Math.floor((u.expires_at*1e3-i)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${f} ticks, a tick lasts ${qs}ms, refresh threshold is ${dh} ticks`),f<=dh&&await this._callRefreshToken(u.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof kp)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(i){this._debug("#visibilityChangedCallback","error",i)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const r=`#_onVisibilityChanged(${i})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,r,u){const f=[`provider=${encodeURIComponent(r)}`];if(u!=null&&u.redirectTo&&f.push(`redirect_to=${encodeURIComponent(u.redirectTo)}`),u!=null&&u.scopes&&f.push(`scopes=${encodeURIComponent(u.scopes)}`),this.flowType==="pkce"){const[l,d]=await Fs(this.storage,this.storageKey),_=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(d)}`});f.push(_.toString())}if(u!=null&&u.queryParams){const l=new URLSearchParams(u.queryParams);f.push(l.toString())}return u!=null&&u.skipBrowserRedirect&&f.push(`skip_http_redirect=${u.skipBrowserRedirect}`),`${i}?${f.join("&")}`}async _unenroll(i){try{return await this._useSession(async r=>{var u;const{data:f,error:l}=r;return l?this._returnResult({data:null,error:l}):await we(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(u=f==null?void 0:f.session)===null||u===void 0?void 0:u.access_token})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(i){try{return await this._useSession(async r=>{var u,f;const{data:l,error:d}=r;if(d)return this._returnResult({data:null,error:d});const _=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:i.factorType==="totp"?{issuer:i.issuer}:{}),{data:g,error:w}=await we(this.fetch,"POST",`${this.url}/factors`,{body:_,headers:this.headers,jwt:(u=l==null?void 0:l.session)===null||u===void 0?void 0:u.access_token});return w?this._returnResult({data:null,error:w}):(i.factorType==="totp"&&g.type==="totp"&&(!((f=g==null?void 0:g.totp)===null||f===void 0)&&f.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _verify(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var u;const{data:f,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({challenge_id:i.challengeId},"webauthn"in i?{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_response:i.webauthn.type==="create"?Uv(i.webauthn.credential_response):$v(i.webauthn.credential_response)})}:{code:i.code}),{data:_,error:g}=await we(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:d,headers:this.headers,jwt:(u=f==null?void 0:f.session)===null||u===void 0?void 0:u.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+_.expires_in},_)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",_),this._returnResult({data:_,error:g}))})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var u;const{data:f,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=await we(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:i,headers:this.headers,jwt:(u=f==null?void 0:f.session)===null||u===void 0?void 0:u.access_token});if(d.error)return d;const{data:_}=d;if(_.type!=="webauthn")return{data:_,error:null};switch(_.webauthn.type){case"create":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:Bv(_.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:Dv(_.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(i){const{data:r,error:u}=await this._challenge({factorId:i.factorId});return u?this._returnResult({data:null,error:u}):await this._verify({factorId:i.factorId,challengeId:r.id,code:i.code})}async _listFactors(){var i;const{data:{user:r},error:u}=await this.getUser();if(u)return{data:null,error:u};const f={all:[],phone:[],totp:[],webauthn:[]};for(const l of(i=r==null?void 0:r.factors)!==null&&i!==void 0?i:[])f.all.push(l),l.status==="verified"&&f[l.factor_type].push(l);return{data:f,error:null}}async _getAuthenticatorAssuranceLevel(i){var r,u,f,l;if(i)try{const{payload:P}=eu(i);let A=null;P.aal&&(A=P.aal);let R=A;const{data:{user:M},error:Z}=await this.getUser(i);if(Z)return this._returnResult({data:null,error:Z});((u=(r=M==null?void 0:M.factors)===null||r===void 0?void 0:r.filter(X=>X.status==="verified"))!==null&&u!==void 0?u:[]).length>0&&(R="aal2");const $=P.amr||[];return{data:{currentLevel:A,nextLevel:R,currentAuthenticationMethods:$},error:null}}catch(P){if(he(P))return this._returnResult({data:null,error:P});throw P}const{data:{session:d},error:_}=await this.getSession();if(_)return this._returnResult({data:null,error:_});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=eu(d.access_token);let w=null;g.aal&&(w=g.aal);let x=w;((l=(f=d.user.factors)===null||f===void 0?void 0:f.filter(P=>P.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(x="aal2");const C=g.amr||[];return{data:{currentLevel:w,nextLevel:x,currentAuthenticationMethods:C},error:null}}async _getAuthorizationDetails(i){try{return await this._useSession(async r=>{const{data:{session:u},error:f}=r;return f?this._returnResult({data:null,error:f}):u?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${i}`,{headers:this.headers,jwt:u.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new sn})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(i,r){try{return await this._useSession(async u=>{const{data:{session:f},error:l}=u;if(l)return this._returnResult({data:null,error:l});if(!f)return this._returnResult({data:null,error:new sn});const d=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:f.access_token,body:{action:"approve"},xform:_=>({data:_,error:null})});return d.data&&d.data.redirect_url&&bt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(u){if(he(u))return this._returnResult({data:null,error:u});throw u}}async _denyAuthorization(i,r){try{return await this._useSession(async u=>{const{data:{session:f},error:l}=u;if(l)return this._returnResult({data:null,error:l});if(!f)return this._returnResult({data:null,error:new sn});const d=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:f.access_token,body:{action:"deny"},xform:_=>({data:_,error:null})});return d.data&&d.data.redirect_url&&bt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(u){if(he(u))return this._returnResult({data:null,error:u});throw u}}async _listOAuthGrants(){try{return await this._useSession(async i=>{const{data:{session:r},error:u}=i;return u?this._returnResult({data:null,error:u}):r?await we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new sn})})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _revokeOAuthGrant(i){try{return await this._useSession(async r=>{const{data:{session:u},error:f}=r;return f?this._returnResult({data:null,error:f}):u?(await we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:u.access_token,query:{client_id:i.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new sn})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(i,r={keys:[]}){let u=r.keys.find(_=>_.kid===i);if(u)return u;const f=Date.now();if(u=this.jwks.keys.find(_=>_.kid===i),u&&this.jwks_cached_at+Kg>f)return u;const{data:l,error:d}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=f,u=l.keys.find(_=>_.kid===i),!u)?null:u}async getClaims(i,r={}){try{let u=i;if(!u){const{data:P,error:A}=await this.getSession();if(A||!P.session)return this._returnResult({data:null,error:A});u=P.session.access_token}const{header:f,payload:l,signature:d,raw:{header:_,payload:g}}=eu(u);r!=null&&r.allowExpired||gv(l.exp);const w=!f.alg||f.alg.startsWith("HS")||!f.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(f.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!w){const{error:P}=await this.getUser(u);if(P)throw P;return{data:{claims:l,header:f,signature:d},error:null}}const x=vv(f.alg),k=await crypto.subtle.importKey("jwk",w,x,!0,["verify"]);if(!await crypto.subtle.verify(x,k,d,rv(`${_}.${g}`)))throw new mh("Invalid JWT signature");return{data:{claims:l,header:f,signature:d},error:null}}catch(u){if(he(u))return this._returnResult({data:null,error:u});throw u}}}xa.nextInstanceID={};const Jv=xa,Qv="2.95.3";let la="";typeof Deno<"u"?la="deno":typeof document<"u"?la="web":typeof navigator<"u"&&navigator.product==="ReactNative"?la="react-native":la="node";const Yv={"X-Client-Info":`supabase-js-${la}/${Qv}`},Xv={headers:Yv},ey={schema:"public"},ty={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ny={};function Sa(o){"@babel/helpers - typeof";return Sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Sa(o)}function iy(o,i){if(Sa(o)!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var u=r.call(o,i);if(Sa(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function ry(o){var i=iy(o,"string");return Sa(i)=="symbol"?i:i+""}function sy(o,i,r){return(i=ry(i))in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}function qf(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);i&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(o,f).enumerable})),r.push.apply(r,u)}return r}function at(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?qf(Object(r),!0).forEach(function(u){sy(o,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):qf(Object(r)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(r,u))})}return o}const oy=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),ay=()=>Headers,ly=(o,i,r)=>{const u=oy(r),f=ay();return async(l,d)=>{var _;const g=(_=await i())!==null&&_!==void 0?_:o;let w=new f(d==null?void 0:d.headers);return w.has("apikey")||w.set("apikey",o),w.has("Authorization")||w.set("Authorization",`Bearer ${g}`),u(l,at(at({},d),{},{headers:w}))}};function uy(o){return o.endsWith("/")?o:o+"/"}function cy(o,i){var r,u;const{db:f,auth:l,realtime:d,global:_}=o,{db:g,auth:w,realtime:x,global:k}=i,C={db:at(at({},g),f),auth:at(at({},w),l),realtime:at(at({},x),d),storage:{},global:at(at(at({},k),_),{},{headers:at(at({},(r=k==null?void 0:k.headers)!==null&&r!==void 0?r:{}),(u=_==null?void 0:_.headers)!==null&&u!==void 0?u:{})}),accessToken:async()=>""};return o.accessToken?C.accessToken=o.accessToken:delete C.accessToken,C}function hy(o){const i=o==null?void 0:o.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uy(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var dy=class extends Jv{constructor(o){super(o)}},fy=class{constructor(o,i,r){var u,f;this.supabaseUrl=o,this.supabaseKey=i;const l=hy(o);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,_={db:ey,realtime:ny,auth:at(at({},ty),{},{storageKey:d}),global:Xv},g=cy(r??{},_);if(this.storageKey=(u=g.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(f=g.global.headers)!==null&&f!==void 0?f:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}});else{var w;this.auth=this._initSupabaseAuthClient((w=g.auth)!==null&&w!==void 0?w:{},this.headers,g.global.fetch)}this.fetch=ly(i,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(at({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new Q_(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new Hg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Z_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(o){return this.rest.from(o)}schema(o){return this.rest.schema(o)}rpc(o,i={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(o,i,r)}channel(o,i={config:{}}){return this.realtime.channel(o,i)}getChannels(){return this.realtime.getChannels()}removeChannel(o){return this.realtime.removeChannel(o)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var o=this,i,r;if(o.accessToken)return await o.accessToken();const{data:u}=await o.auth.getSession();return(i=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:o.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:o,persistSession:i,detectSessionInUrl:r,storage:u,userStorage:f,storageKey:l,flowType:d,lock:_,debug:g,throwOnError:w},x,k){const C={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dy({url:this.authUrl.href,headers:at(at({},C),x),storageKey:l,autoRefreshToken:o,persistSession:i,detectSessionInUrl:r,storage:u,userStorage:f,flowType:d,lock:_,debug:g,throwOnError:w,fetch:k,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(o){return new pg(this.realtimeUrl.href,at(at({},o),{},{params:at(at({},{apikey:this.supabaseKey}),o==null?void 0:o.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,i)=>{this._handleTokenChanged(o,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(o,i,r){(o==="TOKEN_REFRESHED"||o==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):o==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const py=(o,i,r)=>new fy(o,i,r);function my(){if(typeof window<"u")return!1;const o=globalThis.process;if(!o)return!1;const i=o.version;if(i==null)return!1;const r=i.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}my()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _y="https://gfxacwgmiikzbzsdfhff.supabase.co",gy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmeGFjd2dtaWlremJ6c2RmaGZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3MTU3NzUsImV4cCI6MjA4NjI5MTc3NX0.w6lYAX4NEjIhDVLQqidrOT0hVZvBw-LumJWOM1pHX44",qr=py(_y,gy);function vy(){const[o,i]=W.useState(null),[r,u]=W.useState(!0);W.useEffect(()=>{const{data:{subscription:d}}=qr.auth.onAuthStateChange((_,g)=>{i((g==null?void 0:g.user)??null),u(!1)});return()=>d.unsubscribe()},[]);async function f(d,_){const{error:g}=await qr.auth.signInWithPassword({email:d,password:_});return g}async function l(){const{error:d}=await qr.auth.signOut();d&&console.error("Sign out failed:",d)}return{user:o,loading:r,signIn:f,signOut:l}}const yy="id,numero_tiers,civilite,nom,rue,code_postal,ville,departement,zone_geographique,telephone_domicile,telephone_elevage,adresse_email,sau_estimee_ha,source_sau,sau_contrats_ha,sau_tonnages_ha,tonnage_total,certifications,latitude,longitude,annee_fidelite,score_pertinence,tc_referent",wy="id,prospect_id,type,notes,created_at,created_by";function xy(){const[o,i]=W.useState([]),[r,u]=W.useState([]),[f,l]=W.useState(!0),d=W.useRef(null),_=W.useCallback(async(w=!1)=>{var Z;(Z=d.current)==null||Z.abort();const x=new AbortController;d.current=x,w||l(!0);const[k,C]=await Promise.all([qr.from("prospects").select(yy).order("score_pertinence",{ascending:!1}).abortSignal(x.signal),qr.from("actions").select(wy).order("created_at",{ascending:!1}).limit(1e3).abortSignal(x.signal)]);if(x.signal.aborted)return;if(k.error){console.error("Failed to fetch prospects:",k.error),l(!1);return}if(C.error){console.error("Failed to fetch actions:",C.error),l(!1);return}const P=k.data??[],A=C.data??[];u(A);const R=new Map;A.forEach(z=>{const $=R.get(z.prospect_id)??[];$.push(z),R.set(z.prospect_id,$)});const M=P.map(z=>{const $=(R.get(z.id)??[])[0]??null;return{...z,statut:$?$.type:"en_attente",derniere_action:$}});i(M),l(!1)},[]),g=W.useCallback(async(w,x,k)=>{var R;const{data:{session:C}}=await qr.auth.getSession(),P=((R=C==null?void 0:C.user)==null?void 0:R.email)??null,{error:A}=await qr.from("actions").insert({prospect_id:w,type:x,notes:k??null,created_by:P});return A||await _(!0),A},[_]);return W.useEffect(()=>(_(),()=>{var w;(w=d.current)==null||w.abort()}),[_]),{prospects:o,actions:r,loading:f,refetch:_,addAction:g}}const Cp=W.createContext(null);function Sy({children:o}){const i=xy();return E.jsx(Cp.Provider,{value:i,children:o})}function pu(){const o=W.useContext(Cp);if(!o)throw new Error("useProspectsContext must be used within ProspectsProvider");return o}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pp=(...o)=>o.filter((i,r,u)=>!!i&&i.trim()!==""&&u.indexOf(i)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var by={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=W.forwardRef(({color:o="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:u,className:f="",children:l,iconNode:d,..._},g)=>W.createElement("svg",{ref:g,...by,width:i,height:i,stroke:o,strokeWidth:u?Number(r)*24/Number(i):r,className:Pp("lucide",f),..._},[...d.map(([w,x])=>W.createElement(w,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(o,i)=>{const r=W.forwardRef(({className:u,...f},l)=>W.createElement(Ly,{ref:l,iconNode:i,className:Pp(`lucide-${ky(o)}`,u),...f}));return r.displayName=`${o}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Ve("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=Ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=Ve("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=Ve("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=Ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=Ve("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Ve("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Ve("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Ve("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Ve("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=Ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Ve("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=Ve("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function Gy({onLogin:o}){const[i,r]=W.useState(""),[u,f]=W.useState(""),[l,d]=W.useState(""),[_,g]=W.useState(!1);async function w(x){x.preventDefault(),d(""),g(!0),await o(i,u)&&d("Email ou mot de passe incorrect"),g(!1)}return E.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:E.jsxs("div",{className:"w-full max-w-sm",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-cooperl-100 mb-4",children:E.jsx(Lh,{size:32,className:"text-cooperl-600"})}),E.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bois & Bocage"}),E.jsx("p",{className:"text-gray-500 mt-1",children:"Prospection commerciale"})]}),E.jsxs("form",{onSubmit:w,className:"bg-white rounded-lg shadow p-6 space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),E.jsx("input",{type:"email",value:i,onChange:x=>r(x.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cooperl-500",placeholder:"anne@cooperl.fr"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),E.jsx("input",{type:"password",value:u,onChange:x=>f(x.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cooperl-500"})]}),l&&E.jsx("div",{className:"text-sm text-red-600 bg-red-50 rounded p-2",children:l}),E.jsxs("button",{type:"submit",disabled:_,className:"w-full flex items-center justify-center gap-2 bg-cooperl-600 text-white py-2 rounded-lg font-medium hover:bg-cooperl-700 transition-colors disabled:opacity-50",children:[E.jsx(By,{size:16}),_?"Connexion...":"Se connecter"]})]}),E.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Prototype  Environnement DSI simule"})]})})}const Ky=[{to:"/",label:"Pipeline",icon:My},{to:"/carte",label:"Carte",icon:$y},{to:"/suivi",label:"Suivi",icon:Ty},{to:"/limitations",label:"Limites",icon:Op}];function Jy({children:o,onSignOut:i,userEmail:r}){return E.jsxs("div",{className:"min-h-screen flex flex-col",children:[E.jsxs("header",{className:"bg-cooperl-700 text-white px-4 py-3 flex items-center gap-3 shadow-md",children:[E.jsx(Lh,{size:24}),E.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"Bois & Bocage"}),E.jsx("span",{className:"text-cooperl-200 text-sm ml-1",children:"Prospection"}),E.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[r&&E.jsx("span",{className:"text-cooperl-200 text-sm hidden sm:block",children:r}),E.jsxs("button",{onClick:i,className:"flex items-center gap-1 text-cooperl-200 hover:text-white text-sm transition-colors",children:[E.jsx(Dy,{size:14}),E.jsx("span",{className:"hidden sm:inline",children:"Deconnexion"})]})]})]}),E.jsx("nav",{className:"bg-white border-b px-4 flex gap-1",children:Ky.map(({to:u,label:f,icon:l})=>E.jsxs(M_,{to:u,className:({isActive:d})=>`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${d?"border-cooperl-600 text-cooperl-700":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[E.jsx(l,{size:16}),f]},u))}),E.jsx("main",{className:"flex-1 p-4 max-w-7xl mx-auto w-full",children:o})]})}const lr={en_attente:"En attente",appele:"Appel",interesse:"Intress",refus:"Refus",rappeler:" rappeler",recrute:"Recrut"},Qs={en_attente:"bg-gray-100 text-gray-700",appele:"bg-blue-100 text-blue-700",interesse:"bg-amber-100 text-amber-700",refus:"bg-red-100 text-red-700",rappeler:"bg-purple-100 text-purple-700",recrute:"bg-emerald-100 text-emerald-700"};function Qy(o){const i=o.sau_estimee_ha??0,r=o.tonnage_total??0,u=o.certifications!==null&&o.certifications!==""&&o.certifications!=="0.0"&&o.certifications!=="0",f=o.annee_fidelite??0;return[{label:"SAU > 0 ha",points:i>0?30:0,max:30,met:i>0},{label:"SAU > 50 ha",points:i>50?20:0,max:20,met:i>50},{label:"Certifi HVE/Bio",points:u?15:0,max:15,met:u},{label:"Tonnage > 100t",points:r>100?10:0,max:10,met:r>100},{label:"Fidlit >= 3 ans",points:f>=3?10:0,max:10,met:f>=3}]}function Yy(){const{prospects:o,loading:i}=pu(),r=no(),[u,f]=W.useState(""),[l,d]=W.useState("score_pertinence"),[_,g]=W.useState(!1),[w,x]=W.useState(""),[k,C]=W.useState(""),[P,A]=W.useState(!1),[R,M]=W.useState(0),Z=W.useMemo(()=>[...new Set(o.map(ne=>ne.departement).filter(Boolean))].sort(),[o]),z=W.useMemo(()=>[...new Set(o.map(ne=>ne.zone_geographique).filter(Boolean))].sort(),[o]),$=W.useMemo(()=>o.filter(ne=>!(u&&!ne.nom.toLowerCase().includes(u.toLowerCase())&&!ne.numero_tiers.includes(u)||w&&ne.departement!==w||k&&ne.zone_geographique!==k||P&&(!ne.certifications||ne.certifications==="0.0"||ne.certifications==="0")||ne.score_pertinence<R)).sort((ne,Ne)=>{const Me=ne[l],De=Ne[l];return Me==null&&De==null?0:Me==null?_?-1:1:De==null?_?1:-1:Me<De?_?-1:1:Me>De?_?1:-1:0}),[o,u,w,k,P,R,l,_]),{totalSau:X,pctCert:fe,avgScore:pe}=W.useMemo(()=>{const ne=$.reduce((De,Fe)=>De+(Fe.sau_estimee_ha??0),0),Ne=$.length?Math.round($.filter(De=>De.certifications&&De.certifications!=="0.0"&&De.certifications!=="0").length/$.length*100):0,Me=$.length?Math.round($.reduce((De,Fe)=>De+Fe.score_pertinence,0)/$.length):0;return{totalSau:ne,pctCert:Ne,avgScore:Me}},[$]);function be(ne){l===ne?g(!_):(d(ne),g(!1))}function Be(ne){let Ne=ne.replace(/"/g,'""');return/^[=+\-@\t\r]/.test(Ne)&&(Ne="'"+Ne),`"${Ne}"`}function qe(){const ne=["numero_tiers","nom","ville","departement","zone","sau_ha","score","statut","telephone"],Ne=$.map(Pe=>[Pe.numero_tiers,Pe.nom,Pe.ville??"",Pe.departement??"",Pe.zone_geographique??"",String(Pe.sau_estimee_ha??""),String(Pe.score_pertinence),lr[Pe.statut],Pe.telephone_elevage??Pe.telephone_domicile??""]),Me=[ne.map(Pe=>Be(Pe)),...Ne.map(Pe=>Pe.map(Ue=>Be(Ue)))].join(`
`),De=new Blob(["\uFEFF"+Me],{type:"text/csv;charset=utf-8;"}),Fe=URL.createObjectURL(De),Lt=document.createElement("a");Lt.href=Fe,Lt.download="prospects_bois_bocage.csv",Lt.click(),setTimeout(()=>URL.revokeObjectURL(Fe),6e4)}return i?E.jsx("div",{className:"text-center py-12 text-gray-400",children:"Chargement..."}):E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[E.jsx(tu,{icon:E.jsx(Tp,{size:20}),label:"Prospects",value:String($.length),color:"text-cooperl-600"}),E.jsx(tu,{icon:E.jsx(Zy,{size:20}),label:"SAU totale",value:`${Math.round(X).toLocaleString("fr-FR")} ha`,color:"text-blue-600"}),E.jsx(tu,{icon:E.jsx(Py,{size:20}),label:"Certifis",value:`${fe}%`,color:"text-amber-600"}),E.jsx(tu,{icon:E.jsx(zy,{size:20}),label:"Score moyen",value:String(pe),color:"text-emerald-600"})]}),E.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[E.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[E.jsx(Hy,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),E.jsx("input",{type:"text",placeholder:"Rechercher nom ou n tiers...",value:u,onChange:ne=>f(ne.target.value),className:"w-full pl-9 pr-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-cooperl-500"})]}),E.jsxs("select",{value:w,onChange:ne=>x(ne.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[E.jsx("option",{value:"",children:"Tous depts"}),Z.map(ne=>E.jsx("option",{value:ne,children:ne},ne))]}),E.jsxs("select",{value:k,onChange:ne=>C(ne.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[E.jsx("option",{value:"",children:"Toutes zones"}),z.map(ne=>E.jsx("option",{value:ne,children:ne},ne))]}),E.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[E.jsx("input",{type:"checkbox",checked:P,onChange:ne=>A(ne.target.checked),className:"rounded"}),"Certifis"]}),E.jsxs("select",{value:R,onChange:ne=>M(Number(ne.target.value)),className:"border rounded-lg px-3 py-2 text-sm",children:[E.jsx("option",{value:0,children:"Score min"}),E.jsx("option",{value:50,children:"50+"}),E.jsx("option",{value:60,children:"60+"}),E.jsx("option",{value:70,children:"70+"}),E.jsx("option",{value:80,children:"80+"})]}),E.jsxs("button",{onClick:qe,className:"flex items-center gap-1 px-3 py-2 bg-cooperl-600 text-white rounded-lg text-sm hover:bg-cooperl-700 transition-colors",children:[E.jsx(Iy,{size:14})," CSV"]})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:[E.jsxs("table",{className:"w-full text-sm",children:[E.jsx("thead",{className:"bg-gray-50 text-gray-600",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-3 py-2 text-left cursor-pointer select-none",onClick:()=>be("nom"),children:E.jsxs("span",{className:"flex items-center gap-1",children:["Exploitation ",E.jsx(aa,{col:"nom",sortKey:l,sortAsc:_})]})}),E.jsx("th",{className:"px-3 py-2 text-left",children:"Ville"}),E.jsx("th",{className:"px-3 py-2 text-center cursor-pointer select-none",onClick:()=>be("departement"),children:E.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Dept ",E.jsx(aa,{col:"departement",sortKey:l,sortAsc:_})]})}),E.jsx("th",{className:"px-3 py-2 text-center cursor-pointer select-none",onClick:()=>be("zone_geographique"),children:E.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Zone ",E.jsx(aa,{col:"zone_geographique",sortKey:l,sortAsc:_})]})}),E.jsx("th",{className:"px-3 py-2 text-right cursor-pointer select-none",onClick:()=>be("sau_estimee_ha"),children:E.jsxs("span",{className:"flex items-center justify-end gap-1",children:["SAU (ha) ",E.jsx(aa,{col:"sau_estimee_ha",sortKey:l,sortAsc:_})]})}),E.jsx("th",{className:"px-3 py-2 text-center cursor-pointer select-none",onClick:()=>be("score_pertinence"),children:E.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Score ",E.jsx(aa,{col:"score_pertinence",sortKey:l,sortAsc:_})]})}),E.jsx("th",{className:"px-3 py-2 text-center",children:"Statut"})]})}),E.jsx("tbody",{className:"divide-y",children:$.map(ne=>E.jsxs("tr",{onClick:()=>r(`/prospect/${ne.id}`),className:"hover:bg-cooperl-50 cursor-pointer transition-colors",children:[E.jsx("td",{className:"px-3 py-2 font-medium",children:ne.nom}),E.jsx("td",{className:"px-3 py-2 text-gray-600",children:ne.ville}),E.jsx("td",{className:"px-3 py-2 text-center",children:ne.departement}),E.jsx("td",{className:"px-3 py-2 text-center",children:ne.zone_geographique}),E.jsx("td",{className:"px-3 py-2 text-right",children:ne.sau_estimee_ha?Math.round(ne.sau_estimee_ha):"-"}),E.jsx("td",{className:"px-3 py-2 text-center",children:E.jsx(Xy,{score:ne.score_pertinence})}),E.jsx("td",{className:"px-3 py-2 text-center",children:E.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Qs[ne.statut]}`,children:lr[ne.statut]})})]},ne.id))})]}),$.length===0&&E.jsx("div",{className:"text-center py-8 text-gray-400",children:"Aucun prospect ne correspond aux filtres"})]})]})}function tu({icon:o,label:i,value:r,color:u}){return E.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex items-center gap-3",children:[E.jsx("div",{className:u,children:o}),E.jsxs("div",{children:[E.jsx("div",{className:"text-xs text-gray-500",children:i}),E.jsx("div",{className:"text-lg font-bold",children:r})]})]})}function aa({col:o,sortKey:i,sortAsc:r}){return i!==o?null:r?E.jsx(Ry,{size:14}):E.jsx(Oy,{size:14})}function Xy({score:o}){const i=o>=70?"bg-emerald-100 text-emerald-700":o>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700";return E.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${i}`,children:o})}function Rp(o,i){const r=W.useRef(i);W.useEffect(function(){i!==r.current&&o.attributionControl!=null&&(r.current!=null&&o.attributionControl.removeAttribution(r.current),i!=null&&o.attributionControl.addAttribution(i)),r.current=i},[o,i])}const e0=1;function t0(o){return Object.freeze({__version:e0,map:o})}function Ap(o,i){return Object.freeze({...o,...i})}const Np=W.createContext(null),Ip=Np.Provider;function Ch(){const o=W.useContext(Np);if(o==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return o}function jp(o){function i(r,u){const{instance:f,context:l}=o(r).current;return W.useImperativeHandle(u,()=>f),r.children==null?null:fa.createElement(Ip,{value:l},r.children)}return W.forwardRef(i)}function n0(o){function i(r,u){const[f,l]=W.useState(!1),{instance:d}=o(r,l).current;W.useImperativeHandle(u,()=>d),W.useEffect(function(){f&&d.update()},[d,f,r.children]);const _=d._contentNode;return _?Am.createPortal(r.children,_):null}return W.forwardRef(i)}function i0(o){function i(r,u){const{instance:f}=o(r).current;return W.useImperativeHandle(u,()=>f),null}return W.forwardRef(i)}function Ph(o,i){const r=W.useRef();W.useEffect(function(){return i!=null&&o.instance.on(i),r.current=i,function(){r.current!=null&&o.instance.off(r.current),r.current=null}},[o,i])}function mu(o,i){const r=o.pane??i.pane;return r?{...o,pane:r}:o}function r0(o,i){return function(u,f){const l=Ch(),d=o(mu(u,l),l);return Rp(l.map,u.attribution),Ph(d.current,u.eventHandlers),i(d.current,l,u,f),d}}var ua={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var s0=ua.exports,Kf;function o0(){return Kf||(Kf=1,(function(o,i){(function(r,u){u(i)})(s0,(function(r){var u="1.9.4";function f(t){var s,c,p,y;for(c=1,p=arguments.length;c<p;c++){y=arguments[c];for(s in y)t[s]=y[s]}return t}var l=Object.create||(function(){function t(){}return function(s){return t.prototype=s,new t}})();function d(t,s){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var p=c.call(arguments,2);return function(){return t.apply(s,p.length?p.concat(c.call(arguments)):arguments)}}var _=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++_),t._leaflet_id}function w(t,s,c){var p,y,b,O;return O=function(){p=!1,y&&(b.apply(c,y),y=!1)},b=function(){p?y=arguments:(t.apply(c,arguments),setTimeout(O,s),p=!0)},b}function x(t,s,c){var p=s[1],y=s[0],b=p-y;return t===p&&c?t:((t-y)%b+b)%b+y}function k(){return!1}function C(t,s){if(s===!1)return t;var c=Math.pow(10,s===void 0?6:s);return Math.round(t*c)/c}function P(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function A(t){return P(t).split(/\s+/)}function R(t,s){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?l(t.options):{});for(var c in s)t.options[c]=s[c];return t.options}function M(t,s,c){var p=[];for(var y in t)p.push(encodeURIComponent(c?y.toUpperCase():y)+"="+encodeURIComponent(t[y]));return(!s||s.indexOf("?")===-1?"?":"&")+p.join("&")}var Z=/\{ *([\w_ -]+) *\}/g;function z(t,s){return t.replace(Z,function(c,p){var y=s[p];if(y===void 0)throw new Error("No value provided for variable "+c);return typeof y=="function"&&(y=y(s)),y})}var $=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function X(t,s){for(var c=0;c<t.length;c++)if(t[c]===s)return c;return-1}var fe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function pe(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var be=0;function Be(t){var s=+new Date,c=Math.max(0,16-(s-be));return be=s+c,window.setTimeout(t,c)}var qe=window.requestAnimationFrame||pe("RequestAnimationFrame")||Be,ne=window.cancelAnimationFrame||pe("CancelAnimationFrame")||pe("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Ne(t,s,c){if(c&&qe===Be)t.call(s);else return qe.call(window,d(t,s))}function Me(t){t&&ne.call(window,t)}var De={__proto__:null,extend:f,create:l,bind:d,get lastId(){return _},stamp:g,throttle:w,wrapNum:x,falseFn:k,formatNum:C,trim:P,splitWords:A,setOptions:R,getParamString:M,template:z,isArray:$,indexOf:X,emptyImageUrl:fe,requestFn:qe,cancelFn:ne,requestAnimFrame:Ne,cancelAnimFrame:Me};function Fe(){}Fe.extend=function(t){var s=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=s.__super__=this.prototype,p=l(c);p.constructor=s,s.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(s[y]=this[y]);return t.statics&&f(s,t.statics),t.includes&&(Lt(t.includes),f.apply(null,[p].concat(t.includes))),f(p,t),delete p.statics,delete p.includes,p.options&&(p.options=c.options?l(c.options):{},f(p.options,t.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,O=p._initHooks.length;b<O;b++)p._initHooks[b].call(this)}},s},Fe.include=function(t){var s=this.prototype.options;return f(this.prototype,t),t.options&&(this.prototype.options=s,this.mergeOptions(t.options)),this},Fe.mergeOptions=function(t){return f(this.prototype.options,t),this},Fe.addInitHook=function(t){var s=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Lt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=$(t)?t:[t];for(var s=0;s<t.length;s++)t[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Pe={on:function(t,s,c){if(typeof t=="object")for(var p in t)this._on(p,t[p],s);else{t=A(t);for(var y=0,b=t.length;y<b;y++)this._on(t[y],s,c)}return this},off:function(t,s,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var p in t)this._off(p,t[p],s);else{t=A(t);for(var y=arguments.length===1,b=0,O=t.length;b<O;b++)y?this._off(t[b]):this._off(t[b],s,c)}return this},_on:function(t,s,c,p){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(t,s,c)===!1){c===this&&(c=void 0);var y={fn:s,ctx:c};p&&(y.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(y)}},_off:function(t,s,c){var p,y,b;if(this._events&&(p=this._events[t],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,b=p.length;y<b;y++)p[y].fn=k;delete this._events[t];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var O=this._listens(t,s,c);if(O!==!1){var B=p[O];this._firingCount&&(B.fn=k,this._events[t]=p=p.slice()),p.splice(O,1)}}},fire:function(t,s,c){if(!this.listens(t,c))return this;var p=f({},s,{type:t,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var y=this._events[t];if(y){this._firingCount=this._firingCount+1||1;for(var b=0,O=y.length;b<O;b++){var B=y[b],F=B.fn;B.once&&this.off(t,F,B.ctx),F.call(B.ctx||this,p)}this._firingCount--}}return c&&this._propagateEvent(p),this},listens:function(t,s,c,p){typeof t!="string"&&console.warn('"string" type argument expected');var y=s;typeof s!="function"&&(p=!!s,y=void 0,c=void 0);var b=this._events&&this._events[t];if(b&&b.length&&this._listens(t,y,c)!==!1)return!0;if(p){for(var O in this._eventParents)if(this._eventParents[O].listens(t,s,c,p))return!0}return!1},_listens:function(t,s,c){if(!this._events)return!1;var p=this._events[t]||[];if(!s)return!!p.length;c===this&&(c=void 0);for(var y=0,b=p.length;y<b;y++)if(p[y].fn===s&&p[y].ctx===c)return y;return!1},once:function(t,s,c){if(typeof t=="object")for(var p in t)this._on(p,t[p],s,!0);else{t=A(t);for(var y=0,b=t.length;y<b;y++)this._on(t[y],s,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var s in this._eventParents)this._eventParents[s].fire(t.type,f({layer:t.target,propagatedFrom:t.target},t),!0)}};Pe.addEventListener=Pe.on,Pe.removeEventListener=Pe.clearAllEventListeners=Pe.off,Pe.addOneTimeEventListener=Pe.once,Pe.fireEvent=Pe.fire,Pe.hasEventListeners=Pe.listens;var Ue=Fe.extend(Pe);function q(t,s,c){this.x=c?Math.round(t):t,this.y=c?Math.round(s):s}var ge=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(t){return this.clone()._add(G(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(G(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new q(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new q(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ge(this.x),this.y=ge(this.y),this},distanceTo:function(t){t=G(t);var s=t.x-this.x,c=t.y-this.y;return Math.sqrt(s*s+c*c)},equals:function(t){return t=G(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=G(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+C(this.x)+", "+C(this.y)+")"}};function G(t,s,c){return t instanceof q?t:$(t)?new q(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new q(t.x,t.y):new q(t,s,c)}function I(t,s){if(t)for(var c=s?[t,s]:t,p=0,y=c.length;p<y;p++)this.extend(c[p])}I.prototype={extend:function(t){var s,c;if(!t)return this;if(t instanceof q||typeof t[0]=="number"||"x"in t)s=c=G(t);else if(t=V(t),s=t.min,c=t.max,!s||!c)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=c.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var s,c;return typeof t[0]=="number"||t instanceof q?t=G(t):t=V(t),t instanceof I?(s=t.min,c=t.max):s=c=t,s.x>=this.min.x&&c.x<=this.max.x&&s.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=V(t);var s=this.min,c=this.max,p=t.min,y=t.max,b=y.x>=s.x&&p.x<=c.x,O=y.y>=s.y&&p.y<=c.y;return b&&O},overlaps:function(t){t=V(t);var s=this.min,c=this.max,p=t.min,y=t.max,b=y.x>s.x&&p.x<c.x,O=y.y>s.y&&p.y<c.y;return b&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var s=this.min,c=this.max,p=Math.abs(s.x-c.x)*t,y=Math.abs(s.y-c.y)*t;return V(G(s.x-p,s.y-y),G(c.x+p,c.y+y))},equals:function(t){return t?(t=V(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function V(t,s){return!t||t instanceof I?t:new I(t,s)}function me(t,s){if(t)for(var c=s?[t,s]:t,p=0,y=c.length;p<y;p++)this.extend(c[p])}me.prototype={extend:function(t){var s=this._southWest,c=this._northEast,p,y;if(t instanceof le)p=t,y=t;else if(t instanceof me){if(p=t._southWest,y=t._northEast,!p||!y)return this}else return t?this.extend(re(t)||de(t)):this;return!s&&!c?(this._southWest=new le(p.lat,p.lng),this._northEast=new le(y.lat,y.lng)):(s.lat=Math.min(p.lat,s.lat),s.lng=Math.min(p.lng,s.lng),c.lat=Math.max(y.lat,c.lat),c.lng=Math.max(y.lng,c.lng)),this},pad:function(t){var s=this._southWest,c=this._northEast,p=Math.abs(s.lat-c.lat)*t,y=Math.abs(s.lng-c.lng)*t;return new me(new le(s.lat-p,s.lng-y),new le(c.lat+p,c.lng+y))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof le||"lat"in t?t=re(t):t=de(t);var s=this._southWest,c=this._northEast,p,y;return t instanceof me?(p=t.getSouthWest(),y=t.getNorthEast()):p=y=t,p.lat>=s.lat&&y.lat<=c.lat&&p.lng>=s.lng&&y.lng<=c.lng},intersects:function(t){t=de(t);var s=this._southWest,c=this._northEast,p=t.getSouthWest(),y=t.getNorthEast(),b=y.lat>=s.lat&&p.lat<=c.lat,O=y.lng>=s.lng&&p.lng<=c.lng;return b&&O},overlaps:function(t){t=de(t);var s=this._southWest,c=this._northEast,p=t.getSouthWest(),y=t.getNorthEast(),b=y.lat>s.lat&&p.lat<c.lat,O=y.lng>s.lng&&p.lng<c.lng;return b&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,s){return t?(t=de(t),this._southWest.equals(t.getSouthWest(),s)&&this._northEast.equals(t.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function de(t,s){return t instanceof me?t:new me(t,s)}function le(t,s,c){if(isNaN(t)||isNaN(s))throw new Error("Invalid LatLng object: ("+t+", "+s+")");this.lat=+t,this.lng=+s,c!==void 0&&(this.alt=+c)}le.prototype={equals:function(t,s){if(!t)return!1;t=re(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(s===void 0?1e-9:s)},toString:function(t){return"LatLng("+C(this.lat,t)+", "+C(this.lng,t)+")"},distanceTo:function(t){return Te.distance(this,re(t))},wrap:function(){return Te.wrapLatLng(this)},toBounds:function(t){var s=180*t/40075017,c=s/Math.cos(Math.PI/180*this.lat);return de([this.lat-s,this.lng-c],[this.lat+s,this.lng+c])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function re(t,s,c){return t instanceof le?t:$(t)&&typeof t[0]!="object"?t.length===3?new le(t[0],t[1],t[2]):t.length===2?new le(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new le(t.lat,"lng"in t?t.lng:t.lon,t.alt):s===void 0?null:new le(t,s,c)}var Ae={latLngToPoint:function(t,s){var c=this.projection.project(t),p=this.scale(s);return this.transformation._transform(c,p)},pointToLatLng:function(t,s){var c=this.scale(s),p=this.transformation.untransform(t,c);return this.projection.unproject(p)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var s=this.projection.bounds,c=this.scale(t),p=this.transformation.transform(s.min,c),y=this.transformation.transform(s.max,c);return new I(p,y)},infinite:!1,wrapLatLng:function(t){var s=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,p=t.alt;return new le(c,s,p)},wrapLatLngBounds:function(t){var s=t.getCenter(),c=this.wrapLatLng(s),p=s.lat-c.lat,y=s.lng-c.lng;if(p===0&&y===0)return t;var b=t.getSouthWest(),O=t.getNorthEast(),B=new le(b.lat-p,b.lng-y),F=new le(O.lat-p,O.lng-y);return new me(B,F)}},Te=f({},Ae,{wrapLng:[-180,180],R:6371e3,distance:function(t,s){var c=Math.PI/180,p=t.lat*c,y=s.lat*c,b=Math.sin((s.lat-t.lat)*c/2),O=Math.sin((s.lng-t.lng)*c/2),B=b*b+Math.cos(p)*Math.cos(y)*O*O,F=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*F}}),We=6378137,wt={R:We,MAX_LATITUDE:85.0511287798,project:function(t){var s=Math.PI/180,c=this.MAX_LATITUDE,p=Math.max(Math.min(c,t.lat),-c),y=Math.sin(p*s);return new q(this.R*t.lng*s,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(t){var s=180/Math.PI;return new le((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*s,t.x*s/this.R)},bounds:(function(){var t=We*Math.PI;return new I([-t,-t],[t,t])})()};function yi(t,s,c,p){if($(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=s,this._c=c,this._d=p}yi.prototype={transform:function(t,s){return this._transform(t.clone(),s)},_transform:function(t,s){return s=s||1,t.x=s*(this._a*t.x+this._b),t.y=s*(this._c*t.y+this._d),t},untransform:function(t,s){return s=s||1,new q((t.x/s-this._b)/this._a,(t.y/s-this._d)/this._c)}};function wi(t,s,c,p){return new yi(t,s,c,p)}var xi=f({},Te,{code:"EPSG:3857",projection:wt,transformation:(function(){var t=.5/(Math.PI*wt.R);return wi(t,.5,-t,.5)})()}),ro=f({},xi,{code:"EPSG:900913"});function so(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function oo(t,s){var c="",p,y,b,O,B,F;for(p=0,b=t.length;p<b;p++){for(B=t[p],y=0,O=B.length;y<O;y++)F=B[y],c+=(y?"L":"M")+F.x+" "+F.y;c+=s?ue.svg?"z":"x":""}return c||"M0 0"}var ur=document.documentElement.style,cr="ActiveXObject"in window,ao=cr&&!document.addEventListener,Si="msLaunchUri"in navigator&&!("documentMode"in document),Nn=Ct("webkit"),Gr=Ct("android"),lo=Ct("android 2")||Ct("android 3"),La=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ca=Gr&&Ct("Google")&&La<537&&!("AudioNode"in window),Kr=!!window.opera,Jr=!Si&&Ct("chrome"),hr=Ct("gecko")&&!Nn&&!Kr&&!cr,Pa=!Jr&&Ct("safari"),ki=Ct("phantom"),bi="OTransition"in ur,vu=navigator.platform.indexOf("Win")===0,uo=cr&&"transition"in ur,Qr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!lo,Ea="MozPerspective"in ur,co=!window.L_DISABLE_3D&&(uo||Qr||Ea)&&!bi&&!ki,Vn=typeof orientation<"u"||Ct("mobile"),ho=Vn&&Nn,fo=Vn&&Qr,Yr=!window.PointerEvent&&window.MSPointerEvent,qn=!!(window.PointerEvent||Yr),Gn="ontouchstart"in window||!!window.TouchEvent,Ta=!window.L_NO_TOUCH&&(Gn||qn),Oa=Vn&&Kr,Ra=Vn&&hr,Aa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Na=(function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",k,s),window.removeEventListener("testPassiveEventSupport",k,s)}catch{}return t})(),po=(function(){return!!document.createElement("canvas").getContext})(),Xr=!!(document.createElementNS&&so("svg").createSVGRect),dr=!!Xr&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),mo=!Xr&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var s=t.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}})(),fr=navigator.platform.indexOf("Mac")===0,yu=navigator.platform.indexOf("Linux")===0;function Ct(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ue={ie:cr,ielt9:ao,edge:Si,webkit:Nn,android:Gr,android23:lo,androidStock:Ca,opera:Kr,chrome:Jr,gecko:hr,safari:Pa,phantom:ki,opera12:bi,win:vu,ie3d:uo,webkit3d:Qr,gecko3d:Ea,any3d:co,mobile:Vn,mobileWebkit:ho,mobileWebkit3d:fo,msPointer:Yr,pointer:qn,touch:Ta,touchNative:Gn,mobileOpera:Oa,mobileGecko:Ra,retina:Aa,passiveEvents:Na,canvas:po,svg:Xr,vml:mo,inlineSvg:dr,mac:fr,linux:yu},pr=ue.msPointer?"MSPointerDown":"pointerdown",es=ue.msPointer?"MSPointerMove":"pointermove",Ia=ue.msPointer?"MSPointerUp":"pointerup",ja=ue.msPointer?"MSPointerCancel":"pointercancel",_o={touchstart:pr,touchmove:es,touchend:Ia,touchcancel:ja},In={touchstart:et,touchmove:ts,touchend:ts,touchcancel:ts},Kn={},go=!1;function wu(t,s,c){return s==="touchstart"&&xu(),In[s]?(c=In[s].bind(this,c),t.addEventListener(_o[s],c,!1),c):(console.warn("wrong event specified:",s),k)}function Ma(t,s,c){if(!_o[s]){console.warn("wrong event specified:",s);return}t.removeEventListener(_o[s],c,!1)}function za(t){Kn[t.pointerId]=t}function Ba(t){Kn[t.pointerId]&&(Kn[t.pointerId]=t)}function vo(t){delete Kn[t.pointerId]}function xu(){go||(document.addEventListener(pr,za,!0),document.addEventListener(es,Ba,!0),document.addEventListener(Ia,vo,!0),document.addEventListener(ja,vo,!0),go=!0)}function ts(t,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var c in Kn)s.touches.push(Kn[c]);s.changedTouches=[s],t(s)}}function et(t,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&tt(s),ts(t,s)}function Su(t){var s={},c,p;for(p in t)c=t[p],s[p]=c&&c.bind?c.bind(t):c;return t=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var yo=200;function Da(t,s){t.addEventListener("dblclick",s);var c=0,p;function y(b){if(b.detail!==1){p=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var O=Yn(b);if(!(O.some(function(F){return F instanceof HTMLLabelElement&&F.attributes.for})&&!O.some(function(F){return F instanceof HTMLInputElement||F instanceof HTMLSelectElement}))){var B=Date.now();B-c<=yo?(p++,p===2&&s(Su(b))):p=1,c=B}}}return t.addEventListener("click",y),{dblclick:s,simDblclick:y}}function ns(t,s){t.removeEventListener("dblclick",s.dblclick),t.removeEventListener("click",s.simDblclick)}var wo=Ei(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Li=Ei(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),mr=Li==="webkitTransition"||Li==="OTransition"?Li+"End":"transitionend";function qt(t){return typeof t=="string"?document.getElementById(t):t}function _r(t,s){var c=t.style[s]||t.currentStyle&&t.currentStyle[s];if((!c||c==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(t,null);c=p?p[s]:null}return c==="auto"?null:c}function Ce(t,s,c){var p=document.createElement(t);return p.className=s||"",c&&c.appendChild(p),p}function Qe(t){var s=t.parentNode;s&&s.removeChild(t)}function is(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ci(t){var s=t.parentNode;s&&s.lastChild!==t&&s.appendChild(t)}function yn(t){var s=t.parentNode;s&&s.firstChild!==t&&s.insertBefore(t,s.firstChild)}function Pi(t,s){if(t.classList!==void 0)return t.classList.contains(s);var c=rs(t);return c.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(c)}function Le(t,s){if(t.classList!==void 0)for(var c=A(s),p=0,y=c.length;p<y;p++)t.classList.add(c[p]);else if(!Pi(t,s)){var b=rs(t);xo(t,(b?b+" ":"")+s)}}function Ge(t,s){t.classList!==void 0?t.classList.remove(s):xo(t,P((" "+rs(t)+" ").replace(" "+s+" "," ")))}function xo(t,s){t.className.baseVal===void 0?t.className=s:t.className.baseVal=s}function rs(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Pt(t,s){"opacity"in t.style?t.style.opacity=s:"filter"in t.style&&Ua(t,s)}function Ua(t,s){var c=!1,p="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(p)}catch{if(s===1)return}s=Math.round(s*100),c?(c.Enabled=s!==100,c.Opacity=s):t.style.filter+=" progid:"+p+"(opacity="+s+")"}function Ei(t){for(var s=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in s)return t[c];return!1}function Gt(t,s,c){var p=s||new q(0,0);t.style[wo]=(ue.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(c?" scale("+c+")":"")}function st(t,s){t._leaflet_pos=s,ue.any3d?Gt(t,s):(t.style.left=s.x+"px",t.style.top=s.y+"px")}function wn(t){return t._leaflet_pos||new q(0,0)}var Ie,Ti,ss;if("onselectstart"in document)Ie=function(){Se(window,"selectstart",tt)},Ti=function(){Ze(window,"selectstart",tt)};else{var Jn=Ei(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ie=function(){if(Jn){var t=document.documentElement.style;ss=t[Jn],t[Jn]="none"}},Ti=function(){Jn&&(document.documentElement.style[Jn]=ss,ss=void 0)}}function os(){Se(window,"dragstart",tt)}function as(){Ze(window,"dragstart",tt)}var gr,vr;function Oi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Kt(),gr=t,vr=t.style.outlineStyle,t.style.outlineStyle="none",Se(window,"keydown",Kt))}function Kt(){gr&&(gr.style.outlineStyle=vr,gr=void 0,vr=void 0,Ze(window,"keydown",Kt))}function xn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function an(t){var s=t.getBoundingClientRect();return{x:s.width/t.offsetWidth||1,y:s.height/t.offsetHeight||1,boundingClientRect:s}}var yr={__proto__:null,TRANSFORM:wo,TRANSITION:Li,TRANSITION_END:mr,get:qt,getStyle:_r,create:Ce,remove:Qe,empty:is,toFront:Ci,toBack:yn,hasClass:Pi,addClass:Le,removeClass:Ge,setClass:xo,getClass:rs,setOpacity:Pt,testProp:Ei,setTransform:Gt,setPosition:st,getPosition:wn,get disableTextSelection(){return Ie},get enableTextSelection(){return Ti},disableImageDrag:os,enableImageDrag:as,preventOutline:Oi,restoreOutline:Kt,getSizedParentNode:xn,getScale:an};function Se(t,s,c,p){if(s&&typeof s=="object")for(var y in s)ko(t,y,s[y],c);else{s=A(s);for(var b=0,O=s.length;b<O;b++)ko(t,s[b],c,p)}return this}var dt="_leaflet_events";function Ze(t,s,c,p){if(arguments.length===1)So(t),delete t[dt];else if(s&&typeof s=="object")for(var y in s)ls(t,y,s[y],c);else if(s=A(s),arguments.length===2)So(t,function(B){return X(s,B)!==-1});else for(var b=0,O=s.length;b<O;b++)ls(t,s[b],c,p);return this}function So(t,s){for(var c in t[dt]){var p=c.split(/\d/)[0];(!s||s(p))&&ls(t,p,null,null,c)}}var Qn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ko(t,s,c,p){var y=s+g(c)+(p?"_"+g(p):"");if(t[dt]&&t[dt][y])return this;var b=function(B){return c.call(p||t,B||window.event)},O=b;!ue.touchNative&&ue.pointer&&s.indexOf("touch")===0?b=wu(t,s,b):ue.touch&&s==="dblclick"?b=Da(t,b):"addEventListener"in t?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?t.addEventListener(Qn[s]||s,b,ue.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(b=function(B){B=B||window.event,Sr(t,B)&&O(B)},t.addEventListener(Qn[s],b,!1)):t.addEventListener(s,O,!1):t.attachEvent("on"+s,b),t[dt]=t[dt]||{},t[dt][y]=b}function ls(t,s,c,p,y){y=y||s+g(c)+(p?"_"+g(p):"");var b=t[dt]&&t[dt][y];if(!b)return this;!ue.touchNative&&ue.pointer&&s.indexOf("touch")===0?Ma(t,s,b):ue.touch&&s==="dblclick"?ns(t,b):"removeEventListener"in t?t.removeEventListener(Qn[s]||s,b,!1):t.detachEvent("on"+s,b),t[dt][y]=null}function ln(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function us(t){return ko(t,"wheel",ln),this}function wr(t){return Se(t,"mousedown touchstart dblclick contextmenu",ln),t._leaflet_disable_click=!0,this}function tt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Jt(t){return tt(t),ln(t),this}function Yn(t){if(t.composedPath)return t.composedPath();for(var s=[],c=t.target;c;)s.push(c),c=c.parentNode;return s}function xr(t,s){if(!s)return new q(t.clientX,t.clientY);var c=an(s),p=c.boundingClientRect;return new q((t.clientX-p.left)/c.x-s.clientLeft,(t.clientY-p.top)/c.y-s.clientTop)}var ku=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $a(t){return ue.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ku:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Sr(t,s){var c=s.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var cs={__proto__:null,on:Se,off:Ze,stopPropagation:ln,disableScrollPropagation:us,disableClickPropagation:wr,preventDefault:tt,stop:Jt,getPropagationPath:Yn,getMousePosition:xr,getWheelDelta:$a,isExternalTarget:Sr,addListener:Se,removeListener:Ze},hs=Ue.extend({run:function(t,s,c,p){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=wn(t),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ne(this._animate,this),this._step()},_step:function(t){var s=+new Date-this._startTime,c=this._duration*1e3;s<c?this._runFrame(this._easeOut(s/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,s){var c=this._startPos.add(this._offset.multiplyBy(t));s&&c._round(),st(this._el,c),this.fire("step")},_complete:function(){Me(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Re=Ue.extend({options:{crs:xi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,s){s=R(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(re(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Li&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,mr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,s,c){if(s=s===void 0?this._zoom:this._limitZoom(s),t=this._limitCenter(re(t),s,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=f({animate:c.animate},c.zoom),c.pan=f({animate:c.animate,duration:c.duration},c.pan));var p=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,s,c.zoom):this._tryAnimatedPan(t,c.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(t,s,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,s){return this._loaded?this.setView(this.getCenter(),t,{zoom:s}):(this._zoom=t,this)},zoomIn:function(t,s){return t=t||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,s)},zoomOut:function(t,s){return t=t||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,s)},setZoomAround:function(t,s,c){var p=this.getZoomScale(s),y=this.getSize().divideBy(2),b=t instanceof q?t:this.latLngToContainerPoint(t),O=b.subtract(y).multiplyBy(1-1/p),B=this.containerPointToLatLng(y.add(O));return this.setView(B,s,{zoom:c})},_getBoundsCenterZoom:function(t,s){s=s||{},t=t.getBounds?t.getBounds():de(t);var c=G(s.paddingTopLeft||s.padding||[0,0]),p=G(s.paddingBottomRight||s.padding||[0,0]),y=this.getBoundsZoom(t,!1,c.add(p));if(y=typeof s.maxZoom=="number"?Math.min(s.maxZoom,y):y,y===1/0)return{center:t.getCenter(),zoom:y};var b=p.subtract(c).divideBy(2),O=this.project(t.getSouthWest(),y),B=this.project(t.getNorthEast(),y),F=this.unproject(O.add(B).divideBy(2).add(b),y);return{center:F,zoom:y}},fitBounds:function(t,s){if(t=de(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,s);return this.setView(c.center,c.zoom,s)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,s){return this.setView(t,this._zoom,{pan:s})},panBy:function(t,s){if(t=G(t).round(),s=s||{},!t.x&&!t.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new hs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){Le(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,s.duration||.25,s.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,s,c){if(c=c||{},c.animate===!1||!ue.any3d)return this.setView(t,s,c);this._stop();var p=this.project(this.getCenter()),y=this.project(t),b=this.getSize(),O=this._zoom;t=re(t),s=s===void 0?O:s;var B=Math.max(b.x,b.y),F=B*this.getZoomScale(O,s),K=y.distanceTo(p)||1,te=1.42,_e=te*te;function Ee($e){var Wi=$e?-1:1,zu=$e?F:B,Bu=F*F-B*B+Wi*_e*_e*K*K,si=2*zu*_e*K,oi=Bu/si,ai=Math.sqrt(oi*oi+1)-oi,Ls=ai<1e-9?-18:Math.log(ai);return Ls}function ft($e){return(Math.exp($e)-Math.exp(-$e))/2}function ut($e){return(Math.exp($e)+Math.exp(-$e))/2}function Mt($e){return ft($e)/ut($e)}var Tt=Ee(0);function Zi($e){return B*(ut(Tt)/ut(Tt+te*$e))}function Ho($e){return B*(ut(Tt)*Mt(Tt+te*$e)-ft(Tt))/_e}function Fn($e){return 1-Math.pow(1-$e,1.5)}var ll=Date.now(),ri=(Ee(1)-Tt)/te,dn=c.duration?1e3*c.duration:1e3*ri*.8;function Hi(){var $e=(Date.now()-ll)/dn,Wi=Fn($e)*ri;$e<=1?(this._flyToFrame=Ne(Hi,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(Ho(Wi)/K)),O),this.getScaleZoom(B/Zi(Wi),O),{flyTo:!0})):this._move(t,s)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Hi.call(this),this},flyToBounds:function(t,s){var c=this._getBoundsCenterZoom(t,s);return this.flyTo(c.center,c.zoom,s)},setMaxBounds:function(t){return t=de(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var s=this.options.minZoom;return this.options.minZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var s=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,s){this._enforcingBounds=!0;var c=this.getCenter(),p=this._limitCenter(c,this._zoom,de(t));return c.equals(p)||this.panTo(p,s),this._enforcingBounds=!1,this},panInside:function(t,s){s=s||{};var c=G(s.paddingTopLeft||s.padding||[0,0]),p=G(s.paddingBottomRight||s.padding||[0,0]),y=this.project(this.getCenter()),b=this.project(t),O=this.getPixelBounds(),B=V([O.min.add(c),O.max.subtract(p)]),F=B.getSize();if(!B.contains(b)){this._enforcingBounds=!0;var K=b.subtract(B.getCenter()),te=B.extend(b).getSize().subtract(F);y.x+=K.x<0?-te.x:te.x,y.y+=K.y<0?-te.y:te.y,this.panTo(this.unproject(y),s),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=f({animate:!1,pan:!0},t===!0?{animate:!0}:t);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),p=s.divideBy(2).round(),y=c.divideBy(2).round(),b=p.subtract(y);return!b.x&&!b.y?this:(t.animate&&t.pan?this.panBy(b):(t.pan&&this._rawPanBy(b),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=f({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=d(this._handleGeolocationResponse,this),c=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,c,t):navigator.geolocation.getCurrentPosition(s,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var s=t.code,c=t.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var s=t.coords.latitude,c=t.coords.longitude,p=new le(s,c),y=p.toBounds(t.coords.accuracy*2),b=this._locateOptions;if(b.setView){var O=this.getBoundsZoom(y);this.setView(p,b.maxZoom?Math.min(O,b.maxZoom):O)}var B={latlng:p,bounds:y,timestamp:t.timestamp};for(var F in t.coords)typeof t.coords[F]=="number"&&(B[F]=t.coords[F]);this.fire("locationfound",B)}},addHandler:function(t,s){if(!s)return this;var c=this[t]=new s(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Me(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Qe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,s){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),p=Ce("div",c,s||this._mapPane);return t&&(this._panes[t]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),s=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new me(s,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,s,c){t=de(t),c=G(c||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),b=this.getMaxZoom(),O=t.getNorthWest(),B=t.getSouthEast(),F=this.getSize().subtract(c),K=V(this.project(B,p),this.project(O,p)).getSize(),te=ue.any3d?this.options.zoomSnap:1,_e=F.x/K.x,Ee=F.y/K.y,ft=s?Math.max(_e,Ee):Math.min(_e,Ee);return p=this.getScaleZoom(ft,p),te&&(p=Math.round(p/(te/100))*(te/100),p=s?Math.ceil(p/te)*te:Math.floor(p/te)*te),Math.max(y,Math.min(b,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,s){var c=this._getTopLeftPoint(t,s);return new I(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,s){var c=this.options.crs;return s=s===void 0?this._zoom:s,c.scale(t)/c.scale(s)},getScaleZoom:function(t,s){var c=this.options.crs;s=s===void 0?this._zoom:s;var p=c.zoom(t*c.scale(s));return isNaN(p)?1/0:p},project:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(re(t),s)},unproject:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(G(t),s)},layerPointToLatLng:function(t){var s=G(t).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(t){var s=this.project(re(t))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(re(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(de(t))},distance:function(t,s){return this.options.crs.distance(re(t),re(s))},containerPointToLayerPoint:function(t){return G(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return G(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var s=this.containerPointToLayerPoint(G(t));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(t)))},mouseEventToContainerPoint:function(t){return xr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var s=this._container=qt(t);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Se(s,"scroll",this._onScroll,this),this._containerId=g(s)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,Le(t,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=_r(t,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Le(t.markerPane,"leaflet-zoom-hide"),Le(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,s,c){st(this._mapPane,new q(0,0));var p=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var y=this._zoom!==s;this._moveStart(y,c)._move(t,s)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(t,s){return t&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(t,s,c,p){s===void 0&&(s=this._zoom);var y=this._zoom!==s;return this._zoom=s,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),p?c&&c.pinch&&this.fire("zoom",c):((y||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Me(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){st(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var s=t?Ze:Se;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Me(this._resizeRequest),this._resizeRequest=Ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,s){for(var c=[],p,y=s==="mouseout"||s==="mouseover",b=t.target||t.srcElement,O=!1;b;){if(p=this._targets[g(b)],p&&(s==="click"||s==="preclick")&&this._draggableMoved(p)){O=!0;break}if(p&&p.listens(s,!0)&&(y&&!Sr(b,t)||(c.push(p),y))||b===this._container)break;b=b.parentNode}return!c.length&&!O&&!y&&this.listens(s,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var s=t.target||t.srcElement;if(!(!this._loaded||s._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(s))){var c=t.type;c==="mousedown"&&Oi(s),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,s,c){if(t.type==="click"){var p=f({},t);p.type="preclick",this._fireDOMEvent(p,p.type,c)}var y=this._findEventTargets(t,s);if(c){for(var b=[],O=0;O<c.length;O++)c[O].listens(s,!0)&&b.push(c[O]);y=b.concat(y)}if(y.length){s==="contextmenu"&&tt(t);var B=y[0],F={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);F.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(t),F.layerPoint=this.containerPointToLayerPoint(F.containerPoint),F.latlng=K?B.getLatLng():this.layerPointToLatLng(F.layerPoint)}for(O=0;O<y.length;O++)if(y[O].fire(s,F,!0),F.originalEvent._stopped||y[O].options.bubblingMouseEvents===!1&&X(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,s=this._handlers.length;t<s;t++)this._handlers[t].disable()},whenReady:function(t,s){return this._loaded?t.call(s||this,{target:this}):this.on("load",t,s),this},_getMapPanePos:function(){return wn(this._mapPane)||new q(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,s){var c=t&&s!==void 0?this._getNewPixelOrigin(t,s):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,s){var c=this.getSize()._divideBy(2);return this.project(t,s)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,s,c){var p=this._getNewPixelOrigin(c,s);return this.project(t,s)._subtract(p)},_latLngBoundsToNewLayerBounds:function(t,s,c){var p=this._getNewPixelOrigin(c,s);return V([this.project(t.getSouthWest(),s)._subtract(p),this.project(t.getNorthWest(),s)._subtract(p),this.project(t.getSouthEast(),s)._subtract(p),this.project(t.getNorthEast(),s)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,s,c){if(!c)return t;var p=this.project(t,s),y=this.getSize().divideBy(2),b=new I(p.subtract(y),p.add(y)),O=this._getBoundsOffset(b,c,s);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?t:this.unproject(p.add(O),s)},_limitOffset:function(t,s){if(!s)return t;var c=this.getPixelBounds(),p=new I(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(p,s))},_getBoundsOffset:function(t,s,c){var p=V(this.project(s.getNorthEast(),c),this.project(s.getSouthWest(),c)),y=p.min.subtract(t.min),b=p.max.subtract(t.max),O=this._rebound(y.x,-b.x),B=this._rebound(y.y,-b.y);return new q(O,B)},_rebound:function(t,s){return t+s>0?Math.round(t-s)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(s))},_limitZoom:function(t){var s=this.getMinZoom(),c=this.getMaxZoom(),p=ue.any3d?this.options.zoomSnap:1;return p&&(t=Math.round(t/p)*p),Math.max(s,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ge(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,s){var c=this._getCenterOffset(t)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,s),!0)},_createAnimProxy:function(){var t=this._proxy=Ce("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(s){var c=wo,p=this._proxy.style[c];Gt(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),p===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),s=this.getZoom();Gt(this._proxy,this.project(t,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,s,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(s),y=this._getCenterOffset(t)._divideBy(1-1/p);return c.animate!==!0&&!this.getSize().contains(y)?!1:(Ne(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,s,!0)},this),!0)},_animateZoom:function(t,s,c,p){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=s,Le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:s,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ge(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jn(t,s){return new Re(t,s)}var It=Fe.extend({options:{position:"topright"},initialize:function(t){R(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var s=this._map;return s&&s.removeControl(this),this.options.position=t,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var s=this._container=this.onAdd(t),c=this.getPosition(),p=t._controlCorners[c];return Le(s,"leaflet-control"),c.indexOf("bottom")!==-1?p.insertBefore(s,p.firstChild):p.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Mn=function(t){return new It(t)};Re.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},s="leaflet-",c=this._controlContainer=Ce("div",s+"control-container",this._container);function p(y,b){var O=s+y+" "+s+b;t[y+b]=Ce("div",O,c)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Qe(this._controlCorners[t]);Qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var bo=It.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,s,c,p){return c<p?-1:p<c?1:0}},initialize:function(t,s,c){R(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in t)this._addLayer(t[p],p);for(p in s)this._addLayer(s[p],p,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return It.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,s){return this._addLayer(t,s),this._map?this._update():this},addOverlay:function(t,s){return this._addLayer(t,s,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var s=this._getLayer(g(t));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){Le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ge(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ge(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",s=this._container=Ce("div",t),c=this.options.collapsed;s.setAttribute("aria-haspopup",!0),wr(s),us(s);var p=this._section=Ce("section",t+"-list");c&&(this._map.on("click",this.collapse,this),Se(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Ce("a",t+"-toggle",s);y.href="#",y.title="Layers",y.setAttribute("role","button"),Se(y,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){tt(b),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ce("div",t+"-base",p),this._separator=Ce("div",t+"-separator",p),this._overlaysList=Ce("div",t+"-overlays",p),s.appendChild(p)},_getLayer:function(t){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&g(this._layers[s].layer)===t)return this._layers[s]},_addLayer:function(t,s,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:s,overlay:c}),this.options.sortLayers&&this._layers.sort(d(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;is(this._baseLayersList),is(this._overlaysList),this._layerControlInputs=[];var t,s,c,p,y=0;for(c=0;c<this._layers.length;c++)p=this._layers[c],this._addItem(p),s=s||p.overlay,t=t||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(t=t&&y>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=s&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var s=this._getLayer(g(t.target)),c=s.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,s)},_createRadioElement:function(t,s){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(s?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=c,p.firstChild},_addItem:function(t){var s=document.createElement("label"),c=this._map.hasLayer(t.layer),p;t.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=c):p=this._createRadioElement("leaflet-base-layers_"+g(this),c),this._layerControlInputs.push(p),p.layerId=g(t.layer),Se(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+t.name;var b=document.createElement("span");s.appendChild(b),b.appendChild(p),b.appendChild(y);var O=t.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,s,c,p=[],y=[];this._handlingClick=!0;for(var b=t.length-1;b>=0;b--)s=t[b],c=this._getLayer(s.layerId).layer,s.checked?p.push(c):s.checked||y.push(c);for(b=0;b<y.length;b++)this._map.hasLayer(y[b])&&this._map.removeLayer(y[b]);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])||this._map.addLayer(p[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,s,c,p=this._map.getZoom(),y=t.length-1;y>=0;y--)s=t[y],c=this._getLayer(s.layerId).layer,s.disabled=c.options.minZoom!==void 0&&p<c.options.minZoom||c.options.maxZoom!==void 0&&p>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Se(t,"click",tt),this.expand();var s=this;setTimeout(function(){Ze(t,"click",tt),s._preventClick=!1})}}),ds=function(t,s,c){return new bo(t,s,c)},Ri=It.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var s="leaflet-control-zoom",c=Ce("div",s+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,s+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,s+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,s,c,p,y){var b=Ce("a",c,p);return b.innerHTML=t,b.href="#",b.title=s,b.setAttribute("role","button"),b.setAttribute("aria-label",s),wr(b),Se(b,"click",Jt),Se(b,"click",y,this),Se(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var t=this._map,s="leaflet-disabled";Ge(this._zoomInButton,s),Ge(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Le(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Le(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});Re.mergeOptions({zoomControl:!0}),Re.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ri,this.addControl(this.zoomControl))});var Fa=function(t){return new Ri(t)},Et=It.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var s="leaflet-control-scale",c=Ce("div",s),p=this.options;return this._addScales(p,s+"-line",c),t.on(p.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,s,c){t.metric&&(this._mScale=Ce("div",s,c)),t.imperial&&(this._iScale=Ce("div",s,c))},_update:function(){var t=this._map,s=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,s]),t.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var s=this._getRoundNum(t),c=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,c,s/t)},_updateImperial:function(t){var s=t*3.2808399,c,p,y;s>5280?(c=s/5280,p=this._getRoundNum(c),this._updateScale(this._iScale,p+" mi",p/c)):(y=this._getRoundNum(s),this._updateScale(this._iScale,y+" ft",y/s))},_updateScale:function(t,s,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=s},_getRoundNum:function(t){var s=Math.pow(10,(Math.floor(t)+"").length-1),c=t/s;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,s*c}}),Ai=function(t){return new Et(t)},Lo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Xn=It.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Lo+" ":"")+"Leaflet</a>"},initialize:function(t){R(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Ce("div","leaflet-control-attribution"),wr(this._container);for(var s in t._layers)t._layers[s].getAttribution&&this.addAttribution(t._layers[s].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var s in this._attributions)this._attributions[s]&&t.push(s);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Re.mergeOptions({attributionControl:!0}),Re.addInitHook(function(){this.options.attributionControl&&new Xn().addTo(this)});var bu=function(t){return new Xn(t)};It.Layers=bo,It.Zoom=Ri,It.Scale=Et,It.Attribution=Xn,Mn.layers=ds,Mn.zoom=Fa,Mn.scale=Ai,Mn.attribution=bu;var Dt=Fe.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Dt.addTo=function(t,s){return t.addHandler(s,this),this};var Co={Events:Pe},Ni=ue.touch?"touchstart mousedown":"mousedown",Qt=Ue.extend({options:{clickTolerance:3},initialize:function(t,s,c,p){R(this,p),this._element=t,this._dragStartTarget=s||t,this._preventOutline=c},enable:function(){this._enabled||(Se(this._dragStartTarget,Ni,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qt._dragging===this&&this.finishDrag(!0),Ze(this._dragStartTarget,Ni,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Pi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Qt._dragging===this&&this.finishDrag();return}if(!(Qt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Qt._dragging=this,this._preventOutline&&Oi(this._element),os(),Ie(),!this._moving)){this.fire("down");var s=t.touches?t.touches[0]:t,c=xn(this._element);this._startPoint=new q(s.clientX,s.clientY),this._startPos=wn(this._element),this._parentScale=an(c);var p=t.type==="mousedown";Se(document,p?"mousemove":"touchmove",this._onMove,this),Se(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var s=t.touches&&t.touches.length===1?t.touches[0]:t,c=new q(s.clientX,s.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,tt(t),this._moved||(this.fire("dragstart"),this._moved=!0,Le(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),st(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ge(document.body,"leaflet-dragging"),this._lastTarget&&(Ge(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ze(document,"mousemove touchmove",this._onMove,this),Ze(document,"mouseup touchend touchcancel",this._onUp,this),as(),Ti();var s=this._moved&&this._moving;this._moving=!1,Qt._dragging=!1,s&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Po(t,s,c){var p,y=[1,4,2,8],b,O,B,F,K,te,_e,Ee;for(b=0,te=t.length;b<te;b++)t[b]._code=ei(t[b],s);for(B=0;B<4;B++){for(_e=y[B],p=[],b=0,te=t.length,O=te-1;b<te;O=b++)F=t[b],K=t[O],F._code&_e?K._code&_e||(Ee=ps(K,F,_e,s,c),Ee._code=ei(Ee,s),p.push(Ee)):(K._code&_e&&(Ee=ps(K,F,_e,s,c),Ee._code=ei(Ee,s),p.push(Ee)),p.push(F));t=p}return t}function Za(t,s){var c,p,y,b,O,B,F,K,te;if(!t||t.length===0)throw new Error("latlngs not passed");Ut(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var _e=re([0,0]),Ee=de(t),ft=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());ft<1700&&(_e=Eo(t));var ut=t.length,Mt=[];for(c=0;c<ut;c++){var Tt=re(t[c]);Mt.push(s.project(re([Tt.lat-_e.lat,Tt.lng-_e.lng])))}for(B=F=K=0,c=0,p=ut-1;c<ut;p=c++)y=Mt[c],b=Mt[p],O=y.y*b.x-b.y*y.x,F+=(y.x+b.x)*O,K+=(y.y+b.y)*O,B+=O*3;B===0?te=Mt[0]:te=[F/B,K/B];var Zi=s.unproject(G(te));return re([Zi.lat+_e.lat,Zi.lng+_e.lng])}function Eo(t){for(var s=0,c=0,p=0,y=0;y<t.length;y++){var b=re(t[y]);s+=b.lat,c+=b.lng,p++}return re([s/p,c/p])}var Lu={__proto__:null,clipPolygon:Po,polygonCenter:Za,centroid:Eo};function fs(t,s){if(!s||!t.length)return t.slice();var c=s*s;return t=Eu(t,c),t=Pu(t,c),t}function Ha(t,s,c){return Math.sqrt(ti(t,s,c,!0))}function Cu(t,s,c){return ti(t,s,c)}function Pu(t,s){var c=t.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(c);y[0]=y[c-1]=1,To(t,y,s,0,c-1);var b,O=[];for(b=0;b<c;b++)y[b]&&O.push(t[b]);return O}function To(t,s,c,p,y){var b=0,O,B,F;for(B=p+1;B<=y-1;B++)F=ti(t[B],t[p],t[y],!0),F>b&&(O=B,b=F);b>c&&(s[O]=1,To(t,s,c,p,O),To(t,s,c,O,y))}function Eu(t,s){for(var c=[t[0]],p=1,y=0,b=t.length;p<b;p++)Tu(t[p],t[y])>s&&(c.push(t[p]),y=p);return y<b-1&&c.push(t[b-1]),c}var Oo;function Wa(t,s,c,p,y){var b=p?Oo:ei(t,c),O=ei(s,c),B,F,K;for(Oo=O;;){if(!(b|O))return[t,s];if(b&O)return!1;B=b||O,F=ps(t,s,B,c,y),K=ei(F,c),B===b?(t=F,b=K):(s=F,O=K)}}function ps(t,s,c,p,y){var b=s.x-t.x,O=s.y-t.y,B=p.min,F=p.max,K,te;return c&8?(K=t.x+b*(F.y-t.y)/O,te=F.y):c&4?(K=t.x+b*(B.y-t.y)/O,te=B.y):c&2?(K=F.x,te=t.y+O*(F.x-t.x)/b):c&1&&(K=B.x,te=t.y+O*(B.x-t.x)/b),new q(K,te,y)}function ei(t,s){var c=0;return t.x<s.min.x?c|=1:t.x>s.max.x&&(c|=2),t.y<s.min.y?c|=4:t.y>s.max.y&&(c|=8),c}function Tu(t,s){var c=s.x-t.x,p=s.y-t.y;return c*c+p*p}function ti(t,s,c,p){var y=s.x,b=s.y,O=c.x-y,B=c.y-b,F=O*O+B*B,K;return F>0&&(K=((t.x-y)*O+(t.y-b)*B)/F,K>1?(y=c.x,b=c.y):K>0&&(y+=O*K,b+=B*K)),O=t.x-y,B=t.y-b,p?O*O+B*B:new q(y,b)}function Ut(t){return!$(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Va(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ut(t)}function qa(t,s){var c,p,y,b,O,B,F,K;if(!t||t.length===0)throw new Error("latlngs not passed");Ut(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var te=re([0,0]),_e=de(t),Ee=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());Ee<1700&&(te=Eo(t));var ft=t.length,ut=[];for(c=0;c<ft;c++){var Mt=re(t[c]);ut.push(s.project(re([Mt.lat-te.lat,Mt.lng-te.lng])))}for(c=0,p=0;c<ft-1;c++)p+=ut[c].distanceTo(ut[c+1])/2;if(p===0)K=ut[0];else for(c=0,b=0;c<ft-1;c++)if(O=ut[c],B=ut[c+1],y=O.distanceTo(B),b+=y,b>p){F=(b-p)/y,K=[B.x-F*(B.x-O.x),B.y-F*(B.y-O.y)];break}var Tt=s.unproject(G(K));return re([Tt.lat+te.lat,Tt.lng+te.lng])}var Ga={__proto__:null,simplify:fs,pointToSegmentDistance:Ha,closestPointOnSegment:Cu,clipSegment:Wa,_getEdgeIntersection:ps,_getBitCode:ei,_sqClosestPointOnSegment:ti,isFlat:Ut,_flat:Va,polylineCenter:qa},Ro={project:function(t){return new q(t.lng,t.lat)},unproject:function(t){return new le(t.y,t.x)},bounds:new I([-180,-90],[180,90])},Ao={R:6378137,R_MINOR:6356752314245179e-9,bounds:new I([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var s=Math.PI/180,c=this.R,p=t.lat*s,y=this.R_MINOR/c,b=Math.sqrt(1-y*y),O=b*Math.sin(p),B=Math.tan(Math.PI/4-p/2)/Math.pow((1-O)/(1+O),b/2);return p=-c*Math.log(Math.max(B,1e-10)),new q(t.lng*s*c,p)},unproject:function(t){for(var s=180/Math.PI,c=this.R,p=this.R_MINOR/c,y=Math.sqrt(1-p*p),b=Math.exp(-t.y/c),O=Math.PI/2-2*Math.atan(b),B=0,F=.1,K;B<15&&Math.abs(F)>1e-7;B++)K=y*Math.sin(O),K=Math.pow((1-K)/(1+K),y/2),F=Math.PI/2-2*Math.atan(b*K)-O,O+=F;return new le(O*s,t.x*s/c)}},Ou={__proto__:null,LonLat:Ro,Mercator:Ao,SphericalMercator:wt},Ru=f({},Te,{code:"EPSG:3395",projection:Ao,transformation:(function(){var t=.5/(Math.PI*Ao.R);return wi(t,.5,-t,.5)})()}),Ka=f({},Te,{code:"EPSG:4326",projection:Ro,transformation:wi(1/180,1,-1/180,.5)}),Au=f({},Ae,{projection:Ro,transformation:wi(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,s){var c=s.lng-t.lng,p=s.lat-t.lat;return Math.sqrt(c*c+p*p)},infinite:!0});Ae.Earth=Te,Ae.EPSG3395=Ru,Ae.EPSG3857=xi,Ae.EPSG900913=ro,Ae.EPSG4326=Ka,Ae.Simple=Au;var Yt=Ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var s=t.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var c=this.getEvents();s.on(c,this),this.once("remove",function(){s.off(c,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});Re.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var s=g(t);return this._layers[s]?this:(this._layers[s]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var s=g(t);return this._layers[s]?(this._loaded&&t.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,s){for(var c in this._layers)t.call(s,this._layers[c]);return this},_addLayers:function(t){t=t?$(t)?t:[t]:[];for(var s=0,c=t.length;s<c;s++)this.addLayer(t[s])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var s=g(t);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,s=-1/0,c=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;t=y.minZoom===void 0?t:Math.min(t,y.minZoom),s=y.maxZoom===void 0?s:Math.max(s,y.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var zn=Yt.extend({initialize:function(t,s){R(this,s),this._layers={};var c,p;if(t)for(c=0,p=t.length;c<p;c++)this.addLayer(t[c])},addLayer:function(t){var s=this.getLayerId(t);return this._layers[s]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var s=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(t){var s=typeof t=="number"?t:this.getLayerId(t);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var s=Array.prototype.slice.call(arguments,1),c,p;for(c in this._layers)p=this._layers[c],p[t]&&p[t].apply(p,s);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,s){for(var c in this._layers)t.call(s,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),kr=function(t,s){return new zn(t,s)},Sn=zn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),zn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),zn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new me;for(var s in this._layers){var c=this._layers[s];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),Ja=function(t,s){return new Sn(t,s)},ni=Fe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){R(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,s){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(c,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(p,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(t,s){var c=this.options,p=c[s+"Size"];typeof p=="number"&&(p=[p,p]);var y=G(p),b=G(s==="shadow"&&c.shadowAnchor||c.iconAnchor||y&&y.divideBy(2,!0));t.className="leaflet-marker-"+s+" "+(c.className||""),b&&(t.style.marginLeft=-b.x+"px",t.style.marginTop=-b.y+"px"),y&&(t.style.width=y.x+"px",t.style.height=y.y+"px")},_createImg:function(t,s){return s=s||document.createElement("img"),s.src=t,s},_getIconUrl:function(t){return ue.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Qa(t){return new ni(t)}var Ii=ni.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ii.imagePath!="string"&&(Ii.imagePath=this._detectIconPath()),(this.options.imagePath||Ii.imagePath)+ni.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var s=function(c,p,y){var b=p.exec(c);return b&&b[y]};return t=s(t,/^url\((['"])?(.+)\1\)$/,2),t&&s(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Ce("div","leaflet-default-icon-path",document.body),s=_r(t,"background-image")||_r(t,"backgroundImage");if(document.body.removeChild(t),s=this._stripUrl(s),s)return s;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),No=Dt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Qt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Le(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ge(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var s=this._marker,c=s._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,b=wn(s._icon),O=c.getPixelBounds(),B=c.getPixelOrigin(),F=V(O.min._subtract(B).add(y),O.max._subtract(B).subtract(y));if(!F.contains(b)){var K=G((Math.max(F.max.x,b.x)-F.max.x)/(O.max.x-F.max.x)-(Math.min(F.min.x,b.x)-F.min.x)/(O.min.x-F.min.x),(Math.max(F.max.y,b.y)-F.max.y)/(O.max.y-F.max.y)-(Math.min(F.min.y,b.y)-F.min.y)/(O.min.y-F.min.y)).multiplyBy(p);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),st(s._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Ne(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Me(this._panRequest),this._panRequest=Ne(this._adjustPan.bind(this,t)))},_onDrag:function(t){var s=this._marker,c=s._shadow,p=wn(s._icon),y=s._map.layerPointToLatLng(p);c&&st(c,p),s._latlng=y,t.latlng=y,t.oldLatLng=this._oldLatLng,s.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Me(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),kn=Yt.extend({options:{icon:new Ii,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,s){R(this,s),this._latlng=re(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var s=this._latlng;return this._latlng=re(t),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),p=!1;c!==this._icon&&(this._icon&&this._removeIcon(),p=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),Le(c,s),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Se(c,"focus",this._panOnFocus,this);var y=t.icon.createShadow(this._shadow),b=!1;y!==this._shadow&&(this._removeShadow(),b=!0),y&&(Le(y,s),y.alt=""),this._shadow=y,t.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&b&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ze(this._icon,"focus",this._panOnFocus,this),Qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&st(this._icon,t),this._shadow&&st(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(Le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),No)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new No(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Pt(this._icon,t),this._shadow&&Pt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var s=this.options.icon.options,c=s.iconSize?G(s.iconSize):G(0,0),p=s.iconAnchor?G(s.iconAnchor):G(0,0);t.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:c.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Nu(t,s){return new kn(t,s)}var Bn=Yt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return R(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ms=Bn.extend({options:{fill:!0,radius:10},initialize:function(t,s){R(this,s),this._latlng=re(t),this._radius=this.options.radius},setLatLng:function(t){var s=this._latlng;return this._latlng=re(t),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var s=t&&t.radius||this._radius;return Bn.prototype.setStyle.call(this,t),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,s=this._radiusY||t,c=this._clickTolerance(),p=[t+c,s+c];this._pxBounds=new I(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ya(t,s){return new ms(t,s)}var _s=ms.extend({initialize:function(t,s,c){if(typeof s=="number"&&(s=f({},c,{radius:s})),R(this,s),this._latlng=re(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Bn.prototype.setStyle,_project:function(){var t=this._latlng.lng,s=this._latlng.lat,c=this._map,p=c.options.crs;if(p.distance===Te.distance){var y=Math.PI/180,b=this._mRadius/Te.R/y,O=c.project([s+b,t]),B=c.project([s-b,t]),F=O.add(B).divideBy(2),K=c.unproject(F).lat,te=Math.acos((Math.cos(b*y)-Math.sin(s*y)*Math.sin(K*y))/(Math.cos(s*y)*Math.cos(K*y)))/y;(isNaN(te)||te===0)&&(te=b/Math.cos(Math.PI/180*s)),this._point=F.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:F.x-c.project([K,t-te]).x,this._radiusY=F.y-O.y}else{var _e=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(_e).x}this._updateBounds()}});function br(t,s,c){return new _s(t,s,c)}var jt=Bn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,s){R(this,s),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var s=1/0,c=null,p=ti,y,b,O=0,B=this._parts.length;O<B;O++)for(var F=this._parts[O],K=1,te=F.length;K<te;K++){y=F[K-1],b=F[K];var _e=p(t,y,b,!0);_e<s&&(s=_e,c=p(t,y,b))}return c&&(c.distance=Math.sqrt(s)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,s){return s=s||this._defaultShape(),t=re(t),s.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new me,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var s=[],c=Ut(t),p=0,y=t.length;p<y;p++)c?(s[p]=re(t[p]),this._bounds.extend(s[p])):s[p]=this._convertLatLngs(t[p]);return s},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),s=new q(t,t);this._rawPxBounds&&(this._pxBounds=new I([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(t,s,c){var p=t[0]instanceof le,y=t.length,b,O;if(p){for(O=[],b=0;b<y;b++)O[b]=this._map.latLngToLayerPoint(t[b]),c.extend(O[b]);s.push(O)}else for(b=0;b<y;b++)this._projectLatlngs(t[b],s,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,c,p,y,b,O,B,F;for(c=0,y=0,b=this._rings.length;c<b;c++)for(F=this._rings[c],p=0,O=F.length;p<O-1;p++)B=Wa(F[p],F[p+1],t,p,!0),B&&(s[y]=s[y]||[],s[y].push(B[0]),(B[1]!==F[p+1]||p===O-2)&&(s[y].push(B[1]),y++))}},_simplifyPoints:function(){for(var t=this._parts,s=this.options.smoothFactor,c=0,p=t.length;c<p;c++)t[c]=fs(t[c],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,s){var c,p,y,b,O,B,F=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,b=this._parts.length;c<b;c++)for(B=this._parts[c],p=0,O=B.length,y=O-1;p<O;y=p++)if(!(!s&&p===0)&&Ha(t,B[y],B[p])<=F)return!0;return!1}});function Iu(t,s){return new jt(t,s)}jt._flat=Va;var bn=jt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Za(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var s=jt.prototype._convertLatLngs.call(this,t),c=s.length;return c>=2&&s[0]instanceof le&&s[0].equals(s[c-1])&&s.pop(),s},_setLatLngs:function(t){jt.prototype._setLatLngs.call(this,t),Ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,c=new q(s,s);if(t=new I(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,b;p<y;p++)b=Po(this._rings[p],t,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var s=!1,c,p,y,b,O,B,F,K;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(b=0,F=this._parts.length;b<F;b++)for(c=this._parts[b],O=0,K=c.length,B=K-1;O<K;B=O++)p=c[O],y=c[B],p.y>t.y!=y.y>t.y&&t.x<(y.x-p.x)*(t.y-p.y)/(y.y-p.y)+p.x&&(s=!s);return s||jt.prototype._containsPoint.call(this,t,!0)}});function ju(t,s){return new bn(t,s)}var un=Sn.extend({initialize:function(t,s){R(this,s),this._layers={},t&&this.addData(t)},addData:function(t){var s=$(t)?t:t.features,c,p,y;if(s){for(c=0,p=s.length;c<p;c++)y=s[c],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var b=this.options;if(b.filter&&!b.filter(t))return this;var O=ji(t,b);return O?(O.feature=xs(t),O.defaultOptions=O.options,this.resetStyle(O),b.onEachFeature&&b.onEachFeature(t,O),this.addLayer(O)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=f({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(s){this._setLayerStyle(s,t)},this)},_setLayerStyle:function(t,s){t.setStyle&&(typeof s=="function"&&(s=s(t.feature)),t.setStyle(s))}});function ji(t,s){var c=t.type==="Feature"?t.geometry:t,p=c?c.coordinates:null,y=[],b=s&&s.pointToLayer,O=s&&s.coordsToLatLng||vs,B,F,K,te;if(!p&&!c)return null;switch(c.type){case"Point":return B=O(p),gs(b,t,B,s);case"MultiPoint":for(K=0,te=p.length;K<te;K++)B=O(p[K]),y.push(gs(b,t,B,s));return new Sn(y);case"LineString":case"MultiLineString":return F=Lr(p,c.type==="LineString"?0:1,O),new jt(F,s);case"Polygon":case"MultiPolygon":return F=Lr(p,c.type==="Polygon"?1:2,O),new bn(F,s);case"GeometryCollection":for(K=0,te=c.geometries.length;K<te;K++){var _e=ji({geometry:c.geometries[K],type:"Feature",properties:t.properties},s);_e&&y.push(_e)}return new Sn(y);case"FeatureCollection":for(K=0,te=c.features.length;K<te;K++){var Ee=ji(c.features[K],s);Ee&&y.push(Ee)}return new Sn(y);default:throw new Error("Invalid GeoJSON object.")}}function gs(t,s,c,p){return t?t(s,c):new kn(c,p&&p.markersInheritOptions&&p)}function vs(t){return new le(t[1],t[0],t[2])}function Lr(t,s,c){for(var p=[],y=0,b=t.length,O;y<b;y++)O=s?Lr(t[y],s-1,c):(c||vs)(t[y]),p.push(O);return p}function ys(t,s){return t=re(t),t.alt!==void 0?[C(t.lng,s),C(t.lat,s),C(t.alt,s)]:[C(t.lng,s),C(t.lat,s)]}function ws(t,s,c,p){for(var y=[],b=0,O=t.length;b<O;b++)y.push(s?ws(t[b],Ut(t[b])?0:s-1,c,p):ys(t[b],p));return!s&&c&&y.length>0&&y.push(y[0].slice()),y}function Mi(t,s){return t.feature?f({},t.feature,{geometry:s}):xs(s)}function xs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Io={toGeoJSON:function(t){return Mi(this,{type:"Point",coordinates:ys(this.getLatLng(),t)})}};kn.include(Io),_s.include(Io),ms.include(Io),jt.include({toGeoJSON:function(t){var s=!Ut(this._latlngs),c=ws(this._latlngs,s?1:0,!1,t);return Mi(this,{type:(s?"Multi":"")+"LineString",coordinates:c})}}),bn.include({toGeoJSON:function(t){var s=!Ut(this._latlngs),c=s&&!Ut(this._latlngs[0]),p=ws(this._latlngs,c?2:s?1:0,!0,t);return s||(p=[p]),Mi(this,{type:(c?"Multi":"")+"Polygon",coordinates:p})}}),zn.include({toMultiPoint:function(t){var s=[];return this.eachLayer(function(c){s.push(c.toGeoJSON(t).geometry.coordinates)}),Mi(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(t){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(t);var c=s==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var b=y.toGeoJSON(t);if(c)p.push(b.geometry);else{var O=xs(b);O.type==="FeatureCollection"?p.push.apply(p,O.features):p.push(O)}}}),c?Mi(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Xa(t,s){return new un(t,s)}var Xt=Xa,Dn=Yt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,s,c){this._url=t,this._bounds=de(s),R(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ci(this._image),this},bringToBack:function(){return this._map&&yn(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=de(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",s=this._image=t?this._url:Ce("img");if(Le(s,"leaflet-image-layer"),this._zoomAnimated&&Le(s,"leaflet-zoom-animated"),this.options.className&&Le(s,this.options.className),s.onselectstart=k,s.onmousemove=k,s.onload=d(this.fire,this,"load"),s.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(t){var s=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Gt(this._image,c,s)},_reset:function(){var t=this._image,s=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=s.getSize();st(t,s.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){Pt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),el=function(t,s,c){return new Dn(t,s,c)},jo=Dn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",s=this._image=t?this._url:Ce("video");if(Le(s,"leaflet-image-layer"),this._zoomAnimated&&Le(s,"leaflet-zoom-animated"),this.options.className&&Le(s,this.options.className),s.onselectstart=k,s.onmousemove=k,s.onloadeddata=d(this.fire,this,"load"),t){for(var c=s.getElementsByTagName("source"),p=[],y=0;y<c.length;y++)p.push(c[y].src);this._url=c.length>0?p:[s.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var O=Ce("source");O.src=this._url[b],s.appendChild(O)}}});function tl(t,s,c){return new jo(t,s,c)}var Mo=Dn.extend({_initImage:function(){var t=this._image=this._url;Le(t,"leaflet-image-layer"),this._zoomAnimated&&Le(t,"leaflet-zoom-animated"),this.options.className&&Le(t,this.options.className),t.onselectstart=k,t.onmousemove=k}});function zo(t,s,c){return new Mo(t,s,c)}var cn=Yt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,s){t&&(t instanceof le||$(t))?(this._latlng=re(t),R(this,s)):(R(this,t),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Pt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Pt(this._container,1),this.bringToFront(),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Pt(this._container,0),this._removeTimeout=setTimeout(d(Qe,void 0,this._container),200)):Qe(this._container),this.options.interactive&&(Ge(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=re(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ci(this._container),this},bringToBack:function(){return this._map&&yn(this._container),this},_prepareOpen:function(t){var s=this._source;if(!s._map)return!1;if(s instanceof Sn){s=null;var c=this._source._layers;for(var p in c)if(c[p]._map){s=c[p];break}if(!s)return!1;this._source=s}if(!t)if(s.getCenter)t=s.getCenter();else if(s.getLatLng)t=s.getLatLng();else if(s.getBounds)t=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")t.innerHTML=s;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),s=G(this.options.offset),c=this._getAnchor();this._zoomAnimated?st(this._container,t.add(c)):s=s.add(t).add(c);var p=this._containerBottom=-s.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});Re.include({_initOverlay:function(t,s,c,p){var y=s;return y instanceof t||(y=new t(p).setContent(s)),c&&y.setLatLng(c),y}}),Yt.include({_initOverlay:function(t,s,c,p){var y=c;return y instanceof t?(R(y,p),y._source=this):(y=s&&!p?s:new t(p,this),y.setContent(c)),y}});var Ss=cn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,cn.prototype.openOn.call(this,t)},onAdd:function(t){cn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Bn||this._source.on("preclick",ln))},onRemove:function(t){cn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Bn||this._source.off("preclick",ln))},getEvents:function(){var t=cn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",s=this._container=Ce("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ce("div",t+"-content-wrapper",s);if(this._contentNode=Ce("div",t+"-content",c),wr(s),us(this._contentNode),Se(s,"contextmenu",ln),this._tipContainer=Ce("div",t+"-tip-container",s),this._tip=Ce("div",t+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ce("a",t+"-close-button",s);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Se(p,"click",function(y){tt(y),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,s=t.style;s.width="",s.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),s.width=c+1+"px",s.whiteSpace="",s.height="";var p=t.offsetHeight,y=this.options.maxHeight,b="leaflet-popup-scrolled";y&&p>y?(s.height=y+"px",Le(t,b)):Ge(t,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();st(this._container,s.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,s=parseInt(_r(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+s,p=this._containerWidth,y=new q(this._containerLeft,-c-this._containerBottom);y._add(wn(this._container));var b=t.layerPointToContainerPoint(y),O=G(this.options.autoPanPadding),B=G(this.options.autoPanPaddingTopLeft||O),F=G(this.options.autoPanPaddingBottomRight||O),K=t.getSize(),te=0,_e=0;b.x+p+F.x>K.x&&(te=b.x+p-K.x+F.x),b.x-te-B.x<0&&(te=b.x-B.x),b.y+c+F.y>K.y&&(_e=b.y+c-K.y+F.y),b.y-_e-B.y<0&&(_e=b.y-B.y),(te||_e)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([te,_e]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zi=function(t,s){return new Ss(t,s)};Re.mergeOptions({closePopupOnClick:!0}),Re.include({openPopup:function(t,s,c){return this._initOverlay(Ss,t,s,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Yt.include({bindPopup:function(t,s){return this._popup=this._initOverlay(Ss,this._popup,t,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Sn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Jt(t);var s=t.layer||t.target;if(this._popup._source===s&&!(s instanceof Bn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=s,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Bi=cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){cn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){cn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=cn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",s=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ce("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var s,c,p=this._map,y=this._container,b=p.latLngToContainerPoint(p.getCenter()),O=p.layerPointToContainerPoint(t),B=this.options.direction,F=y.offsetWidth,K=y.offsetHeight,te=G(this.options.offset),_e=this._getAnchor();B==="top"?(s=F/2,c=K):B==="bottom"?(s=F/2,c=0):B==="center"?(s=F/2,c=K/2):B==="right"?(s=0,c=K/2):B==="left"?(s=F,c=K/2):O.x<b.x?(B="right",s=0,c=K/2):(B="left",s=F+(te.x+_e.x)*2,c=K/2),t=t.subtract(G(s,c,!0)).add(te).add(_e),Ge(y,"leaflet-tooltip-right"),Ge(y,"leaflet-tooltip-left"),Ge(y,"leaflet-tooltip-top"),Ge(y,"leaflet-tooltip-bottom"),Le(y,"leaflet-tooltip-"+B),st(y,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Pt(this._container,t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(s)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Cr=function(t,s){return new Bi(t,s)};Re.include({openTooltip:function(t,s,c){return this._initOverlay(Bi,t,s,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Yt.include({bindTooltip:function(t,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bi,this._tooltip,t,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var s=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[s](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Sn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&(Se(s,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Se(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var s=t.latlng,c,p;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),p=this._map.containerPointToLayerPoint(c),s=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(s)}});var ks=ni.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var s=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?(is(s),s.appendChild(c.html)):s.innerHTML=c.html!==!1?c.html:"",c.bgPos){var p=G(c.bgPos);s.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function nl(t){return new ks(t)}ni.Default=Ii;var Un=Yt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){R(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Qe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ci(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof q?t:new q(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var s=this.getPane().children,c=-t(-1/0,1/0),p=0,y=s.length,b;p<y;p++)b=s[p].style.zIndex,s[p]!==this._container&&b&&(c=t(c,+b));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){Pt(this._container,this.options.opacity);var t=+new Date,s=!1,c=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var b=Math.min(1,(t-y.loaded)/200);Pt(y.el,b),b<1?s=!0:(y.active?c=!0:this._onOpaqueTile(y),y.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),s&&(Me(this._fadeFrame),this._fadeFrame=Ne(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=Ce("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,s=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=s-Math.abs(t-c),this._onUpdateLevel(c)):(Qe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var p=this._levels[t],y=this._map;return p||(p=this._levels[t]={},p.el=Ce("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=s,p.origin=y.project(y.unproject(y.getPixelOrigin()),t).round(),p.zoom=t,this._setZoomTransform(p,y.getCenter(),y.getZoom()),k(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var t,s,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)s=this._tiles[t],s.retain=s.current;for(t in this._tiles)if(s=this._tiles[t],s.current&&!s.active){var p=s.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var s in this._tiles)this._tiles[s].coords.z===t&&this._removeTile(s)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Qe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,s,c,p){var y=Math.floor(t/2),b=Math.floor(s/2),O=c-1,B=new q(+y,+b);B.z=+O;var F=this._tileCoordsToKey(B),K=this._tiles[F];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),O>p?this._retainParent(y,b,O,p):!1)},_retainChildren:function(t,s,c,p){for(var y=2*t;y<2*t+2;y++)for(var b=2*s;b<2*s+2;b++){var O=new q(y,b);O.z=c+1;var B=this._tileCoordsToKey(O),F=this._tiles[B];if(F&&F.active){F.retain=!0;continue}else F&&F.loaded&&(F.retain=!0);c+1<p&&this._retainChildren(y,b,c+1,p)}},_resetView:function(t){var s=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var s=this.options;return s.minNativeZoom!==void 0&&t<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<t?s.maxNativeZoom:t},_setView:function(t,s,c,p){var y=Math.round(s);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var b=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||b)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,s)},_setZoomTransforms:function(t,s){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,s)},_setZoomTransform:function(t,s,c){var p=this._map.getZoomScale(c,t.zoom),y=t.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(s,c)).round();ue.any3d?Gt(t.el,y,p):st(t.el,y)},_resetGrid:function(){var t=this._map,s=t.options.crs,c=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,s.wrapLng[0]],p).x/c.x),Math.ceil(t.project([0,s.wrapLng[1]],p).x/c.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([s.wrapLat[0],0],p).y/c.x),Math.ceil(t.project([s.wrapLat[1],0],p).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var s=this._map,c=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),p=s.getZoomScale(c,this._tileZoom),y=s.project(t,this._tileZoom).floor(),b=s.getSize().divideBy(p*2);return new I(y.subtract(b),y.add(b))},_update:function(t){var s=this._map;if(s){var c=this._clampZoom(s.getZoom());if(t===void 0&&(t=s.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(t),y=this._pxBoundsToTileRange(p),b=y.getCenter(),O=[],B=this.options.keepBuffer,F=new I(y.getBottomLeft().subtract([B,-B]),y.getTopRight().add([B,-B]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var te=this._tiles[K].coords;(te.z!==this._tileZoom||!F.contains(new q(te.x,te.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var _e=y.min.y;_e<=y.max.y;_e++)for(var Ee=y.min.x;Ee<=y.max.x;Ee++){var ft=new q(Ee,_e);if(ft.z=this._tileZoom,!!this._isValidTile(ft)){var ut=this._tiles[this._tileCoordsToKey(ft)];ut?ut.current=!0:O.push(ft)}}if(O.sort(function(Tt,Zi){return Tt.distanceTo(b)-Zi.distanceTo(b)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mt=document.createDocumentFragment();for(Ee=0;Ee<O.length;Ee++)this._addTile(O[Ee],Mt);this._level.el.appendChild(Mt)}}}},_isValidTile:function(t){var s=this._map.options.crs;if(!s.infinite){var c=this._globalTileRange;if(!s.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!s.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(t);return de(this.options.bounds).overlaps(p)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var s=this._map,c=this.getTileSize(),p=t.scaleBy(c),y=p.add(c),b=s.unproject(p,t.z),O=s.unproject(y,t.z);return[b,O]},_tileCoordsToBounds:function(t){var s=this._tileCoordsToNwSe(t),c=new me(s[0],s[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var s=t.split(":"),c=new q(+s[0],+s[1]);return c.z=+s[2],c},_removeTile:function(t){var s=this._tiles[t];s&&(Qe(s.el),delete this._tiles[t],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Le(t,"leaflet-tile");var s=this.getTileSize();t.style.width=s.x+"px",t.style.height=s.y+"px",t.onselectstart=k,t.onmousemove=k,ue.ielt9&&this.options.opacity<1&&Pt(t,this.options.opacity)},_addTile:function(t,s){var c=this._getTilePos(t),p=this._tileCoordsToKey(t),y=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(y),this.createTile.length<2&&Ne(d(this._tileReady,this,t,null,y)),st(y,c),this._tiles[p]={el:y,coords:t,current:!0},s.appendChild(y),this.fire("tileloadstart",{tile:y,coords:t})},_tileReady:function(t,s,c){s&&this.fire("tileerror",{error:s,tile:c,coords:t});var p=this._tileCoordsToKey(t);c=this._tiles[p],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Pt(c.el,0),Me(this._fadeFrame),this._fadeFrame=Ne(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),s||(Le(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?Ne(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var s=new q(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return s.z=t.z,s},_pxBoundsToTileRange:function(t){var s=this.getTileSize();return new I(t.min.unscaleBy(s).floor(),t.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Di(t){return new Un(t)}var $n=Un.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,s){this._url=t,s=R(this,s),s.detectRetina&&ue.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,s){return this._url===t&&s===void 0&&(s=!0),this._url=t,s||this.redraw(),this},createTile:function(t,s){var c=document.createElement("img");return Se(c,"load",d(this._tileOnLoad,this,s,c)),Se(c,"error",d(this._tileOnError,this,s,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var s={r:ue.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(s.y=c),s["-y"]=c}return z(this._url,f(s,this.options))},_tileOnLoad:function(t,s){ue.ielt9?setTimeout(d(t,this,null,s),0):t(null,s)},_tileOnError:function(t,s,c){var p=this.options.errorTileUrl;p&&s.getAttribute("src")!==p&&(s.src=p),t(c,s)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,s=this.options.maxZoom,c=this.options.zoomReverse,p=this.options.zoomOffset;return c&&(t=s-t),t+p},_getSubdomain:function(t){var s=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var t,s;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(s=this._tiles[t].el,s.onload=k,s.onerror=k,!s.complete)){s.src=fe;var c=this._tiles[t].coords;Qe(s),delete this._tiles[t],this.fire("tileabort",{tile:s,coords:c})}},_removeTile:function(t){var s=this._tiles[t];if(s)return s.el.setAttribute("src",fe),Un.prototype._removeTile.call(this,t)},_tileReady:function(t,s,c){if(!(!this._map||c&&c.getAttribute("src")===fe))return Un.prototype._tileReady.call(this,t,s,c)}});function Bo(t,s){return new $n(t,s)}var Pr=$n.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var c=f({},this.defaultWmsParams);for(var p in s)p in this.options||(c[p]=s[p]);s=R(this,s);var y=s.detectRetina&&ue.retina?2:1,b=this.getTileSize();c.width=b.x*y,c.height=b.y*y,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,$n.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._tileCoordsToNwSe(t),c=this._crs,p=V(c.project(s[0]),c.project(s[1])),y=p.min,b=p.max,O=(this._wmsVersion>=1.3&&this._crs===Ka?[y.y,y.x,b.y,b.x]:[y.x,y.y,b.x,b.y]).join(","),B=$n.prototype.getTileUrl.call(this,t);return B+M(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(t,s){return f(this.wmsParams,t),s||this.redraw(),this}});function il(t,s){return new Pr(t,s)}$n.WMS=Pr,Bo.wms=il;var hn=Yt.extend({options:{padding:.1},initialize:function(t){R(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,s){var c=this._map.getZoomScale(s,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,s),b=p.multiplyBy(-c).add(y).subtract(this._map._getNewPixelOrigin(t,s));ue.any3d?Gt(this._container,b,c):st(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,s=this._map.getSize(),c=this._map.containerPointToLayerPoint(s.multiplyBy(-t)).round();this._bounds=new I(c,c.add(s.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Do=hn.extend({options:{tolerance:0},getEvents:function(){var t=hn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Se(t,"mousemove",this._onMouseMove,this),Se(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Me(this._redrawRequest),delete this._ctx,Qe(this._container),Ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var s in this._layers)t=this._layers[s],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hn.prototype._update.call(this);var t=this._bounds,s=this._container,c=t.getSize(),p=ue.retina?2:1;st(s,t.min),s.width=p*c.x,s.height=p*c.y,s.style.width=c.x+"px",s.style.height=c.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){hn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var s=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var s=t._order,c=s.next,p=s.prev;c?c.prev=p:this._drawLast=p,p?p.next=c:this._drawFirst=c,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var s=t.options.dashArray.split(/[, ]+/),c=[],p,y;for(y=0;y<s.length;y++){if(p=Number(s[y]),isNaN(p))return;c.push(p)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Ne(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var s=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(t._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var s=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,s=this._redrawBounds;if(this._ctx.save(),s){var c=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)t=p.layer,(!s||t._pxBounds&&t._pxBounds.intersects(s))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,s){if(this._drawing){var c,p,y,b,O=t._parts,B=O.length,F=this._ctx;if(B){for(F.beginPath(),c=0;c<B;c++){for(p=0,y=O[c].length;p<y;p++)b=O[c][p],F[p?"lineTo":"moveTo"](b.x,b.y);s&&F.closePath()}this._fillStroke(F,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var s=t._point,c=this._ctx,p=Math.max(Math.round(t._radius),1),y=(Math.max(Math.round(t._radiusY),1)||p)/p;y!==1&&(c.save(),c.scale(1,y)),c.beginPath(),c.arc(s.x,s.y/y,p,0,Math.PI*2,!1),y!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,s){var c=s.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(s.options&&s.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var s=this._map.mouseEventToLayerPoint(t),c,p,y=this._drawFirst;y;y=y.next)c=y.layer,c.options.interactive&&c._containsPoint(s)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(p=c);this._fireEvent(p?[p]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,s)}},_handleMouseOut:function(t){var s=this._hoveredLayer;s&&(Ge(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,s){if(!this._mouseHoverThrottled){for(var c,p,y=this._drawFirst;y;y=y.next)c=y.layer,c.options.interactive&&c._containsPoint(s)&&(p=c);p!==this._hoveredLayer&&(this._handleMouseOut(t),p&&(Le(this._container,"leaflet-interactive"),this._fireEvent([p],t,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,s,c){this._map._fireDOMEvent(s,c||s.type,t)},_bringToFront:function(t){var s=t._order;if(s){var c=s.next,p=s.prev;if(c)c.prev=p;else return;p?p.next=c:c&&(this._drawFirst=c),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(t)}},_bringToBack:function(t){var s=t._order;if(s){var c=s.next,p=s.prev;if(p)p.next=c;else return;c?c.prev=p:p&&(this._drawLast=p),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(t)}}});function Uo(t){return ue.canvas?new Do(t):null}var Ui=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),rl={_initContainer:function(){this._container=Ce("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var s=t._container=Ui("shape");Le(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",t._path=Ui("path"),s.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var s=t._container;this._container.appendChild(s),t.options.interactive&&t.addInteractiveTarget(s)},_removePath:function(t){var s=t._container;Qe(s),t.removeInteractiveTarget(s),delete this._layers[g(t)]},_updateStyle:function(t){var s=t._stroke,c=t._fill,p=t.options,y=t._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(s||(s=t._stroke=Ui("stroke")),y.appendChild(s),s.weight=p.weight+"px",s.color=p.color,s.opacity=p.opacity,p.dashArray?s.dashStyle=$(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=p.lineCap.replace("butt","flat"),s.joinstyle=p.lineJoin):s&&(y.removeChild(s),t._stroke=null),p.fill?(c||(c=t._fill=Ui("fill")),y.appendChild(c),c.color=p.fillColor||p.color,c.opacity=p.fillOpacity):c&&(y.removeChild(c),t._fill=null)},_updateCircle:function(t){var s=t._point.round(),c=Math.round(t._radius),p=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+s.x+","+s.y+" "+c+","+p+" 0,"+65535*360)},_setPath:function(t,s){t._path.v=s},_bringToFront:function(t){Ci(t._container)},_bringToBack:function(t){yn(t._container)}},en=ue.vml?Ui:so,ii=hn.extend({_initContainer:function(){this._container=en("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=en("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qe(this._container),Ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hn.prototype._update.call(this);var t=this._bounds,s=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,c.setAttribute("width",s.x),c.setAttribute("height",s.y)),st(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(t){var s=t._path=en("path");t.options.className&&Le(s,t.options.className),t.options.interactive&&Le(s,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Qe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var s=t._path,c=t.options;s&&(c.stroke?(s.setAttribute("stroke",c.color),s.setAttribute("stroke-opacity",c.opacity),s.setAttribute("stroke-width",c.weight),s.setAttribute("stroke-linecap",c.lineCap),s.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?s.setAttribute("stroke-dasharray",c.dashArray):s.removeAttribute("stroke-dasharray"),c.dashOffset?s.setAttribute("stroke-dashoffset",c.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),c.fill?(s.setAttribute("fill",c.fillColor||c.color),s.setAttribute("fill-opacity",c.fillOpacity),s.setAttribute("fill-rule",c.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(t,s){this._setPath(t,oo(t._parts,s))},_updateCircle:function(t){var s=t._point,c=Math.max(Math.round(t._radius),1),p=Math.max(Math.round(t._radiusY),1)||c,y="a"+c+","+p+" 0 1,0 ",b=t._empty()?"M0 0":"M"+(s.x-c)+","+s.y+y+c*2+",0 "+y+-c*2+",0 ";this._setPath(t,b)},_setPath:function(t,s){t._path.setAttribute("d",s)},_bringToFront:function(t){Ci(t._path)},_bringToBack:function(t){yn(t._path)}});ue.vml&&ii.include(rl);function bs(t){return ue.svg||ue.vml?new ii(t):null}Re.include({getRenderer:function(t){var s=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var s=this._paneRenderers[t];return s===void 0&&(s=this._createRenderer({pane:t}),this._paneRenderers[t]=s),s},_createRenderer:function(t){return this.options.preferCanvas&&Uo(t)||bs(t)}});var sl=bn.extend({initialize:function(t,s){bn.prototype.initialize.call(this,this._boundsToLatLngs(t),s)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=de(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Mu(t,s){return new sl(t,s)}ii.create=en,ii.pointsToPath=oo,un.geometryToLayer=ji,un.coordsToLatLng=vs,un.coordsToLatLngs=Lr,un.latLngToCoords=ys,un.latLngsToCoords=ws,un.getFeature=Mi,un.asFeature=xs,Re.mergeOptions({boxZoom:!0});var $i=Dt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ie(),os(),this._startPoint=this._map.mouseEventToContainerPoint(t),Se(document,{contextmenu:Jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ce("div","leaflet-zoom-box",this._container),Le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var s=new I(this._point,this._startPoint),c=s.getSize();st(this._box,s.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Qe(this._box),Ge(this._container,"leaflet-crosshair")),Ti(),as(),Ze(document,{contextmenu:Jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var s=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Re.addInitHook("addHandler","boxZoom",$i),Re.mergeOptions({doubleClickZoom:!0});var ol=Dt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var s=this._map,c=s.getZoom(),p=s.options.zoomDelta,y=t.originalEvent.shiftKey?c-p:c+p;s.options.doubleClickZoom==="center"?s.setZoom(y):s.setZoomAround(t.containerPoint,y)}});Re.addInitHook("addHandler","doubleClickZoom",ol),Re.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $o=Dt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Qt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ge(this._map._container,"leaflet-grab"),Ge(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=de(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var s=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(s),this._prunePositions(s)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,s){return t-(t-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;t.x<s.min.x&&(t.x=this._viscousLimit(t.x,s.min.x)),t.y<s.min.y&&(t.y=this._viscousLimit(t.y,s.min.y)),t.x>s.max.x&&(t.x=this._viscousLimit(t.x,s.max.x)),t.y>s.max.y&&(t.y=this._viscousLimit(t.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,s=Math.round(t/2),c=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-s+c)%t+s-c,b=(p+s+c)%t-s-c,O=Math.abs(y+c)<Math.abs(b+c)?y:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(t){var s=this._map,c=s.options,p=!c.inertia||t.noInertia||this._times.length<2;if(s.fire("dragend",t),p)s.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,O=c.easeLinearity,B=y.multiplyBy(O/b),F=B.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,F),te=B.multiplyBy(K/F),_e=K/(c.inertiaDeceleration*O),Ee=te.multiplyBy(-_e/2).round();!Ee.x&&!Ee.y?s.fire("moveend"):(Ee=s._limitOffset(Ee,s.options.maxBounds),Ne(function(){s.panBy(Ee,{duration:_e,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});Re.addInitHook("addHandler","dragging",$o),Re.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Fo=Dt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Se(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,s=document.documentElement,c=t.scrollTop||s.scrollTop,p=t.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(p,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var s=this._panKeys={},c=this.keyCodes,p,y;for(p=0,y=c.left.length;p<y;p++)s[c.left[p]]=[-1*t,0];for(p=0,y=c.right.length;p<y;p++)s[c.right[p]]=[t,0];for(p=0,y=c.down.length;p<y;p++)s[c.down[p]]=[0,t];for(p=0,y=c.up.length;p<y;p++)s[c.up[p]]=[0,-1*t]},_setZoomDelta:function(t){var s=this._zoomKeys={},c=this.keyCodes,p,y;for(p=0,y=c.zoomIn.length;p<y;p++)s[c.zoomIn[p]]=t;for(p=0,y=c.zoomOut.length;p<y;p++)s[c.zoomOut[p]]=-t},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var s=t.keyCode,c=this._map,p;if(s in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(p=this._panKeys[s],t.shiftKey&&(p=G(p).multiplyBy(3)),c.options.maxBounds&&(p=c._limitOffset(G(p),c.options.maxBounds)),c.options.worldCopyJump){var y=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(p)));c.panTo(y)}else c.panBy(p)}else if(s in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Jt(t)}}});Re.addInitHook("addHandler","keyboard",Fo),Re.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var He=Dt.extend({addHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var s=$a(t),c=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var p=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),p),Jt(t)},_performZoom:function(){var t=this._map,s=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,b=c?Math.ceil(y/c)*c:y,O=t._limitZoom(s+(this._delta>0?b:-b))-s;this._delta=0,this._startTime=null,O&&(t.options.scrollWheelZoom==="center"?t.setZoom(s+O):t.setZoomAround(this._lastMousePos,s+O))}});Re.addInitHook("addHandler","scrollWheelZoom",He);var Zo=600;Re.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var Er=Dt.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var s=t.touches[0];this._startPos=this._newPos=new q(s.clientX,s.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Se(document,"touchend",tt),Se(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Zo),Se(document,"touchend touchcancel contextmenu",this._cancel,this),Se(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ze(document,"touchend",tt),Ze(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ze(document,"touchend touchcancel contextmenu",this._cancel,this),Ze(document,"touchmove",this._onMove,this)},_onMove:function(t){var s=t.touches[0];this._newPos=new q(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,s){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});c._simulated=!0,s.target.dispatchEvent(c)}});Re.addInitHook("addHandler","tapHold",Er),Re.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var Fi=Dt.extend({addHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ge(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var s=this._map;if(!(!t.touches||t.touches.length!==2||s._animatingZoom||this._zooming)){var c=s.mouseEventToContainerPoint(t.touches[0]),p=s.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(c.add(p)._divideBy(2))),this._startDist=c.distanceTo(p),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend touchcancel",this._onTouchEnd,this),tt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var s=this._map,c=s.mouseEventToContainerPoint(t.touches[0]),p=s.mouseEventToContainerPoint(t.touches[1]),y=c.distanceTo(p)/this._startDist;if(this._zoom=s.getScaleZoom(y,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&y<1||this._zoom>s.getMaxZoom()&&y>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var b=c._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&b.x===0&&b.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),Me(this._animRequest);var O=d(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ne(O,this,!0),tt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Me(this._animRequest),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Re.addInitHook("addHandler","touchZoom",Fi),Re.BoxZoom=$i,Re.DoubleClickZoom=ol,Re.Drag=$o,Re.Keyboard=Fo,Re.ScrollWheelZoom=He,Re.TapHold=Er,Re.TouchZoom=Fi,r.Bounds=I,r.Browser=ue,r.CRS=Ae,r.Canvas=Do,r.Circle=_s,r.CircleMarker=ms,r.Class=Fe,r.Control=It,r.DivIcon=ks,r.DivOverlay=cn,r.DomEvent=cs,r.DomUtil=yr,r.Draggable=Qt,r.Evented=Ue,r.FeatureGroup=Sn,r.GeoJSON=un,r.GridLayer=Un,r.Handler=Dt,r.Icon=ni,r.ImageOverlay=Dn,r.LatLng=le,r.LatLngBounds=me,r.Layer=Yt,r.LayerGroup=zn,r.LineUtil=Ga,r.Map=Re,r.Marker=kn,r.Mixin=Co,r.Path=Bn,r.Point=q,r.PolyUtil=Lu,r.Polygon=bn,r.Polyline=jt,r.Popup=Ss,r.PosAnimation=hs,r.Projection=Ou,r.Rectangle=sl,r.Renderer=hn,r.SVG=ii,r.SVGOverlay=Mo,r.TileLayer=$n,r.Tooltip=Bi,r.Transformation=yi,r.Util=De,r.VideoOverlay=jo,r.bind=d,r.bounds=V,r.canvas=Uo,r.circle=br,r.circleMarker=Ya,r.control=Mn,r.divIcon=nl,r.extend=f,r.featureGroup=Ja,r.geoJSON=Xa,r.geoJson=Xt,r.gridLayer=Di,r.icon=Qa,r.imageOverlay=el,r.latLng=re,r.latLngBounds=de,r.layerGroup=kr,r.map=jn,r.marker=Nu,r.point=G,r.polygon=ju,r.polyline=Iu,r.popup=zi,r.rectangle=Mu,r.setOptions=R,r.stamp=g,r.svg=bs,r.svgOverlay=zo,r.tileLayer=Bo,r.tooltip=Cr,r.transformation=wi,r.version=u,r.videoOverlay=tl;var al=window.L;r.noConflict=function(){return window.L=al,this},window.L=r}))})(ua,ua.exports)),ua.exports}var ba=o0();const Mp=vh(ba);function _u(o,i,r){return Object.freeze({instance:o,context:i,container:r})}function gu(o,i){return i==null?function(u,f){const l=W.useRef();return l.current||(l.current=o(u,f)),l}:function(u,f){const l=W.useRef();l.current||(l.current=o(u,f));const d=W.useRef(u),{instance:_}=l.current;return W.useEffect(function(){d.current!==u&&(i(_,u,d.current),d.current=u)},[_,u,f]),l}}function zp(o,i){W.useEffect(function(){return(i.layerContainer??i.map).addLayer(o.instance),function(){var l;(l=i.layerContainer)==null||l.removeLayer(o.instance),i.map.removeLayer(o.instance)}},[i,o])}function Bp(o){return function(r){const u=Ch(),f=o(mu(r,u),u);return Rp(u.map,r.attribution),Ph(f.current,r.eventHandlers),zp(f.current,u),f}}function a0(o,i){const r=W.useRef();W.useEffect(function(){if(i.pathOptions!==r.current){const f=i.pathOptions??{};o.instance.setStyle(f),r.current=f}},[o,i])}function l0(o){return function(r){const u=Ch(),f=o(mu(r,u),u);return Ph(f.current,r.eventHandlers),zp(f.current,u),a0(f.current,r),f}}function u0(o,i){const r=gu(o,i),u=Bp(r);return jp(u)}function c0(o,i){const r=gu(o),u=r0(r,i);return n0(u)}function h0(o,i){const r=gu(o,i),u=l0(r);return jp(u)}function d0(o,i){const r=gu(o,i),u=Bp(r);return i0(u)}function f0(o,i,r){const{opacity:u,zIndex:f}=i;u!=null&&u!==r.opacity&&o.setOpacity(u),f!=null&&f!==r.zIndex&&o.setZIndex(f)}function _h(){return _h=Object.assign||function(o){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(o[u]=r[u])}return o},_h.apply(this,arguments)}function p0({bounds:o,boundsOptions:i,center:r,children:u,className:f,id:l,placeholder:d,style:_,whenReady:g,zoom:w,...x},k){const[C]=W.useState({className:f,id:l,style:_}),[P,A]=W.useState(null);W.useImperativeHandle(k,()=>(P==null?void 0:P.map)??null,[P]);const R=W.useCallback(Z=>{if(Z!==null&&P===null){const z=new ba.Map(Z,x);r!=null&&w!=null?z.setView(r,w):o!=null&&z.fitBounds(o,i),g!=null&&z.whenReady(g),A(t0(z))}},[]);W.useEffect(()=>()=>{P==null||P.map.remove()},[P]);const M=P?fa.createElement(Ip,{value:P},u):d??null;return fa.createElement("div",_h({},C,{ref:R}),M)}const m0=W.forwardRef(p0),_0=u0(function({position:i,...r},u){const f=new ba.Marker(i,r);return _u(f,Ap(u,{overlayContainer:f}))},function(i,r,u){r.position!==u.position&&i.setLatLng(r.position),r.icon!=null&&r.icon!==u.icon&&i.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==u.zIndexOffset&&i.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==u.opacity&&i.setOpacity(r.opacity),i.dragging!=null&&r.draggable!==u.draggable&&(r.draggable===!0?i.dragging.enable():i.dragging.disable())}),g0=c0(function(i,r){const u=new ba.Popup(i,r.overlayContainer);return _u(u,r)},function(i,r,{position:u},f){W.useEffect(function(){const{instance:d}=i;function _(w){w.popup===d&&(d.update(),f(!0))}function g(w){w.popup===d&&f(!1)}return r.map.on({popupopen:_,popupclose:g}),r.overlayContainer==null?(u!=null&&d.setLatLng(u),d.openOn(r.map)):r.overlayContainer.bindPopup(d),function(){var x;r.map.off({popupopen:_,popupclose:g}),(x=r.overlayContainer)==null||x.unbindPopup(),r.map.removeLayer(d)}},[i,r,f,u])}),v0=d0(function({url:i,...r},u){const f=new ba.TileLayer(i,mu(r,u));return _u(f,u)},function(i,r,u){f0(i,r,u);const{url:f}=r;f!=null&&f!==u.url&&i.setUrl(f)});var ca={exports:{}},y0=ca.exports,Jf;function w0(){return Jf||(Jf=1,(function(o,i){(function(r,u){u(i)})(y0,function(r){var u=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(l){L.Util.setOptions(this,l),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var d=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,d?this._withAnimation:this._noAnimation),this._markerCluster=d?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(l){if(l instanceof L.LayerGroup)return this.addLayers([l]);if(!l.getLatLng)return this._nonPointGroup.addLayer(l),this.fire("layeradd",{layer:l}),this;if(!this._map)return this._needsClustering.push(l),this.fire("layeradd",{layer:l}),this;if(this.hasLayer(l))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(l,this._maxZoom),this.fire("layeradd",{layer:l}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var d=l,_=this._zoom;if(l.__parent)for(;d.__parent._zoom>=_;)d=d.__parent;return this._currentShownBounds.contains(d.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(l,d):this._animationAddLayerNonAnimated(l,d)),this},removeLayer:function(l){return l instanceof L.LayerGroup?this.removeLayers([l]):l.getLatLng?this._map?l.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(l)),this._removeLayer(l,!0),this.fire("layerremove",{layer:l}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),l.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(l)&&(this._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,l)&&this.hasLayer(l)&&this._needsRemoving.push({layer:l,latlng:l._latlng}),this.fire("layerremove",{layer:l}),this):(this._nonPointGroup.removeLayer(l),this.fire("layerremove",{layer:l}),this)},addLayers:function(l,d){if(!L.Util.isArray(l))return this.addLayer(l);var _=this._featureGroup,g=this._nonPointGroup,w=this.options.chunkedLoading,x=this.options.chunkInterval,k=this.options.chunkProgress,C=l.length,P=0,A=!0,R;if(this._map){var M=new Date().getTime(),Z=L.bind(function(){var $=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();P<C;P++){if(w&&P%200===0){var X=new Date().getTime()-$;if(X>x)break}if(R=l[P],R instanceof L.LayerGroup){A&&(l=l.slice(),A=!1),this._extractNonGroupLayers(R,l),C=l.length;continue}if(!R.getLatLng){g.addLayer(R),d||this.fire("layeradd",{layer:R});continue}if(!this.hasLayer(R)&&(this._addLayer(R,this._maxZoom),d||this.fire("layeradd",{layer:R}),R.__parent&&R.__parent.getChildCount()===2)){var fe=R.__parent.getAllChildMarkers(),pe=fe[0]===R?fe[1]:fe[0];_.removeLayer(pe)}}k&&k(P,C,new Date().getTime()-M),P===C?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(Z,this.options.chunkDelay)},this);Z()}else for(var z=this._needsClustering;P<C;P++){if(R=l[P],R instanceof L.LayerGroup){A&&(l=l.slice(),A=!1),this._extractNonGroupLayers(R,l),C=l.length;continue}if(!R.getLatLng){g.addLayer(R);continue}this.hasLayer(R)||z.push(R)}return this},removeLayers:function(l){var d,_,g=l.length,w=this._featureGroup,x=this._nonPointGroup,k=!0;if(!this._map){for(d=0;d<g;d++){if(_=l[d],_ instanceof L.LayerGroup){k&&(l=l.slice(),k=!1),this._extractNonGroupLayers(_,l),g=l.length;continue}this._arraySplice(this._needsClustering,_),x.removeLayer(_),this.hasLayer(_)&&this._needsRemoving.push({layer:_,latlng:_._latlng}),this.fire("layerremove",{layer:_})}return this}if(this._unspiderfy){this._unspiderfy();var C=l.slice(),P=g;for(d=0;d<P;d++){if(_=C[d],_ instanceof L.LayerGroup){this._extractNonGroupLayers(_,C),P=C.length;continue}this._unspiderfyLayer(_)}}for(d=0;d<g;d++){if(_=l[d],_ instanceof L.LayerGroup){k&&(l=l.slice(),k=!1),this._extractNonGroupLayers(_,l),g=l.length;continue}if(!_.__parent){x.removeLayer(_),this.fire("layerremove",{layer:_});continue}this._removeLayer(_,!0,!0),this.fire("layerremove",{layer:_}),w.hasLayer(_)&&(w.removeLayer(_),_.clusterShow&&_.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(l){l.off(this._childMarkerEventHandlers,this),delete l.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var l=new L.LatLngBounds;this._topClusterLevel&&l.extend(this._topClusterLevel._bounds);for(var d=this._needsClustering.length-1;d>=0;d--)l.extend(this._needsClustering[d].getLatLng());return l.extend(this._nonPointGroup.getBounds()),l},eachLayer:function(l,d){var _=this._needsClustering.slice(),g=this._needsRemoving,w,x,k;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(_),x=_.length-1;x>=0;x--){for(w=!0,k=g.length-1;k>=0;k--)if(g[k].layer===_[x]){w=!1;break}w&&l.call(d,_[x])}this._nonPointGroup.eachLayer(l,d)},getLayers:function(){var l=[];return this.eachLayer(function(d){l.push(d)}),l},getLayer:function(l){var d=null;return l=parseInt(l,10),this.eachLayer(function(_){L.stamp(_)===l&&(d=_)}),d},hasLayer:function(l){if(!l)return!1;var d,_=this._needsClustering;for(d=_.length-1;d>=0;d--)if(_[d]===l)return!0;for(_=this._needsRemoving,d=_.length-1;d>=0;d--)if(_[d].layer===l)return!1;return!!(l.__parent&&l.__parent._group===this)||this._nonPointGroup.hasLayer(l)},zoomToShowLayer:function(l,d){var _=this._map;typeof d!="function"&&(d=function(){});var g=function(){(_.hasLayer(l)||_.hasLayer(l.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",g,this),this.off("animationend",g,this),_.hasLayer(l)?d():l.__parent._icon&&(this.once("spiderfied",d,this),l.__parent.spiderfy()))};l._icon&&this._map.getBounds().contains(l.getLatLng())?d():l.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",g,this),this._map.panTo(l.getLatLng())):(this._map.on("moveend",g,this),this.on("animationend",g,this),l.__parent.zoomToBounds())},onAdd:function(l){this._map=l;var d,_,g;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(l),this._nonPointGroup.addTo(l),this._gridClusters||this._generateInitialClusters(),this._maxLat=l.options.crs.projection.MAX_LATITUDE,d=0,_=this._needsRemoving.length;d<_;d++)g=this._needsRemoving[d],g.newlatlng=g.layer._latlng,g.layer._latlng=g.latlng;for(d=0,_=this._needsRemoving.length;d<_;d++)g=this._needsRemoving[d],this._removeLayer(g.layer,!0),g.layer._latlng=g.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),_=this._needsClustering,this._needsClustering=[],this.addLayers(_,!0)},onRemove:function(l){l.off("zoomend",this._zoomEnd,this),l.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(l){for(var d=l;d&&!d._icon;)d=d.__parent;return d||null},_arraySplice:function(l,d){for(var _=l.length-1;_>=0;_--)if(l[_]===d)return l.splice(_,1),!0},_removeFromGridUnclustered:function(l,d){for(var _=this._map,g=this._gridUnclustered,w=Math.floor(this._map.getMinZoom());d>=w&&g[d].removeObject(l,_.project(l.getLatLng(),d));d--);},_childMarkerDragStart:function(l){l.target.__dragStart=l.target._latlng},_childMarkerMoved:function(l){if(!this._ignoreMove&&!l.target.__dragStart){var d=l.target._popup&&l.target._popup.isOpen();this._moveChild(l.target,l.oldLatLng,l.latlng),d&&l.target.openPopup()}},_moveChild:function(l,d,_){l._latlng=d,this.removeLayer(l),l._latlng=_,this.addLayer(l)},_childMarkerDragEnd:function(l){var d=l.target.__dragStart;delete l.target.__dragStart,d&&this._moveChild(l.target,d,l.target._latlng)},_removeLayer:function(l,d,_){var g=this._gridClusters,w=this._gridUnclustered,x=this._featureGroup,k=this._map,C=Math.floor(this._map.getMinZoom());d&&this._removeFromGridUnclustered(l,this._maxZoom);var P=l.__parent,A=P._markers,R;for(this._arraySplice(A,l);P&&(P._childCount--,P._boundsNeedUpdate=!0,!(P._zoom<C));)d&&P._childCount<=1?(R=P._markers[0]===l?P._markers[1]:P._markers[0],g[P._zoom].removeObject(P,k.project(P._cLatLng,P._zoom)),w[P._zoom].addObject(R,k.project(R.getLatLng(),P._zoom)),this._arraySplice(P.__parent._childClusters,P),P.__parent._markers.push(R),R.__parent=P.__parent,P._icon&&(x.removeLayer(P),_||x.addLayer(R))):P._iconNeedsUpdate=!0,P=P.__parent;delete l.__parent},_isOrIsParent:function(l,d){for(;d;){if(l===d)return!0;d=d.parentNode}return!1},fire:function(l,d,_){if(d&&d.layer instanceof L.MarkerCluster){if(d.originalEvent&&this._isOrIsParent(d.layer._icon,d.originalEvent.relatedTarget))return;l="cluster"+l}L.FeatureGroup.prototype.fire.call(this,l,d,_)},listens:function(l,d){return L.FeatureGroup.prototype.listens.call(this,l,d)||L.FeatureGroup.prototype.listens.call(this,"cluster"+l,d)},_defaultIconCreateFunction:function(l){var d=l.getChildCount(),_=" marker-cluster-";return d<10?_+="small":d<100?_+="medium":_+="large",new L.DivIcon({html:"<div><span>"+d+"</span></div>",className:"marker-cluster"+_,iconSize:new L.Point(40,40)})},_bindEvents:function(){var l=this._map,d=this.options.spiderfyOnMaxZoom,_=this.options.showCoverageOnHover,g=this.options.zoomToBoundsOnClick,w=this.options.spiderfyOnEveryZoom;(d||g||w)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),_&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),l.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(l){var d=l.layer,_=d;if(!(l.type==="clusterkeypress"&&l.originalEvent&&l.originalEvent.keyCode!==13)){for(;_._childClusters.length===1;)_=_._childClusters[0];_._zoom===this._maxZoom&&_._childCount===d._childCount&&this.options.spiderfyOnMaxZoom?d.spiderfy():this.options.zoomToBoundsOnClick&&d.zoomToBounds(),this.options.spiderfyOnEveryZoom&&d.spiderfy(),l.originalEvent&&l.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(l){var d=this._map;this._inZoomAnimation||(this._shownPolygon&&d.removeLayer(this._shownPolygon),l.layer.getChildCount()>2&&l.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(l.layer.getConvexHull(),this.options.polygonOptions),d.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var l=this.options.spiderfyOnMaxZoom,d=this.options.showCoverageOnHover,_=this.options.zoomToBoundsOnClick,g=this.options.spiderfyOnEveryZoom,w=this._map;(l||_||g)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),d&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),w.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var l=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,l),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),l),this._currentShownBounds=l}},_generateInitialClusters:function(){var l=Math.ceil(this._map.getMaxZoom()),d=Math.floor(this._map.getMinZoom()),_=this.options.maxClusterRadius,g=_;typeof _!="function"&&(g=function(){return _}),this.options.disableClusteringAtZoom!==null&&(l=this.options.disableClusteringAtZoom-1),this._maxZoom=l,this._gridClusters={},this._gridUnclustered={};for(var w=l;w>=d;w--)this._gridClusters[w]=new L.DistanceGrid(g(w)),this._gridUnclustered[w]=new L.DistanceGrid(g(w));this._topClusterLevel=new this._markerCluster(this,d-1)},_addLayer:function(l,d){var _=this._gridClusters,g=this._gridUnclustered,w=Math.floor(this._map.getMinZoom()),x,k;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(l),l.on(this._childMarkerEventHandlers,this);d>=w;d--){x=this._map.project(l.getLatLng(),d);var C=_[d].getNearObject(x);if(C){C._addChild(l),l.__parent=C;return}if(C=g[d].getNearObject(x),C){var P=C.__parent;P&&this._removeLayer(C,!1);var A=new this._markerCluster(this,d,C,l);_[d].addObject(A,this._map.project(A._cLatLng,d)),C.__parent=A,l.__parent=A;var R=A;for(k=d-1;k>P._zoom;k--)R=new this._markerCluster(this,k,R),_[k].addObject(R,this._map.project(C.getLatLng(),k));P._addChild(R),this._removeFromGridUnclustered(C,d);return}g[d].addObject(l,x)}this._topClusterLevel._addChild(l),l.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(l){l instanceof L.MarkerCluster&&l._iconNeedsUpdate&&l._updateIcon()})},_enqueue:function(l){this._queue.push(l),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var l=0;l<this._queue.length;l++)this._queue[l].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var l=Math.round(this._map._zoom);this._processQueue(),this._zoom<l&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,l)):this._zoom>l?(this._animationStart(),this._animationZoomOut(this._zoom,l)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(l){var d=this._maxLat;return d!==void 0&&(l.getNorth()>=d&&(l._northEast.lat=1/0),l.getSouth()<=-d&&(l._southWest.lat=-1/0)),l},_animationAddLayerNonAnimated:function(l,d){if(d===l)this._featureGroup.addLayer(l);else if(d._childCount===2){d._addToMap();var _=d.getAllChildMarkers();this._featureGroup.removeLayer(_[0]),this._featureGroup.removeLayer(_[1])}else d._updateIcon()},_extractNonGroupLayers:function(l,d){var _=l.getLayers(),g=0,w;for(d=d||[];g<_.length;g++){if(w=_[g],w instanceof L.LayerGroup){this._extractNonGroupLayers(w,d);continue}d.push(w)}return d},_overrideMarkerIcon:function(l){var d=l.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[l]}});return d}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(l,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),l),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(l,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),l),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(l,d){this._animationAddLayerNonAnimated(l,d)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(l,d){var _=this._getExpandedVisibleBounds(),g=this._featureGroup,w=Math.floor(this._map.getMinZoom()),x;this._ignoreMove=!0,this._topClusterLevel._recursively(_,l,w,function(k){var C=k._latlng,P=k._markers,A;for(_.contains(C)||(C=null),k._isSingleParent()&&l+1===d?(g.removeLayer(k),k._recursivelyAddChildrenToMap(null,d,_)):(k.clusterHide(),k._recursivelyAddChildrenToMap(C,d,_)),x=P.length-1;x>=0;x--)A=P[x],_.contains(A._latlng)||g.removeLayer(A)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(_,d),g.eachLayer(function(k){!(k instanceof L.MarkerCluster)&&k._icon&&k.clusterShow()}),this._topClusterLevel._recursively(_,l,d,function(k){k._recursivelyRestoreChildPositions(d)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(_,l,w,function(k){g.removeLayer(k),k.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(l,d){this._animationZoomOutSingle(this._topClusterLevel,l-1,d),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),l,this._getExpandedVisibleBounds())},_animationAddLayer:function(l,d){var _=this,g=this._featureGroup;g.addLayer(l),d!==l&&(d._childCount>2?(d._updateIcon(),this._forceLayout(),this._animationStart(),l._setPos(this._map.latLngToLayerPoint(d.getLatLng())),l.clusterHide(),this._enqueue(function(){g.removeLayer(l),l.clusterShow(),_._animationEnd()})):(this._forceLayout(),_._animationStart(),_._animationZoomOutSingle(d,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(l,d,_){var g=this._getExpandedVisibleBounds(),w=Math.floor(this._map.getMinZoom());l._recursivelyAnimateChildrenInAndAddSelfToMap(g,w,d+1,_);var x=this;this._forceLayout(),l._recursivelyBecomeVisible(g,_),this._enqueue(function(){if(l._childCount===1){var k=l._markers[0];this._ignoreMove=!0,k.setLatLng(k.getLatLng()),this._ignoreMove=!1,k.clusterShow&&k.clusterShow()}else l._recursively(g,_,w,function(C){C._recursivelyRemoveChildrenFromMap(g,w,d+1)});x._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(l){return new L.MarkerClusterGroup(l)};var f=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(l,d,_,g){L.Marker.prototype.initialize.call(this,_?_._cLatLng||_.getLatLng():new L.LatLng(0,0),{icon:this,pane:l.options.clusterPane}),this._group=l,this._zoom=d,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,_&&this._addChild(_),g&&this._addChild(g)},getAllChildMarkers:function(l,d){l=l||[];for(var _=this._childClusters.length-1;_>=0;_--)this._childClusters[_].getAllChildMarkers(l,d);for(var g=this._markers.length-1;g>=0;g--)d&&this._markers[g].__dragStart||l.push(this._markers[g]);return l},getChildCount:function(){return this._childCount},zoomToBounds:function(l){for(var d=this._childClusters.slice(),_=this._group._map,g=_.getBoundsZoom(this._bounds),w=this._zoom+1,x=_.getZoom(),k;d.length>0&&g>w;){w++;var C=[];for(k=0;k<d.length;k++)C=C.concat(d[k]._childClusters);d=C}g>w?this._group._map.setView(this._latlng,w):g<=x?this._group._map.setView(this._latlng,x+1):this._group._map.fitBounds(this._bounds,l)},getBounds:function(){var l=new L.LatLngBounds;return l.extend(this._bounds),l},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(l,d){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(l),l instanceof L.MarkerCluster?(d||(this._childClusters.push(l),l.__parent=this),this._childCount+=l._childCount):(d||this._markers.push(l),this._childCount++),this.__parent&&this.__parent._addChild(l,!0)},_setClusterCenter:function(l){this._cLatLng||(this._cLatLng=l._cLatLng||l._latlng)},_resetBounds:function(){var l=this._bounds;l._southWest&&(l._southWest.lat=1/0,l._southWest.lng=1/0),l._northEast&&(l._northEast.lat=-1/0,l._northEast.lng=-1/0)},_recalculateBounds:function(){var l=this._markers,d=this._childClusters,_=0,g=0,w=this._childCount,x,k,C,P;if(w!==0){for(this._resetBounds(),x=0;x<l.length;x++)C=l[x]._latlng,this._bounds.extend(C),_+=C.lat,g+=C.lng;for(x=0;x<d.length;x++)k=d[x],k._boundsNeedUpdate&&k._recalculateBounds(),this._bounds.extend(k._bounds),C=k._wLatLng,P=k._childCount,_+=C.lat*P,g+=C.lng*P;this._latlng=this._wLatLng=new L.LatLng(_/w,g/w),this._boundsNeedUpdate=!1}},_addToMap:function(l){l&&(this._backupLatlng=this._latlng,this.setLatLng(l)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(l,d,_){this._recursively(l,this._group._map.getMinZoom(),_-1,function(g){var w=g._markers,x,k;for(x=w.length-1;x>=0;x--)k=w[x],k._icon&&(k._setPos(d),k.clusterHide())},function(g){var w=g._childClusters,x,k;for(x=w.length-1;x>=0;x--)k=w[x],k._icon&&(k._setPos(d),k.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(l,d,_,g){this._recursively(l,g,d,function(w){w._recursivelyAnimateChildrenIn(l,w._group._map.latLngToLayerPoint(w.getLatLng()).round(),_),w._isSingleParent()&&_-1===g?(w.clusterShow(),w._recursivelyRemoveChildrenFromMap(l,d,_)):w.clusterHide(),w._addToMap()})},_recursivelyBecomeVisible:function(l,d){this._recursively(l,this._group._map.getMinZoom(),d,null,function(_){_.clusterShow()})},_recursivelyAddChildrenToMap:function(l,d,_){this._recursively(_,this._group._map.getMinZoom()-1,d,function(g){if(d!==g._zoom)for(var w=g._markers.length-1;w>=0;w--){var x=g._markers[w];_.contains(x._latlng)&&(l&&(x._backupLatlng=x.getLatLng(),x.setLatLng(l),x.clusterHide&&x.clusterHide()),g._group._featureGroup.addLayer(x))}},function(g){g._addToMap(l)})},_recursivelyRestoreChildPositions:function(l){for(var d=this._markers.length-1;d>=0;d--){var _=this._markers[d];_._backupLatlng&&(_.setLatLng(_._backupLatlng),delete _._backupLatlng)}if(l-1===this._zoom)for(var g=this._childClusters.length-1;g>=0;g--)this._childClusters[g]._restorePosition();else for(var w=this._childClusters.length-1;w>=0;w--)this._childClusters[w]._recursivelyRestoreChildPositions(l)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(l,d,_,g){var w,x;this._recursively(l,d-1,_-1,function(k){for(x=k._markers.length-1;x>=0;x--)w=k._markers[x],(!g||!g.contains(w._latlng))&&(k._group._featureGroup.removeLayer(w),w.clusterShow&&w.clusterShow())},function(k){for(x=k._childClusters.length-1;x>=0;x--)w=k._childClusters[x],(!g||!g.contains(w._latlng))&&(k._group._featureGroup.removeLayer(w),w.clusterShow&&w.clusterShow())})},_recursively:function(l,d,_,g,w){var x=this._childClusters,k=this._zoom,C,P;if(d<=k&&(g&&g(this),w&&k===_&&w(this)),k<d||k<_)for(C=x.length-1;C>=0;C--)P=x[C],P._boundsNeedUpdate&&P._recalculateBounds(),l.intersects(P._bounds)&&P._recursively(l,d,_,g,w)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var l=this.options.opacity;return this.setOpacity(0),this.options.opacity=l,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(l){this._cellSize=l,this._sqCellSize=l*l,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(l,d){var _=this._getCoord(d.x),g=this._getCoord(d.y),w=this._grid,x=w[g]=w[g]||{},k=x[_]=x[_]||[],C=L.Util.stamp(l);this._objectPoint[C]=d,k.push(l)},updateObject:function(l,d){this.removeObject(l),this.addObject(l,d)},removeObject:function(l,d){var _=this._getCoord(d.x),g=this._getCoord(d.y),w=this._grid,x=w[g]=w[g]||{},k=x[_]=x[_]||[],C,P;for(delete this._objectPoint[L.Util.stamp(l)],C=0,P=k.length;C<P;C++)if(k[C]===l)return k.splice(C,1),P===1&&delete x[_],!0},eachObject:function(l,d){var _,g,w,x,k,C,P,A=this._grid;for(_ in A){k=A[_];for(g in k)for(C=k[g],w=0,x=C.length;w<x;w++)P=l.call(d,C[w]),P&&(w--,x--)}},getNearObject:function(l){var d=this._getCoord(l.x),_=this._getCoord(l.y),g,w,x,k,C,P,A,R,M=this._objectPoint,Z=this._sqCellSize,z=null;for(g=_-1;g<=_+1;g++)if(k=this._grid[g],k){for(w=d-1;w<=d+1;w++)if(C=k[w],C)for(x=0,P=C.length;x<P;x++)A=C[x],R=this._sqDist(M[L.Util.stamp(A)],l),(R<Z||R<=Z&&z===null)&&(Z=R,z=A)}return z},_getCoord:function(l){var d=Math.floor(l/this._cellSize);return isFinite(d)?d:l},_sqDist:function(l,d){var _=d.x-l.x,g=d.y-l.y;return _*_+g*g}},(function(){L.QuickHull={getDistant:function(l,d){var _=d[1].lat-d[0].lat,g=d[0].lng-d[1].lng;return g*(l.lat-d[0].lat)+_*(l.lng-d[0].lng)},findMostDistantPointFromBaseLine:function(l,d){var _=0,g=null,w=[],x,k,C;for(x=d.length-1;x>=0;x--){if(k=d[x],C=this.getDistant(k,l),C>0)w.push(k);else continue;C>_&&(_=C,g=k)}return{maxPoint:g,newPoints:w}},buildConvexHull:function(l,d){var _=[],g=this.findMostDistantPointFromBaseLine(l,d);return g.maxPoint?(_=_.concat(this.buildConvexHull([l[0],g.maxPoint],g.newPoints)),_=_.concat(this.buildConvexHull([g.maxPoint,l[1]],g.newPoints)),_):[l[0]]},getConvexHull:function(l){var d=!1,_=!1,g=!1,w=!1,x=null,k=null,C=null,P=null,A=null,R=null,M;for(M=l.length-1;M>=0;M--){var Z=l[M];(d===!1||Z.lat>d)&&(x=Z,d=Z.lat),(_===!1||Z.lat<_)&&(k=Z,_=Z.lat),(g===!1||Z.lng>g)&&(C=Z,g=Z.lng),(w===!1||Z.lng<w)&&(P=Z,w=Z.lng)}_!==d?(R=k,A=x):(R=P,A=C);var z=[].concat(this.buildConvexHull([R,A],l),this.buildConvexHull([A,R],l));return z}}})(),L.MarkerCluster.include({getConvexHull:function(){var l=this.getAllChildMarkers(),d=[],_,g;for(g=l.length-1;g>=0;g--)_=l[g].getLatLng(),d.push(_);return L.QuickHull.getConvexHull(d)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var l=this.getAllChildMarkers(null,!0),d=this._group,_=d._map,g=_.latLngToLayerPoint(this._latlng),w;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?w=this._group.options.spiderfyShapePositions(l.length,g):l.length>=this._circleSpiralSwitchover?w=this._generatePointsSpiral(l.length,g):(g.y+=10,w=this._generatePointsCircle(l.length,g)),this._animationSpiderfy(l,w)}},unspiderfy:function(l){this._group._inZoomAnimation||(this._animationUnspiderfy(l),this._group._spiderfied=null)},_generatePointsCircle:function(l,d){var _=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+l),g=_/this._2PI,w=this._2PI/l,x=[],k,C;for(g=Math.max(g,35),x.length=l,k=0;k<l;k++)C=this._circleStartAngle+k*w,x[k]=new L.Point(d.x+g*Math.cos(C),d.y+g*Math.sin(C))._round();return x},_generatePointsSpiral:function(l,d){var _=this._group.options.spiderfyDistanceMultiplier,g=_*this._spiralLengthStart,w=_*this._spiralFootSeparation,x=_*this._spiralLengthFactor*this._2PI,k=0,C=[],P;for(C.length=l,P=l;P>=0;P--)P<l&&(C[P]=new L.Point(d.x+g*Math.cos(k),d.y+g*Math.sin(k))._round()),k+=w/g+P*5e-4,g+=x/k;return C},_noanimationUnspiderfy:function(){var l=this._group,d=l._map,_=l._featureGroup,g=this.getAllChildMarkers(null,!0),w,x;for(l._ignoreMove=!0,this.setOpacity(1),x=g.length-1;x>=0;x--)w=g[x],_.removeLayer(w),w._preSpiderfyLatlng&&(w.setLatLng(w._preSpiderfyLatlng),delete w._preSpiderfyLatlng),w.setZIndexOffset&&w.setZIndexOffset(0),w._spiderLeg&&(d.removeLayer(w._spiderLeg),delete w._spiderLeg);l.fire("unspiderfied",{cluster:this,markers:g}),l._ignoreMove=!1,l._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(l,d){var _=this._group,g=_._map,w=_._featureGroup,x=this._group.options.spiderLegPolylineOptions,k,C,P,A;for(_._ignoreMove=!0,k=0;k<l.length;k++)A=g.layerPointToLatLng(d[k]),C=l[k],P=new L.Polyline([this._latlng,A],x),g.addLayer(P),C._spiderLeg=P,C._preSpiderfyLatlng=C._latlng,C.setLatLng(A),C.setZIndexOffset&&C.setZIndexOffset(1e6),w.addLayer(C);this.setOpacity(.3),_._ignoreMove=!1,_.fire("spiderfied",{cluster:this,markers:l})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(l,d){var _=this,g=this._group,w=g._map,x=g._featureGroup,k=this._latlng,C=w.latLngToLayerPoint(k),P=L.Path.SVG,A=L.extend({},this._group.options.spiderLegPolylineOptions),R=A.opacity,M,Z,z,$,X,fe;for(R===void 0&&(R=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),P?(A.opacity=0,A.className=(A.className||"")+" leaflet-cluster-spider-leg"):A.opacity=R,g._ignoreMove=!0,M=0;M<l.length;M++)Z=l[M],fe=w.layerPointToLatLng(d[M]),z=new L.Polyline([k,fe],A),w.addLayer(z),Z._spiderLeg=z,P&&($=z._path,X=$.getTotalLength()+.1,$.style.strokeDasharray=X,$.style.strokeDashoffset=X),Z.setZIndexOffset&&Z.setZIndexOffset(1e6),Z.clusterHide&&Z.clusterHide(),x.addLayer(Z),Z._setPos&&Z._setPos(C);for(g._forceLayout(),g._animationStart(),M=l.length-1;M>=0;M--)fe=w.layerPointToLatLng(d[M]),Z=l[M],Z._preSpiderfyLatlng=Z._latlng,Z.setLatLng(fe),Z.clusterShow&&Z.clusterShow(),P&&(z=Z._spiderLeg,$=z._path,$.style.strokeDashoffset=0,z.setStyle({opacity:R}));this.setOpacity(.3),g._ignoreMove=!1,setTimeout(function(){g._animationEnd(),g.fire("spiderfied",{cluster:_,markers:l})},200)},_animationUnspiderfy:function(l){var d=this,_=this._group,g=_._map,w=_._featureGroup,x=l?g._latLngToNewLayerPoint(this._latlng,l.zoom,l.center):g.latLngToLayerPoint(this._latlng),k=this.getAllChildMarkers(null,!0),C=L.Path.SVG,P,A,R,M,Z,z;for(_._ignoreMove=!0,_._animationStart(),this.setOpacity(1),A=k.length-1;A>=0;A--)P=k[A],P._preSpiderfyLatlng&&(P.closePopup(),P.setLatLng(P._preSpiderfyLatlng),delete P._preSpiderfyLatlng,z=!0,P._setPos&&(P._setPos(x),z=!1),P.clusterHide&&(P.clusterHide(),z=!1),z&&w.removeLayer(P),C&&(R=P._spiderLeg,M=R._path,Z=M.getTotalLength()+.1,M.style.strokeDashoffset=Z,R.setStyle({opacity:0})));_._ignoreMove=!1,setTimeout(function(){var $=0;for(A=k.length-1;A>=0;A--)P=k[A],P._spiderLeg&&$++;for(A=k.length-1;A>=0;A--)P=k[A],P._spiderLeg&&(P.clusterShow&&P.clusterShow(),P.setZIndexOffset&&P.setZIndexOffset(0),$>1&&w.removeLayer(P),g.removeLayer(P._spiderLeg),delete P._spiderLeg);_._animationEnd(),_.fire("unspiderfied",{cluster:d,markers:k})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(l){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(l))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(l){this._spiderfied&&this._spiderfied.unspiderfy(l)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(l){l._spiderLeg&&(this._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow(),l.setZIndexOffset&&l.setZIndexOffset(0),this._map.removeLayer(l._spiderLeg),delete l._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(l){return l?l instanceof L.MarkerClusterGroup?l=l._topClusterLevel.getAllChildMarkers():l instanceof L.LayerGroup?l=l._layers:l instanceof L.MarkerCluster?l=l.getAllChildMarkers():l instanceof L.Marker&&(l=[l]):l=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(l),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(l),this},_flagParentsIconsNeedUpdate:function(l){var d,_;for(d in l)for(_=l[d].__parent;_;)_._iconNeedsUpdate=!0,_=_.__parent},_refreshSingleMarkerModeMarkers:function(l){var d,_;for(d in l)_=l[d],this.hasLayer(_)&&_.setIcon(this._overrideMarkerIcon(_))}}),L.Marker.include({refreshIconOptions:function(l,d){var _=this.options.icon;return L.setOptions(_,l),this.setIcon(_),d&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),r.MarkerClusterGroup=u,r.MarkerCluster=f,Object.defineProperty(r,"__esModule",{value:!0})})})(ca,ca.exports)),ca.exports}w0();function gh(o){let i={},r={};const{children:u,...f}=o;return Object.entries(f).forEach(([l,d])=>{l.startsWith("on")?r={...r,[l]:d}:i={...i,[l]:d}}),{clusterProps:i,clusterEvents:r}}function x0(o,i){const{clusterProps:r,clusterEvents:u}=gh(o),f=new Mp.MarkerClusterGroup(r);return Object.entries(u).forEach(([l,d])=>{const _=`cluster${l.substring(2).toLowerCase()}`;f.on(_,d)}),_u(f,Ap(i,{layerContainer:f}))}var S0=(o,i,r)=>{const{clusterProps:u,clusterEvents:f}=gh(i),{clusterProps:l,clusterEvents:d}=gh(r);Object.keys(u).forEach(_=>{u[_]!==l[_]&&(o.options[_]=u[_])}),Object.entries(d).forEach(([_,g])=>{const w=`cluster${_.substring(2).toLowerCase()}`;o.off(w,g)}),Object.entries(f).forEach(([_,g])=>{const w=`cluster${_.substring(2).toLowerCase()}`;o.on(w,g)})},k0=h0(x0,S0),b0=k0;const th=new Map;function L0(o){const i=o>=70?"#16a34a":o>=50?"#d97706":"#dc2626";return th.has(i)||th.set(i,Mp.divIcon({className:"",iconSize:[12,12],iconAnchor:[6,6],html:`<div style="width:12px;height:12px;border-radius:50%;background:${i};border:2px solid white;box-shadow:0 1px 3px rgba(0,0,0,.3)"></div>`})),th.get(i)}function C0(){const{prospects:o,loading:i}=pu(),r=no(),u=W.useMemo(()=>o.filter(f=>f.latitude!=null&&f.longitude!=null),[o]);return i?E.jsx("div",{className:"text-center py-12 text-gray-400",children:"Chargement..."}):E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[E.jsxs("span",{children:[u.length," prospects golocaliss"]}),E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx("span",{className:"inline-block w-3 h-3 rounded-full bg-emerald-600"})," 70+"]}),E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx("span",{className:"inline-block w-3 h-3 rounded-full bg-amber-500"})," 50-69"]}),E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx("span",{className:"inline-block w-3 h-3 rounded-full bg-red-600"})," <50"]})]}),E.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",style:{height:"calc(100vh - 200px)"},children:E.jsxs(m0,{center:[48.1,-2.8],zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[E.jsx(v0,{attribution:' <a href="https://www.openstreetmap.org/copyright">OSM</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),E.jsx(b0,{chunkedLoading:!0,children:u.map(f=>E.jsx(_0,{position:[f.latitude,f.longitude],icon:L0(f.score_pertinence),children:E.jsx(g0,{children:E.jsxs("div",{className:"text-sm space-y-1 min-w-[180px]",children:[E.jsx("div",{className:"font-bold",children:f.nom}),E.jsxs("div",{className:"text-gray-600",children:[f.ville," (",f.departement,")"]}),E.jsxs("div",{children:["SAU: ",E.jsxs("strong",{children:[f.sau_estimee_ha?Math.round(f.sau_estimee_ha):"-"," ha"]})]}),E.jsxs("div",{children:["Score: ",E.jsx("strong",{children:f.score_pertinence})]}),E.jsx("button",{onClick:()=>r(`/prospect/${f.id}`),className:"mt-1 text-xs text-cooperl-600 hover:underline",children:"Voir la fiche "})]})})},f.id))})]})})]})}const P0=[{type:"appele",label:"Appel",className:"bg-blue-500 hover:bg-blue-600 text-white"},{type:"interesse",label:"Intress",className:"bg-amber-500 hover:bg-amber-600 text-white"},{type:"rappeler",label:"Rappeler",className:"bg-purple-500 hover:bg-purple-600 text-white"},{type:"refus",label:"Refus",className:"bg-red-500 hover:bg-red-600 text-white"},{type:"recrute",label:"Recrut",className:"bg-emerald-600 hover:bg-emerald-700 text-white"}];function E0(){const{prospects:o,actions:i,addAction:r,loading:u}=pu(),{id:f}=a_(),l=no(),[d,_]=W.useState(!1),[g,w]=W.useState(null),x=f?parseInt(f,10):NaN,C=W.useMemo(()=>new Map(o.map(z=>[z.id,z])),[o]).get(x),P=W.useMemo(()=>i.filter(z=>z.prospect_id===x),[i,x]);if(u)return E.jsx("div",{className:"text-center py-12 text-gray-400",children:"Chargement..."});if(!C)return E.jsxs("div",{className:"text-center py-12",children:[E.jsx("p",{className:"text-gray-400",children:"Prospect non trouv"}),E.jsx("button",{onClick:()=>l("/"),className:"mt-2 text-cooperl-600 hover:underline",children:"Retour"})]});async function A(z){if(!C)return;_(!0);const $=await r(C.id,z);_(!1),$&&alert(`Erreur lors de l'enregistrement : ${$.message??"Erreur inconnue"}`)}function R(z){C&&(z==="refus"||z==="recrute"?w(z):A(z))}const M=Qy(C),Z=M.reduce((z,$)=>z+$.points,0);return E.jsxs("div",{className:"space-y-4 max-w-3xl mx-auto",children:[E.jsxs("button",{onClick:()=>l("/"),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700",children:[E.jsx(Cy,{size:16})," Retour"]}),E.jsxs("div",{className:"bg-white rounded-lg shadow p-5 space-y-4",children:[E.jsxs("div",{className:"flex items-start justify-between",children:[E.jsxs("div",{children:[E.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[E.jsx(Lh,{size:20,className:"text-cooperl-600"}),C.civilite&&E.jsx("span",{className:"text-gray-500 font-normal",children:C.civilite}),C.nom]}),E.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:["N ",C.numero_tiers," | Zone ",C.zone_geographique]})]}),E.jsx("span",{className:`text-sm px-3 py-1 rounded-full ${Qs[C.statut]}`,children:lr[C.statut]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[E.jsxs("div",{className:"flex items-start gap-2",children:[E.jsx(Uy,{size:16,className:"text-gray-400 mt-0.5 shrink-0"}),E.jsxs("div",{children:[C.rue&&E.jsx("div",{children:C.rue}),E.jsxs("div",{children:[C.code_postal," ",C.ville]}),E.jsxs("div",{className:"text-gray-500",children:["Dept ",C.departement]})]})]}),E.jsxs("div",{className:"space-y-1",children:[C.telephone_elevage&&E.jsxs("a",{href:`tel:${C.telephone_elevage}`,className:"flex items-center gap-2 text-cooperl-600 hover:underline",children:[E.jsx(Gf,{size:14})," ",C.telephone_elevage," ",E.jsx("span",{className:"text-gray-400",children:"(levage)"})]}),C.telephone_domicile&&E.jsxs("a",{href:`tel:${C.telephone_domicile}`,className:"flex items-center gap-2 text-cooperl-600 hover:underline",children:[E.jsx(Gf,{size:14})," ",C.telephone_domicile," ",E.jsx("span",{className:"text-gray-400",children:"(domicile)"})]}),C.adresse_email&&E.jsxs("a",{href:`mailto:${C.adresse_email}`,className:"flex items-center gap-2 text-cooperl-600 hover:underline",children:[E.jsx(Ep,{size:14})," ",C.adresse_email]})]})]}),E.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 bg-gray-50 rounded-lg p-3 text-sm",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-gray-500",children:"SAU estime"}),E.jsx("div",{className:"font-bold",children:C.sau_estimee_ha?`${Math.round(C.sau_estimee_ha)} ha`:"-"}),E.jsxs("div",{className:"text-xs text-gray-400",children:["via ",C.source_sau]})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-gray-500",children:"Tonnage"}),E.jsx("div",{className:"font-bold",children:C.tonnage_total?`${Math.round(C.tonnage_total)} t`:"-"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-gray-500",children:"Certifications"}),E.jsx("div",{className:"font-bold",children:C.certifications&&C.certifications!=="0.0"&&C.certifications!=="0"?"Oui":"Non"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-gray-500",children:"Fidlit"}),E.jsx("div",{className:"font-bold",children:C.annee_fidelite?`${Math.round(C.annee_fidelite)} ans`:"-"})]})]})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow p-5 space-y-3",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h3",{className:"font-semibold",children:"Score de pertinence"}),E.jsx("span",{className:"text-2xl font-bold text-cooperl-700",children:C.score_pertinence})]}),E.jsxs("div",{className:"space-y-2",children:[M.map(z=>E.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[E.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center text-xs ${z.met?"bg-cooperl-500 text-white":"bg-gray-200 text-gray-400"}`,children:z.met?"":""}),E.jsx("div",{className:"flex-1",children:z.label}),E.jsxs("div",{className:"font-mono text-right w-16",children:[z.points," / ",z.max]})]},z.label)),E.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold text-sm",children:[E.jsx("span",{children:"Total calcul"}),E.jsxs("span",{className:"font-mono",children:[Z," / 85"]})]}),Z!==C.score_pertinence&&E.jsxs("div",{className:"text-xs text-amber-600",children:["Ecart de ",C.score_pertinence-Z," pts (critres supplmentaires non dcomposs)"]})]})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow p-5 space-y-3",children:[E.jsx("h3",{className:"font-semibold",children:"Actions"}),E.jsx("div",{className:"flex flex-wrap gap-2",children:P0.map(z=>E.jsx("button",{disabled:d,onClick:()=>R(z.type),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 ${z.className}`,children:z.label},z.type))}),P.length>0&&E.jsxs("div",{className:"mt-4 space-y-2",children:[E.jsx("h4",{className:"text-sm text-gray-500",children:"Historique"}),P.map(z=>E.jsxs("div",{className:"flex items-center gap-3 text-sm py-1 border-b border-gray-100 last:border-0",children:[E.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Qs[z.type]}`,children:lr[z.type]}),E.jsx("span",{className:"text-gray-400",children:new Date(z.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),z.notes&&E.jsx("span",{className:"text-gray-600",children:z.notes})]},z.id))]})]}),g&&E.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full space-y-4",children:[E.jsx("h3",{className:"font-semibold text-lg",children:"Confirmer l'action"}),E.jsxs("p",{className:"text-gray-600",children:["Marquer ",E.jsx("strong",{children:C.nom})," comme ",E.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs ${Qs[g]}`,children:lr[g]})," ?"]}),E.jsxs("div",{className:"flex gap-3 justify-end",children:[E.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 rounded-lg text-sm border hover:bg-gray-50 transition-colors",children:"Annuler"}),E.jsx("button",{onClick:()=>{const z=g;w(null),A(z)},className:"px-4 py-2 rounded-lg text-sm bg-cooperl-600 text-white hover:bg-cooperl-700 transition-colors",children:"Confirmer"})]})]})})]})}const Qf=40,Yf=["recrute","interesse","appele","rappeler","refus","en_attente"];function T0(){const{prospects:o,actions:i,loading:r}=pu(),u=no(),f=W.useMemo(()=>{const w={en_attente:0,appele:0,interesse:0,refus:0,rappeler:0,recrute:0};return o.forEach(x=>{w[x.statut]=(w[x.statut]??0)+1}),w},[o]),l=f.recrute??0,d=Math.min(100,Math.round(l/Qf*100)),_=W.useMemo(()=>new Map(o.map(w=>[w.id,w])),[o]),g=W.useMemo(()=>i.slice(0,20).map(w=>({...w,prospect:_.get(w.prospect_id)})),[i,_]);return r?E.jsx("div",{className:"text-center py-12 text-gray-400",children:"Chargement..."}):E.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[E.jsxs("div",{className:"bg-white rounded-lg shadow p-5",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Tp,{size:20,className:"text-cooperl-600"}),E.jsx("h3",{className:"font-semibold",children:"Objectif annuel"})]}),E.jsxs("span",{className:"text-2xl font-bold text-cooperl-700",children:[l," / ",Qf]})]}),E.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:E.jsx("div",{className:"h-full rounded-full transition-all duration-500 bg-gradient-to-r from-cooperl-400 to-cooperl-600",style:{width:`${d}%`}})}),E.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[d,"% de l'objectif"]})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow p-5",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[E.jsx(Wy,{size:20,className:"text-blue-600"}),E.jsx("h3",{className:"font-semibold",children:"Pipeline"})]}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Yf.map(w=>E.jsxs("div",{className:"rounded-lg p-3 text-center border",children:[E.jsx("div",{className:"text-2xl font-bold",children:f[w]??0}),E.jsx("div",{className:`text-xs mt-1 inline-block px-2 py-0.5 rounded-full ${Qs[w]}`,children:lr[w]})]},w))}),E.jsx("div",{className:"mt-4 flex rounded-full overflow-hidden h-3",children:Yf.filter(w=>(f[w]??0)>0).map(w=>{const x=o.length>0?(f[w]??0)/o.length*100:0,k={recrute:"bg-emerald-500",interesse:"bg-amber-400",appele:"bg-blue-400",rappeler:"bg-purple-400",refus:"bg-red-400",en_attente:"bg-gray-300"};return E.jsx("div",{className:`${k[w]} transition-all`,style:{width:`${x}%`},title:`${lr[w]}: ${f[w]}`},w)})})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow p-5",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[E.jsx(Ay,{size:20,className:"text-gray-500"}),E.jsx("h3",{className:"font-semibold",children:"Actions rcentes"})]}),g.length===0?E.jsx("div",{className:"text-center py-8 text-gray-400",children:"Aucune action enregistre. Commencez par appeler des prospects depuis le Pipeline."}):E.jsx("div",{className:"space-y-2",children:g.map(w=>{var x;return E.jsxs("div",{className:"flex items-center gap-3 text-sm py-2 border-b border-gray-100 last:border-0 hover:bg-gray-50 cursor-pointer",onClick:()=>w.prospect&&u(`/prospect/${w.prospect.id}`),children:[E.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full shrink-0 ${Qs[w.type]}`,children:lr[w.type]}),E.jsx("span",{className:"font-medium truncate",children:((x=w.prospect)==null?void 0:x.nom)??`#${w.prospect_id}`}),E.jsx("span",{className:"text-gray-400 ml-auto shrink-0",children:new Date(w.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},w.id)})})]})]})}const O0=[{icon:Ep,title:"Rappels et relances automatiques",description:"Envoyer un email automatique quand un prospect n'a pas ete contacte depuis 15 jours, ou envoyer un bilan hebdomadaire a l'equipe.",impact:"L'equipe doit verifier manuellement qui n'a pas ete relance."},{icon:jy,title:"Fiches prospect en PDF",description:"Generer une fiche imprimable avec toutes les infos d'un prospect pour un rendez-vous terrain.",impact:"Il faut faire un copier-coller manuel ou une capture ecran."},{icon:Vy,title:"Import et mise a jour des donnees",description:"Importer un fichier Excel pour mettre a jour les prospects en masse (nouvelles SAU, nouveaux adherents, changements de TC).",impact:"Les mises a jour doivent etre faites une par une dans la base de donnees."},{icon:Ey,title:"Notifications entre collegues",description:'Etre prevenu quand un collegue a mis a jour un prospect ou quand un prospect passe au statut "interesse".',impact:"Il faut ouvrir l'application pour voir les changements."},{icon:qy,title:"Droits d'acces par profil",description:"Un technicien ne voit que ses prospects, un responsable voit toute sa zone, la direction voit tout et peut exporter.",impact:"Aujourd'hui tout le monde voit tout  pas de cloisonnement."},{icon:Fy,title:"Synchronisation automatique avec le SI Cooperl",description:"Recuperer automatiquement les donnees a jour depuis le systeme d'information (adherents, tonnages, certifications, SAU).",impact:"Les donnees sont figees au moment du chargement initial."},{icon:Ny,title:"Historique et statistiques avancees",description:"Generer des rapports de performance par TC, par zone ou par periode. Comparer les campagnes entre elles.",impact:"Le suivi se limite aux compteurs en temps reel, pas d'historique."}];function R0(){return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[E.jsx(Op,{className:"text-amber-600 shrink-0 mt-0.5",size:20}),E.jsxs("div",{children:[E.jsx("h2",{className:"font-semibold text-amber-900",children:"Fonctionnalites non disponibles sur cette version"}),E.jsx("p",{className:"text-amber-700 text-sm mt-1",children:"Cette application est un prototype deploye sur GitHub Pages avec Supabase comme backend. Les fonctionnalites ci-dessous necessitent un serveur applicatif dedie."})]})]}),E.jsx("div",{className:"grid gap-4",children:O0.map(({icon:o,title:i,description:r,impact:u})=>E.jsxs("div",{className:"bg-white border rounded-lg p-4 flex items-start gap-4",children:[E.jsx("div",{className:"bg-gray-100 rounded-lg p-2.5 shrink-0",children:E.jsx(o,{className:"text-gray-500",size:20})}),E.jsxs("div",{className:"min-w-0",children:[E.jsx("h3",{className:"font-medium text-gray-900",children:i}),E.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r}),E.jsxs("p",{className:"text-sm text-red-600 mt-2 flex items-center gap-1.5",children:[E.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-red-400 rounded-full shrink-0"}),u]})]})]},i))}),E.jsxs("div",{className:"bg-cooperl-50 border border-cooperl-200 rounded-lg p-4 text-sm text-cooperl-800",children:[E.jsx("p",{className:"font-medium",children:"Avec l'infrastructure cible (serveur applicatif + base de donnees) :"}),E.jsx("p",{className:"mt-1",children:"Toutes ces fonctionnalites deviennent realisables. L'application est concue pour migrer vers cette architecture sans repartir de zero."})]})]})}function A0({onSignOut:o,userEmail:i}){return E.jsx(Sy,{children:E.jsx(Jy,{onSignOut:o,userEmail:i,children:E.jsxs(b_,{children:[E.jsx(Fr,{path:"/",element:E.jsx(Yy,{})}),E.jsx(Fr,{path:"/carte",element:E.jsx(C0,{})}),E.jsx(Fr,{path:"/prospect/:id",element:E.jsx(E0,{})}),E.jsx(Fr,{path:"/suivi",element:E.jsx(T0,{})}),E.jsx(Fr,{path:"/limitations",element:E.jsx(R0,{})}),E.jsx(Fr,{path:"*",element:E.jsx(S_,{to:"/",replace:!0})})]})})})}function N0(){const{user:o,loading:i,signIn:r,signOut:u}=vy();return i?E.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Chargement..."}):o?E.jsx(A0,{onSignOut:u,userEmail:o.email}):E.jsx(Gy,{onLogin:r})}const Dp=document.getElementById("root");if(!Dp)throw new Error("Root element #root not found");Rm.createRoot(Dp).render(E.jsx(fa.StrictMode,{children:E.jsx(A_,{children:E.jsx(N0,{})})}));
