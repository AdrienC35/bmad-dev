function Nm(o,i){for(var r=0;r<i.length;r++){const u=i[r];if(typeof u!="string"&&!Array.isArray(u)){for(const f in u)if(f!=="default"&&!(f in o)){const l=Object.getOwnPropertyDescriptor(u,f);l&&Object.defineProperty(o,f,l.get?l:{enumerable:!0,get:()=>u[f]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const l of f)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function r(f){const l={};return f.integrity&&(l.integrity=f.integrity),f.referrerPolicy&&(l.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?l.credentials="include":f.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(f){if(f.ep)return;f.ep=!0;const l=r(f);fetch(f.href,l)}})();function Ch(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Wc={exports:{}},oa={},qc={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf;function Rm(){if(mf)return Te;mf=1;var o=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),b=Symbol.iterator;function P(A){return A===null||typeof A!="object"?null:(A=b&&A[b]||A["@@iterator"],typeof A=="function"?A:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,O={};function M(A,V,_e){this.props=A,this.context=V,this.refs=O,this.updater=_e||E}M.prototype.isReactComponent={},M.prototype.setState=function(A,V){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,V,"setState")},M.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function $(){}$.prototype=M.prototype;function z(A,V,_e){this.props=A,this.context=V,this.refs=O,this.updater=_e||E}var W=z.prototype=new $;W.constructor=z,j(W,M.prototype),W.isPureReactComponent=!0;var Q=Array.isArray,ne=Object.prototype.hasOwnProperty,pe={current:null},Ce={key:!0,ref:!0,__self:!0,__source:!0};function Be(A,V,_e){var fe,ue={},se=null,je=null;if(V!=null)for(fe in V.ref!==void 0&&(je=V.ref),V.key!==void 0&&(se=""+V.key),V)ne.call(V,fe)&&!Ce.hasOwnProperty(fe)&&(ue[fe]=V[fe]);var Ee=arguments.length-2;if(Ee===1)ue.children=_e;else if(1<Ee){for(var We=Array(Ee),xt=0;xt<Ee;xt++)We[xt]=arguments[xt+2];ue.children=We}if(A&&A.defaultProps)for(fe in Ee=A.defaultProps,Ee)ue[fe]===void 0&&(ue[fe]=Ee[fe]);return{$$typeof:o,type:A,key:se,ref:je,props:ue,_owner:pe.current}}function De(A,V){return{$$typeof:o,type:A.type,key:V,ref:A.ref,props:A.props,_owner:A._owner}}function dt(A){return typeof A=="object"&&A!==null&&A.$$typeof===o}function qe(A){var V={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(_e){return V[_e]})}var te=/\/+/g;function Ve(A,V){return typeof A=="object"&&A!==null&&A.key!=null?qe(""+A.key):V.toString(36)}function Ue(A,V,_e,fe,ue){var se=typeof A;(se==="undefined"||se==="boolean")&&(A=null);var je=!1;if(A===null)je=!0;else switch(se){case"string":case"number":je=!0;break;case"object":switch(A.$$typeof){case o:case i:je=!0}}if(je)return je=A,ue=ue(je),A=fe===""?"."+Ve(je,0):fe,Q(ue)?(_e="",A!=null&&(_e=A.replace(te,"$&/")+"/"),Ue(ue,V,_e,"",function(xt){return xt})):ue!=null&&(dt(ue)&&(ue=De(ue,_e+(!ue.key||je&&je.key===ue.key?"":(""+ue.key).replace(te,"$&/")+"/")+A)),V.push(ue)),1;if(je=0,fe=fe===""?".":fe+":",Q(A))for(var Ee=0;Ee<A.length;Ee++){se=A[Ee];var We=fe+Ve(se,Ee);je+=Ue(se,V,_e,We,ue)}else if(We=P(A),typeof We=="function")for(A=We.call(A),Ee=0;!(se=A.next()).done;)se=se.value,We=fe+Ve(se,Ee++),je+=Ue(se,V,_e,We,ue);else if(se==="object")throw V=String(A),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return je}function He(A,V,_e){if(A==null)return A;var fe=[],ue=0;return Ue(A,fe,"","",function(se){return V.call(_e,se,ue++)}),fe}function Ne(A){if(A._status===-1){var V=A._result;V=V(),V.then(function(_e){(A._status===0||A._status===-1)&&(A._status=1,A._result=_e)},function(_e){(A._status===0||A._status===-1)&&(A._status=2,A._result=_e)}),A._status===-1&&(A._status=0,A._result=V)}if(A._status===1)return A._result.default;throw A._result}var Ie={current:null},q={transition:null},me={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:q,ReactCurrentOwner:pe};function G(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:He,forEach:function(A,V,_e){He(A,function(){V.apply(this,arguments)},_e)},count:function(A){var V=0;return He(A,function(){V++}),V},toArray:function(A){return He(A,function(V){return V})||[]},only:function(A){if(!dt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Te.Component=M,Te.Fragment=r,Te.Profiler=f,Te.PureComponent=z,Te.StrictMode=u,Te.Suspense=g,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Te.act=G,Te.cloneElement=function(A,V,_e){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var fe=j({},A.props),ue=A.key,se=A.ref,je=A._owner;if(V!=null){if(V.ref!==void 0&&(se=V.ref,je=pe.current),V.key!==void 0&&(ue=""+V.key),A.type&&A.type.defaultProps)var Ee=A.type.defaultProps;for(We in V)ne.call(V,We)&&!Ce.hasOwnProperty(We)&&(fe[We]=V[We]===void 0&&Ee!==void 0?Ee[We]:V[We])}var We=arguments.length-2;if(We===1)fe.children=_e;else if(1<We){Ee=Array(We);for(var xt=0;xt<We;xt++)Ee[xt]=arguments[xt+2];fe.children=Ee}return{$$typeof:o,type:A.type,key:ue,ref:se,props:fe,_owner:je}},Te.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},Te.createElement=Be,Te.createFactory=function(A){var V=Be.bind(null,A);return V.type=A,V},Te.createRef=function(){return{current:null}},Te.forwardRef=function(A){return{$$typeof:_,render:A}},Te.isValidElement=dt,Te.lazy=function(A){return{$$typeof:k,_payload:{_status:-1,_result:A},_init:Ne}},Te.memo=function(A,V){return{$$typeof:w,type:A,compare:V===void 0?null:V}},Te.startTransition=function(A){var V=q.transition;q.transition={};try{A()}finally{q.transition=V}},Te.unstable_act=G,Te.useCallback=function(A,V){return Ie.current.useCallback(A,V)},Te.useContext=function(A){return Ie.current.useContext(A)},Te.useDebugValue=function(){},Te.useDeferredValue=function(A){return Ie.current.useDeferredValue(A)},Te.useEffect=function(A,V){return Ie.current.useEffect(A,V)},Te.useId=function(){return Ie.current.useId()},Te.useImperativeHandle=function(A,V,_e){return Ie.current.useImperativeHandle(A,V,_e)},Te.useInsertionEffect=function(A,V){return Ie.current.useInsertionEffect(A,V)},Te.useLayoutEffect=function(A,V){return Ie.current.useLayoutEffect(A,V)},Te.useMemo=function(A,V){return Ie.current.useMemo(A,V)},Te.useReducer=function(A,V,_e){return Ie.current.useReducer(A,V,_e)},Te.useRef=function(A){return Ie.current.useRef(A)},Te.useState=function(A){return Ie.current.useState(A)},Te.useSyncExternalStore=function(A,V,_e){return Ie.current.useSyncExternalStore(A,V,_e)},Te.useTransition=function(){return Ie.current.useTransition()},Te.version="18.3.1",Te}var _f;function Ph(){return _f||(_f=1,qc.exports=Rm()),qc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gf;function Am(){if(gf)return oa;gf=1;var o=Ph(),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,f=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(_,g,w){var k,b={},P=null,E=null;w!==void 0&&(P=""+w),g.key!==void 0&&(P=""+g.key),g.ref!==void 0&&(E=g.ref);for(k in g)u.call(g,k)&&!l.hasOwnProperty(k)&&(b[k]=g[k]);if(_&&_.defaultProps)for(k in g=_.defaultProps,g)b[k]===void 0&&(b[k]=g[k]);return{$$typeof:i,type:_,key:P,ref:E,props:b,_owner:f.current}}return oa.Fragment=r,oa.jsx=d,oa.jsxs=d,oa}var vf;function Im(){return vf||(vf=1,Wc.exports=Am()),Wc.exports}var x=Im(),Z=Ph();const ma=Ch(Z),Mm=Nm({__proto__:null,default:ma},[Z]);var Kl={},Vc={exports:{}},qt={},Gc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf;function zm(){return yf||(yf=1,(function(o){function i(q,me){var G=q.length;q.push(me);e:for(;0<G;){var A=G-1>>>1,V=q[A];if(0<f(V,me))q[A]=me,q[G]=V,G=A;else break e}}function r(q){return q.length===0?null:q[0]}function u(q){if(q.length===0)return null;var me=q[0],G=q.pop();if(G!==me){q[0]=G;e:for(var A=0,V=q.length,_e=V>>>1;A<_e;){var fe=2*(A+1)-1,ue=q[fe],se=fe+1,je=q[se];if(0>f(ue,G))se<V&&0>f(je,ue)?(q[A]=je,q[se]=G,A=se):(q[A]=ue,q[fe]=G,A=fe);else if(se<V&&0>f(je,G))q[A]=je,q[se]=G,A=se;else break e}}return me}function f(q,me){var G=q.sortIndex-me.sortIndex;return G!==0?G:q.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;o.unstable_now=function(){return l.now()}}else{var d=Date,_=d.now();o.unstable_now=function(){return d.now()-_}}var g=[],w=[],k=1,b=null,P=3,E=!1,j=!1,O=!1,M=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(q){for(var me=r(w);me!==null;){if(me.callback===null)u(w);else if(me.startTime<=q)u(w),me.sortIndex=me.expirationTime,i(g,me);else break;me=r(w)}}function Q(q){if(O=!1,W(q),!j)if(r(g)!==null)j=!0,Ne(ne);else{var me=r(w);me!==null&&Ie(Q,me.startTime-q)}}function ne(q,me){j=!1,O&&(O=!1,$(Be),Be=-1),E=!0;var G=P;try{for(W(me),b=r(g);b!==null&&(!(b.expirationTime>me)||q&&!qe());){var A=b.callback;if(typeof A=="function"){b.callback=null,P=b.priorityLevel;var V=A(b.expirationTime<=me);me=o.unstable_now(),typeof V=="function"?b.callback=V:b===r(g)&&u(g),W(me)}else u(g);b=r(g)}if(b!==null)var _e=!0;else{var fe=r(w);fe!==null&&Ie(Q,fe.startTime-me),_e=!1}return _e}finally{b=null,P=G,E=!1}}var pe=!1,Ce=null,Be=-1,De=5,dt=-1;function qe(){return!(o.unstable_now()-dt<De)}function te(){if(Ce!==null){var q=o.unstable_now();dt=q;var me=!0;try{me=Ce(!0,q)}finally{me?Ve():(pe=!1,Ce=null)}}else pe=!1}var Ve;if(typeof z=="function")Ve=function(){z(te)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,He=Ue.port2;Ue.port1.onmessage=te,Ve=function(){He.postMessage(null)}}else Ve=function(){M(te,0)};function Ne(q){Ce=q,pe||(pe=!0,Ve())}function Ie(q,me){Be=M(function(){q(o.unstable_now())},me)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(q){q.callback=null},o.unstable_continueExecution=function(){j||E||(j=!0,Ne(ne))},o.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):De=0<q?Math.floor(1e3/q):5},o.unstable_getCurrentPriorityLevel=function(){return P},o.unstable_getFirstCallbackNode=function(){return r(g)},o.unstable_next=function(q){switch(P){case 1:case 2:case 3:var me=3;break;default:me=P}var G=P;P=me;try{return q()}finally{P=G}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(q,me){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=P;P=q;try{return me()}finally{P=G}},o.unstable_scheduleCallback=function(q,me,G){var A=o.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?A+G:A):G=A,q){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=G+V,q={id:k++,callback:me,priorityLevel:q,startTime:G,expirationTime:V,sortIndex:-1},G>A?(q.sortIndex=G,i(w,q),r(g)===null&&q===r(w)&&(O?($(Be),Be=-1):O=!0,Ie(Q,G-A))):(q.sortIndex=V,i(g,q),j||E||(j=!0,Ne(ne))),q},o.unstable_shouldYield=qe,o.unstable_wrapCallback=function(q){var me=P;return function(){var G=P;P=me;try{return q.apply(this,arguments)}finally{P=G}}}})(Kc)),Kc}var wf;function Bm(){return wf||(wf=1,Gc.exports=zm()),Gc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf;function Dm(){if(xf)return qt;xf=1;var o=Ph(),i=Bm();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,f={};function l(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(f[e]=n,e=0;e<n.length;e++)u.add(n[e])}var _=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},b={};function P(e){return g.call(b,e)?!0:g.call(k,e)?!1:w.test(e)?b[e]=!0:(k[e]=!0,!1)}function E(e,n,a,h){if(a!==null&&a.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j(e,n,a,h){if(n===null||typeof n>"u"||E(e,n,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function O(e,n,a,h,m,v,S){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=a,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=S}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){M[e]=new O(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];M[n]=new O(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){M[e]=new O(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){M[e]=new O(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){M[e]=new O(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){M[e]=new O(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){M[e]=new O(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){M[e]=new O(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){M[e]=new O(e,5,!1,e.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace($,z);M[n]=new O(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace($,z);M[n]=new O(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace($,z);M[n]=new O(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){M[e]=new O(e,1,!1,e.toLowerCase(),null,!1,!1)}),M.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){M[e]=new O(e,1,!1,e.toLowerCase(),null,!0,!0)});function W(e,n,a,h){var m=M.hasOwnProperty(n)?M[n]:null;(m!==null?m.type!==0:h||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(j(n,a,m,h)&&(a=null),h||m===null?P(n)&&(a===null?e.removeAttribute(n):e.setAttribute(n,""+a)):m.mustUseProperty?e[m.propertyName]=a===null?m.type===3?!1:"":a:(n=m.attributeName,h=m.attributeNamespace,a===null?e.removeAttribute(n):(m=m.type,a=m===3||m===4&&a===!0?"":""+a,h?e.setAttributeNS(h,n,a):e.setAttribute(n,a))))}var Q=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),pe=Symbol.for("react.portal"),Ce=Symbol.for("react.fragment"),Be=Symbol.for("react.strict_mode"),De=Symbol.for("react.profiler"),dt=Symbol.for("react.provider"),qe=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),q=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,A;function V(e){if(A===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);A=n&&n[1]||""}return`
`+A+e}var _e=!1;function fe(e,n){if(!e||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(H){var h=H}Reflect.construct(e,[],n)}else{try{n.call()}catch(H){h=H}e.call(n.prototype)}else{try{throw Error()}catch(H){h=H}e()}}catch(H){if(H&&h&&typeof H.stack=="string"){for(var m=H.stack.split(`
`),v=h.stack.split(`
`),S=m.length-1,T=v.length-1;1<=S&&0<=T&&m[S]!==v[T];)T--;for(;1<=S&&0<=T;S--,T--)if(m[S]!==v[T]){if(S!==1||T!==1)do if(S--,T--,0>T||m[S]!==v[T]){var R=`
`+m[S].replace(" at new "," at ");return e.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",e.displayName)),R}while(1<=S&&0<=T);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?V(e):""}function ue(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=fe(e.type,!1),e;case 11:return e=fe(e.type.render,!1),e;case 1:return e=fe(e.type,!0),e;default:return""}}function se(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ce:return"Fragment";case pe:return"Portal";case De:return"Profiler";case Be:return"StrictMode";case Ve:return"Suspense";case Ue:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qe:return(e.displayName||"Context")+".Consumer";case dt:return(e._context.displayName||"Context")+".Provider";case te:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case He:return n=e.displayName||null,n!==null?n:se(e.type)||"Memo";case Ne:n=e._payload,e=e._init;try{return se(e(n))}catch{}}return null}function je(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(n);case 8:return n===Be?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Ee(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function We(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function xt(e){var n=We(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),h=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,v=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return m.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function wi(e){e._valueTracker||(e._valueTracker=xt(e))}function xi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),h="";return e&&(h=We(e)?e.checked?"true":"false":e.value),e=h,e!==a?(n.setValue(e),!0):!1}function ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function so(e,n){var a=n.checked;return G({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function oo(e,n){var a=n.defaultValue==null?"":n.defaultValue,h=n.checked!=null?n.checked:n.defaultChecked;a=Ee(n.value!=null?n.value:a),e._wrapperState={initialChecked:h,initialValue:a,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function ao(e,n){n=n.checked,n!=null&&W(e,"checked",n,!1)}function hr(e,n){ao(e,n);var a=Ee(n.value),h=n.type;if(a!=null)h==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?lo(e,n.type,a):n.hasOwnProperty("defaultValue")&&lo(e,n.type,Ee(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function dr(e,n,a){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var h=n.type;if(!(h!=="submit"&&h!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,a||n===e.value||(e.value=n),e.defaultValue=n}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function lo(e,n,a){(n!=="number"||ki(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Si=Array.isArray;function Rn(e,n,a,h){if(e=e.options,n){n={};for(var m=0;m<a.length;m++)n["$"+a[m]]=!0;for(a=0;a<e.length;a++)m=n.hasOwnProperty("$"+e[a].value),e[a].selected!==m&&(e[a].selected=m),m&&h&&(e[a].defaultSelected=!0)}else{for(a=""+Ee(a),n=null,m=0;m<e.length;m++){if(e[m].value===a){e[m].selected=!0,h&&(e[m].defaultSelected=!0);return}n!==null||e[m].disabled||(n=e[m])}n!==null&&(n.selected=!0)}}function Kr(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return G({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uo(e,n){var a=n.value;if(a==null){if(a=n.children,n=n.defaultValue,a!=null){if(n!=null)throw Error(r(92));if(Si(a)){if(1<a.length)throw Error(r(93));a=a[0]}n=a}n==null&&(n=""),a=n}e._wrapperState={initialValue:Ee(a)}}function Pa(e,n){var a=Ee(n.value),h=Ee(n.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),n.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),h!=null&&(e.defaultValue=""+h)}function Ea(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Jr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qr(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Jr(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fr,Ta=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,a,h,m){MSApp.execUnsafeLocalFunction(function(){return e(n,a,h,m)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(fr=fr||document.createElement("div"),fr.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=fr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function bi(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xu=["Webkit","ms","Moz","O"];Object.keys(Li).forEach(function(e){xu.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Li[n]=Li[e]})});function co(e,n,a){return n==null||typeof n=="boolean"||n===""?"":a||typeof n!="number"||n===0||Li.hasOwnProperty(e)&&Li[e]?(""+n).trim():n+"px"}function Yr(e,n){e=e.style;for(var a in n)if(n.hasOwnProperty(a)){var h=a.indexOf("--")===0,m=co(a,n[a],h);a==="float"&&(a="cssFloat"),h?e.setProperty(a,m):e[a]=m}}var Oa=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ho(e,n){if(n){if(Oa[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function qn(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=null;function po(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xr=null,Vn=null,Gn=null;function ja(e){if(e=oi(e)){if(typeof Xr!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Cs(n),Xr(e.stateNode,e.type,n))}}function Na(e){Vn?Gn?Gn.push(e):Gn=[e]:Vn=e}function Ra(){if(Vn){var e=Vn,n=Gn;if(Gn=Vn=null,ja(e),n)for(e=0;e<n.length;e++)ja(n[e])}}function Aa(e,n){return e(n)}function Ia(){}var mo=!1;function es(e,n,a){if(mo)return e(n,a);mo=!0;try{return Aa(e,n,a)}finally{mo=!1,(Vn!==null||Gn!==null)&&(Ia(),Ra())}}function pr(e,n){var a=e.stateNode;if(a===null)return null;var h=Cs(a);if(h===null)return null;a=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var _o=!1;if(_)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){_o=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{_o=!1}function ku(e,n,a,h,m,v,S,T,R){var H=Array.prototype.slice.call(arguments,3);try{n.apply(a,H)}catch(Y){this.onError(Y)}}var Ct=!1,ce=null,_r=!1,ts=null,Ma={onError:function(e){Ct=!0,ce=e}};function za(e,n,a,h,m,v,S,T,R){Ct=!1,ce=null,ku.apply(Ma,arguments)}function go(e,n,a,h,m,v,S,T,R){if(za.apply(this,arguments),Ct){if(Ct){var H=ce;Ct=!1,ce=null}else throw Error(r(198));_r||(_r=!0,ts=H)}}function An(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function Kn(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function vo(e){if(An(e)!==e)throw Error(r(188))}function Su(e){var n=e.alternate;if(!n){if(n=An(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,h=n;;){var m=a.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){a=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===a)return vo(m),e;if(v===h)return vo(m),n;v=v.sibling}throw Error(r(188))}if(a.return!==h.return)a=m,h=v;else{for(var S=!1,T=m.child;T;){if(T===a){S=!0,a=m,h=v;break}if(T===h){S=!0,h=m,a=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===a){S=!0,a=v,h=m;break}if(T===h){S=!0,h=v,a=m;break}T=T.sibling}if(!S)throw Error(r(189))}}if(a.alternate!==h)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function Ba(e){return e=Su(e),e!==null?Da(e):null}function Da(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Da(e);if(n!==null)return n;e=e.sibling}return null}var Ua=i.unstable_scheduleCallback,yo=i.unstable_cancelCallback,bu=i.unstable_shouldYield,ns=i.unstable_requestPaint,et=i.unstable_now,Lu=i.unstable_getCurrentPriorityLevel,wo=i.unstable_ImmediatePriority,$a=i.unstable_UserBlockingPriority,is=i.unstable_NormalPriority,xo=i.unstable_LowPriority,Ci=i.unstable_IdlePriority,gr=null,Vt=null;function vr(e){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(gr,e,void 0,(e.current.flags&128)===128)}catch{}}var Le=Math.clz32?Math.clz32:Pi,Qe=Math.log,rs=Math.LN2;function Pi(e){return e>>>=0,e===0?32:31-(Qe(e)/rs|0)|0}var yn=64,Ei=4194304;function be(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ge(e,n){var a=e.pendingLanes;if(a===0)return 0;var h=0,m=e.suspendedLanes,v=e.pingedLanes,S=a&268435455;if(S!==0){var T=S&~m;T!==0?h=be(T):(v&=S,v!==0&&(h=be(v)))}else S=a&~m,S!==0?h=be(S):v!==0&&(h=be(v));if(h===0)return 0;if(n!==0&&n!==h&&(n&m)===0&&(m=h&-h,v=n&-n,m>=v||m===16&&(v&4194240)!==0))return n;if((h&4)!==0&&(h|=a&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=h;0<n;)a=31-Le(n),m=1<<a,h|=e[a],n&=~m;return h}function ko(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(e,n){for(var a=e.suspendedLanes,h=e.pingedLanes,m=e.expirationTimes,v=e.pendingLanes;0<v;){var S=31-Le(v),T=1<<S,R=m[S];R===-1?((T&a)===0||(T&h)!==0)&&(m[S]=ko(T,n)):R<=n&&(e.expiredLanes|=T),v&=~T}}function Pt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fa(){var e=yn;return yn<<=1,(yn&4194240)===0&&(yn=64),e}function Ti(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Gt(e,n,a){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Le(n),e[n]=a}function st(e,n){var a=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<a;){var m=31-Le(a),v=1<<m;n[m]=0,h[m]=-1,e[m]=-1,a&=~v}}function wn(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var h=31-Le(a),m=1<<h;m&n|e[h]&n&&(e[h]|=n),a&=~m}}var Re=0;function Oi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var os,Jn,as,ls,yr,wr=!1,ji=[],Kt=null,xn=null,an=null,xr=new Map,ke=new Map,ft=[],Fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function So(e,n){switch(e){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":xr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ke.delete(n.pointerId)}}function Qn(e,n,a,h,m,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:a,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},n!==null&&(n=oi(n),n!==null&&Jn(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),e)}function bo(e,n,a,h,m){switch(n){case"focusin":return Kt=Qn(Kt,e,n,a,h,m),!0;case"dragenter":return xn=Qn(xn,e,n,a,h,m),!0;case"mouseover":return an=Qn(an,e,n,a,h,m),!0;case"pointerover":var v=m.pointerId;return xr.set(v,Qn(xr.get(v)||null,e,n,a,h,m)),!0;case"gotpointercapture":return v=m.pointerId,ke.set(v,Qn(ke.get(v)||null,e,n,a,h,m)),!0}return!1}function us(e){var n=si(e.target);if(n!==null){var a=An(n);if(a!==null){if(n=a.tag,n===13){if(n=Kn(a),n!==null){e.blockedOn=n,yr(e.priority,function(){as(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ln(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=ds(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var h=new a.constructor(a.type,a);fo=h,a.target.dispatchEvent(h),fo=null}else return n=oi(a),n!==null&&Jn(n),e.blockedOn=a,!1;n.shift()}return!0}function cs(e,n,a){ln(e)&&a.delete(n)}function kr(){wr=!1,Kt!==null&&ln(Kt)&&(Kt=null),xn!==null&&ln(xn)&&(xn=null),an!==null&&ln(an)&&(an=null),xr.forEach(cs),ke.forEach(cs)}function tt(e,n){e.blockedOn===n&&(e.blockedOn=null,wr||(wr=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,kr)))}function Jt(e){function n(m){return tt(m,e)}if(0<ji.length){tt(ji[0],e);for(var a=1;a<ji.length;a++){var h=ji[a];h.blockedOn===e&&(h.blockedOn=null)}}for(Kt!==null&&tt(Kt,e),xn!==null&&tt(xn,e),an!==null&&tt(an,e),xr.forEach(n),ke.forEach(n),a=0;a<ft.length;a++)h=ft[a],h.blockedOn===e&&(h.blockedOn=null);for(;0<ft.length&&(a=ft[0],a.blockedOn===null);)us(a),a.blockedOn===null&&ft.shift()}var Yn=Q.ReactCurrentBatchConfig,Sr=!0;function Cu(e,n,a,h){var m=Re,v=Yn.transition;Yn.transition=null;try{Re=1,br(e,n,a,h)}finally{Re=m,Yn.transition=v}}function Za(e,n,a,h){var m=Re,v=Yn.transition;Yn.transition=null;try{Re=4,br(e,n,a,h)}finally{Re=m,Yn.transition=v}}function br(e,n,a,h){if(Sr){var m=ds(e,n,a,h);if(m===null)t(e,n,h,hs,a),So(e,h);else if(bo(m,e,n,a,h))h.stopPropagation();else if(So(e,h),n&4&&-1<Fe.indexOf(e)){for(;m!==null;){var v=oi(m);if(v!==null&&os(v),v=ds(e,n,a,h),v===null&&t(e,n,h,hs,a),v===m)break;m=v}m!==null&&h.stopPropagation()}else t(e,n,h,null,a)}}var hs=null;function ds(e,n,a,h){if(hs=null,e=po(h),e=si(e),e!==null)if(n=An(e),n===null)e=null;else if(a=n.tag,a===13){if(e=Kn(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return hs=e,null}function Oe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lu()){case wo:return 1;case $a:return 4;case is:case xo:return 16;case Ci:return 536870912;default:return 16}default:return 16}}var In=null,At=null,Mn=null;function Lo(){if(Mn)return Mn;var e,n=At,a=n.length,h,m="value"in In?In.value:In.textContent,v=m.length;for(e=0;e<a&&n[e]===m[e];e++);var S=a-e;for(h=1;h<=S&&n[a-h]===m[v-h];h++);return Mn=m.slice(e,1<h?1-h:void 0)}function fs(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ni(){return!0}function Ha(){return!1}function Et(e){function n(a,h,m,v,S){this._reactName=a,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ni:Ha,this.isPropagationStopped=Ha,this}return G(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),n}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Co=Et(Ri),Xn=G({},Ri,{view:0,detail:0}),Pu=Et(Xn),Dt,Po,Ai,Qt=G({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ti,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ai&&(Ai&&e.type==="mousemove"?(Dt=e.screenX-Ai.screenX,Po=e.screenY-Ai.screenY):Po=Dt=0,Ai=e),Dt)},movementY:function(e){return"movementY"in e?e.movementY:Po}}),Eo=Et(Qt),Wa=G({},Qt,{dataTransfer:0}),To=Et(Wa),Eu=G({},Xn,{relatedTarget:0}),ps=Et(Eu),qa=G({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),Tu=Et(qa),Ou=G({},Ri,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Oo=Et(Ou),ju=G({},Ri,{data:0}),jo=Et(ju),Va={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ms={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ei[e])?!!n[e]:!1}function ti(){return Nu}var Ut=G({},Xn,{key:function(e){if(e.key){var n=Va[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ms[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ti,charCode:function(e){return e.type==="keypress"?fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ga=Et(Ut),Ka=G({},Qt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ja=Et(Ka),No=G({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ti}),Ro=Et(No),Ru=G({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Au=Et(Ru),Qa=G({},Qt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Iu=Et(Qa),Yt=[9,13,27,32],zn=_&&"CompositionEvent"in window,Lr=null;_&&"documentMode"in document&&(Lr=document.documentMode);var kn=_&&"TextEvent"in window&&!Lr,Ya=_&&(!zn||Lr&&8<Lr&&11>=Lr),ni=" ",Xa=!1;function Ii(e,n){switch(e){case"keyup":return Yt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ao(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sn=!1;function Mu(e,n){switch(e){case"compositionend":return Ao(n);case"keypress":return n.which!==32?null:(Xa=!0,ni);case"textInput":return e=n.data,e===ni&&Xa?null:e;default:return null}}function Bn(e,n){if(Sn)return e==="compositionend"||!zn&&Ii(e,n)?(e=Lo(),Mn=At=In=null,Sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ya&&n.locale!=="ko"?null:n.data;default:return null}}var _s={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function el(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!_s[e.type]:n==="textarea"}function gs(e,n,a,h){Na(h),n=c(n,"onChange"),0<n.length&&(a=new Co("onChange","change",null,a,h),e.push({event:a,listeners:n}))}var Cr=null,It=null;function zu(e){Zo(e,0)}function bn(e){var n=ai(e);if(xi(n))return e}function Bu(e,n){if(e==="change")return n}var un=!1;if(_){var Mi;if(_){var vs="oninput"in document;if(!vs){var ys=document.createElement("div");ys.setAttribute("oninput","return;"),vs=typeof ys.oninput=="function"}Mi=vs}else Mi=!1;un=Mi&&(!document.documentMode||9<document.documentMode)}function Pr(){Cr&&(Cr.detachEvent("onpropertychange",ws),It=Cr=null)}function ws(e){if(e.propertyName==="value"&&bn(It)){var n=[];gs(n,It,e,po(e)),es(zu,n)}}function xs(e,n,a){e==="focusin"?(Pr(),Cr=n,It=a,Cr.attachEvent("onpropertychange",ws)):e==="focusout"&&Pr()}function zi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bn(It)}function ks(e,n){if(e==="click")return bn(n)}function Io(e,n){if(e==="input"||e==="change")return bn(n)}function tl(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Xt=typeof Object.is=="function"?Object.is:tl;function Dn(e,n){if(Xt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),h=Object.keys(n);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var m=a[h];if(!g.call(n,m)||!Xt(e[m],n[m]))return!1}return!0}function nl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mo(e,n){var a=nl(e);e=0;for(var h;a;){if(a.nodeType===3){if(h=e+a.textContent.length,e<=n&&h>=n)return{node:a,offset:n-e};e=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=nl(a)}}function il(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?il(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function zo(){for(var e=window,n=ki();n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ki(e.document)}return n}function Bo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function cn(e){var n=zo(),a=e.focusedElem,h=e.selectionRange;if(n!==a&&a&&a.ownerDocument&&il(a.ownerDocument.documentElement,a)){if(h!==null&&Bo(a)){if(n=h.start,e=h.end,e===void 0&&(e=n),"selectionStart"in a)a.selectionStart=n,a.selectionEnd=Math.min(e,a.value.length);else if(e=(n=a.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var m=a.textContent.length,v=Math.min(h.start,m);h=h.end===void 0?v:Math.min(h.end,m),!e.extend&&v>h&&(m=h,h=v,v=m),m=Mo(a,v);var S=Mo(a,h);m&&S&&(e.rangeCount!==1||e.anchorNode!==m.node||e.anchorOffset!==m.offset||e.focusNode!==S.node||e.focusOffset!==S.offset)&&(n=n.createRange(),n.setStart(m.node,m.offset),e.removeAllRanges(),v>h?(e.addRange(n),e.extend(S.node,S.offset)):(n.setEnd(S.node,S.offset),e.addRange(n)))}}for(n=[],e=a;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<n.length;a++)e=n[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ss=_&&"documentMode"in document&&11>=document.documentMode,Bi=null,Di=null,Er=null,bs=!1;function rl(e,n,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bs||Bi==null||Bi!==ki(h)||(h=Bi,"selectionStart"in h&&Bo(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Er&&Dn(Er,h)||(Er=h,h=c(Di,"onSelect"),0<h.length&&(n=new Co("onSelect","select",null,n,a),e.push({event:n,listeners:h}),n.target=Bi)))}function Un(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Ui={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionend:Un("Transition","TransitionEnd")},$n={},Do={};_&&(Do=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Tr(e){if($n[e])return $n[e];if(!Ui[e])return e;var n=Ui[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Do)return $n[e]=n[a];return e}var sl=Tr("animationend"),hn=Tr("animationiteration"),Uo=Tr("animationstart"),$o=Tr("transitionend"),$i=new Map,ol="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function en(e,n){$i.set(e,n),l(n,[e])}for(var ii=0;ii<ol.length;ii++){var Ls=ol[ii],al=Ls.toLowerCase(),Du=Ls[0].toUpperCase()+Ls.slice(1);en(al,"on"+Du)}en(sl,"onAnimationEnd"),en(hn,"onAnimationIteration"),en(Uo,"onAnimationStart"),en("dblclick","onDoubleClick"),en("focusin","onFocus"),en("focusout","onBlur"),en($o,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ll=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function Fo(e,n,a){var h=e.type||"unknown-event";e.currentTarget=a,go(h,n,void 0,e),e.currentTarget=null}function Zo(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var h=e[a],m=h.event;h=h.listeners;e:{var v=void 0;if(n)for(var S=h.length-1;0<=S;S--){var T=h[S],R=T.instance,H=T.currentTarget;if(T=T.listener,R!==v&&m.isPropagationStopped())break e;Fo(m,T,H),v=R}else for(S=0;S<h.length;S++){if(T=h[S],R=T.instance,H=T.currentTarget,T=T.listener,R!==v&&m.isPropagationStopped())break e;Fo(m,T,H),v=R}}}if(_r)throw e=ts,_r=!1,ts=null,e}function Ze(e,n){var a=n[qi];a===void 0&&(a=n[qi]=new Set);var h=e+"__bubble";a.has(h)||(ul(n,e,2,!1),a.add(h))}function Ho(e,n,a){var h=0;n&&(h|=4),ul(a,e,h,n)}var Or="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[Or]){e[Or]=!0,u.forEach(function(a){a!=="selectionchange"&&(ll.has(a)||Ho(a,!1,e),Ho(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Or]||(n[Or]=!0,Ho("selectionchange",!1,n))}}function ul(e,n,a,h){switch(Oe(n)){case 1:var m=Cu;break;case 4:m=Za;break;default:m=br}a=m.bind(null,n,a,e),m=void 0,!_o||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),h?m!==void 0?e.addEventListener(n,a,{capture:!0,passive:m}):e.addEventListener(n,a,!0):m!==void 0?e.addEventListener(n,a,{passive:m}):e.addEventListener(n,a,!1)}function t(e,n,a,h,m){var v=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var T=h.stateNode.containerInfo;if(T===m||T.nodeType===8&&T.parentNode===m)break;if(S===4)for(S=h.return;S!==null;){var R=S.tag;if((R===3||R===4)&&(R=S.stateNode.containerInfo,R===m||R.nodeType===8&&R.parentNode===m))return;S=S.return}for(;T!==null;){if(S=si(T),S===null)return;if(R=S.tag,R===5||R===6){h=v=S;continue e}T=T.parentNode}}h=h.return}es(function(){var H=v,Y=po(a),X=[];e:{var J=$i.get(e);if(J!==void 0){var re=Co,ae=e;switch(e){case"keypress":if(fs(a)===0)break e;case"keydown":case"keyup":re=Ga;break;case"focusin":ae="focus",re=ps;break;case"focusout":ae="blur",re=ps;break;case"beforeblur":case"afterblur":re=ps;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=To;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Ro;break;case sl:case hn:case Uo:re=Tu;break;case $o:re=Au;break;case"scroll":re=Pu;break;case"wheel":re=Iu;break;case"copy":case"cut":case"paste":re=Oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ja}var le=(n&4)!==0,lt=!le&&e==="scroll",D=le?J!==null?J+"Capture":null:J;le=[];for(var I=H,U;I!==null;){U=I;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,D!==null&&(ee=pr(I,D),ee!=null&&le.push(s(I,ee,U)))),lt)break;I=I.return}0<le.length&&(J=new re(J,ae,null,a,Y),X.push({event:J,listeners:le}))}}if((n&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",J&&a!==fo&&(ae=a.relatedTarget||a.fromElement)&&(si(ae)||ae[$e]))break e;if((re||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,re?(ae=a.relatedTarget||a.toElement,re=H,ae=ae?si(ae):null,ae!==null&&(lt=An(ae),ae!==lt||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=H),re!==ae)){if(le=Eo,ee="onMouseLeave",D="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(le=Ja,ee="onPointerLeave",D="onPointerEnter",I="pointer"),lt=re==null?J:ai(re),U=ae==null?J:ai(ae),J=new le(ee,I+"leave",re,a,Y),J.target=lt,J.relatedTarget=U,ee=null,si(Y)===H&&(le=new le(D,I+"enter",ae,a,Y),le.target=U,le.relatedTarget=lt,ee=le),lt=ee,re&&ae)t:{for(le=re,D=ae,I=0,U=le;U;U=p(U))I++;for(U=0,ee=D;ee;ee=p(ee))U++;for(;0<I-U;)le=p(le),I--;for(;0<U-I;)D=p(D),U--;for(;I--;){if(le===D||D!==null&&le===D.alternate)break t;le=p(le),D=p(D)}le=null}else le=null;re!==null&&y(X,J,re,le,!1),ae!==null&&lt!==null&&y(X,lt,ae,le,!0)}}e:{if(J=H?ai(H):window,re=J.nodeName&&J.nodeName.toLowerCase(),re==="select"||re==="input"&&J.type==="file")var he=Bu;else if(el(J))if(un)he=Io;else{he=zi;var ve=xs}else(re=J.nodeName)&&re.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(he=ks);if(he&&(he=he(e,H))){gs(X,he,a,Y);break e}ve&&ve(e,J,H),e==="focusout"&&(ve=J._wrapperState)&&ve.controlled&&J.type==="number"&&lo(J,"number",J.value)}switch(ve=H?ai(H):window,e){case"focusin":(el(ve)||ve.contentEditable==="true")&&(Bi=ve,Di=H,Er=null);break;case"focusout":Er=Di=Bi=null;break;case"mousedown":bs=!0;break;case"contextmenu":case"mouseup":case"dragend":bs=!1,rl(X,a,Y);break;case"selectionchange":if(Ss)break;case"keydown":case"keyup":rl(X,a,Y)}var ye;if(zn)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Sn?Ii(e,a)&&(Se="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(Ya&&a.locale!=="ko"&&(Sn||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Sn&&(ye=Lo()):(In=Y,At="value"in In?In.value:In.textContent,Sn=!0)),ve=c(H,Se),0<ve.length&&(Se=new jo(Se,e,null,a,Y),X.push({event:Se,listeners:ve}),ye?Se.data=ye:(ye=Ao(a),ye!==null&&(Se.data=ye)))),(ye=kn?Mu(e,a):Bn(e,a))&&(H=c(H,"onBeforeInput"),0<H.length&&(Y=new jo("onBeforeInput","beforeinput",null,a,Y),X.push({event:Y,listeners:H}),Y.data=ye))}Zo(X,n)})}function s(e,n,a){return{instance:e,listener:n,currentTarget:a}}function c(e,n){for(var a=n+"Capture",h=[];e!==null;){var m=e,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=pr(e,a),v!=null&&h.unshift(s(e,v,m)),v=pr(e,n),v!=null&&h.push(s(e,v,m))),e=e.return}return h}function p(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function y(e,n,a,h,m){for(var v=n._reactName,S=[];a!==null&&a!==h;){var T=a,R=T.alternate,H=T.stateNode;if(R!==null&&R===h)break;T.tag===5&&H!==null&&(T=H,m?(R=pr(a,v),R!=null&&S.unshift(s(a,R,T))):m||(R=pr(a,v),R!=null&&S.push(s(a,R,T)))),a=a.return}S.length!==0&&e.push({event:n,listeners:S})}var C=/\r\n?/g,N=/\u0000|\uFFFD/g;function B(e){return(typeof e=="string"?e:""+e).replace(C,`
`).replace(N,"")}function F(e,n,a){if(n=B(n),B(e)!==n&&a)throw Error(r(425))}function K(){}var ie=null,ge=null;function Pe(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var pt=typeof setTimeout=="function"?setTimeout:void 0,ut=typeof clearTimeout=="function"?clearTimeout:void 0,Mt=typeof Promise=="function"?Promise:void 0,Tt=typeof queueMicrotask=="function"?queueMicrotask:typeof Mt<"u"?function(e){return Mt.resolve(null).then(e).catch(Hi)}:pt;function Hi(e){setTimeout(function(){throw e})}function Wo(e,n){var a=n,h=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(h===0){e.removeChild(m),Jt(n);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=m}while(a);Jt(n)}function Fn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function cl(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}var ri=Math.random().toString(36).slice(2),dn="__reactFiber$"+ri,Wi="__reactProps$"+ri,$e="__reactContainer$"+ri,qi="__reactEvents$"+ri,Uu="__reactListeners$"+ri,$u="__reactHandles$"+ri;function si(e){var n=e[dn];if(n)return n;for(var a=e.parentNode;a;){if(n=a[$e]||a[dn]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=cl(e);e!==null;){if(a=e[dn])return a;e=cl(e)}return n}e=a,a=e.parentNode}return null}function oi(e){return e=e[dn]||e[$e],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Cs(e){return e[Wi]||null}var Fu=[],Ps=-1;function Vi(e){return{current:e}}function Ye(e){0>Ps||(e.current=Fu[Ps],Fu[Ps]=null,Ps--)}function Ke(e,n){Ps++,Fu[Ps]=e.current,e.current=n}var Gi={},Ot=Vi(Gi),$t=Vi(!1),jr=Gi;function Es(e,n){var a=e.type.contextTypes;if(!a)return Gi;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===n)return h.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in a)m[v]=n[v];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=m),m}function Ft(e){return e=e.childContextTypes,e!=null}function hl(){Ye($t),Ye(Ot)}function Mh(e,n,a){if(Ot.current!==Gi)throw Error(r(168));Ke(Ot,n),Ke($t,a)}function zh(e,n,a){var h=e.stateNode;if(n=n.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var m in h)if(!(m in n))throw Error(r(108,je(e)||"Unknown",m));return G({},a,h)}function dl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gi,jr=Ot.current,Ke(Ot,e),Ke($t,$t.current),!0}function Bh(e,n,a){var h=e.stateNode;if(!h)throw Error(r(169));a?(e=zh(e,n,jr),h.__reactInternalMemoizedMergedChildContext=e,Ye($t),Ye(Ot),Ke(Ot,e)):Ye($t),Ke($t,a)}var li=null,fl=!1,Zu=!1;function Dh(e){li===null?li=[e]:li.push(e)}function Qp(e){fl=!0,Dh(e)}function Ki(){if(!Zu&&li!==null){Zu=!0;var e=0,n=Re;try{var a=li;for(Re=1;e<a.length;e++){var h=a[e];do h=h(!0);while(h!==null)}li=null,fl=!1}catch(m){throw li!==null&&(li=li.slice(e+1)),Ua(wo,Ki),m}finally{Re=n,Zu=!1}}return null}var Ts=[],Os=0,pl=null,ml=0,fn=[],pn=0,Nr=null,ui=1,ci="";function Rr(e,n){Ts[Os++]=ml,Ts[Os++]=pl,pl=e,ml=n}function Uh(e,n,a){fn[pn++]=ui,fn[pn++]=ci,fn[pn++]=Nr,Nr=e;var h=ui;e=ci;var m=32-Le(h)-1;h&=~(1<<m),a+=1;var v=32-Le(n)+m;if(30<v){var S=m-m%5;v=(h&(1<<S)-1).toString(32),h>>=S,m-=S,ui=1<<32-Le(n)+m|a<<m|h,ci=v+e}else ui=1<<v|a<<m|h,ci=e}function Hu(e){e.return!==null&&(Rr(e,1),Uh(e,1,0))}function Wu(e){for(;e===pl;)pl=Ts[--Os],Ts[Os]=null,ml=Ts[--Os],Ts[Os]=null;for(;e===Nr;)Nr=fn[--pn],fn[pn]=null,ci=fn[--pn],fn[pn]=null,ui=fn[--pn],fn[pn]=null}var tn=null,nn=null,Xe=!1,Ln=null;function $h(e,n){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=n,a.return=e,n=e.deletions,n===null?(e.deletions=[a],e.flags|=16):n.push(a)}function Fh(e,n){switch(e.tag){case 5:var a=e.type;return n=n.nodeType!==1||a.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,tn=e,nn=Fn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,tn=e,nn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(a=Nr!==null?{id:ui,overflow:ci}:null,e.memoizedState={dehydrated:n,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=n,a.return=e,e.child=a,tn=e,nn=null,!0):!1;default:return!1}}function qu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vu(e){if(Xe){var n=nn;if(n){var a=n;if(!Fh(e,n)){if(qu(e))throw Error(r(418));n=Fn(a.nextSibling);var h=tn;n&&Fh(e,n)?$h(h,a):(e.flags=e.flags&-4097|2,Xe=!1,tn=e)}}else{if(qu(e))throw Error(r(418));e.flags=e.flags&-4097|2,Xe=!1,tn=e}}}function Zh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tn=e}function _l(e){if(e!==tn)return!1;if(!Xe)return Zh(e),Xe=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Pe(e.type,e.memoizedProps)),n&&(n=nn)){if(qu(e))throw Hh(),Error(r(418));for(;n;)$h(e,n),n=Fn(n.nextSibling)}if(Zh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(n===0){nn=Fn(e.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++}e=e.nextSibling}nn=null}}else nn=tn?Fn(e.stateNode.nextSibling):null;return!0}function Hh(){for(var e=nn;e;)e=Fn(e.nextSibling)}function js(){nn=tn=null,Xe=!1}function Gu(e){Ln===null?Ln=[e]:Ln.push(e)}var Yp=Q.ReactCurrentBatchConfig;function qo(e,n,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var h=a.stateNode}if(!h)throw Error(r(147,e));var m=h,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(S){var T=m.refs;S===null?delete T[v]:T[v]=S},n._stringRef=v,n)}if(typeof e!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,e))}return e}function gl(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Wh(e){var n=e._init;return n(e._payload)}function qh(e){function n(D,I){if(e){var U=D.deletions;U===null?(D.deletions=[I],D.flags|=16):U.push(I)}}function a(D,I){if(!e)return null;for(;I!==null;)n(D,I),I=I.sibling;return null}function h(D,I){for(D=new Map;I!==null;)I.key!==null?D.set(I.key,I):D.set(I.index,I),I=I.sibling;return D}function m(D,I){return D=ir(D,I),D.index=0,D.sibling=null,D}function v(D,I,U){return D.index=U,e?(U=D.alternate,U!==null?(U=U.index,U<I?(D.flags|=2,I):U):(D.flags|=2,I)):(D.flags|=1048576,I)}function S(D){return e&&D.alternate===null&&(D.flags|=2),D}function T(D,I,U,ee){return I===null||I.tag!==6?(I=Dc(U,D.mode,ee),I.return=D,I):(I=m(I,U),I.return=D,I)}function R(D,I,U,ee){var he=U.type;return he===Ce?Y(D,I,U.props.children,ee,U.key):I!==null&&(I.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ne&&Wh(he)===I.type)?(ee=m(I,U.props),ee.ref=qo(D,I,U),ee.return=D,ee):(ee=$l(U.type,U.key,U.props,null,D.mode,ee),ee.ref=qo(D,I,U),ee.return=D,ee)}function H(D,I,U,ee){return I===null||I.tag!==4||I.stateNode.containerInfo!==U.containerInfo||I.stateNode.implementation!==U.implementation?(I=Uc(U,D.mode,ee),I.return=D,I):(I=m(I,U.children||[]),I.return=D,I)}function Y(D,I,U,ee,he){return I===null||I.tag!==7?(I=$r(U,D.mode,ee,he),I.return=D,I):(I=m(I,U),I.return=D,I)}function X(D,I,U){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Dc(""+I,D.mode,U),I.return=D,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ne:return U=$l(I.type,I.key,I.props,null,D.mode,U),U.ref=qo(D,null,I),U.return=D,U;case pe:return I=Uc(I,D.mode,U),I.return=D,I;case Ne:var ee=I._init;return X(D,ee(I._payload),U)}if(Si(I)||me(I))return I=$r(I,D.mode,U,null),I.return=D,I;gl(D,I)}return null}function J(D,I,U,ee){var he=I!==null?I.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return he!==null?null:T(D,I,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case ne:return U.key===he?R(D,I,U,ee):null;case pe:return U.key===he?H(D,I,U,ee):null;case Ne:return he=U._init,J(D,I,he(U._payload),ee)}if(Si(U)||me(U))return he!==null?null:Y(D,I,U,ee,null);gl(D,U)}return null}function re(D,I,U,ee,he){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return D=D.get(U)||null,T(I,D,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case ne:return D=D.get(ee.key===null?U:ee.key)||null,R(I,D,ee,he);case pe:return D=D.get(ee.key===null?U:ee.key)||null,H(I,D,ee,he);case Ne:var ve=ee._init;return re(D,I,U,ve(ee._payload),he)}if(Si(ee)||me(ee))return D=D.get(U)||null,Y(I,D,ee,he,null);gl(I,ee)}return null}function ae(D,I,U,ee){for(var he=null,ve=null,ye=I,Se=I=0,wt=null;ye!==null&&Se<U.length;Se++){ye.index>Se?(wt=ye,ye=null):wt=ye.sibling;var Me=J(D,ye,U[Se],ee);if(Me===null){ye===null&&(ye=wt);break}e&&ye&&Me.alternate===null&&n(D,ye),I=v(Me,I,Se),ve===null?he=Me:ve.sibling=Me,ve=Me,ye=wt}if(Se===U.length)return a(D,ye),Xe&&Rr(D,Se),he;if(ye===null){for(;Se<U.length;Se++)ye=X(D,U[Se],ee),ye!==null&&(I=v(ye,I,Se),ve===null?he=ye:ve.sibling=ye,ve=ye);return Xe&&Rr(D,Se),he}for(ye=h(D,ye);Se<U.length;Se++)wt=re(ye,D,Se,U[Se],ee),wt!==null&&(e&&wt.alternate!==null&&ye.delete(wt.key===null?Se:wt.key),I=v(wt,I,Se),ve===null?he=wt:ve.sibling=wt,ve=wt);return e&&ye.forEach(function(rr){return n(D,rr)}),Xe&&Rr(D,Se),he}function le(D,I,U,ee){var he=me(U);if(typeof he!="function")throw Error(r(150));if(U=he.call(U),U==null)throw Error(r(151));for(var ve=he=null,ye=I,Se=I=0,wt=null,Me=U.next();ye!==null&&!Me.done;Se++,Me=U.next()){ye.index>Se?(wt=ye,ye=null):wt=ye.sibling;var rr=J(D,ye,Me.value,ee);if(rr===null){ye===null&&(ye=wt);break}e&&ye&&rr.alternate===null&&n(D,ye),I=v(rr,I,Se),ve===null?he=rr:ve.sibling=rr,ve=rr,ye=wt}if(Me.done)return a(D,ye),Xe&&Rr(D,Se),he;if(ye===null){for(;!Me.done;Se++,Me=U.next())Me=X(D,Me.value,ee),Me!==null&&(I=v(Me,I,Se),ve===null?he=Me:ve.sibling=Me,ve=Me);return Xe&&Rr(D,Se),he}for(ye=h(D,ye);!Me.done;Se++,Me=U.next())Me=re(ye,D,Se,Me.value,ee),Me!==null&&(e&&Me.alternate!==null&&ye.delete(Me.key===null?Se:Me.key),I=v(Me,I,Se),ve===null?he=Me:ve.sibling=Me,ve=Me);return e&&ye.forEach(function(jm){return n(D,jm)}),Xe&&Rr(D,Se),he}function lt(D,I,U,ee){if(typeof U=="object"&&U!==null&&U.type===Ce&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case ne:e:{for(var he=U.key,ve=I;ve!==null;){if(ve.key===he){if(he=U.type,he===Ce){if(ve.tag===7){a(D,ve.sibling),I=m(ve,U.props.children),I.return=D,D=I;break e}}else if(ve.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ne&&Wh(he)===ve.type){a(D,ve.sibling),I=m(ve,U.props),I.ref=qo(D,ve,U),I.return=D,D=I;break e}a(D,ve);break}else n(D,ve);ve=ve.sibling}U.type===Ce?(I=$r(U.props.children,D.mode,ee,U.key),I.return=D,D=I):(ee=$l(U.type,U.key,U.props,null,D.mode,ee),ee.ref=qo(D,I,U),ee.return=D,D=ee)}return S(D);case pe:e:{for(ve=U.key;I!==null;){if(I.key===ve)if(I.tag===4&&I.stateNode.containerInfo===U.containerInfo&&I.stateNode.implementation===U.implementation){a(D,I.sibling),I=m(I,U.children||[]),I.return=D,D=I;break e}else{a(D,I);break}else n(D,I);I=I.sibling}I=Uc(U,D.mode,ee),I.return=D,D=I}return S(D);case Ne:return ve=U._init,lt(D,I,ve(U._payload),ee)}if(Si(U))return ae(D,I,U,ee);if(me(U))return le(D,I,U,ee);gl(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,I!==null&&I.tag===6?(a(D,I.sibling),I=m(I,U),I.return=D,D=I):(a(D,I),I=Dc(U,D.mode,ee),I.return=D,D=I),S(D)):a(D,I)}return lt}var Ns=qh(!0),Vh=qh(!1),vl=Vi(null),yl=null,Rs=null,Ku=null;function Ju(){Ku=Rs=yl=null}function Qu(e){var n=vl.current;Ye(vl),e._currentValue=n}function Yu(e,n,a){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===a)break;e=e.return}}function As(e,n){yl=e,Ku=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Zt=!0),e.firstContext=null)}function mn(e){var n=e._currentValue;if(Ku!==e)if(e={context:e,memoizedValue:n,next:null},Rs===null){if(yl===null)throw Error(r(308));Rs=e,yl.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return n}var Ar=null;function Xu(e){Ar===null?Ar=[e]:Ar.push(e)}function Gh(e,n,a,h){var m=n.interleaved;return m===null?(a.next=a,Xu(n)):(a.next=m.next,m.next=a),n.interleaved=a,hi(e,h)}function hi(e,n){e.lanes|=n;var a=e.alternate;for(a!==null&&(a.lanes|=n),a=e,e=e.return;e!==null;)e.childLanes|=n,a=e.alternate,a!==null&&(a.childLanes|=n),a=e,e=e.return;return a.tag===3?a.stateNode:null}var Ji=!1;function ec(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function di(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Qi(e,n,a){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(Ae&2)!==0){var m=h.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),h.pending=n,hi(e,a)}return m=h.interleaved,m===null?(n.next=n,Xu(h)):(n.next=m.next,m.next=n),h.interleaved=n,hi(e,a)}function wl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194240)!==0)){var h=n.lanes;h&=e.pendingLanes,a|=h,n.lanes=a,wn(e,a)}}function Jh(e,n){var a=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var m=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?m=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?m=v=n:v=v.next=n}else m=v=n;a={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,effects:h.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}function xl(e,n,a,h){var m=e.updateQueue;Ji=!1;var v=m.firstBaseUpdate,S=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var R=T,H=R.next;R.next=null,S===null?v=H:S.next=H,S=R;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,T=Y.lastBaseUpdate,T!==S&&(T===null?Y.firstBaseUpdate=H:T.next=H,Y.lastBaseUpdate=R))}if(v!==null){var X=m.baseState;S=0,Y=H=R=null,T=v;do{var J=T.lane,re=T.eventTime;if((h&J)===J){Y!==null&&(Y=Y.next={eventTime:re,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ae=e,le=T;switch(J=n,re=a,le.tag){case 1:if(ae=le.payload,typeof ae=="function"){X=ae.call(re,X,J);break e}X=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=le.payload,J=typeof ae=="function"?ae.call(re,X,J):ae,J==null)break e;X=G({},X,J);break e;case 2:Ji=!0}}T.callback!==null&&T.lane!==0&&(e.flags|=64,J=m.effects,J===null?m.effects=[T]:J.push(T))}else re={eventTime:re,lane:J,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Y===null?(H=Y=re,R=X):Y=Y.next=re,S|=J;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;J=T,T=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);if(Y===null&&(R=X),m.baseState=R,m.firstBaseUpdate=H,m.lastBaseUpdate=Y,n=m.shared.interleaved,n!==null){m=n;do S|=m.lane,m=m.next;while(m!==n)}else v===null&&(m.shared.lanes=0);zr|=S,e.lanes=S,e.memoizedState=X}}function Qh(e,n,a){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var h=e[n],m=h.callback;if(m!==null){if(h.callback=null,h=a,typeof m!="function")throw Error(r(191,m));m.call(h)}}}var Vo={},Zn=Vi(Vo),Go=Vi(Vo),Ko=Vi(Vo);function Ir(e){if(e===Vo)throw Error(r(174));return e}function tc(e,n){switch(Ke(Ko,n),Ke(Go,e),Ke(Zn,Vo),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Qr(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Qr(n,e)}Ye(Zn),Ke(Zn,n)}function Is(){Ye(Zn),Ye(Go),Ye(Ko)}function Yh(e){Ir(Ko.current);var n=Ir(Zn.current),a=Qr(n,e.type);n!==a&&(Ke(Go,e),Ke(Zn,a))}function nc(e){Go.current===e&&(Ye(Zn),Ye(Go))}var nt=Vi(0);function kl(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ic=[];function rc(){for(var e=0;e<ic.length;e++)ic[e]._workInProgressVersionPrimary=null;ic.length=0}var Sl=Q.ReactCurrentDispatcher,sc=Q.ReactCurrentBatchConfig,Mr=0,it=null,mt=null,vt=null,bl=!1,Jo=!1,Qo=0,Xp=0;function jt(){throw Error(r(321))}function oc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Xt(e[a],n[a]))return!1;return!0}function ac(e,n,a,h,m,v){if(Mr=v,it=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Sl.current=e===null||e.memoizedState===null?im:rm,e=a(h,m),Jo){v=0;do{if(Jo=!1,Qo=0,25<=v)throw Error(r(301));v+=1,vt=mt=null,n.updateQueue=null,Sl.current=sm,e=a(h,m)}while(Jo)}if(Sl.current=Pl,n=mt!==null&&mt.next!==null,Mr=0,vt=mt=it=null,bl=!1,n)throw Error(r(300));return e}function lc(){var e=Qo!==0;return Qo=0,e}function Hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?it.memoizedState=vt=e:vt=vt.next=e,vt}function _n(){if(mt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=mt.next;var n=vt===null?it.memoizedState:vt.next;if(n!==null)vt=n,mt=e;else{if(e===null)throw Error(r(310));mt=e,e={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},vt===null?it.memoizedState=vt=e:vt=vt.next=e}return vt}function Yo(e,n){return typeof n=="function"?n(e):n}function uc(e){var n=_n(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var h=mt,m=h.baseQueue,v=a.pending;if(v!==null){if(m!==null){var S=m.next;m.next=v.next,v.next=S}h.baseQueue=m=v,a.pending=null}if(m!==null){v=m.next,h=h.baseState;var T=S=null,R=null,H=v;do{var Y=H.lane;if((Mr&Y)===Y)R!==null&&(R=R.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),h=H.hasEagerState?H.eagerState:e(h,H.action);else{var X={lane:Y,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};R===null?(T=R=X,S=h):R=R.next=X,it.lanes|=Y,zr|=Y}H=H.next}while(H!==null&&H!==v);R===null?S=h:R.next=T,Xt(h,n.memoizedState)||(Zt=!0),n.memoizedState=h,n.baseState=S,n.baseQueue=R,a.lastRenderedState=h}if(e=a.interleaved,e!==null){m=e;do v=m.lane,it.lanes|=v,zr|=v,m=m.next;while(m!==e)}else m===null&&(a.lanes=0);return[n.memoizedState,a.dispatch]}function cc(e){var n=_n(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var h=a.dispatch,m=a.pending,v=n.memoizedState;if(m!==null){a.pending=null;var S=m=m.next;do v=e(v,S.action),S=S.next;while(S!==m);Xt(v,n.memoizedState)||(Zt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),a.lastRenderedState=v}return[v,h]}function Xh(){}function ed(e,n){var a=it,h=_n(),m=n(),v=!Xt(h.memoizedState,m);if(v&&(h.memoizedState=m,Zt=!0),h=h.queue,hc(id.bind(null,a,h,e),[e]),h.getSnapshot!==n||v||vt!==null&&vt.memoizedState.tag&1){if(a.flags|=2048,Xo(9,nd.bind(null,a,h,m,n),void 0,null),yt===null)throw Error(r(349));(Mr&30)!==0||td(a,n,m)}return m}function td(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=it.updateQueue,n===null?(n={lastEffect:null,stores:null},it.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function nd(e,n,a,h){n.value=a,n.getSnapshot=h,rd(n)&&sd(e)}function id(e,n,a){return a(function(){rd(n)&&sd(e)})}function rd(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Xt(e,a)}catch{return!0}}function sd(e){var n=hi(e,1);n!==null&&Tn(n,e,1,-1)}function od(e){var n=Hn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:e},n.queue=e,e=e.dispatch=nm.bind(null,it,e),[n.memoizedState,e]}function Xo(e,n,a,h){return e={tag:e,create:n,destroy:a,deps:h,next:null},n=it.updateQueue,n===null?(n={lastEffect:null,stores:null},it.updateQueue=n,n.lastEffect=e.next=e):(a=n.lastEffect,a===null?n.lastEffect=e.next=e:(h=a.next,a.next=e,e.next=h,n.lastEffect=e)),e}function ad(){return _n().memoizedState}function Ll(e,n,a,h){var m=Hn();it.flags|=e,m.memoizedState=Xo(1|n,a,void 0,h===void 0?null:h)}function Cl(e,n,a,h){var m=_n();h=h===void 0?null:h;var v=void 0;if(mt!==null){var S=mt.memoizedState;if(v=S.destroy,h!==null&&oc(h,S.deps)){m.memoizedState=Xo(n,a,v,h);return}}it.flags|=e,m.memoizedState=Xo(1|n,a,v,h)}function ld(e,n){return Ll(8390656,8,e,n)}function hc(e,n){return Cl(2048,8,e,n)}function ud(e,n){return Cl(4,2,e,n)}function cd(e,n){return Cl(4,4,e,n)}function hd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function dd(e,n,a){return a=a!=null?a.concat([e]):null,Cl(4,4,hd.bind(null,n,e),a)}function dc(){}function fd(e,n){var a=_n();n=n===void 0?null:n;var h=a.memoizedState;return h!==null&&n!==null&&oc(n,h[1])?h[0]:(a.memoizedState=[e,n],e)}function pd(e,n){var a=_n();n=n===void 0?null:n;var h=a.memoizedState;return h!==null&&n!==null&&oc(n,h[1])?h[0]:(e=e(),a.memoizedState=[e,n],e)}function md(e,n,a){return(Mr&21)===0?(e.baseState&&(e.baseState=!1,Zt=!0),e.memoizedState=a):(Xt(a,n)||(a=Fa(),it.lanes|=a,zr|=a,e.baseState=!0),n)}function em(e,n){var a=Re;Re=a!==0&&4>a?a:4,e(!0);var h=sc.transition;sc.transition={};try{e(!1),n()}finally{Re=a,sc.transition=h}}function _d(){return _n().memoizedState}function tm(e,n,a){var h=tr(e);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},gd(e))vd(n,a);else if(a=Gh(e,n,a,h),a!==null){var m=Bt();Tn(a,e,h,m),yd(a,n,h)}}function nm(e,n,a){var h=tr(e),m={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(gd(e))vd(n,m);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var S=n.lastRenderedState,T=v(S,a);if(m.hasEagerState=!0,m.eagerState=T,Xt(T,S)){var R=n.interleaved;R===null?(m.next=m,Xu(n)):(m.next=R.next,R.next=m),n.interleaved=m;return}}catch{}finally{}a=Gh(e,n,m,h),a!==null&&(m=Bt(),Tn(a,e,h,m),yd(a,n,h))}}function gd(e){var n=e.alternate;return e===it||n!==null&&n===it}function vd(e,n){Jo=bl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function yd(e,n,a){if((a&4194240)!==0){var h=n.lanes;h&=e.pendingLanes,a|=h,n.lanes=a,wn(e,a)}}var Pl={readContext:mn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},im={readContext:mn,useCallback:function(e,n){return Hn().memoizedState=[e,n===void 0?null:n],e},useContext:mn,useEffect:ld,useImperativeHandle:function(e,n,a){return a=a!=null?a.concat([e]):null,Ll(4194308,4,hd.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Ll(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ll(4,2,e,n)},useMemo:function(e,n){var a=Hn();return n=n===void 0?null:n,e=e(),a.memoizedState=[e,n],e},useReducer:function(e,n,a){var h=Hn();return n=a!==void 0?a(n):n,h.memoizedState=h.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},h.queue=e,e=e.dispatch=tm.bind(null,it,e),[h.memoizedState,e]},useRef:function(e){var n=Hn();return e={current:e},n.memoizedState=e},useState:od,useDebugValue:dc,useDeferredValue:function(e){return Hn().memoizedState=e},useTransition:function(){var e=od(!1),n=e[0];return e=em.bind(null,e[1]),Hn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,a){var h=it,m=Hn();if(Xe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),yt===null)throw Error(r(349));(Mr&30)!==0||td(h,n,a)}m.memoizedState=a;var v={value:a,getSnapshot:n};return m.queue=v,ld(id.bind(null,h,v,e),[e]),h.flags|=2048,Xo(9,nd.bind(null,h,v,a,n),void 0,null),a},useId:function(){var e=Hn(),n=yt.identifierPrefix;if(Xe){var a=ci,h=ui;a=(h&~(1<<32-Le(h)-1)).toString(32)+a,n=":"+n+"R"+a,a=Qo++,0<a&&(n+="H"+a.toString(32)),n+=":"}else a=Xp++,n=":"+n+"r"+a.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},rm={readContext:mn,useCallback:fd,useContext:mn,useEffect:hc,useImperativeHandle:dd,useInsertionEffect:ud,useLayoutEffect:cd,useMemo:pd,useReducer:uc,useRef:ad,useState:function(){return uc(Yo)},useDebugValue:dc,useDeferredValue:function(e){var n=_n();return md(n,mt.memoizedState,e)},useTransition:function(){var e=uc(Yo)[0],n=_n().memoizedState;return[e,n]},useMutableSource:Xh,useSyncExternalStore:ed,useId:_d,unstable_isNewReconciler:!1},sm={readContext:mn,useCallback:fd,useContext:mn,useEffect:hc,useImperativeHandle:dd,useInsertionEffect:ud,useLayoutEffect:cd,useMemo:pd,useReducer:cc,useRef:ad,useState:function(){return cc(Yo)},useDebugValue:dc,useDeferredValue:function(e){var n=_n();return mt===null?n.memoizedState=e:md(n,mt.memoizedState,e)},useTransition:function(){var e=cc(Yo)[0],n=_n().memoizedState;return[e,n]},useMutableSource:Xh,useSyncExternalStore:ed,useId:_d,unstable_isNewReconciler:!1};function Cn(e,n){if(e&&e.defaultProps){n=G({},n),e=e.defaultProps;for(var a in e)n[a]===void 0&&(n[a]=e[a]);return n}return n}function fc(e,n,a,h){n=e.memoizedState,a=a(h,n),a=a==null?n:G({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var El={isMounted:function(e){return(e=e._reactInternals)?An(e)===e:!1},enqueueSetState:function(e,n,a){e=e._reactInternals;var h=Bt(),m=tr(e),v=di(h,m);v.payload=n,a!=null&&(v.callback=a),n=Qi(e,v,m),n!==null&&(Tn(n,e,m,h),wl(n,e,m))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var h=Bt(),m=tr(e),v=di(h,m);v.tag=1,v.payload=n,a!=null&&(v.callback=a),n=Qi(e,v,m),n!==null&&(Tn(n,e,m,h),wl(n,e,m))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Bt(),h=tr(e),m=di(a,h);m.tag=2,n!=null&&(m.callback=n),n=Qi(e,m,h),n!==null&&(Tn(n,e,h,a),wl(n,e,h))}};function wd(e,n,a,h,m,v,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,v,S):n.prototype&&n.prototype.isPureReactComponent?!Dn(a,h)||!Dn(m,v):!0}function xd(e,n,a){var h=!1,m=Gi,v=n.contextType;return typeof v=="object"&&v!==null?v=mn(v):(m=Ft(n)?jr:Ot.current,h=n.contextTypes,v=(h=h!=null)?Es(e,m):Gi),n=new n(a,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=El,e.stateNode=n,n._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=m,e.__reactInternalMemoizedMaskedChildContext=v),n}function kd(e,n,a,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,h),n.state!==e&&El.enqueueReplaceState(n,n.state,null)}function pc(e,n,a,h){var m=e.stateNode;m.props=a,m.state=e.memoizedState,m.refs={},ec(e);var v=n.contextType;typeof v=="object"&&v!==null?m.context=mn(v):(v=Ft(n)?jr:Ot.current,m.context=Es(e,v)),m.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(fc(e,n,v,a),m.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(n=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),n!==m.state&&El.enqueueReplaceState(m,m.state,null),xl(e,a,m,h),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4194308)}function Ms(e,n){try{var a="",h=n;do a+=ue(h),h=h.return;while(h);var m=a}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:m,digest:null}}function mc(e,n,a){return{value:e,source:null,stack:a??null,digest:n??null}}function _c(e,n){try{console.error(n.value)}catch(a){setTimeout(function(){throw a})}}var om=typeof WeakMap=="function"?WeakMap:Map;function Sd(e,n,a){a=di(-1,a),a.tag=3,a.payload={element:null};var h=n.value;return a.callback=function(){Il||(Il=!0,jc=h),_c(e,n)},a}function bd(e,n,a){a=di(-1,a),a.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var m=n.value;a.payload=function(){return h(m)},a.callback=function(){_c(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){_c(e,n),typeof h!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var S=n.stack;this.componentDidCatch(n.value,{componentStack:S!==null?S:""})}),a}function Ld(e,n,a){var h=e.pingCache;if(h===null){h=e.pingCache=new om;var m=new Set;h.set(n,m)}else m=h.get(n),m===void 0&&(m=new Set,h.set(n,m));m.has(a)||(m.add(a),e=wm.bind(null,e,n,a),n.then(e,e))}function Cd(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Pd(e,n,a,h,m){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(n=di(-1,1),n.tag=2,Qi(a,n,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=m,e)}var am=Q.ReactCurrentOwner,Zt=!1;function zt(e,n,a,h){n.child=e===null?Vh(n,null,a,h):Ns(n,e.child,a,h)}function Ed(e,n,a,h,m){a=a.render;var v=n.ref;return As(n,m),h=ac(e,n,a,h,v,m),a=lc(),e!==null&&!Zt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~m,fi(e,n,m)):(Xe&&a&&Hu(n),n.flags|=1,zt(e,n,h,m),n.child)}function Td(e,n,a,h,m){if(e===null){var v=a.type;return typeof v=="function"&&!Bc(v)&&v.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(n.tag=15,n.type=v,Od(e,n,v,h,m)):(e=$l(a.type,null,h,n,n.mode,m),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&m)===0){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:Dn,a(S,h)&&e.ref===n.ref)return fi(e,n,m)}return n.flags|=1,e=ir(v,h),e.ref=n.ref,e.return=n,n.child=e}function Od(e,n,a,h,m){if(e!==null){var v=e.memoizedProps;if(Dn(v,h)&&e.ref===n.ref)if(Zt=!1,n.pendingProps=h=v,(e.lanes&m)!==0)(e.flags&131072)!==0&&(Zt=!0);else return n.lanes=e.lanes,fi(e,n,m)}return gc(e,n,a,h,m)}function jd(e,n,a){var h=n.pendingProps,m=h.children,v=e!==null?e.memoizedState:null;if(h.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Bs,rn),rn|=a;else{if((a&1073741824)===0)return e=v!==null?v.baseLanes|a:a,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ke(Bs,rn),rn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:a,Ke(Bs,rn),rn|=h}else v!==null?(h=v.baseLanes|a,n.memoizedState=null):h=a,Ke(Bs,rn),rn|=h;return zt(e,n,m,a),n.child}function Nd(e,n){var a=n.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(n.flags|=512,n.flags|=2097152)}function gc(e,n,a,h,m){var v=Ft(a)?jr:Ot.current;return v=Es(n,v),As(n,m),a=ac(e,n,a,h,v,m),h=lc(),e!==null&&!Zt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~m,fi(e,n,m)):(Xe&&h&&Hu(n),n.flags|=1,zt(e,n,a,m),n.child)}function Rd(e,n,a,h,m){if(Ft(a)){var v=!0;dl(n)}else v=!1;if(As(n,m),n.stateNode===null)Ol(e,n),xd(n,a,h),pc(n,a,h,m),h=!0;else if(e===null){var S=n.stateNode,T=n.memoizedProps;S.props=T;var R=S.context,H=a.contextType;typeof H=="object"&&H!==null?H=mn(H):(H=Ft(a)?jr:Ot.current,H=Es(n,H));var Y=a.getDerivedStateFromProps,X=typeof Y=="function"||typeof S.getSnapshotBeforeUpdate=="function";X||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==h||R!==H)&&kd(n,S,h,H),Ji=!1;var J=n.memoizedState;S.state=J,xl(n,h,S,m),R=n.memoizedState,T!==h||J!==R||$t.current||Ji?(typeof Y=="function"&&(fc(n,a,Y,h),R=n.memoizedState),(T=Ji||wd(n,a,T,h,J,R,H))?(X||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(n.flags|=4194308)):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=R),S.props=h,S.state=R,S.context=H,h=T):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{S=n.stateNode,Kh(e,n),T=n.memoizedProps,H=n.type===n.elementType?T:Cn(n.type,T),S.props=H,X=n.pendingProps,J=S.context,R=a.contextType,typeof R=="object"&&R!==null?R=mn(R):(R=Ft(a)?jr:Ot.current,R=Es(n,R));var re=a.getDerivedStateFromProps;(Y=typeof re=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==X||J!==R)&&kd(n,S,h,R),Ji=!1,J=n.memoizedState,S.state=J,xl(n,h,S,m);var ae=n.memoizedState;T!==X||J!==ae||$t.current||Ji?(typeof re=="function"&&(fc(n,a,re,h),ae=n.memoizedState),(H=Ji||wd(n,a,H,h,J,ae,R)||!1)?(Y||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ae,R),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ae,R)),typeof S.componentDidUpdate=="function"&&(n.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=ae),S.props=h,S.state=ae,S.context=R,h=H):(typeof S.componentDidUpdate!="function"||T===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),h=!1)}return vc(e,n,a,h,v,m)}function vc(e,n,a,h,m,v){Nd(e,n);var S=(n.flags&128)!==0;if(!h&&!S)return m&&Bh(n,a,!1),fi(e,n,v);h=n.stateNode,am.current=n;var T=S&&typeof a.getDerivedStateFromError!="function"?null:h.render();return n.flags|=1,e!==null&&S?(n.child=Ns(n,e.child,null,v),n.child=Ns(n,null,T,v)):zt(e,n,T,v),n.memoizedState=h.state,m&&Bh(n,a,!0),n.child}function Ad(e){var n=e.stateNode;n.pendingContext?Mh(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Mh(e,n.context,!1),tc(e,n.containerInfo)}function Id(e,n,a,h,m){return js(),Gu(m),n.flags|=256,zt(e,n,a,h),n.child}var yc={dehydrated:null,treeContext:null,retryLane:0};function wc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Md(e,n,a){var h=n.pendingProps,m=nt.current,v=!1,S=(n.flags&128)!==0,T;if((T=S)||(T=e!==null&&e.memoizedState===null?!1:(m&2)!==0),T?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(m|=1),Ke(nt,m&1),e===null)return Vu(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(S=h.children,e=h.fallback,v?(h=n.mode,v=n.child,S={mode:"hidden",children:S},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Fl(S,h,0,null),e=$r(e,h,a,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=wc(a),n.memoizedState=yc,e):xc(n,S));if(m=e.memoizedState,m!==null&&(T=m.dehydrated,T!==null))return lm(e,n,S,h,T,m,a);if(v){v=h.fallback,S=n.mode,m=e.child,T=m.sibling;var R={mode:"hidden",children:h.children};return(S&1)===0&&n.child!==m?(h=n.child,h.childLanes=0,h.pendingProps=R,n.deletions=null):(h=ir(m,R),h.subtreeFlags=m.subtreeFlags&14680064),T!==null?v=ir(T,v):(v=$r(v,S,a,null),v.flags|=2),v.return=n,h.return=n,h.sibling=v,n.child=h,h=v,v=n.child,S=e.child.memoizedState,S=S===null?wc(a):{baseLanes:S.baseLanes|a,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=e.childLanes&~a,n.memoizedState=yc,h}return v=e.child,e=v.sibling,h=ir(v,{mode:"visible",children:h.children}),(n.mode&1)===0&&(h.lanes=a),h.return=n,h.sibling=null,e!==null&&(a=n.deletions,a===null?(n.deletions=[e],n.flags|=16):a.push(e)),n.child=h,n.memoizedState=null,h}function xc(e,n){return n=Fl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Tl(e,n,a,h){return h!==null&&Gu(h),Ns(n,e.child,null,a),e=xc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function lm(e,n,a,h,m,v,S){if(a)return n.flags&256?(n.flags&=-257,h=mc(Error(r(422))),Tl(e,n,S,h)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=h.fallback,m=n.mode,h=Fl({mode:"visible",children:h.children},m,0,null),v=$r(v,m,S,null),v.flags|=2,h.return=n,v.return=n,h.sibling=v,n.child=h,(n.mode&1)!==0&&Ns(n,e.child,null,S),n.child.memoizedState=wc(S),n.memoizedState=yc,v);if((n.mode&1)===0)return Tl(e,n,S,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var T=h.dgst;return h=T,v=Error(r(419)),h=mc(v,h,void 0),Tl(e,n,S,h)}if(T=(S&e.childLanes)!==0,Zt||T){if(h=yt,h!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|S))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,hi(e,m),Tn(h,e,m,-1))}return zc(),h=mc(Error(r(421))),Tl(e,n,S,h)}return m.data==="$?"?(n.flags|=128,n.child=e.child,n=xm.bind(null,e),m._reactRetry=n,null):(e=v.treeContext,nn=Fn(m.nextSibling),tn=n,Xe=!0,Ln=null,e!==null&&(fn[pn++]=ui,fn[pn++]=ci,fn[pn++]=Nr,ui=e.id,ci=e.overflow,Nr=n),n=xc(n,h.children),n.flags|=4096,n)}function zd(e,n,a){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),Yu(e.return,n,a)}function kc(e,n,a,h,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=a,v.tailMode=m)}function Bd(e,n,a){var h=n.pendingProps,m=h.revealOrder,v=h.tail;if(zt(e,n,h.children,a),h=nt.current,(h&2)!==0)h=h&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zd(e,a,n);else if(e.tag===19)zd(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(Ke(nt,h),(n.mode&1)===0)n.memoizedState=null;else switch(m){case"forwards":for(a=n.child,m=null;a!==null;)e=a.alternate,e!==null&&kl(e)===null&&(m=a),a=a.sibling;a=m,a===null?(m=n.child,n.child=null):(m=a.sibling,a.sibling=null),kc(n,!1,m,a,v);break;case"backwards":for(a=null,m=n.child,n.child=null;m!==null;){if(e=m.alternate,e!==null&&kl(e)===null){n.child=m;break}e=m.sibling,m.sibling=a,a=m,m=e}kc(n,!0,a,null,v);break;case"together":kc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ol(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function fi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),zr|=n.lanes,(a&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=ir(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=ir(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function um(e,n,a){switch(n.tag){case 3:Ad(n),js();break;case 5:Yh(n);break;case 1:Ft(n.type)&&dl(n);break;case 4:tc(n,n.stateNode.containerInfo);break;case 10:var h=n.type._context,m=n.memoizedProps.value;Ke(vl,h._currentValue),h._currentValue=m;break;case 13:if(h=n.memoizedState,h!==null)return h.dehydrated!==null?(Ke(nt,nt.current&1),n.flags|=128,null):(a&n.child.childLanes)!==0?Md(e,n,a):(Ke(nt,nt.current&1),e=fi(e,n,a),e!==null?e.sibling:null);Ke(nt,nt.current&1);break;case 19:if(h=(a&n.childLanes)!==0,(e.flags&128)!==0){if(h)return Bd(e,n,a);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ke(nt,nt.current),h)break;return null;case 22:case 23:return n.lanes=0,jd(e,n,a)}return fi(e,n,a)}var Dd,Sc,Ud,$d;Dd=function(e,n){for(var a=n.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Sc=function(){},Ud=function(e,n,a,h){var m=e.memoizedProps;if(m!==h){e=n.stateNode,Ir(Zn.current);var v=null;switch(a){case"input":m=so(e,m),h=so(e,h),v=[];break;case"select":m=G({},m,{value:void 0}),h=G({},h,{value:void 0}),v=[];break;case"textarea":m=Kr(e,m),h=Kr(e,h),v=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=K)}ho(a,h);var S;a=null;for(H in m)if(!h.hasOwnProperty(H)&&m.hasOwnProperty(H)&&m[H]!=null)if(H==="style"){var T=m[H];for(S in T)T.hasOwnProperty(S)&&(a||(a={}),a[S]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(f.hasOwnProperty(H)?v||(v=[]):(v=v||[]).push(H,null));for(H in h){var R=h[H];if(T=m!=null?m[H]:void 0,h.hasOwnProperty(H)&&R!==T&&(R!=null||T!=null))if(H==="style")if(T){for(S in T)!T.hasOwnProperty(S)||R&&R.hasOwnProperty(S)||(a||(a={}),a[S]="");for(S in R)R.hasOwnProperty(S)&&T[S]!==R[S]&&(a||(a={}),a[S]=R[S])}else a||(v||(v=[]),v.push(H,a)),a=R;else H==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(v=v||[]).push(H,R)):H==="children"?typeof R!="string"&&typeof R!="number"||(v=v||[]).push(H,""+R):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(f.hasOwnProperty(H)?(R!=null&&H==="onScroll"&&Ze("scroll",e),v||T===R||(v=[])):(v=v||[]).push(H,R))}a&&(v=v||[]).push("style",a);var H=v;(n.updateQueue=H)&&(n.flags|=4)}},$d=function(e,n,a,h){a!==h&&(n.flags|=4)};function ea(e,n){if(!Xe)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Nt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,h=0;if(n)for(var m=e.child;m!==null;)a|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)a|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=h,e.childLanes=a,n}function cm(e,n,a){var h=n.pendingProps;switch(Wu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(n),null;case 1:return Ft(n.type)&&hl(),Nt(n),null;case 3:return h=n.stateNode,Is(),Ye($t),Ye(Ot),rc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(_l(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ln!==null&&(Ac(Ln),Ln=null))),Sc(e,n),Nt(n),null;case 5:nc(n);var m=Ir(Ko.current);if(a=n.type,e!==null&&n.stateNode!=null)Ud(e,n,a,h,m),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!h){if(n.stateNode===null)throw Error(r(166));return Nt(n),null}if(e=Ir(Zn.current),_l(n)){h=n.stateNode,a=n.type;var v=n.memoizedProps;switch(h[dn]=n,h[Wi]=v,e=(n.mode&1)!==0,a){case"dialog":Ze("cancel",h),Ze("close",h);break;case"iframe":case"object":case"embed":Ze("load",h);break;case"video":case"audio":for(m=0;m<Fi.length;m++)Ze(Fi[m],h);break;case"source":Ze("error",h);break;case"img":case"image":case"link":Ze("error",h),Ze("load",h);break;case"details":Ze("toggle",h);break;case"input":oo(h,v),Ze("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},Ze("invalid",h);break;case"textarea":uo(h,v),Ze("invalid",h)}ho(a,v),m=null;for(var S in v)if(v.hasOwnProperty(S)){var T=v[S];S==="children"?typeof T=="string"?h.textContent!==T&&(v.suppressHydrationWarning!==!0&&F(h.textContent,T,e),m=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&F(h.textContent,T,e),m=["children",""+T]):f.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&Ze("scroll",h)}switch(a){case"input":wi(h),dr(h,v,!0);break;case"textarea":wi(h),Ea(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=K)}h=m,n.updateQueue=h,h!==null&&(n.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jr(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=S.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=S.createElement(a,{is:h.is}):(e=S.createElement(a),a==="select"&&(S=e,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):e=S.createElementNS(e,a),e[dn]=n,e[Wi]=h,Dd(e,n,!1,!1),n.stateNode=e;e:{switch(S=qn(a,h),a){case"dialog":Ze("cancel",e),Ze("close",e),m=h;break;case"iframe":case"object":case"embed":Ze("load",e),m=h;break;case"video":case"audio":for(m=0;m<Fi.length;m++)Ze(Fi[m],e);m=h;break;case"source":Ze("error",e),m=h;break;case"img":case"image":case"link":Ze("error",e),Ze("load",e),m=h;break;case"details":Ze("toggle",e),m=h;break;case"input":oo(e,h),m=so(e,h),Ze("invalid",e);break;case"option":m=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},m=G({},h,{value:void 0}),Ze("invalid",e);break;case"textarea":uo(e,h),m=Kr(e,h),Ze("invalid",e);break;default:m=h}ho(a,m),T=m;for(v in T)if(T.hasOwnProperty(v)){var R=T[v];v==="style"?Yr(e,R):v==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Ta(e,R)):v==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&bi(e,R):typeof R=="number"&&bi(e,""+R):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(f.hasOwnProperty(v)?R!=null&&v==="onScroll"&&Ze("scroll",e):R!=null&&W(e,v,R,S))}switch(a){case"input":wi(e),dr(e,h,!1);break;case"textarea":wi(e),Ea(e);break;case"option":h.value!=null&&e.setAttribute("value",""+Ee(h.value));break;case"select":e.multiple=!!h.multiple,v=h.value,v!=null?Rn(e,!!h.multiple,v,!1):h.defaultValue!=null&&Rn(e,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(e.onclick=K)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Nt(n),null;case 6:if(e&&n.stateNode!=null)$d(e,n,e.memoizedProps,h);else{if(typeof h!="string"&&n.stateNode===null)throw Error(r(166));if(a=Ir(Ko.current),Ir(Zn.current),_l(n)){if(h=n.stateNode,a=n.memoizedProps,h[dn]=n,(v=h.nodeValue!==a)&&(e=tn,e!==null))switch(e.tag){case 3:F(h.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&F(h.nodeValue,a,(e.mode&1)!==0)}v&&(n.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[dn]=n,n.stateNode=h}return Nt(n),null;case 13:if(Ye(nt),h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xe&&nn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Hh(),js(),n.flags|=98560,v=!1;else if(v=_l(n),h!==null&&h.dehydrated!==null){if(e===null){if(!v)throw Error(r(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[dn]=n}else js(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Nt(n),v=!1}else Ln!==null&&(Ac(Ln),Ln=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=a,n):(h=h!==null,h!==(e!==null&&e.memoizedState!==null)&&h&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(nt.current&1)!==0?_t===0&&(_t=3):zc())),n.updateQueue!==null&&(n.flags|=4),Nt(n),null);case 4:return Is(),Sc(e,n),e===null&&Zi(n.stateNode.containerInfo),Nt(n),null;case 10:return Qu(n.type._context),Nt(n),null;case 17:return Ft(n.type)&&hl(),Nt(n),null;case 19:if(Ye(nt),v=n.memoizedState,v===null)return Nt(n),null;if(h=(n.flags&128)!==0,S=v.rendering,S===null)if(h)ea(v,!1);else{if(_t!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(S=kl(e),S!==null){for(n.flags|=128,ea(v,!1),h=S.updateQueue,h!==null&&(n.updateQueue=h,n.flags|=4),n.subtreeFlags=0,h=a,a=n.child;a!==null;)v=a,e=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,e=S.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Ke(nt,nt.current&1|2),n.child}e=e.sibling}v.tail!==null&&et()>Ds&&(n.flags|=128,h=!0,ea(v,!1),n.lanes=4194304)}else{if(!h)if(e=kl(S),e!==null){if(n.flags|=128,h=!0,a=e.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),ea(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Xe)return Nt(n),null}else 2*et()-v.renderingStartTime>Ds&&a!==1073741824&&(n.flags|=128,h=!0,ea(v,!1),n.lanes=4194304);v.isBackwards?(S.sibling=n.child,n.child=S):(a=v.last,a!==null?a.sibling=S:n.child=S,v.last=S)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=et(),n.sibling=null,a=nt.current,Ke(nt,h?a&1|2:a&1),n):(Nt(n),null);case 22:case 23:return Mc(),h=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(n.flags|=8192),h&&(n.mode&1)!==0?(rn&1073741824)!==0&&(Nt(n),n.subtreeFlags&6&&(n.flags|=8192)):Nt(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function hm(e,n){switch(Wu(n),n.tag){case 1:return Ft(n.type)&&hl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Is(),Ye($t),Ye(Ot),rc(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return nc(n),null;case 13:if(Ye(nt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));js()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ye(nt),null;case 4:return Is(),null;case 10:return Qu(n.type._context),null;case 22:case 23:return Mc(),null;case 24:return null;default:return null}}var jl=!1,Rt=!1,dm=typeof WeakSet=="function"?WeakSet:Set,oe=null;function zs(e,n){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ot(e,n,h)}else a.current=null}function bc(e,n,a){try{a()}catch(h){ot(e,n,h)}}var Fd=!1;function fm(e,n){if(ie=Sr,e=zo(),Bo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,T=-1,R=-1,H=0,Y=0,X=e,J=null;t:for(;;){for(var re;X!==a||m!==0&&X.nodeType!==3||(T=S+m),X!==v||h!==0&&X.nodeType!==3||(R=S+h),X.nodeType===3&&(S+=X.nodeValue.length),(re=X.firstChild)!==null;)J=X,X=re;for(;;){if(X===e)break t;if(J===a&&++H===m&&(T=S),J===v&&++Y===h&&(R=S),(re=X.nextSibling)!==null)break;X=J,J=X.parentNode}X=re}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(ge={focusedElem:e,selectionRange:a},Sr=!1,oe=n;oe!==null;)if(n=oe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,oe=e;else for(;oe!==null;){n=oe;try{var ae=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var le=ae.memoizedProps,lt=ae.memoizedState,D=n.stateNode,I=D.getSnapshotBeforeUpdate(n.elementType===n.type?le:Cn(n.type,le),lt);D.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var U=n.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ee){ot(n,n.return,ee)}if(e=n.sibling,e!==null){e.return=n.return,oe=e;break}oe=n.return}return ae=Fd,Fd=!1,ae}function ta(e,n,a){var h=n.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&e)===e){var v=m.destroy;m.destroy=void 0,v!==void 0&&bc(n,a,v)}m=m.next}while(m!==h)}}function Nl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var h=a.create;a.destroy=h()}a=a.next}while(a!==n)}}function Lc(e){var n=e.ref;if(n!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof n=="function"?n(e):n.current=e}}function Zd(e){var n=e.alternate;n!==null&&(e.alternate=null,Zd(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[dn],delete n[Wi],delete n[qi],delete n[Uu],delete n[$u])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hd(e){return e.tag===5||e.tag===3||e.tag===4}function Wd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cc(e,n,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?a.nodeType===8?a.parentNode.insertBefore(e,n):a.insertBefore(e,n):(a.nodeType===8?(n=a.parentNode,n.insertBefore(e,a)):(n=a,n.appendChild(e)),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=K));else if(h!==4&&(e=e.child,e!==null))for(Cc(e,n,a),e=e.sibling;e!==null;)Cc(e,n,a),e=e.sibling}function Pc(e,n,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(Pc(e,n,a),e=e.sibling;e!==null;)Pc(e,n,a),e=e.sibling}var kt=null,Pn=!1;function Yi(e,n,a){for(a=a.child;a!==null;)qd(e,n,a),a=a.sibling}function qd(e,n,a){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(gr,a)}catch{}switch(a.tag){case 5:Rt||zs(a,n);case 6:var h=kt,m=Pn;kt=null,Yi(e,n,a),kt=h,Pn=m,kt!==null&&(Pn?(e=kt,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):kt.removeChild(a.stateNode));break;case 18:kt!==null&&(Pn?(e=kt,a=a.stateNode,e.nodeType===8?Wo(e.parentNode,a):e.nodeType===1&&Wo(e,a),Jt(e)):Wo(kt,a.stateNode));break;case 4:h=kt,m=Pn,kt=a.stateNode.containerInfo,Pn=!0,Yi(e,n,a),kt=h,Pn=m;break;case 0:case 11:case 14:case 15:if(!Rt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var v=m,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&bc(a,n,S),m=m.next}while(m!==h)}Yi(e,n,a);break;case 1:if(!Rt&&(zs(a,n),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(T){ot(a,n,T)}Yi(e,n,a);break;case 21:Yi(e,n,a);break;case 22:a.mode&1?(Rt=(h=Rt)||a.memoizedState!==null,Yi(e,n,a),Rt=h):Yi(e,n,a);break;default:Yi(e,n,a)}}function Vd(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new dm),n.forEach(function(h){var m=km.bind(null,e,h);a.has(h)||(a.add(h),h.then(m,m))})}}function En(e,n){var a=n.deletions;if(a!==null)for(var h=0;h<a.length;h++){var m=a[h];try{var v=e,S=n,T=S;e:for(;T!==null;){switch(T.tag){case 5:kt=T.stateNode,Pn=!1;break e;case 3:kt=T.stateNode.containerInfo,Pn=!0;break e;case 4:kt=T.stateNode.containerInfo,Pn=!0;break e}T=T.return}if(kt===null)throw Error(r(160));qd(v,S,m),kt=null,Pn=!1;var R=m.alternate;R!==null&&(R.return=null),m.return=null}catch(H){ot(m,n,H)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Gd(n,e),n=n.sibling}function Gd(e,n){var a=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(En(n,e),Wn(e),h&4){try{ta(3,e,e.return),Nl(3,e)}catch(le){ot(e,e.return,le)}try{ta(5,e,e.return)}catch(le){ot(e,e.return,le)}}break;case 1:En(n,e),Wn(e),h&512&&a!==null&&zs(a,a.return);break;case 5:if(En(n,e),Wn(e),h&512&&a!==null&&zs(a,a.return),e.flags&32){var m=e.stateNode;try{bi(m,"")}catch(le){ot(e,e.return,le)}}if(h&4&&(m=e.stateNode,m!=null)){var v=e.memoizedProps,S=a!==null?a.memoizedProps:v,T=e.type,R=e.updateQueue;if(e.updateQueue=null,R!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&ao(m,v),qn(T,S);var H=qn(T,v);for(S=0;S<R.length;S+=2){var Y=R[S],X=R[S+1];Y==="style"?Yr(m,X):Y==="dangerouslySetInnerHTML"?Ta(m,X):Y==="children"?bi(m,X):W(m,Y,X,H)}switch(T){case"input":hr(m,v);break;case"textarea":Pa(m,v);break;case"select":var J=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var re=v.value;re!=null?Rn(m,!!v.multiple,re,!1):J!==!!v.multiple&&(v.defaultValue!=null?Rn(m,!!v.multiple,v.defaultValue,!0):Rn(m,!!v.multiple,v.multiple?[]:"",!1))}m[Wi]=v}catch(le){ot(e,e.return,le)}}break;case 6:if(En(n,e),Wn(e),h&4){if(e.stateNode===null)throw Error(r(162));m=e.stateNode,v=e.memoizedProps;try{m.nodeValue=v}catch(le){ot(e,e.return,le)}}break;case 3:if(En(n,e),Wn(e),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Jt(n.containerInfo)}catch(le){ot(e,e.return,le)}break;case 4:En(n,e),Wn(e);break;case 13:En(n,e),Wn(e),m=e.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Oc=et())),h&4&&Vd(e);break;case 22:if(Y=a!==null&&a.memoizedState!==null,e.mode&1?(Rt=(H=Rt)||Y,En(n,e),Rt=H):En(n,e),Wn(e),h&8192){if(H=e.memoizedState!==null,(e.stateNode.isHidden=H)&&!Y&&(e.mode&1)!==0)for(oe=e,Y=e.child;Y!==null;){for(X=oe=Y;oe!==null;){switch(J=oe,re=J.child,J.tag){case 0:case 11:case 14:case 15:ta(4,J,J.return);break;case 1:zs(J,J.return);var ae=J.stateNode;if(typeof ae.componentWillUnmount=="function"){h=J,a=J.return;try{n=h,ae.props=n.memoizedProps,ae.state=n.memoizedState,ae.componentWillUnmount()}catch(le){ot(h,a,le)}}break;case 5:zs(J,J.return);break;case 22:if(J.memoizedState!==null){Qd(X);continue}}re!==null?(re.return=J,oe=re):Qd(X)}Y=Y.sibling}e:for(Y=null,X=e;;){if(X.tag===5){if(Y===null){Y=X;try{m=X.stateNode,H?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=X.stateNode,R=X.memoizedProps.style,S=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=co("display",S))}catch(le){ot(e,e.return,le)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=H?"":X.memoizedProps}catch(le){ot(e,e.return,le)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===e)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===e)break e;for(;X.sibling===null;){if(X.return===null||X.return===e)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:En(n,e),Wn(e),h&4&&Vd(e);break;case 21:break;default:En(n,e),Wn(e)}}function Wn(e){var n=e.flags;if(n&2){try{e:{for(var a=e.return;a!==null;){if(Hd(a)){var h=a;break e}a=a.return}throw Error(r(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(bi(m,""),h.flags&=-33);var v=Wd(e);Pc(e,v,m);break;case 3:case 4:var S=h.stateNode.containerInfo,T=Wd(e);Cc(e,T,S);break;default:throw Error(r(161))}}catch(R){ot(e,e.return,R)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function pm(e,n,a){oe=e,Kd(e)}function Kd(e,n,a){for(var h=(e.mode&1)!==0;oe!==null;){var m=oe,v=m.child;if(m.tag===22&&h){var S=m.memoizedState!==null||jl;if(!S){var T=m.alternate,R=T!==null&&T.memoizedState!==null||Rt;T=jl;var H=Rt;if(jl=S,(Rt=R)&&!H)for(oe=m;oe!==null;)S=oe,R=S.child,S.tag===22&&S.memoizedState!==null?Yd(m):R!==null?(R.return=S,oe=R):Yd(m);for(;v!==null;)oe=v,Kd(v),v=v.sibling;oe=m,jl=T,Rt=H}Jd(e)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,oe=v):Jd(e)}}function Jd(e){for(;oe!==null;){var n=oe;if((n.flags&8772)!==0){var a=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Rt||Nl(5,n);break;case 1:var h=n.stateNode;if(n.flags&4&&!Rt)if(a===null)h.componentDidMount();else{var m=n.elementType===n.type?a.memoizedProps:Cn(n.type,a.memoizedProps);h.componentDidUpdate(m,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Qh(n,v,h);break;case 3:var S=n.updateQueue;if(S!==null){if(a=null,n.child!==null)switch(n.child.tag){case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}Qh(n,S,a)}break;case 5:var T=n.stateNode;if(a===null&&n.flags&4){a=T;var R=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var H=n.alternate;if(H!==null){var Y=H.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&Jt(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Rt||n.flags&512&&Lc(n)}catch(J){ot(n,n.return,J)}}if(n===e){oe=null;break}if(a=n.sibling,a!==null){a.return=n.return,oe=a;break}oe=n.return}}function Qd(e){for(;oe!==null;){var n=oe;if(n===e){oe=null;break}var a=n.sibling;if(a!==null){a.return=n.return,oe=a;break}oe=n.return}}function Yd(e){for(;oe!==null;){var n=oe;try{switch(n.tag){case 0:case 11:case 15:var a=n.return;try{Nl(4,n)}catch(R){ot(n,a,R)}break;case 1:var h=n.stateNode;if(typeof h.componentDidMount=="function"){var m=n.return;try{h.componentDidMount()}catch(R){ot(n,m,R)}}var v=n.return;try{Lc(n)}catch(R){ot(n,v,R)}break;case 5:var S=n.return;try{Lc(n)}catch(R){ot(n,S,R)}}}catch(R){ot(n,n.return,R)}if(n===e){oe=null;break}var T=n.sibling;if(T!==null){T.return=n.return,oe=T;break}oe=n.return}}var mm=Math.ceil,Rl=Q.ReactCurrentDispatcher,Ec=Q.ReactCurrentOwner,gn=Q.ReactCurrentBatchConfig,Ae=0,yt=null,ct=null,St=0,rn=0,Bs=Vi(0),_t=0,na=null,zr=0,Al=0,Tc=0,ia=null,Ht=null,Oc=0,Ds=1/0,pi=null,Il=!1,jc=null,Xi=null,Ml=!1,er=null,zl=0,ra=0,Nc=null,Bl=-1,Dl=0;function Bt(){return(Ae&6)!==0?et():Bl!==-1?Bl:Bl=et()}function tr(e){return(e.mode&1)===0?1:(Ae&2)!==0&&St!==0?St&-St:Yp.transition!==null?(Dl===0&&(Dl=Fa()),Dl):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Oe(e.type)),e)}function Tn(e,n,a,h){if(50<ra)throw ra=0,Nc=null,Error(r(185));Gt(e,a,h),((Ae&2)===0||e!==yt)&&(e===yt&&((Ae&2)===0&&(Al|=a),_t===4&&nr(e,St)),Wt(e,h),a===1&&Ae===0&&(n.mode&1)===0&&(Ds=et()+500,fl&&Ki()))}function Wt(e,n){var a=e.callbackNode;ss(e,n);var h=Ge(e,e===yt?St:0);if(h===0)a!==null&&yo(a),e.callbackNode=null,e.callbackPriority=0;else if(n=h&-h,e.callbackPriority!==n){if(a!=null&&yo(a),n===1)e.tag===0?Qp(ef.bind(null,e)):Dh(ef.bind(null,e)),Tt(function(){(Ae&6)===0&&Ki()}),a=null;else{switch(Oi(h)){case 1:a=wo;break;case 4:a=$a;break;case 16:a=is;break;case 536870912:a=Ci;break;default:a=is}a=uf(a,Xd.bind(null,e))}e.callbackPriority=n,e.callbackNode=a}}function Xd(e,n){if(Bl=-1,Dl=0,(Ae&6)!==0)throw Error(r(327));var a=e.callbackNode;if(Us()&&e.callbackNode!==a)return null;var h=Ge(e,e===yt?St:0);if(h===0)return null;if((h&30)!==0||(h&e.expiredLanes)!==0||n)n=Ul(e,h);else{n=h;var m=Ae;Ae|=2;var v=nf();(yt!==e||St!==n)&&(pi=null,Ds=et()+500,Dr(e,n));do try{vm();break}catch(T){tf(e,T)}while(!0);Ju(),Rl.current=v,Ae=m,ct!==null?n=0:(yt=null,St=0,n=_t)}if(n!==0){if(n===2&&(m=Pt(e),m!==0&&(h=m,n=Rc(e,m))),n===1)throw a=na,Dr(e,0),nr(e,h),Wt(e,et()),a;if(n===6)nr(e,h);else{if(m=e.current.alternate,(h&30)===0&&!_m(m)&&(n=Ul(e,h),n===2&&(v=Pt(e),v!==0&&(h=v,n=Rc(e,v))),n===1))throw a=na,Dr(e,0),nr(e,h),Wt(e,et()),a;switch(e.finishedWork=m,e.finishedLanes=h,n){case 0:case 1:throw Error(r(345));case 2:Ur(e,Ht,pi);break;case 3:if(nr(e,h),(h&130023424)===h&&(n=Oc+500-et(),10<n)){if(Ge(e,0)!==0)break;if(m=e.suspendedLanes,(m&h)!==h){Bt(),e.pingedLanes|=e.suspendedLanes&m;break}e.timeoutHandle=pt(Ur.bind(null,e,Ht,pi),n);break}Ur(e,Ht,pi);break;case 4:if(nr(e,h),(h&4194240)===h)break;for(n=e.eventTimes,m=-1;0<h;){var S=31-Le(h);v=1<<S,S=n[S],S>m&&(m=S),h&=~v}if(h=m,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*mm(h/1960))-h,10<h){e.timeoutHandle=pt(Ur.bind(null,e,Ht,pi),h);break}Ur(e,Ht,pi);break;case 5:Ur(e,Ht,pi);break;default:throw Error(r(329))}}}return Wt(e,et()),e.callbackNode===a?Xd.bind(null,e):null}function Rc(e,n){var a=ia;return e.current.memoizedState.isDehydrated&&(Dr(e,n).flags|=256),e=Ul(e,n),e!==2&&(n=Ht,Ht=a,n!==null&&Ac(n)),e}function Ac(e){Ht===null?Ht=e:Ht.push.apply(Ht,e)}function _m(e){for(var n=e;;){if(n.flags&16384){var a=n.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var m=a[h],v=m.getSnapshot;m=m.value;try{if(!Xt(v(),m))return!1}catch{return!1}}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function nr(e,n){for(n&=~Tc,n&=~Al,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var a=31-Le(n),h=1<<a;e[a]=-1,n&=~h}}function ef(e){if((Ae&6)!==0)throw Error(r(327));Us();var n=Ge(e,0);if((n&1)===0)return Wt(e,et()),null;var a=Ul(e,n);if(e.tag!==0&&a===2){var h=Pt(e);h!==0&&(n=h,a=Rc(e,h))}if(a===1)throw a=na,Dr(e,0),nr(e,n),Wt(e,et()),a;if(a===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Ur(e,Ht,pi),Wt(e,et()),null}function Ic(e,n){var a=Ae;Ae|=1;try{return e(n)}finally{Ae=a,Ae===0&&(Ds=et()+500,fl&&Ki())}}function Br(e){er!==null&&er.tag===0&&(Ae&6)===0&&Us();var n=Ae;Ae|=1;var a=gn.transition,h=Re;try{if(gn.transition=null,Re=1,e)return e()}finally{Re=h,gn.transition=a,Ae=n,(Ae&6)===0&&Ki()}}function Mc(){rn=Bs.current,Ye(Bs)}function Dr(e,n){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,ut(a)),ct!==null)for(a=ct.return;a!==null;){var h=a;switch(Wu(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&hl();break;case 3:Is(),Ye($t),Ye(Ot),rc();break;case 5:nc(h);break;case 4:Is();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:Qu(h.type._context);break;case 22:case 23:Mc()}a=a.return}if(yt=e,ct=e=ir(e.current,null),St=rn=n,_t=0,na=null,Tc=Al=zr=0,Ht=ia=null,Ar!==null){for(n=0;n<Ar.length;n++)if(a=Ar[n],h=a.interleaved,h!==null){a.interleaved=null;var m=h.next,v=a.pending;if(v!==null){var S=v.next;v.next=m,h.next=S}a.pending=h}Ar=null}return e}function tf(e,n){do{var a=ct;try{if(Ju(),Sl.current=Pl,bl){for(var h=it.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}bl=!1}if(Mr=0,vt=mt=it=null,Jo=!1,Qo=0,Ec.current=null,a===null||a.return===null){_t=1,na=n,ct=null;break}e:{var v=e,S=a.return,T=a,R=n;if(n=St,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var H=R,Y=T,X=Y.tag;if((Y.mode&1)===0&&(X===0||X===11||X===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var re=Cd(S);if(re!==null){re.flags&=-257,Pd(re,S,T,v,n),re.mode&1&&Ld(v,H,n),n=re,R=H;var ae=n.updateQueue;if(ae===null){var le=new Set;le.add(R),n.updateQueue=le}else ae.add(R);break e}else{if((n&1)===0){Ld(v,H,n),zc();break e}R=Error(r(426))}}else if(Xe&&T.mode&1){var lt=Cd(S);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Pd(lt,S,T,v,n),Gu(Ms(R,T));break e}}v=R=Ms(R,T),_t!==4&&(_t=2),ia===null?ia=[v]:ia.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var D=Sd(v,R,n);Jh(v,D);break e;case 1:T=R;var I=v.type,U=v.stateNode;if((v.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Xi===null||!Xi.has(U)))){v.flags|=65536,n&=-n,v.lanes|=n;var ee=bd(v,T,n);Jh(v,ee);break e}}v=v.return}while(v!==null)}sf(a)}catch(he){n=he,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function nf(){var e=Rl.current;return Rl.current=Pl,e===null?Pl:e}function zc(){(_t===0||_t===3||_t===2)&&(_t=4),yt===null||(zr&268435455)===0&&(Al&268435455)===0||nr(yt,St)}function Ul(e,n){var a=Ae;Ae|=2;var h=nf();(yt!==e||St!==n)&&(pi=null,Dr(e,n));do try{gm();break}catch(m){tf(e,m)}while(!0);if(Ju(),Ae=a,Rl.current=h,ct!==null)throw Error(r(261));return yt=null,St=0,_t}function gm(){for(;ct!==null;)rf(ct)}function vm(){for(;ct!==null&&!bu();)rf(ct)}function rf(e){var n=lf(e.alternate,e,rn);e.memoizedProps=e.pendingProps,n===null?sf(e):ct=n,Ec.current=null}function sf(e){var n=e;do{var a=n.alternate;if(e=n.return,(n.flags&32768)===0){if(a=cm(a,n,rn),a!==null){ct=a;return}}else{if(a=hm(a,n),a!==null){a.flags&=32767,ct=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_t=6,ct=null;return}}if(n=n.sibling,n!==null){ct=n;return}ct=n=e}while(n!==null);_t===0&&(_t=5)}function Ur(e,n,a){var h=Re,m=gn.transition;try{gn.transition=null,Re=1,ym(e,n,a,h)}finally{gn.transition=m,Re=h}return null}function ym(e,n,a,h){do Us();while(er!==null);if((Ae&6)!==0)throw Error(r(327));a=e.finishedWork;var m=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var v=a.lanes|a.childLanes;if(st(e,v),e===yt&&(ct=yt=null,St=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ml||(Ml=!0,uf(is,function(){return Us(),null})),v=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||v){v=gn.transition,gn.transition=null;var S=Re;Re=1;var T=Ae;Ae|=4,Ec.current=null,fm(e,a),Gd(a,e),cn(ge),Sr=!!ie,ge=ie=null,e.current=a,pm(a),ns(),Ae=T,Re=S,gn.transition=v}else e.current=a;if(Ml&&(Ml=!1,er=e,zl=m),v=e.pendingLanes,v===0&&(Xi=null),vr(a.stateNode),Wt(e,et()),n!==null)for(h=e.onRecoverableError,a=0;a<n.length;a++)m=n[a],h(m.value,{componentStack:m.stack,digest:m.digest});if(Il)throw Il=!1,e=jc,jc=null,e;return(zl&1)!==0&&e.tag!==0&&Us(),v=e.pendingLanes,(v&1)!==0?e===Nc?ra++:(ra=0,Nc=e):ra=0,Ki(),null}function Us(){if(er!==null){var e=Oi(zl),n=gn.transition,a=Re;try{if(gn.transition=null,Re=16>e?16:e,er===null)var h=!1;else{if(e=er,er=null,zl=0,(Ae&6)!==0)throw Error(r(331));var m=Ae;for(Ae|=4,oe=e.current;oe!==null;){var v=oe,S=v.child;if((oe.flags&16)!==0){var T=v.deletions;if(T!==null){for(var R=0;R<T.length;R++){var H=T[R];for(oe=H;oe!==null;){var Y=oe;switch(Y.tag){case 0:case 11:case 15:ta(8,Y,v)}var X=Y.child;if(X!==null)X.return=Y,oe=X;else for(;oe!==null;){Y=oe;var J=Y.sibling,re=Y.return;if(Zd(Y),Y===H){oe=null;break}if(J!==null){J.return=re,oe=J;break}oe=re}}}var ae=v.alternate;if(ae!==null){var le=ae.child;if(le!==null){ae.child=null;do{var lt=le.sibling;le.sibling=null,le=lt}while(le!==null)}}oe=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,oe=S;else e:for(;oe!==null;){if(v=oe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ta(9,v,v.return)}var D=v.sibling;if(D!==null){D.return=v.return,oe=D;break e}oe=v.return}}var I=e.current;for(oe=I;oe!==null;){S=oe;var U=S.child;if((S.subtreeFlags&2064)!==0&&U!==null)U.return=S,oe=U;else e:for(S=I;oe!==null;){if(T=oe,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Nl(9,T)}}catch(he){ot(T,T.return,he)}if(T===S){oe=null;break e}var ee=T.sibling;if(ee!==null){ee.return=T.return,oe=ee;break e}oe=T.return}}if(Ae=m,Ki(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(gr,e)}catch{}h=!0}return h}finally{Re=a,gn.transition=n}}return!1}function of(e,n,a){n=Ms(a,n),n=Sd(e,n,1),e=Qi(e,n,1),n=Bt(),e!==null&&(Gt(e,1,n),Wt(e,n))}function ot(e,n,a){if(e.tag===3)of(e,e,a);else for(;n!==null;){if(n.tag===3){of(n,e,a);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Xi===null||!Xi.has(h))){e=Ms(a,e),e=bd(n,e,1),n=Qi(n,e,1),e=Bt(),n!==null&&(Gt(n,1,e),Wt(n,e));break}}n=n.return}}function wm(e,n,a){var h=e.pingCache;h!==null&&h.delete(n),n=Bt(),e.pingedLanes|=e.suspendedLanes&a,yt===e&&(St&a)===a&&(_t===4||_t===3&&(St&130023424)===St&&500>et()-Oc?Dr(e,0):Tc|=a),Wt(e,n)}function af(e,n){n===0&&((e.mode&1)===0?n=1:(n=Ei,Ei<<=1,(Ei&130023424)===0&&(Ei=4194304)));var a=Bt();e=hi(e,n),e!==null&&(Gt(e,n,a),Wt(e,a))}function xm(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),af(e,a)}function km(e,n){var a=0;switch(e.tag){case 13:var h=e.stateNode,m=e.memoizedState;m!==null&&(a=m.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(r(314))}h!==null&&h.delete(n),af(e,a)}var lf;lf=function(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps||$t.current)Zt=!0;else{if((e.lanes&a)===0&&(n.flags&128)===0)return Zt=!1,um(e,n,a);Zt=(e.flags&131072)!==0}else Zt=!1,Xe&&(n.flags&1048576)!==0&&Uh(n,ml,n.index);switch(n.lanes=0,n.tag){case 2:var h=n.type;Ol(e,n),e=n.pendingProps;var m=Es(n,Ot.current);As(n,a),m=ac(null,n,h,e,m,a);var v=lc();return n.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ft(h)?(v=!0,dl(n)):v=!1,n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,ec(n),m.updater=El,n.stateNode=m,m._reactInternals=n,pc(n,h,e,a),n=vc(null,n,h,!0,v,a)):(n.tag=0,Xe&&v&&Hu(n),zt(null,n,m,a),n=n.child),n;case 16:h=n.elementType;e:{switch(Ol(e,n),e=n.pendingProps,m=h._init,h=m(h._payload),n.type=h,m=n.tag=bm(h),e=Cn(h,e),m){case 0:n=gc(null,n,h,e,a);break e;case 1:n=Rd(null,n,h,e,a);break e;case 11:n=Ed(null,n,h,e,a);break e;case 14:n=Td(null,n,h,Cn(h.type,e),a);break e}throw Error(r(306,h,""))}return n;case 0:return h=n.type,m=n.pendingProps,m=n.elementType===h?m:Cn(h,m),gc(e,n,h,m,a);case 1:return h=n.type,m=n.pendingProps,m=n.elementType===h?m:Cn(h,m),Rd(e,n,h,m,a);case 3:e:{if(Ad(n),e===null)throw Error(r(387));h=n.pendingProps,v=n.memoizedState,m=v.element,Kh(e,n),xl(n,h,null,a);var S=n.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){m=Ms(Error(r(423)),n),n=Id(e,n,h,a,m);break e}else if(h!==m){m=Ms(Error(r(424)),n),n=Id(e,n,h,a,m);break e}else for(nn=Fn(n.stateNode.containerInfo.firstChild),tn=n,Xe=!0,Ln=null,a=Vh(n,null,h,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(js(),h===m){n=fi(e,n,a);break e}zt(e,n,h,a)}n=n.child}return n;case 5:return Yh(n),e===null&&Vu(n),h=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,S=m.children,Pe(h,m)?S=null:v!==null&&Pe(h,v)&&(n.flags|=32),Nd(e,n),zt(e,n,S,a),n.child;case 6:return e===null&&Vu(n),null;case 13:return Md(e,n,a);case 4:return tc(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Ns(n,null,h,a):zt(e,n,h,a),n.child;case 11:return h=n.type,m=n.pendingProps,m=n.elementType===h?m:Cn(h,m),Ed(e,n,h,m,a);case 7:return zt(e,n,n.pendingProps,a),n.child;case 8:return zt(e,n,n.pendingProps.children,a),n.child;case 12:return zt(e,n,n.pendingProps.children,a),n.child;case 10:e:{if(h=n.type._context,m=n.pendingProps,v=n.memoizedProps,S=m.value,Ke(vl,h._currentValue),h._currentValue=S,v!==null)if(Xt(v.value,S)){if(v.children===m.children&&!$t.current){n=fi(e,n,a);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var T=v.dependencies;if(T!==null){S=v.child;for(var R=T.firstContext;R!==null;){if(R.context===h){if(v.tag===1){R=di(-1,a&-a),R.tag=2;var H=v.updateQueue;if(H!==null){H=H.shared;var Y=H.pending;Y===null?R.next=R:(R.next=Y.next,Y.next=R),H.pending=R}}v.lanes|=a,R=v.alternate,R!==null&&(R.lanes|=a),Yu(v.return,a,n),T.lanes|=a;break}R=R.next}}else if(v.tag===10)S=v.type===n.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(r(341));S.lanes|=a,T=S.alternate,T!==null&&(T.lanes|=a),Yu(S,a,n),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===n){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}zt(e,n,m.children,a),n=n.child}return n;case 9:return m=n.type,h=n.pendingProps.children,As(n,a),m=mn(m),h=h(m),n.flags|=1,zt(e,n,h,a),n.child;case 14:return h=n.type,m=Cn(h,n.pendingProps),m=Cn(h.type,m),Td(e,n,h,m,a);case 15:return Od(e,n,n.type,n.pendingProps,a);case 17:return h=n.type,m=n.pendingProps,m=n.elementType===h?m:Cn(h,m),Ol(e,n),n.tag=1,Ft(h)?(e=!0,dl(n)):e=!1,As(n,a),xd(n,h,m),pc(n,h,m,a),vc(null,n,h,!0,e,a);case 19:return Bd(e,n,a);case 22:return jd(e,n,a)}throw Error(r(156,n.tag))};function uf(e,n){return Ua(e,n)}function Sm(e,n,a,h){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,n,a,h){return new Sm(e,n,a,h)}function Bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bm(e){if(typeof e=="function")return Bc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===te)return 11;if(e===He)return 14}return 2}function ir(e,n){var a=e.alternate;return a===null?(a=vn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function $l(e,n,a,h,m,v){var S=2;if(h=e,typeof e=="function")Bc(e)&&(S=1);else if(typeof e=="string")S=5;else e:switch(e){case Ce:return $r(a.children,m,v,n);case Be:S=8,m|=8;break;case De:return e=vn(12,a,n,m|2),e.elementType=De,e.lanes=v,e;case Ve:return e=vn(13,a,n,m),e.elementType=Ve,e.lanes=v,e;case Ue:return e=vn(19,a,n,m),e.elementType=Ue,e.lanes=v,e;case Ie:return Fl(a,m,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dt:S=10;break e;case qe:S=9;break e;case te:S=11;break e;case He:S=14;break e;case Ne:S=16,h=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=vn(S,a,n,m),n.elementType=e,n.type=h,n.lanes=v,n}function $r(e,n,a,h){return e=vn(7,e,h,n),e.lanes=a,e}function Fl(e,n,a,h){return e=vn(22,e,h,n),e.elementType=Ie,e.lanes=a,e.stateNode={isHidden:!1},e}function Dc(e,n,a){return e=vn(6,e,null,n),e.lanes=a,e}function Uc(e,n,a){return n=vn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Lm(e,n,a,h,m){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ti(0),this.expirationTimes=Ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function $c(e,n,a,h,m,v,S,T,R){return e=new Lm(e,n,a,T,R),n===1?(n=1,v===!0&&(n|=8)):n=0,v=vn(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ec(v),e}function Cm(e,n,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:h==null?null:""+h,children:e,containerInfo:n,implementation:a}}function cf(e){if(!e)return Gi;e=e._reactInternals;e:{if(An(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ft(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var a=e.type;if(Ft(a))return zh(e,a,n)}return n}function hf(e,n,a,h,m,v,S,T,R){return e=$c(a,h,!0,e,m,v,S,T,R),e.context=cf(null),a=e.current,h=Bt(),m=tr(a),v=di(h,m),v.callback=n??null,Qi(a,v,m),e.current.lanes=m,Gt(e,m,h),Wt(e,h),e}function Zl(e,n,a,h){var m=n.current,v=Bt(),S=tr(m);return a=cf(a),n.context===null?n.context=a:n.pendingContext=a,n=di(v,S),n.payload={element:e},h=h===void 0?null:h,h!==null&&(n.callback=h),e=Qi(m,n,S),e!==null&&(Tn(e,m,S,v),wl(e,m,S)),S}function Hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function df(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Fc(e,n){df(e,n),(e=e.alternate)&&df(e,n)}function Pm(){return null}var ff=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}Wl.prototype.render=Zc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));Zl(e,n,null,null)},Wl.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Br(function(){Zl(null,e,null,null)}),n[$e]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var n=ls();e={blockedOn:null,target:e,priority:n};for(var a=0;a<ft.length&&n!==0&&n<ft[a].priority;a++);ft.splice(a,0,e),a===0&&us(e)}};function Hc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ql(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pf(){}function Em(e,n,a,h,m){if(m){if(typeof h=="function"){var v=h;h=function(){var H=Hl(S);v.call(H)}}var S=hf(n,h,e,0,null,!1,!1,"",pf);return e._reactRootContainer=S,e[$e]=S.current,Zi(e.nodeType===8?e.parentNode:e),Br(),S}for(;m=e.lastChild;)e.removeChild(m);if(typeof h=="function"){var T=h;h=function(){var H=Hl(R);T.call(H)}}var R=$c(e,0,!1,null,null,!1,!1,"",pf);return e._reactRootContainer=R,e[$e]=R.current,Zi(e.nodeType===8?e.parentNode:e),Br(function(){Zl(n,R,a,h)}),R}function Vl(e,n,a,h,m){var v=a._reactRootContainer;if(v){var S=v;if(typeof m=="function"){var T=m;m=function(){var R=Hl(S);T.call(R)}}Zl(n,S,e,m)}else S=Em(a,n,e,m,h);return Hl(S)}os=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var a=be(n.pendingLanes);a!==0&&(wn(n,a|1),Wt(n,et()),(Ae&6)===0&&(Ds=et()+500,Ki()))}break;case 13:Br(function(){var h=hi(e,1);if(h!==null){var m=Bt();Tn(h,e,1,m)}}),Fc(e,1)}},Jn=function(e){if(e.tag===13){var n=hi(e,134217728);if(n!==null){var a=Bt();Tn(n,e,134217728,a)}Fc(e,134217728)}},as=function(e){if(e.tag===13){var n=tr(e),a=hi(e,n);if(a!==null){var h=Bt();Tn(a,e,n,h)}Fc(e,n)}},ls=function(){return Re},yr=function(e,n){var a=Re;try{return Re=e,n()}finally{Re=a}},Xr=function(e,n,a){switch(n){case"input":if(hr(e,a),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<a.length;n++){var h=a[n];if(h!==e&&h.form===e.form){var m=Cs(h);if(!m)throw Error(r(90));xi(h),hr(h,m)}}}break;case"textarea":Pa(e,a);break;case"select":n=a.value,n!=null&&Rn(e,!!a.multiple,n,!1)}},Aa=Ic,Ia=Br;var Tm={usingClientEntryPoint:!1,Events:[oi,ai,Cs,Na,Ra,Ic]},sa={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Om={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ba(e),e===null?null:e.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||Pm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{gr=Gl.inject(Om),Vt=Gl}catch{}}return qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tm,qt.createPortal=function(e,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hc(n))throw Error(r(200));return Cm(e,n,null,a)},qt.createRoot=function(e,n){if(!Hc(e))throw Error(r(299));var a=!1,h="",m=ff;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),n=$c(e,1,!1,null,null,a,!1,h,m),e[$e]=n.current,Zi(e.nodeType===8?e.parentNode:e),new Zc(n)},qt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Ba(n),e=e===null?null:e.stateNode,e},qt.flushSync=function(e){return Br(e)},qt.hydrate=function(e,n,a){if(!ql(n))throw Error(r(200));return Vl(null,e,n,!0,a)},qt.hydrateRoot=function(e,n,a){if(!Hc(e))throw Error(r(405));var h=a!=null&&a.hydratedSources||null,m=!1,v="",S=ff;if(a!=null&&(a.unstable_strictMode===!0&&(m=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),n=hf(n,null,e,1,a??null,m,!1,v,S),e[$e]=n.current,Zi(e),h)for(e=0;e<h.length;e++)a=h[e],m=a._getVersion,m=m(a._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[a,m]:n.mutableSourceEagerHydrationData.push(a,m);return new Wl(n)},qt.render=function(e,n,a){if(!ql(n))throw Error(r(200));return Vl(null,e,n,!1,a)},qt.unmountComponentAtNode=function(e){if(!ql(e))throw Error(r(40));return e._reactRootContainer?(Br(function(){Vl(null,null,e,!1,function(){e._reactRootContainer=null,e[$e]=null})}),!0):!1},qt.unstable_batchedUpdates=Ic,qt.unstable_renderSubtreeIntoContainer=function(e,n,a,h){if(!ql(a))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Vl(e,n,a,!1,h)},qt.version="18.3.1-next-f1338f8080-20240426",qt}var kf;function cp(){if(kf)return Vc.exports;kf=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(i){console.error(i)}}return o(),Vc.exports=Dm(),Vc.exports}var Sf;function Um(){if(Sf)return Kl;Sf=1;var o=cp();return Kl.createRoot=o.createRoot,Kl.hydrateRoot=o.hydrateRoot,Kl}var $m=Um();const Fm=Ch($m);var Zm=cp();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(o[u]=r[u])}return o},_a.apply(this,arguments)}var ar;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(ar||(ar={}));const bf="popstate";function Hm(o){o===void 0&&(o={});function i(u,f){let{pathname:l,search:d,hash:_}=u.location;return ah("",{pathname:l,search:d,hash:_},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function r(u,f){return typeof f=="string"?f:su(f)}return qm(i,r,null,o)}function rt(o,i){if(o===!1||o===null||typeof o>"u")throw new Error(i)}function Eh(o,i){if(!o){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Wm(){return Math.random().toString(36).substr(2,8)}function Lf(o,i){return{usr:o.state,key:o.key,idx:i}}function ah(o,i,r,u){return r===void 0&&(r=null),_a({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof i=="string"?eo(i):i,{state:r,key:i&&i.key||u||Wm()})}function su(o){let{pathname:i="/",search:r="",hash:u=""}=o;return r&&r!=="?"&&(i+=r.charAt(0)==="?"?r:"?"+r),u&&u!=="#"&&(i+=u.charAt(0)==="#"?u:"#"+u),i}function eo(o){let i={};if(o){let r=o.indexOf("#");r>=0&&(i.hash=o.substr(r),o=o.substr(0,r));let u=o.indexOf("?");u>=0&&(i.search=o.substr(u),o=o.substr(0,u)),o&&(i.pathname=o)}return i}function qm(o,i,r,u){u===void 0&&(u={});let{window:f=document.defaultView,v5Compat:l=!1}=u,d=f.history,_=ar.Pop,g=null,w=k();w==null&&(w=0,d.replaceState(_a({},d.state,{idx:w}),""));function k(){return(d.state||{idx:null}).idx}function b(){_=ar.Pop;let M=k(),$=M==null?null:M-w;w=M,g&&g({action:_,location:O.location,delta:$})}function P(M,$){_=ar.Push;let z=ah(O.location,M,$);w=k()+1;let W=Lf(z,w),Q=O.createHref(z);try{d.pushState(W,"",Q)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;f.location.assign(Q)}l&&g&&g({action:_,location:O.location,delta:1})}function E(M,$){_=ar.Replace;let z=ah(O.location,M,$);w=k();let W=Lf(z,w),Q=O.createHref(z);d.replaceState(W,"",Q),l&&g&&g({action:_,location:O.location,delta:0})}function j(M){let $=f.location.origin!=="null"?f.location.origin:f.location.href,z=typeof M=="string"?M:su(M);return z=z.replace(/ $/,"%20"),rt($,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,$)}let O={get action(){return _},get location(){return o(f,d)},listen(M){if(g)throw new Error("A history only accepts one active listener");return f.addEventListener(bf,b),g=M,()=>{f.removeEventListener(bf,b),g=null}},createHref(M){return i(f,M)},createURL:j,encodeLocation(M){let $=j(M);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:P,replace:E,go(M){return d.go(M)}};return O}var Cf;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(Cf||(Cf={}));function Vm(o,i,r){return r===void 0&&(r="/"),Gm(o,i,r)}function Gm(o,i,r,u){let f=typeof i=="string"?eo(i):i,l=Xs(f.pathname||"/",r);if(l==null)return null;let d=hp(o);Km(d);let _=null;for(let g=0;_==null&&g<d.length;++g){let w=o_(l);_=r_(d[g],w)}return _}function hp(o,i,r,u){i===void 0&&(i=[]),r===void 0&&(r=[]),u===void 0&&(u="");let f=(l,d,_)=>{let g={relativePath:_===void 0?l.path||"":_,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};g.relativePath.startsWith("/")&&(rt(g.relativePath.startsWith(u),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+u+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(u.length));let w=ur([u,g.relativePath]),k=r.concat(g);l.children&&l.children.length>0&&(rt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),hp(l.children,i,k,w)),!(l.path==null&&!l.index)&&i.push({path:w,score:n_(w,l.index),routesMeta:k})};return o.forEach((l,d)=>{var _;if(l.path===""||!((_=l.path)!=null&&_.includes("?")))f(l,d);else for(let g of dp(l.path))f(l,d,g)}),i}function dp(o){let i=o.split("/");if(i.length===0)return[];let[r,...u]=i,f=r.endsWith("?"),l=r.replace(/\?$/,"");if(u.length===0)return f?[l,""]:[l];let d=dp(u.join("/")),_=[];return _.push(...d.map(g=>g===""?l:[l,g].join("/"))),f&&_.push(...d),_.map(g=>o.startsWith("/")&&g===""?"/":g)}function Km(o){o.sort((i,r)=>i.score!==r.score?r.score-i.score:i_(i.routesMeta.map(u=>u.childrenIndex),r.routesMeta.map(u=>u.childrenIndex)))}const Jm=/^:[\w-]+$/,Qm=3,Ym=2,Xm=1,e_=10,t_=-2,Pf=o=>o==="*";function n_(o,i){let r=o.split("/"),u=r.length;return r.some(Pf)&&(u+=t_),i&&(u+=Ym),r.filter(f=>!Pf(f)).reduce((f,l)=>f+(Jm.test(l)?Qm:l===""?Xm:e_),u)}function i_(o,i){return o.length===i.length&&o.slice(0,-1).every((u,f)=>u===i[f])?o[o.length-1]-i[i.length-1]:0}function r_(o,i,r){let{routesMeta:u}=o,f={},l="/",d=[];for(let _=0;_<u.length;++_){let g=u[_],w=_===u.length-1,k=l==="/"?i:i.slice(l.length)||"/",b=lh({path:g.relativePath,caseSensitive:g.caseSensitive,end:w},k),P=g.route;if(!b)return null;Object.assign(f,b.params),d.push({params:f,pathname:ur([l,b.pathname]),pathnameBase:h_(ur([l,b.pathnameBase])),route:P}),b.pathnameBase!=="/"&&(l=ur([l,b.pathnameBase]))}return d}function lh(o,i){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[r,u]=s_(o.path,o.caseSensitive,o.end),f=i.match(r);if(!f)return null;let l=f[0],d=l.replace(/(.)\/+$/,"$1"),_=f.slice(1);return{params:u.reduce((w,k,b)=>{let{paramName:P,isOptional:E}=k;if(P==="*"){let O=_[b]||"";d=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const j=_[b];return E&&!j?w[P]=void 0:w[P]=(j||"").replace(/%2F/g,"/"),w},{}),pathname:l,pathnameBase:d,pattern:o}}function s_(o,i,r){i===void 0&&(i=!1),r===void 0&&(r=!0),Eh(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let u=[],f="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,_,g)=>(u.push({paramName:_,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(u.push({paramName:"*"}),f+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?f+="\\/*$":o!==""&&o!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,i?void 0:"i"),u]}function o_(o){try{return o.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Eh(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),o}}function Xs(o,i){if(i==="/")return o;if(!o.toLowerCase().startsWith(i.toLowerCase()))return null;let r=i.endsWith("/")?i.length-1:i.length,u=o.charAt(r);return u&&u!=="/"?null:o.slice(r)||"/"}const a_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l_=o=>a_.test(o);function u_(o,i){i===void 0&&(i="/");let{pathname:r,search:u="",hash:f=""}=typeof o=="string"?eo(o):o,l;if(r)if(l_(r))l=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),Eh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+r))}r.startsWith("/")?l=Ef(r.substring(1),"/"):l=Ef(r,i)}else l=i;return{pathname:l,search:d_(u),hash:f_(f)}}function Ef(o,i){let r=i.replace(/\/+$/,"").split("/");return o.split("/").forEach(f=>{f===".."?r.length>1&&r.pop():f!=="."&&r.push(f)}),r.length>1?r.join("/"):"/"}function Jc(o,i,r,u){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(u)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function c_(o){return o.filter((i,r)=>r===0||i.route.path&&i.route.path.length>0)}function Th(o,i){let r=c_(o);return i?r.map((u,f)=>f===r.length-1?u.pathname:u.pathnameBase):r.map(u=>u.pathnameBase)}function Oh(o,i,r,u){u===void 0&&(u=!1);let f;typeof o=="string"?f=eo(o):(f=_a({},o),rt(!f.pathname||!f.pathname.includes("?"),Jc("?","pathname","search",f)),rt(!f.pathname||!f.pathname.includes("#"),Jc("#","pathname","hash",f)),rt(!f.search||!f.search.includes("#"),Jc("#","search","hash",f)));let l=o===""||f.pathname==="",d=l?"/":f.pathname,_;if(d==null)_=r;else{let b=i.length-1;if(!u&&d.startsWith("..")){let P=d.split("/");for(;P[0]==="..";)P.shift(),b-=1;f.pathname=P.join("/")}_=b>=0?i[b]:"/"}let g=u_(f,_),w=d&&d!=="/"&&d.endsWith("/"),k=(l||d===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(w||k)&&(g.pathname+="/"),g}const ur=o=>o.join("/").replace(/\/\/+/g,"/"),h_=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),d_=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,f_=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function p_(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const fp=["post","put","patch","delete"];new Set(fp);const m_=["get",...fp];new Set(m_);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ga(){return ga=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(o[u]=r[u])}return o},ga.apply(this,arguments)}const cu=Z.createContext(null),pp=Z.createContext(null),gi=Z.createContext(null),hu=Z.createContext(null),vi=Z.createContext({outlet:null,matches:[],isDataRoute:!1}),mp=Z.createContext(null);function __(o,i){let{relative:r}=i===void 0?{}:i;to()||rt(!1);let{basename:u,navigator:f}=Z.useContext(gi),{hash:l,pathname:d,search:_}=du(o,{relative:r}),g=d;return u!=="/"&&(g=d==="/"?u:ur([u,d])),f.createHref({pathname:g,search:_,hash:l})}function to(){return Z.useContext(hu)!=null}function no(){return to()||rt(!1),Z.useContext(hu).location}function _p(o){Z.useContext(gi).static||Z.useLayoutEffect(o)}function io(){let{isDataRoute:o}=Z.useContext(vi);return o?O_():g_()}function g_(){to()||rt(!1);let o=Z.useContext(cu),{basename:i,future:r,navigator:u}=Z.useContext(gi),{matches:f}=Z.useContext(vi),{pathname:l}=no(),d=JSON.stringify(Th(f,r.v7_relativeSplatPath)),_=Z.useRef(!1);return _p(()=>{_.current=!0}),Z.useCallback(function(w,k){if(k===void 0&&(k={}),!_.current)return;if(typeof w=="number"){u.go(w);return}let b=Oh(w,JSON.parse(d),l,k.relative==="path");o==null&&i!=="/"&&(b.pathname=b.pathname==="/"?i:ur([i,b.pathname])),(k.replace?u.replace:u.push)(b,k.state,k)},[i,u,d,l,o])}function v_(){let{matches:o}=Z.useContext(vi),i=o[o.length-1];return i?i.params:{}}function du(o,i){let{relative:r}=i===void 0?{}:i,{future:u}=Z.useContext(gi),{matches:f}=Z.useContext(vi),{pathname:l}=no(),d=JSON.stringify(Th(f,u.v7_relativeSplatPath));return Z.useMemo(()=>Oh(o,JSON.parse(d),l,r==="path"),[o,d,l,r])}function y_(o,i){return w_(o,i)}function w_(o,i,r,u){to()||rt(!1);let{navigator:f}=Z.useContext(gi),{matches:l}=Z.useContext(vi),d=l[l.length-1],_=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let w=no(),k;if(i){var b;let M=typeof i=="string"?eo(i):i;g==="/"||(b=M.pathname)!=null&&b.startsWith(g)||rt(!1),k=M}else k=w;let P=k.pathname||"/",E=P;if(g!=="/"){let M=g.replace(/^\//,"").split("/");E="/"+P.replace(/^\//,"").split("/").slice(M.length).join("/")}let j=Vm(o,{pathname:E}),O=L_(j&&j.map(M=>Object.assign({},M,{params:Object.assign({},_,M.params),pathname:ur([g,f.encodeLocation?f.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:ur([g,f.encodeLocation?f.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,r,u);return i&&O?Z.createElement(hu.Provider,{value:{location:ga({pathname:"/",search:"",hash:"",state:null,key:"default"},k),navigationType:ar.Pop}},O):O}function x_(){let o=T_(),i=p_(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),r=o instanceof Error?o.stack:null,f={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},i),r?Z.createElement("pre",{style:f},r):null,null)}const k_=Z.createElement(x_,null);class S_ extends Z.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,r){return r.location!==i.location||r.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:r.error,location:r.location,revalidation:i.revalidation||r.revalidation}}componentDidCatch(i,r){console.error("React Router caught the following error during render",i,r)}render(){return this.state.error!==void 0?Z.createElement(vi.Provider,{value:this.props.routeContext},Z.createElement(mp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b_(o){let{routeContext:i,match:r,children:u}=o,f=Z.useContext(cu);return f&&f.static&&f.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=r.route.id),Z.createElement(vi.Provider,{value:i},u)}function L_(o,i,r,u){var f;if(i===void 0&&(i=[]),r===void 0&&(r=null),u===void 0&&(u=null),o==null){var l;if(!r)return null;if(r.errors)o=r.matches;else if((l=u)!=null&&l.v7_partialHydration&&i.length===0&&!r.initialized&&r.matches.length>0)o=r.matches;else return null}let d=o,_=(f=r)==null?void 0:f.errors;if(_!=null){let k=d.findIndex(b=>b.route.id&&(_==null?void 0:_[b.route.id])!==void 0);k>=0||rt(!1),d=d.slice(0,Math.min(d.length,k+1))}let g=!1,w=-1;if(r&&u&&u.v7_partialHydration)for(let k=0;k<d.length;k++){let b=d[k];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(w=k),b.route.id){let{loaderData:P,errors:E}=r,j=b.route.loader&&P[b.route.id]===void 0&&(!E||E[b.route.id]===void 0);if(b.route.lazy||j){g=!0,w>=0?d=d.slice(0,w+1):d=[d[0]];break}}}return d.reduceRight((k,b,P)=>{let E,j=!1,O=null,M=null;r&&(E=_&&b.route.id?_[b.route.id]:void 0,O=b.route.errorElement||k_,g&&(w<0&&P===0?(j_("route-fallback"),j=!0,M=null):w===P&&(j=!0,M=b.route.hydrateFallbackElement||null)));let $=i.concat(d.slice(0,P+1)),z=()=>{let W;return E?W=O:j?W=M:b.route.Component?W=Z.createElement(b.route.Component,null):b.route.element?W=b.route.element:W=k,Z.createElement(b_,{match:b,routeContext:{outlet:k,matches:$,isDataRoute:r!=null},children:W})};return r&&(b.route.ErrorBoundary||b.route.errorElement||P===0)?Z.createElement(S_,{location:r.location,revalidation:r.revalidation,component:O,error:E,children:z(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):z()},null)}var gp=(function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o})(gp||{}),vp=(function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o})(vp||{});function C_(o){let i=Z.useContext(cu);return i||rt(!1),i}function P_(o){let i=Z.useContext(pp);return i||rt(!1),i}function E_(o){let i=Z.useContext(vi);return i||rt(!1),i}function yp(o){let i=E_(),r=i.matches[i.matches.length-1];return r.route.id||rt(!1),r.route.id}function T_(){var o;let i=Z.useContext(mp),r=P_(),u=yp();return i!==void 0?i:(o=r.errors)==null?void 0:o[u]}function O_(){let{router:o}=C_(gp.UseNavigateStable),i=yp(vp.UseNavigateStable),r=Z.useRef(!1);return _p(()=>{r.current=!0}),Z.useCallback(function(f,l){l===void 0&&(l={}),r.current&&(typeof f=="number"?o.navigate(f):o.navigate(f,ga({fromRouteId:i},l)))},[o,i])}const Tf={};function j_(o,i,r){Tf[o]||(Tf[o]=!0)}function N_(o,i){o==null||o.v7_startTransition,o==null||o.v7_relativeSplatPath}function R_(o){let{to:i,replace:r,state:u,relative:f}=o;to()||rt(!1);let{future:l,static:d}=Z.useContext(gi),{matches:_}=Z.useContext(vi),{pathname:g}=no(),w=io(),k=Oh(i,Th(_,l.v7_relativeSplatPath),g,f==="path"),b=JSON.stringify(k);return Z.useEffect(()=>w(JSON.parse(b),{replace:r,state:u,relative:f}),[w,b,f,r,u]),null}function Hr(o){rt(!1)}function A_(o){let{basename:i="/",children:r=null,location:u,navigationType:f=ar.Pop,navigator:l,static:d=!1,future:_}=o;to()&&rt(!1);let g=i.replace(/^\/*/,"/"),w=Z.useMemo(()=>({basename:g,navigator:l,static:d,future:ga({v7_relativeSplatPath:!1},_)}),[g,_,l,d]);typeof u=="string"&&(u=eo(u));let{pathname:k="/",search:b="",hash:P="",state:E=null,key:j="default"}=u,O=Z.useMemo(()=>{let M=Xs(k,g);return M==null?null:{location:{pathname:M,search:b,hash:P,state:E,key:j},navigationType:f}},[g,k,b,P,E,j,f]);return O==null?null:Z.createElement(gi.Provider,{value:w},Z.createElement(hu.Provider,{children:r,value:O}))}function I_(o){let{children:i,location:r}=o;return y_(uh(i),r)}new Promise(()=>{});function uh(o,i){i===void 0&&(i=[]);let r=[];return Z.Children.forEach(o,(u,f)=>{if(!Z.isValidElement(u))return;let l=[...i,f];if(u.type===Z.Fragment){r.push.apply(r,uh(u.props.children,l));return}u.type!==Hr&&rt(!1),!u.props.index||!u.props.children||rt(!1);let d={id:u.props.id||l.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(d.children=uh(u.props.children,l)),r.push(d)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ou(){return ou=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(o[u]=r[u])}return o},ou.apply(this,arguments)}function wp(o,i){if(o==null)return{};var r={},u=Object.keys(o),f,l;for(l=0;l<u.length;l++)f=u[l],!(i.indexOf(f)>=0)&&(r[f]=o[f]);return r}function M_(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function z_(o,i){return o.button===0&&(!i||i==="_self")&&!M_(o)}const B_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],D_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],U_="6";try{window.__reactRouterVersion=U_}catch{}const $_=Z.createContext({isTransitioning:!1}),F_="startTransition",Of=Mm[F_];function Z_(o){let{basename:i,children:r,future:u,window:f}=o,l=Z.useRef();l.current==null&&(l.current=Hm({window:f,v5Compat:!0}));let d=l.current,[_,g]=Z.useState({action:d.action,location:d.location}),{v7_startTransition:w}=u||{},k=Z.useCallback(b=>{w&&Of?Of(()=>g(b)):g(b)},[g,w]);return Z.useLayoutEffect(()=>d.listen(k),[d,k]),Z.useEffect(()=>N_(u),[u]),Z.createElement(A_,{basename:i,children:r,location:_.location,navigationType:_.action,navigator:d,future:u})}const H_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q_=Z.forwardRef(function(i,r){let{onClick:u,relative:f,reloadDocument:l,replace:d,state:_,target:g,to:w,preventScrollReset:k,viewTransition:b}=i,P=wp(i,B_),{basename:E}=Z.useContext(gi),j,O=!1;if(typeof w=="string"&&W_.test(w)&&(j=w,H_))try{let W=new URL(window.location.href),Q=w.startsWith("//")?new URL(W.protocol+w):new URL(w),ne=Xs(Q.pathname,E);Q.origin===W.origin&&ne!=null?w=ne+Q.search+Q.hash:O=!0}catch{}let M=__(w,{relative:f}),$=K_(w,{replace:d,state:_,target:g,preventScrollReset:k,relative:f,viewTransition:b});function z(W){u&&u(W),W.defaultPrevented||$(W)}return Z.createElement("a",ou({},P,{href:j||M,onClick:O||l?u:z,ref:r,target:g}))}),V_=Z.forwardRef(function(i,r){let{"aria-current":u="page",caseSensitive:f=!1,className:l="",end:d=!1,style:_,to:g,viewTransition:w,children:k}=i,b=wp(i,D_),P=du(g,{relative:b.relative}),E=no(),j=Z.useContext(pp),{navigator:O,basename:M}=Z.useContext(gi),$=j!=null&&J_(P)&&w===!0,z=O.encodeLocation?O.encodeLocation(P).pathname:P.pathname,W=E.pathname,Q=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;f||(W=W.toLowerCase(),Q=Q?Q.toLowerCase():null,z=z.toLowerCase()),Q&&M&&(Q=Xs(Q,M)||Q);const ne=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let pe=W===z||!d&&W.startsWith(z)&&W.charAt(ne)==="/",Ce=Q!=null&&(Q===z||!d&&Q.startsWith(z)&&Q.charAt(z.length)==="/"),Be={isActive:pe,isPending:Ce,isTransitioning:$},De=pe?u:void 0,dt;typeof l=="function"?dt=l(Be):dt=[l,pe?"active":null,Ce?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let qe=typeof _=="function"?_(Be):_;return Z.createElement(q_,ou({},b,{"aria-current":De,className:dt,ref:r,style:qe,to:g,viewTransition:w}),typeof k=="function"?k(Be):k)});var ch;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(ch||(ch={}));var jf;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(jf||(jf={}));function G_(o){let i=Z.useContext(cu);return i||rt(!1),i}function K_(o,i){let{target:r,replace:u,state:f,preventScrollReset:l,relative:d,viewTransition:_}=i===void 0?{}:i,g=io(),w=no(),k=du(o,{relative:d});return Z.useCallback(b=>{if(z_(b,r)){b.preventDefault();let P=u!==void 0?u:su(w)===su(k);g(o,{replace:P,state:f,preventScrollReset:l,relative:d,viewTransition:_})}},[w,g,k,u,f,r,o,l,d,_])}function J_(o,i){i===void 0&&(i={});let r=Z.useContext($_);r==null&&rt(!1);let{basename:u}=G_(ch.useViewTransitionState),f=du(o,{relative:i.relative});if(!r.isTransitioning)return!1;let l=Xs(r.currentLocation.pathname,u)||r.currentLocation.pathname,d=Xs(r.nextLocation.pathname,u)||r.nextLocation.pathname;return lh(f.pathname,d)!=null||lh(f.pathname,l)!=null}function fu(o,i){var r={};for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&i.indexOf(u)<0&&(r[u]=o[u]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,u=Object.getOwnPropertySymbols(o);f<u.length;f++)i.indexOf(u[f])<0&&Object.prototype.propertyIsEnumerable.call(o,u[f])&&(r[u[f]]=o[u[f]]);return r}function Q_(o,i,r,u){function f(l){return l instanceof r?l:new r(function(d){d(l)})}return new(r||(r=Promise))(function(l,d){function _(k){try{w(u.next(k))}catch(b){d(b)}}function g(k){try{w(u.throw(k))}catch(b){d(b)}}function w(k){k.done?l(k.value):f(k.value).then(_,g)}w((u=u.apply(o,i||[])).next())})}const Y_=o=>o?(...i)=>o(...i):(...i)=>fetch(...i);class jh extends Error{constructor(i,r="FunctionsError",u){super(i),this.name=r,this.context=u}}class X_ extends jh{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class Nf extends jh{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class Rf extends jh{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var hh;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(hh||(hh={}));class eg{constructor(i,{headers:r={},customFetch:u,region:f=hh.Any}={}){this.url=i,this.headers=r,this.region=f,this.fetch=Y_(u)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i){return Q_(this,arguments,void 0,function*(r,u={}){var f;let l,d;try{const{headers:_,method:g,body:w,signal:k,timeout:b}=u;let P={},{region:E}=u;E||(E=this.region);const j=new URL(`${this.url}/${r}`);E&&E!=="any"&&(P["x-region"]=E,j.searchParams.set("forceFunctionRegion",E));let O;w&&(_&&!Object.prototype.hasOwnProperty.call(_,"Content-Type")||!_)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(P["Content-Type"]="application/octet-stream",O=w):typeof w=="string"?(P["Content-Type"]="text/plain",O=w):typeof FormData<"u"&&w instanceof FormData?O=w:(P["Content-Type"]="application/json",O=JSON.stringify(w)):w&&typeof w!="string"&&!(typeof Blob<"u"&&w instanceof Blob)&&!(w instanceof ArrayBuffer)&&!(typeof FormData<"u"&&w instanceof FormData)?O=JSON.stringify(w):O=w;let M=k;b&&(d=new AbortController,l=setTimeout(()=>d.abort(),b),k?(M=d.signal,k.addEventListener("abort",()=>d.abort())):M=d.signal);const $=yield this.fetch(j.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},P),this.headers),_),body:O,signal:M}).catch(ne=>{throw new X_(ne)}),z=$.headers.get("x-relay-error");if(z&&z==="true")throw new Nf($);if(!$.ok)throw new Rf($);let W=((f=$.headers.get("Content-Type"))!==null&&f!==void 0?f:"text/plain").split(";")[0].trim(),Q;return W==="application/json"?Q=yield $.json():W==="application/octet-stream"||W==="application/pdf"?Q=yield $.blob():W==="text/event-stream"?Q=$:W==="multipart/form-data"?Q=yield $.formData():Q=yield $.text(),{data:Q,error:null,response:$}}catch(_){return{data:null,error:_,response:_ instanceof Rf||_ instanceof Nf?_.context:void 0}}finally{l&&clearTimeout(l)}})}}var tg=class extends Error{constructor(o){super(o.message),this.name="PostgrestError",this.details=o.details,this.hint=o.hint,this.code=o.code}},ng=class{constructor(o){var i,r,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(i=o.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=o.signal,this.isMaybeSingle=(r=o.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(u=o.urlLengthLimit)!==null&&u!==void 0?u:8e3,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=new Headers(this.headers),this.headers.set(o,i),this}then(o,i){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let d=null,_=null,g=null,w=l.status,k=l.statusText;if(l.ok){var b,P;if(r.method!=="HEAD"){var E;const $=await l.text();$===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((E=r.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?_=$:_=JSON.parse($))}const O=(b=r.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),M=(P=l.headers.get("content-range"))===null||P===void 0?void 0:P.split("/");O&&M&&M.length>1&&(g=parseInt(M[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(_)&&(_.length>1?(d={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,g=null,w=406,k="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{var j;const O=await l.text();try{d=JSON.parse(O),Array.isArray(d)&&l.status===404&&(_=[],d=null,w=200,k="OK")}catch{l.status===404&&O===""?(w=204,k="No Content"):d={message:O}}if(d&&r.isMaybeSingle&&(!(d==null||(j=d.details)===null||j===void 0)&&j.includes("0 rows"))&&(d=null,w=200,k="OK"),d&&r.shouldThrowOnError)throw new tg(d)}return{error:d,data:_,count:g,status:w,statusText:k}});return this.shouldThrowOnError||(f=f.catch(l=>{var d;let _="",g="",w="";const k=l==null?void 0:l.cause;if(k){var b,P,E,j;const $=(b=k==null?void 0:k.message)!==null&&b!==void 0?b:"",z=(P=k==null?void 0:k.code)!==null&&P!==void 0?P:"";_=`${(E=l==null?void 0:l.name)!==null&&E!==void 0?E:"FetchError"}: ${l==null?void 0:l.message}`,_+=`

Caused by: ${(j=k==null?void 0:k.name)!==null&&j!==void 0?j:"Error"}: ${$}`,z&&(_+=` (${z})`),k!=null&&k.stack&&(_+=`
${k.stack}`)}else{var O;_=(O=l==null?void 0:l.stack)!==null&&O!==void 0?O:""}const M=this.url.toString().length;return(l==null?void 0:l.name)==="AbortError"||(l==null?void 0:l.code)==="ABORT_ERR"?(w="",g="Request was aborted (timeout or manual cancellation)",M>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${M} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((k==null?void 0:k.name)==="HeadersOverflowError"||(k==null?void 0:k.code)==="UND_ERR_HEADERS_OVERFLOW")&&(w="",g="HTTP headers exceeded server limits (typically 16KB)",M>this.urlLengthLimit&&(g+=`. Your request URL is ${M} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,details:_,hint:g,code:w},data:null,count:null,status:0,statusText:""}})),f.then(o,i)}returns(){return this}overrideTypes(){return this}},ig=class extends ng{select(o){let i=!1;const r=(o??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:i=!0,nullsFirst:r,foreignTable:u,referencedTable:f=u}={}){const l=f?`${f}.order`:"order",d=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${d?`${d},`:""}${o}.${i?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:i,referencedTable:r=i}={}){const u=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(u,`${o}`),this}range(o,i,{foreignTable:r,referencedTable:u=r}={}){const f=typeof u>"u"?"offset":`${u}.offset`,l=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this.url.searchParams.set(l,`${i-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:i=!1,settings:r=!1,buffers:u=!1,wal:f=!1,format:l="text"}={}){var d;const _=[o?"analyze":null,i?"verbose":null,r?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),g=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${_};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};const Af=new RegExp("[,()]");var Vs=class extends ig{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}regexMatch(o,i){return this.url.searchParams.append(o,`match.${i}`),this}regexIMatch(o,i){return this.url.searchParams.append(o,`imatch.${i}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}isDistinct(o,i){return this.url.searchParams.append(o,`isdistinct.${i}`),this}in(o,i){const r=Array.from(new Set(i)).map(u=>typeof u=="string"&&Af.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`in.(${r})`),this}notIn(o,i){const r=Array.from(new Set(i)).map(u=>typeof u=="string"&&Af.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`not.in.(${r})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:r,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(o,`${f}fts${l}.${i}`),this}match(o){return Object.entries(o).forEach(([i,r])=>{this.url.searchParams.append(i,`eq.${r}`)}),this}not(o,i,r){return this.url.searchParams.append(o,`not.${i}.${r}`),this}or(o,{foreignTable:i,referencedTable:r=i}={}){const u=r?`${r}.or`:"or";return this.url.searchParams.append(u,`(${o})`),this}filter(o,i,r){return this.url.searchParams.append(o,`${i}.${r}`),this}},rg=class{constructor(o,{headers:i={},schema:r,fetch:u,urlLengthLimit:f=8e3}){this.url=o,this.headers=new Headers(i),this.schema=r,this.fetch=u,this.urlLengthLimit=f}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(o,i){const{head:r=!1,count:u}=i??{},f=r?"HEAD":"GET";let l=!1;const d=(o??"*").split("").map(w=>/\s/.test(w)&&!l?"":(w==='"'&&(l=!l),w)).join(""),{url:_,headers:g}=this.cloneRequestState();return _.searchParams.set("select",d),u&&g.append("Prefer",`count=${u}`),new Vs({method:f,url:_,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(o,{count:i,defaultToNull:r=!0}={}){var u;const f="POST",{url:l,headers:d}=this.cloneRequestState();if(i&&d.append("Prefer",`count=${i}`),r||d.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((g,w)=>g.concat(Object.keys(w)),[]);if(_.length>0){const g=[...new Set(_)].map(w=>`"${w}"`);l.searchParams.set("columns",g.join(","))}}return new Vs({method:f,url:l,headers:d,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(o,{onConflict:i,ignoreDuplicates:r=!1,count:u,defaultToNull:f=!0}={}){var l;const d="POST",{url:_,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),i!==void 0&&_.searchParams.set("on_conflict",i),u&&g.append("Prefer",`count=${u}`),f||g.append("Prefer","missing=default"),Array.isArray(o)){const w=o.reduce((k,b)=>k.concat(Object.keys(b)),[]);if(w.length>0){const k=[...new Set(w)].map(b=>`"${b}"`);_.searchParams.set("columns",k.join(","))}}return new Vs({method:d,url:_,headers:g,schema:this.schema,body:o,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(o,{count:i}={}){var r;const u="PATCH",{url:f,headers:l}=this.cloneRequestState();return i&&l.append("Prefer",`count=${i}`),new Vs({method:u,url:f,headers:l,schema:this.schema,body:o,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:o}={}){var i;const r="DELETE",{url:u,headers:f}=this.cloneRequestState();return o&&f.append("Prefer",`count=${o}`),new Vs({method:r,url:u,headers:f,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}};function va(o){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},va(o)}function sg(o,i){if(va(o)!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var u=r.call(o,i);if(va(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function og(o){var i=sg(o,"string");return va(i)=="symbol"?i:i+""}function ag(o,i,r){return(i=og(i))in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}function If(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);i&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(o,f).enumerable})),r.push.apply(r,u)}return r}function Jl(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?If(Object(r),!0).forEach(function(u){ag(o,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):If(Object(r)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(r,u))})}return o}var lg=class xp{constructor(i,{headers:r={},schema:u,fetch:f,timeout:l,urlLengthLimit:d=8e3}={}){this.url=i,this.headers=new Headers(r),this.schemaName=u,this.urlLengthLimit=d;const _=f??globalThis.fetch;l!==void 0&&l>0?this.fetch=(g,w)=>{const k=new AbortController,b=setTimeout(()=>k.abort(),l),P=w==null?void 0:w.signal;if(P){if(P.aborted)return clearTimeout(b),_(g,w);const E=()=>{clearTimeout(b),k.abort()};return P.addEventListener("abort",E,{once:!0}),_(g,Jl(Jl({},w),{},{signal:k.signal})).finally(()=>{clearTimeout(b),P.removeEventListener("abort",E)})}return _(g,Jl(Jl({},w),{},{signal:k.signal})).finally(()=>clearTimeout(b))}:this.fetch=_}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new rg(new URL(`${this.url}/${i}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(i){return new xp(this.url,{headers:this.headers,schema:i,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(i,r={},{head:u=!1,get:f=!1,count:l}={}){var d;let _;const g=new URL(`${this.url}/rpc/${i}`);let w;const k=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(k)),b=u&&Object.values(r).some(k);b?(_="POST",w=r):u||f?(_=u?"HEAD":"GET",Object.entries(r).filter(([E,j])=>j!==void 0).map(([E,j])=>[E,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([E,j])=>{g.searchParams.append(E,j)})):(_="POST",w=r);const P=new Headers(this.headers);return b?P.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&P.set("Prefer",`count=${l}`),new Vs({method:_,url:g,headers:P,schema:this.schemaName,body:w,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}};class ug{constructor(){}static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const u=r.versions;if(u&&u.node){const f=u.node,l=parseInt(f.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let r=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(r+=`

Suggested solution: ${i.workaround}`),new Error(r)}static createWebSocket(i,r){const u=this.getWebSocketConstructor();return new u(i,r)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const cg="2.95.3",hg=`realtime-js/${cg}`,dg="1.0.0",kp="2.0.0",Mf=kp,dh=1e4,fg=1e3,pg=100;var sr;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(sr||(sr={}));var gt;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(gt||(gt={}));var Nn;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Nn||(Nn={}));var fh;(function(o){o.websocket="websocket"})(fh||(fh={}));var qr;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(qr||(qr={}));class mg{constructor(i){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=i??[]}encode(i,r){if(i.event===this.BROADCAST_EVENT&&!(i.payload instanceof ArrayBuffer)&&typeof i.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(i));let u=[i.join_ref,i.ref,i.topic,i.event,i.payload];return r(JSON.stringify(u))}_binaryEncodeUserBroadcastPush(i){var r;return this._isArrayBuffer((r=i.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(i):this._encodeJsonUserBroadcastPush(i)}_encodeBinaryUserBroadcastPush(i){var r,u;const f=(u=(r=i.payload)===null||r===void 0?void 0:r.payload)!==null&&u!==void 0?u:new ArrayBuffer(0);return this._encodeUserBroadcastPush(i,this.BINARY_ENCODING,f)}_encodeJsonUserBroadcastPush(i){var r,u;const f=(u=(r=i.payload)===null||r===void 0?void 0:r.payload)!==null&&u!==void 0?u:{},d=new TextEncoder().encode(JSON.stringify(f)).buffer;return this._encodeUserBroadcastPush(i,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(i,r,u){var f,l;const d=i.topic,_=(f=i.ref)!==null&&f!==void 0?f:"",g=(l=i.join_ref)!==null&&l!==void 0?l:"",w=i.payload.event,k=this.allowedMetadataKeys?this._pick(i.payload,this.allowedMetadataKeys):{},b=Object.keys(k).length===0?"":JSON.stringify(k);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`ref length ${_.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`userEvent length ${w.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const P=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+_.length+d.length+w.length+b.length,E=new ArrayBuffer(this.HEADER_LENGTH+P);let j=new DataView(E),O=0;j.setUint8(O++,this.KINDS.userBroadcastPush),j.setUint8(O++,g.length),j.setUint8(O++,_.length),j.setUint8(O++,d.length),j.setUint8(O++,w.length),j.setUint8(O++,b.length),j.setUint8(O++,r),Array.from(g,$=>j.setUint8(O++,$.charCodeAt(0))),Array.from(_,$=>j.setUint8(O++,$.charCodeAt(0))),Array.from(d,$=>j.setUint8(O++,$.charCodeAt(0))),Array.from(w,$=>j.setUint8(O++,$.charCodeAt(0))),Array.from(b,$=>j.setUint8(O++,$.charCodeAt(0)));var M=new Uint8Array(E.byteLength+u.byteLength);return M.set(new Uint8Array(E),0),M.set(new Uint8Array(u),E.byteLength),M.buffer}decode(i,r){if(this._isArrayBuffer(i)){let u=this._binaryDecode(i);return r(u)}if(typeof i=="string"){const u=JSON.parse(i),[f,l,d,_,g]=u;return r({join_ref:f,ref:l,topic:d,event:_,payload:g})}return r({})}_binaryDecode(i){const r=new DataView(i),u=r.getUint8(0),f=new TextDecoder;switch(u){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(i,r,f)}}_decodeUserBroadcast(i,r,u){const f=r.getUint8(1),l=r.getUint8(2),d=r.getUint8(3),_=r.getUint8(4);let g=this.HEADER_LENGTH+4;const w=u.decode(i.slice(g,g+f));g=g+f;const k=u.decode(i.slice(g,g+l));g=g+l;const b=u.decode(i.slice(g,g+d));g=g+d;const P=i.slice(g,i.byteLength),E=_===this.JSON_ENCODING?JSON.parse(u.decode(P)):P,j={type:this.BROADCAST_EVENT,event:k,payload:E};return d>0&&(j.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:w,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(i){var r;return i instanceof ArrayBuffer||((r=i==null?void 0:i.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(i,r){return!i||typeof i!="object"?{}:Object.fromEntries(Object.entries(i).filter(([u])=>r.includes(u)))}}class Sp{constructor(i,r){this.callback=i,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Je||(Je={}));const zf=(o,i,r={})=>{var u;const f=(u=r.skipTypes)!==null&&u!==void 0?u:[];return i?Object.keys(i).reduce((l,d)=>(l[d]=_g(d,o,i,f),l),{}):{}},_g=(o,i,r,u)=>{const f=i.find(_=>_.name===o),l=f==null?void 0:f.type,d=r[o];return l&&!u.includes(l)?bp(l,d):ph(d)},bp=(o,i)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return wg(i,r)}switch(o){case Je.bool:return gg(i);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return vg(i);case Je.json:case Je.jsonb:return yg(i);case Je.timestamp:return xg(i);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return ph(i);default:return ph(i)}},ph=o=>o,gg=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},vg=o=>{if(typeof o=="string"){const i=parseFloat(o);if(!Number.isNaN(i))return i}return o},yg=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch{return o}return o},wg=(o,i)=>{if(typeof o!="string")return o;const r=o.length-1,u=o[r];if(o[0]==="{"&&u==="}"){let l;const d=o.slice(1,r);try{l=JSON.parse("["+d+"]")}catch{l=d?d.split(","):[]}return l.map(_=>bp(i,_))}return o},xg=o=>typeof o=="string"?o.replace(" ","T"):o,Lp=o=>{const i=new URL(o);return i.protocol=i.protocol.replace(/^ws/i,"http"),i.pathname=i.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),i.pathname===""||i.pathname==="/"?i.pathname="/api/broadcast":i.pathname=i.pathname+"/api/broadcast",i.href};class Qc{constructor(i,r,u={},f=dh){this.channel=i,this.event=r,this.payload=u,this.timeout=f,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,r){var u;return this._hasReceived(i)&&r((u=this.receivedResp)===null||u===void 0?void 0:u.response),this.recHooks.push({status:i,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:r}){this.recHooks.filter(u=>u.status===i).forEach(u=>u.callback(r))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var Bf;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Bf||(Bf={}));class fa{constructor(i,r){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const u=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(u.state,{},f=>{const{onJoin:l,onLeave:d,onSync:_}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fa.syncState(this.state,f,l,d),this.pendingDiffs.forEach(g=>{this.state=fa.syncDiff(this.state,g,l,d)}),this.pendingDiffs=[],_()}),this.channel._on(u.diff,{},f=>{const{onJoin:l,onLeave:d,onSync:_}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(f):(this.state=fa.syncDiff(this.state,f,l,d),_())}),this.onJoin((f,l,d)=>{this.channel._trigger("presence",{event:"join",key:f,currentPresences:l,newPresences:d})}),this.onLeave((f,l,d)=>{this.channel._trigger("presence",{event:"leave",key:f,currentPresences:l,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,r,u,f){const l=this.cloneDeep(i),d=this.transformState(r),_={},g={};return this.map(l,(w,k)=>{d[w]||(g[w]=k)}),this.map(d,(w,k)=>{const b=l[w];if(b){const P=k.map(M=>M.presence_ref),E=b.map(M=>M.presence_ref),j=k.filter(M=>E.indexOf(M.presence_ref)<0),O=b.filter(M=>P.indexOf(M.presence_ref)<0);j.length>0&&(_[w]=j),O.length>0&&(g[w]=O)}else _[w]=k}),this.syncDiff(l,{joins:_,leaves:g},u,f)}static syncDiff(i,r,u,f){const{joins:l,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return u||(u=()=>{}),f||(f=()=>{}),this.map(l,(_,g)=>{var w;const k=(w=i[_])!==null&&w!==void 0?w:[];if(i[_]=this.cloneDeep(g),k.length>0){const b=i[_].map(E=>E.presence_ref),P=k.filter(E=>b.indexOf(E.presence_ref)<0);i[_].unshift(...P)}u(_,k,g)}),this.map(d,(_,g)=>{let w=i[_];if(!w)return;const k=g.map(b=>b.presence_ref);w=w.filter(b=>k.indexOf(b.presence_ref)<0),i[_]=w,f(_,w,g),w.length===0&&delete i[_]}),i}static map(i,r){return Object.getOwnPropertyNames(i).map(u=>r(u,i[u]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((r,u)=>{const f=i[u];return"metas"in f?r[u]=f.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[u]=f,r},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Df;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Df||(Df={}));var pa;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(pa||(pa={}));var mi;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(mi||(mi={}));class Js{constructor(i,r={config:{}},u){var f,l;if(this.topic=i,this.params=r,this.socket=u,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Qc(this,Nn.join,this.params,this.timeout),this.rejoinTimer=new Sp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nn.reply,{},(d,_)=>{this._trigger(this._replyEventName(_),d)}),this.presence=new fa(this),this.broadcastEndpointURL=Lp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(f=this.params.config)===null||f===void 0?void 0:f.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(i,r=this.timeout){var u,f,l;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:d,presence:_,private:g}}=this.params,w=(f=(u=this.bindings.postgres_changes)===null||u===void 0?void 0:u.map(E=>E.filter))!==null&&f!==void 0?f:[],k=!!this.bindings[pa.PRESENCE]&&this.bindings[pa.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},P={broadcast:d,presence:Object.assign(Object.assign({},_),{enabled:k}),postgres_changes:w,private:g};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(E=>i==null?void 0:i(mi.CHANNEL_ERROR,E)),this._onClose(()=>i==null?void 0:i(mi.CLOSED)),this.updateJoinPayload(Object.assign({config:P},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:E})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){i==null||i(mi.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,M=(j=O==null?void 0:O.length)!==null&&j!==void 0?j:0,$=[];for(let z=0;z<M;z++){const W=O[z],{filter:{event:Q,schema:ne,table:pe,filter:Ce}}=W,Be=E&&E[z];if(Be&&Be.event===Q&&Js.isFilterValueEqual(Be.schema,ne)&&Js.isFilterValueEqual(Be.table,pe)&&Js.isFilterValueEqual(Be.filter,Ce))$.push(Object.assign(Object.assign({},W),{id:Be.id}));else{this.unsubscribe(),this.state=gt.errored,i==null||i(mi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,i&&i(mi.SUBSCRIBED);return}}).receive("error",E=>{this.state=gt.errored,i==null||i(mi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{i==null||i(mi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,r={}){return await this.send({type:"presence",event:"track",payload:i},r.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,r,u){return this.state===gt.joined&&i===pa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(i,r,u)}async httpSend(i,r,u={}){var f;if(r==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:r,private:this.private}]})},_=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(f=u.timeout)!==null&&f!==void 0?f:this.timeout);if(_.status===202)return{success:!0};let g=_.statusText;try{const w=await _.json();g=w.error||w.message||g}catch{}return Promise.reject(new Error(g))}async send(i,r={}){var u,f;if(!this._canPush()&&i.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:d}=i,_={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(_.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:_,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:d,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(u=r.timeout)!==null&&u!==void 0?u:this.timeout);return await((f=w.body)===null||f===void 0?void 0:f.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var d,_,g;const w=this._push(i.type,i,r.timeout||this.timeout);i.type==="broadcast"&&!(!((g=(_=(d=this.params)===null||d===void 0?void 0:d.config)===null||_===void 0?void 0:_.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),w.receive("ok",()=>l("ok")),w.receive("error",()=>l("error")),w.receive("timeout",()=>l("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=gt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nn.close,"leave",this._joinRef())};this.joinPush.destroy();let u=null;return new Promise(f=>{u=new Qc(this,Nn.leave,{},i),u.receive("ok",()=>{r(),f("ok")}).receive("timeout",()=>{r(),f("timed out")}).receive("error",()=>{f("error")}),u.send(),this._canPush()||u.trigger("ok",{})}).finally(()=>{u==null||u.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gt.closed,this.bindings={}}async _fetchWithTimeout(i,r,u){const f=new AbortController,l=setTimeout(()=>f.abort(),u),d=await this.socket.fetch(i,Object.assign(Object.assign({},r),{signal:f.signal}));return clearTimeout(l),d}_push(i,r,u=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let f=new Qc(this,i,r,u);return this._canPush()?f.send():this._addToPushBuffer(f),f}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>pg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(i,r,u){return r}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,r,u){var f,l;const d=i.toLocaleLowerCase(),{close:_,error:g,leave:w,join:k}=Nn;if(u&&[_,g,w,k].indexOf(d)>=0&&u!==this._joinRef())return;let P=this._onMessage(d,r,u);if(r&&!P)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(f=this.bindings.postgres_changes)===null||f===void 0||f.filter(E=>{var j,O,M;return((j=E.filter)===null||j===void 0?void 0:j.event)==="*"||((M=(O=E.filter)===null||O===void 0?void 0:O.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===d}).map(E=>E.callback(P,u)):(l=this.bindings[d])===null||l===void 0||l.filter(E=>{var j,O,M,$,z,W;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in E){const Q=E.id,ne=(j=E.filter)===null||j===void 0?void 0:j.event;return Q&&((O=r.ids)===null||O===void 0?void 0:O.includes(Q))&&(ne==="*"||(ne==null?void 0:ne.toLocaleLowerCase())===((M=r.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const Q=(z=($=E==null?void 0:E.filter)===null||$===void 0?void 0:$.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return Q==="*"||Q===((W=r==null?void 0:r.event)===null||W===void 0?void 0:W.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===d}).map(E=>{if(typeof P=="object"&&"ids"in P){const j=P.data,{schema:O,table:M,commit_timestamp:$,type:z,errors:W}=j;P=Object.assign(Object.assign({},{schema:O,table:M,commit_timestamp:$,eventType:z,new:{},old:{},errors:W}),this._getPayloadRecords(j))}E.callback(P,u)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,r,u){const f=i.toLocaleLowerCase(),l={type:f,filter:r,callback:u};return this.bindings[f]?this.bindings[f].push(l):this.bindings[f]=[l],this}_off(i,r){const u=i.toLocaleLowerCase();return this.bindings[u]&&(this.bindings[u]=this.bindings[u].filter(f=>{var l;return!(((l=f.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===u&&Js.isEqual(f.filter,r))})),this}static isEqual(i,r){if(Object.keys(i).length!==Object.keys(r).length)return!1;for(const u in i)if(i[u]!==r[u])return!1;return!0}static isFilterValueEqual(i,r){return(i??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(Nn.close,{},i)}_onError(i){this._on(Nn.error,{},r=>i(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const r={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(r.new=zf(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(r.old=zf(i.columns,i.old_record)),r}}const Yc=()=>{},Ql={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kg=[1e3,2e3,5e3,1e4],Sg=1e4,bg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Lg{constructor(i,r){var u;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dh,this.transport=null,this.heartbeatIntervalMs=Ql.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yc,this.ref=0,this.reconnectTimer=null,this.vsn=Mf,this.logger=Yc,this.conn=null,this.sendBuffer=[],this.serializer=new mg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=f=>f?(...l)=>f(...l):(...l)=>fetch(...l),!(!((u=r==null?void 0:r.params)===null||u===void 0)&&u.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${i}/${fh.websocket}`,this.httpEndpoint=Lp(i),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ug.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const r=i.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(i,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const u=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(u),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(i?this.conn.close(i,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const r=await i.unsubscribe();return r==="ok"&&this._remove(i),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const i=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,r,u){this.logger(i,r,u)}connectionState(){switch(this.conn&&this.conn.readyState){case sr.connecting:return qr.Connecting;case sr.open:return qr.Open;case sr.closing:return qr.Closing;default:return qr.Closed}}isConnected(){return this.connectionState()===qr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,r={config:{}}){const u=`realtime:${i}`,f=this.getChannels().find(l=>l.topic===u);if(f)return f;{const l=new Js(`realtime:${i}`,r,this);return this.channels.push(l),l}}push(i){const{topic:r,event:u,payload:f,ref:l}=i,d=()=>{this.encode(i,_=>{var g;(g=this.conn)===null||g===void 0||g.send(_)})};this.log("push",`${r} ${u} (${l})`,f),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(fg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ql.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let r=this.channels.find(u=>u.topic===i&&(u._isJoined()||u._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${i}"`),r.unsubscribe())}_remove(i){this.channels=this.channels.filter(r=>r.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const w=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",w)}catch(k){this.log("error","error in heartbeat callback",k)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:u,event:f,payload:l,ref:d}=r,_=d?`(${d})`:"",g=l.status||"";this.log("receive",`${g} ${u} ${f} ${_}`.trim(),l),this.channels.filter(w=>w._isMember(u)).forEach(w=>w._trigger(f,l,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(i){var r;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i),this.conn.readyState===sr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===sr.open||this.conn.readyState===sr.connecting)try{this.conn.close()}catch(i){this.log("error","Error closing connection",i)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(i){var r;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(i=>i._trigger(Nn.error))}_appendParams(i,r){if(Object.keys(r).length===0)return i;const u=i.match(/\?/)?"&":"?",f=new URLSearchParams(r);return`${i}${u}${f}`}_workerObjectUrl(i){let r;if(i)r=i;else{const u=new Blob([bg],{type:"application/javascript"});r=URL.createObjectURL(u)}return r}_setConnectionState(i,r=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(i=null){let r,u=!1;if(i)r=i,u=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(f){this.log("error","Error fetching access token from callback",f),r=this.accessTokenValue}else r=this.accessTokenValue;u?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(f=>{const l={access_token:r,version:hg};r&&f.updateJoinPayload(l),f.joinedOnce&&f._isJoined()&&f._push(Nn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${i}`,r)})}_triggerStateCallbacks(i,r){try{this.stateChangeCallbacks[i].forEach(u=>{try{u(r)}catch(f){this.log("error",`error in ${i} callback`,f)}})}catch(u){this.log("error",`error triggering ${i} callbacks`,u)}}_setupReconnectionTimer(){this.reconnectTimer=new Sp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ql.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var r,u,f,l,d,_,g,w,k,b,P,E;switch(this.transport=(r=i==null?void 0:i.transport)!==null&&r!==void 0?r:null,this.timeout=(u=i==null?void 0:i.timeout)!==null&&u!==void 0?u:dh,this.heartbeatIntervalMs=(f=i==null?void 0:i.heartbeatIntervalMs)!==null&&f!==void 0?f:Ql.HEARTBEAT_INTERVAL,this.worker=(l=i==null?void 0:i.worker)!==null&&l!==void 0?l:!1,this.accessToken=(d=i==null?void 0:i.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(_=i==null?void 0:i.heartbeatCallback)!==null&&_!==void 0?_:Yc,this.vsn=(g=i==null?void 0:i.vsn)!==null&&g!==void 0?g:Mf,i!=null&&i.params&&(this.params=i.params),i!=null&&i.logger&&(this.logger=i.logger),(i!=null&&i.logLevel||i!=null&&i.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=i==null?void 0:i.reconnectAfterMs)!==null&&w!==void 0?w:(j=>kg[j-1]||Sg),this.vsn){case dg:this.encode=(k=i==null?void 0:i.encode)!==null&&k!==void 0?k:((j,O)=>O(JSON.stringify(j))),this.decode=(b=i==null?void 0:i.decode)!==null&&b!==void 0?b:((j,O)=>O(JSON.parse(j)));break;case kp:this.encode=(P=i==null?void 0:i.encode)!==null&&P!==void 0?P:this.serializer.encode.bind(this.serializer),this.decode=(E=i==null?void 0:i.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i==null?void 0:i.workerUrl}}}var ya=class extends Error{constructor(o,i){var r;super(o),this.name="IcebergError",this.status=i.status,this.icebergType=i.icebergType,this.icebergCode=i.icebergCode,this.details=i.details,this.isCommitStateUnknown=i.icebergType==="CommitStateUnknownException"||[500,502,504].includes(i.status)&&((r=i.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Cg(o,i,r){const u=new URL(i,o);if(r)for(const[f,l]of Object.entries(r))l!==void 0&&u.searchParams.set(f,l);return u.toString()}async function Pg(o){return!o||o.type==="none"?{}:o.type==="bearer"?{Authorization:`Bearer ${o.token}`}:o.type==="header"?{[o.name]:o.value}:o.type==="custom"?await o.getHeaders():{}}function Eg(o){const i=o.fetchImpl??globalThis.fetch;return{async request({method:r,path:u,query:f,body:l,headers:d}){const _=Cg(o.baseUrl,u,f),g=await Pg(o.auth),w=await i(_,{method:r,headers:{...l?{"Content-Type":"application/json"}:{},...g,...d},body:l?JSON.stringify(l):void 0}),k=await w.text(),b=(w.headers.get("content-type")||"").includes("application/json"),P=b&&k?JSON.parse(k):k;if(!w.ok){const E=b?P:void 0,j=E==null?void 0:E.error;throw new ya((j==null?void 0:j.message)??`Request failed with status ${w.status}`,{status:w.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:E})}return{status:w.status,headers:w.headers,data:P}}}}function Yl(o){return o.join("")}var Tg=class{constructor(o,i=""){this.client=o,this.prefix=i}async listNamespaces(o){const i=o?{parent:Yl(o.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:i})).data.namespaces.map(u=>({namespace:u}))}async createNamespace(o,i){const r={namespace:o.namespace,properties:i==null?void 0:i.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(o){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yl(o.namespace)}`})}async loadNamespaceMetadata(o){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yl(o.namespace)}`})).data.properties}}async namespaceExists(o){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yl(o.namespace)}`}),!0}catch(i){if(i instanceof ya&&i.status===404)return!1;throw i}}async createNamespaceIfNotExists(o,i){try{return await this.createNamespace(o,i)}catch(r){if(r instanceof ya&&r.status===409)return;throw r}}};function $s(o){return o.join("")}var Og=class{constructor(o,i="",r){this.client=o,this.prefix=i,this.accessDelegation=r}async listTables(o){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$s(o.namespace)}/tables`})).data.identifiers}async createTable(o,i){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$s(o.namespace)}/tables`,body:i,headers:r})).data.metadata}async updateTable(o,i){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$s(o.namespace)}/tables/${o.name}`,body:i});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(o,i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${$s(o.namespace)}/tables/${o.name}`,query:{purgeRequested:String((i==null?void 0:i.purge)??!1)}})}async loadTable(o){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$s(o.namespace)}/tables/${o.name}`,headers:i})).data.metadata}async tableExists(o){const i={};this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${$s(o.namespace)}/tables/${o.name}`,headers:i}),!0}catch(r){if(r instanceof ya&&r.status===404)return!1;throw r}}async createTableIfNotExists(o,i){try{return await this.createTable(o,i)}catch(r){if(r instanceof ya&&r.status===409)return await this.loadTable({namespace:o.namespace,name:i.name});throw r}}},jg=class{constructor(o){var u;let i="v1";o.catalogName&&(i+=`/${o.catalogName}`);const r=o.baseUrl.endsWith("/")?o.baseUrl:`${o.baseUrl}/`;this.client=Eg({baseUrl:r,auth:o.auth,fetchImpl:o.fetch}),this.accessDelegation=(u=o.accessDelegation)==null?void 0:u.join(","),this.namespaceOps=new Tg(this.client,i),this.tableOps=new Og(this.client,i,this.accessDelegation)}async listNamespaces(o){return this.namespaceOps.listNamespaces(o)}async createNamespace(o,i){return this.namespaceOps.createNamespace(o,i)}async dropNamespace(o){await this.namespaceOps.dropNamespace(o)}async loadNamespaceMetadata(o){return this.namespaceOps.loadNamespaceMetadata(o)}async listTables(o){return this.tableOps.listTables(o)}async createTable(o,i){return this.tableOps.createTable(o,i)}async updateTable(o,i){return this.tableOps.updateTable(o,i)}async dropTable(o,i){await this.tableOps.dropTable(o,i)}async loadTable(o){return this.tableOps.loadTable(o)}async namespaceExists(o){return this.namespaceOps.namespaceExists(o)}async tableExists(o){return this.tableOps.tableExists(o)}async createNamespaceIfNotExists(o,i){return this.namespaceOps.createNamespaceIfNotExists(o,i)}async createTableIfNotExists(o,i){return this.tableOps.createTableIfNotExists(o,i)}},pu=class extends Error{constructor(o,i="storage",r,u){super(o),this.__isStorageError=!0,this.namespace=i,this.name=i==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=u}};function mu(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}var Xl=class extends pu{constructor(o,i,r,u="storage"){super(o,u,i,r),this.name=u==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Cp=class extends pu{constructor(o,i,r="storage"){super(o,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=i}};const Ng=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),Rg=o=>{if(typeof o!="object"||o===null)return!1;const i=Object.getPrototypeOf(o);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},mh=o=>{if(Array.isArray(o))return o.map(r=>mh(r));if(typeof o=="function"||o!==Object(o))return o;const i={};return Object.entries(o).forEach(([r,u])=>{const f=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));i[f]=mh(u)}),i},Ag=o=>!o||typeof o!="string"||o.length===0||o.length>100||o.trim()!==o||o.includes("/")||o.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(o);function wa(o){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},wa(o)}function Ig(o,i){if(wa(o)!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var u=r.call(o,i);if(wa(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function Mg(o){var i=Ig(o,"string");return wa(i)=="symbol"?i:i+""}function zg(o,i,r){return(i=Mg(i))in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}function Uf(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);i&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(o,f).enumerable})),r.push.apply(r,u)}return r}function xe(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?Uf(Object(r),!0).forEach(function(u){zg(o,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):Uf(Object(r)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(r,u))})}return o}const $f=o=>{var i;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(i=o.error)===null||i===void 0?void 0:i.message)||JSON.stringify(o)},Bg=async(o,i,r,u)=>{if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!(r!=null&&r.noResolveJson)){const f=o,l=f.status||500;if(typeof f.json=="function")f.json().then(d=>{const _=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||l+"";i(new Xl($f(d),l,_,u))}).catch(()=>{if(u==="vectors"){const d=l+"";i(new Xl(f.statusText||`HTTP ${l} error`,l,d,u))}else{const d=l+"";i(new Xl(f.statusText||`HTTP ${l} error`,l,d,u))}});else{const d=l+"";i(new Xl(f.statusText||`HTTP ${l} error`,l,d,u))}}else i(new Cp($f(o),o,u))},Dg=(o,i,r,u)=>{const f={method:o,headers:(i==null?void 0:i.headers)||{}};return o==="GET"||o==="HEAD"||!u?xe(xe({},f),r):(Rg(u)?(f.headers=xe({"Content-Type":"application/json"},i==null?void 0:i.headers),f.body=JSON.stringify(u)):f.body=u,i!=null&&i.duplex&&(f.duplex=i.duplex),xe(xe({},f),r))};async function aa(o,i,r,u,f,l,d){return new Promise((_,g)=>{o(r,Dg(i,u,f,l)).then(w=>{if(!w.ok)throw w;if(u!=null&&u.noResolveJson)return w;if(d==="vectors"){const k=w.headers.get("content-type");if(w.headers.get("content-length")==="0"||w.status===204)return{};if(!k||!k.includes("application/json"))return{}}return w.json()}).then(w=>_(w)).catch(w=>Bg(w,g,u,d))})}function Pp(o="storage"){return{get:async(i,r,u,f)=>aa(i,"GET",r,u,f,void 0,o),post:async(i,r,u,f,l)=>aa(i,"POST",r,f,l,u,o),put:async(i,r,u,f,l)=>aa(i,"PUT",r,f,l,u,o),head:async(i,r,u,f)=>aa(i,"HEAD",r,xe(xe({},u),{},{noResolveJson:!0}),f,void 0,o),remove:async(i,r,u,f,l)=>aa(i,"DELETE",r,f,l,u,o)}}const Ug=Pp("storage"),{get:xa,post:jn,put:_h,head:$g,remove:Nh}=Ug,on=Pp("vectors");var ro=class{constructor(o,i={},r,u="storage"){this.shouldThrowOnError=!1,this.url=o,this.headers=i,this.fetch=Ng(r),this.namespace=u}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(o){var i=this;try{return{data:await o(),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(mu(r))return{data:null,error:r};throw r}}},Fg=class{constructor(o,i){this.downloadFn=o,this.shouldThrowOnError=i}then(o,i){return this.execute().then(o,i)}async execute(){var o=this;try{return{data:(await o.downloadFn()).body,error:null}}catch(i){if(o.shouldThrowOnError)throw i;if(mu(i))return{data:null,error:i};throw i}}};let Ep;Ep=Symbol.toStringTag;var Zg=class{constructor(o,i){this.downloadFn=o,this.shouldThrowOnError=i,this[Ep]="BlobDownloadBuilder",this.promise=null}asStream(){return new Fg(this.downloadFn,this.shouldThrowOnError)}then(o,i){return this.getPromise().then(o,i)}catch(o){return this.getPromise().catch(o)}finally(o){return this.getPromise().finally(o)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var o=this;try{return{data:await(await o.downloadFn()).blob(),error:null}}catch(i){if(o.shouldThrowOnError)throw i;if(mu(i))return{data:null,error:i};throw i}}};const Hg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ff={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Wg=class extends ro{constructor(o,i={},r,u){super(o,i,u,"storage"),this.bucketId=r}async uploadOrUpdate(o,i,r,u){var f=this;return f.handleOperation(async()=>{let l;const d=xe(xe({},Ff),u);let _=xe(xe({},f.headers),o==="POST"&&{"x-upsert":String(d.upsert)});const g=d.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),g&&l.append("metadata",f.encodeMetadata(g)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",d.cacheControl),g&&!l.has("metadata")&&l.append("metadata",f.encodeMetadata(g))):(l=r,_["cache-control"]=`max-age=${d.cacheControl}`,_["content-type"]=d.contentType,g&&(_["x-metadata"]=f.toBase64(f.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!d.duplex&&(d.duplex="half")),u!=null&&u.headers&&(_=xe(xe({},_),u.headers));const w=f._removeEmptyFolders(i),k=f._getFinalPath(w),b=await(o=="PUT"?_h:jn)(f.fetch,`${f.url}/object/${k}`,l,xe({headers:_},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{path:w,id:b.Id,fullPath:b.Key}})}async upload(o,i,r){return this.uploadOrUpdate("POST",o,i,r)}async uploadToSignedUrl(o,i,r,u){var f=this;const l=f._removeEmptyFolders(o),d=f._getFinalPath(l),_=new URL(f.url+`/object/upload/sign/${d}`);return _.searchParams.set("token",i),f.handleOperation(async()=>{let g;const w=xe({upsert:Ff.upsert},u),k=xe(xe({},f.headers),{"x-upsert":String(w.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",w.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",w.cacheControl)):(g=r,k["cache-control"]=`max-age=${w.cacheControl}`,k["content-type"]=w.contentType),{path:l,fullPath:(await _h(f.fetch,_.toString(),g,{headers:k})).Key}})}async createSignedUploadUrl(o,i){var r=this;return r.handleOperation(async()=>{let u=r._getFinalPath(o);const f=xe({},r.headers);i!=null&&i.upsert&&(f["x-upsert"]="true");const l=await jn(r.fetch,`${r.url}/object/upload/sign/${u}`,{},{headers:f}),d=new URL(r.url+l.url),_=d.searchParams.get("token");if(!_)throw new pu("No token returned by API");return{signedUrl:d.toString(),path:o,token:_}})}async update(o,i,r){return this.uploadOrUpdate("PUT",o,i,r)}async move(o,i,r){var u=this;return u.handleOperation(async()=>await jn(u.fetch,`${u.url}/object/move`,{bucketId:u.bucketId,sourceKey:o,destinationKey:i,destinationBucket:r==null?void 0:r.destinationBucket},{headers:u.headers}))}async copy(o,i,r){var u=this;return u.handleOperation(async()=>({path:(await jn(u.fetch,`${u.url}/object/copy`,{bucketId:u.bucketId,sourceKey:o,destinationKey:i,destinationBucket:r==null?void 0:r.destinationBucket},{headers:u.headers})).Key}))}async createSignedUrl(o,i,r){var u=this;return u.handleOperation(async()=>{let f=u._getFinalPath(o),l=await jn(u.fetch,`${u.url}/object/sign/${f}`,xe({expiresIn:i},r!=null&&r.transform?{transform:r.transform}:{}),{headers:u.headers});const d=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${u.url}${l.signedURL}${d}`)}})}async createSignedUrls(o,i,r){var u=this;return u.handleOperation(async()=>{const f=await jn(u.fetch,`${u.url}/object/sign/${u.bucketId}`,{expiresIn:i,paths:o},{headers:u.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return f.map(d=>xe(xe({},d),{},{signedUrl:d.signedURL?encodeURI(`${u.url}${d.signedURL}${l}`):null}))})}download(o,i,r){const u=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),l=f?`?${f}`:"",d=this._getFinalPath(o),_=()=>xa(this.fetch,`${this.url}/${u}/${d}${l}`,{headers:this.headers,noResolveJson:!0},r);return new Zg(_,this.shouldThrowOnError)}async info(o){var i=this;const r=i._getFinalPath(o);return i.handleOperation(async()=>mh(await xa(i.fetch,`${i.url}/object/info/${r}`,{headers:i.headers})))}async exists(o){var i=this;const r=i._getFinalPath(o);try{return await $g(i.fetch,`${i.url}/object/${r}`,{headers:i.headers}),{data:!0,error:null}}catch(u){if(i.shouldThrowOnError)throw u;if(mu(u)&&u instanceof Cp){const f=u.originalError;if([400,404].includes(f==null?void 0:f.status))return{data:!1,error:u}}throw u}}getPublicUrl(o,i){const r=this._getFinalPath(o),u=[],f=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";f!==""&&u.push(f);const l=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});d!==""&&u.push(d);let _=u.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${_}`)}}}async remove(o){var i=this;return i.handleOperation(async()=>await Nh(i.fetch,`${i.url}/object/${i.bucketId}`,{prefixes:o},{headers:i.headers}))}async list(o,i,r){var u=this;return u.handleOperation(async()=>{const f=xe(xe(xe({},Hg),i),{},{prefix:o||""});return await jn(u.fetch,`${u.url}/object/list/${u.bucketId}`,f,{headers:u.headers},r)})}async listV2(o,i){var r=this;return r.handleOperation(async()=>{const u=xe({},o);return await jn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,u,{headers:r.headers},i)})}encodeMetadata(o){return JSON.stringify(o)}toBase64(o){return typeof Buffer<"u"?Buffer.from(o).toString("base64"):btoa(o)}_getFinalPath(o){return`${this.bucketId}/${o.replace(/^\/+/,"")}`}_removeEmptyFolders(o){return o.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(o){const i=[];return o.width&&i.push(`width=${o.width}`),o.height&&i.push(`height=${o.height}`),o.resize&&i.push(`resize=${o.resize}`),o.format&&i.push(`format=${o.format}`),o.quality&&i.push(`quality=${o.quality}`),i.join("&")}};const qg="2.95.3",La={"X-Client-Info":`storage-js/${qg}`};var Vg=class extends ro{constructor(o,i={},r,u){const f=new URL(o);u!=null&&u.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase."));const l=f.href.replace(/\/$/,""),d=xe(xe({},La),i);super(l,d,r,"storage")}async listBuckets(o){var i=this;return i.handleOperation(async()=>{const r=i.listBucketOptionsToQueryString(o);return await xa(i.fetch,`${i.url}/bucket${r}`,{headers:i.headers})})}async getBucket(o){var i=this;return i.handleOperation(async()=>await xa(i.fetch,`${i.url}/bucket/${o}`,{headers:i.headers}))}async createBucket(o,i={public:!1}){var r=this;return r.handleOperation(async()=>await jn(r.fetch,`${r.url}/bucket`,{id:o,name:o,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:r.headers}))}async updateBucket(o,i){var r=this;return r.handleOperation(async()=>await _h(r.fetch,`${r.url}/bucket/${o}`,{id:o,name:o,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(o){var i=this;return i.handleOperation(async()=>await jn(i.fetch,`${i.url}/bucket/${o}/empty`,{},{headers:i.headers}))}async deleteBucket(o){var i=this;return i.handleOperation(async()=>await Nh(i.fetch,`${i.url}/bucket/${o}`,{},{headers:i.headers}))}listBucketOptionsToQueryString(o){const i={};return o&&("limit"in o&&(i.limit=String(o.limit)),"offset"in o&&(i.offset=String(o.offset)),o.search&&(i.search=o.search),o.sortColumn&&(i.sortColumn=o.sortColumn),o.sortOrder&&(i.sortOrder=o.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}},Gg=class extends ro{constructor(o,i={},r){const u=o.replace(/\/$/,""),f=xe(xe({},La),i);super(u,f,r,"storage")}async createBucket(o){var i=this;return i.handleOperation(async()=>await jn(i.fetch,`${i.url}/bucket`,{name:o},{headers:i.headers}))}async listBuckets(o){var i=this;return i.handleOperation(async()=>{const r=new URLSearchParams;(o==null?void 0:o.limit)!==void 0&&r.set("limit",o.limit.toString()),(o==null?void 0:o.offset)!==void 0&&r.set("offset",o.offset.toString()),o!=null&&o.sortColumn&&r.set("sortColumn",o.sortColumn),o!=null&&o.sortOrder&&r.set("sortOrder",o.sortOrder),o!=null&&o.search&&r.set("search",o.search);const u=r.toString(),f=u?`${i.url}/bucket?${u}`:`${i.url}/bucket`;return await xa(i.fetch,f,{headers:i.headers})})}async deleteBucket(o){var i=this;return i.handleOperation(async()=>await Nh(i.fetch,`${i.url}/bucket/${o}`,{},{headers:i.headers}))}from(o){var i=this;if(!Ag(o))throw new pu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new jg({baseUrl:this.url,catalogName:o,auth:{type:"custom",getHeaders:async()=>i.headers},fetch:this.fetch}),u=this.shouldThrowOnError;return new Proxy(r,{get(f,l){const d=f[l];return typeof d!="function"?d:async(..._)=>{try{return{data:await d.apply(f,_),error:null}}catch(g){if(u)throw g;return{data:null,error:g}}}}})}},Kg=class extends ro{constructor(o,i={},r){const u=o.replace(/\/$/,""),f=xe(xe({},La),{},{"Content-Type":"application/json"},i);super(u,f,r,"vectors")}async createIndex(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/CreateIndex`,o,{headers:i.headers})||{})}async getIndex(o,i){var r=this;return r.handleOperation(async()=>await on.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:o,indexName:i},{headers:r.headers}))}async listIndexes(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/ListIndexes`,o,{headers:i.headers}))}async deleteIndex(o,i){var r=this;return r.handleOperation(async()=>await on.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:o,indexName:i},{headers:r.headers})||{})}},Jg=class extends ro{constructor(o,i={},r){const u=o.replace(/\/$/,""),f=xe(xe({},La),{},{"Content-Type":"application/json"},i);super(u,f,r,"vectors")}async putVectors(o){var i=this;if(o.vectors.length<1||o.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/PutVectors`,o,{headers:i.headers})||{})}async getVectors(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/GetVectors`,o,{headers:i.headers}))}async listVectors(o){var i=this;if(o.segmentCount!==void 0){if(o.segmentCount<1||o.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(o.segmentIndex!==void 0&&(o.segmentIndex<0||o.segmentIndex>=o.segmentCount))throw new Error(`segmentIndex must be between 0 and ${o.segmentCount-1}`)}return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/ListVectors`,o,{headers:i.headers}))}async queryVectors(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/QueryVectors`,o,{headers:i.headers}))}async deleteVectors(o){var i=this;if(o.keys.length<1||o.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/DeleteVectors`,o,{headers:i.headers})||{})}},Qg=class extends ro{constructor(o,i={},r){const u=o.replace(/\/$/,""),f=xe(xe({},La),{},{"Content-Type":"application/json"},i);super(u,f,r,"vectors")}async createBucket(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/CreateVectorBucket`,{vectorBucketName:o},{headers:i.headers})||{})}async getBucket(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/GetVectorBucket`,{vectorBucketName:o},{headers:i.headers}))}async listBuckets(o={}){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/ListVectorBuckets`,o,{headers:i.headers}))}async deleteBucket(o){var i=this;return i.handleOperation(async()=>await on.post(i.fetch,`${i.url}/DeleteVectorBucket`,{vectorBucketName:o},{headers:i.headers})||{})}},Yg=class extends Qg{constructor(o,i={}){super(o,i.headers||{},i.fetch)}from(o){return new Xg(this.url,this.headers,o,this.fetch)}async createBucket(o){var i=()=>super.createBucket,r=this;return i().call(r,o)}async getBucket(o){var i=()=>super.getBucket,r=this;return i().call(r,o)}async listBuckets(o={}){var i=()=>super.listBuckets,r=this;return i().call(r,o)}async deleteBucket(o){var i=()=>super.deleteBucket,r=this;return i().call(r,o)}},Xg=class extends Kg{constructor(o,i,r,u){super(o,i,u),this.vectorBucketName=r}async createIndex(o){var i=()=>super.createIndex,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(o={}){var i=()=>super.listIndexes,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(o){var i=()=>super.getIndex,r=this;return i().call(r,r.vectorBucketName,o)}async deleteIndex(o){var i=()=>super.deleteIndex,r=this;return i().call(r,r.vectorBucketName,o)}index(o){return new ev(this.url,this.headers,this.vectorBucketName,o,this.fetch)}},ev=class extends Jg{constructor(o,i,r,u,f){super(o,i,f),this.vectorBucketName=r,this.indexName=u}async putVectors(o){var i=()=>super.putVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(o){var i=()=>super.getVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(o={}){var i=()=>super.listVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(o){var i=()=>super.queryVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(o){var i=()=>super.deleteVectors,r=this;return i().call(r,xe(xe({},o),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},tv=class extends Vg{constructor(o,i={},r,u){super(o,i,r,u)}from(o){return new Wg(this.url,this.headers,o,this.fetch)}get vectors(){return new Yg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Gg(this.url+"/iceberg",this.headers,this.fetch)}};const Tp="2.95.3",Gs=30*1e3,gh=3,Xc=gh*Gs,nv="http://localhost:9999",iv="supabase.auth.token",rv={"X-Client-Info":`gotrue-js/${Tp}`},vh="X-Supabase-Api-Version",Op={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ov=600*1e3;class ka extends Error{constructor(i,r,u){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=u}}function de(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class av extends ka{constructor(i,r,u){super(i,r,u),this.name="AuthApiError",this.status=r,this.code=u}}function lv(o){return de(o)&&o.name==="AuthApiError"}class Vr extends ka{constructor(i,r){super(i),this.name="AuthUnknownError",this.originalError=r}}class yi extends ka{constructor(i,r,u,f){super(i,u,f),this.name=r,this.status=u}}class sn extends yi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eh(o){return de(o)&&o.name==="AuthSessionMissingError"}class Fs extends yi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eu extends yi{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class tu extends yi{constructor(i,r=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uv(o){return de(o)&&o.name==="AuthImplicitGrantRedirectError"}class Zf extends yi{constructor(i,r=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cv extends yi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class yh extends yi{constructor(i,r){super(i,"AuthRetryableFetchError",r,void 0)}}function th(o){return de(o)&&o.name==="AuthRetryableFetchError"}class Hf extends yi{constructor(i,r,u){super(i,"AuthWeakPasswordError",r,"weak_password"),this.reasons=u}}class wh extends yi{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wf=` 	
\r=`.split(""),hv=(()=>{const o=new Array(128);for(let i=0;i<o.length;i+=1)o[i]=-1;for(let i=0;i<Wf.length;i+=1)o[Wf[i].charCodeAt(0)]=-2;for(let i=0;i<au.length;i+=1)o[au[i].charCodeAt(0)]=i;return o})();function qf(o,i,r){if(o!==null)for(i.queue=i.queue<<8|o,i.queuedBits+=8;i.queuedBits>=6;){const u=i.queue>>i.queuedBits-6&63;r(au[u]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const u=i.queue>>i.queuedBits-6&63;r(au[u]),i.queuedBits-=6}}function jp(o,i,r){const u=hv[o];if(u>-1)for(i.queue=i.queue<<6|u,i.queuedBits+=6;i.queuedBits>=8;)r(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(u===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Vf(o){const i=[],r=d=>{i.push(String.fromCodePoint(d))},u={utf8seq:0,codepoint:0},f={queue:0,queuedBits:0},l=d=>{pv(d,u,r)};for(let d=0;d<o.length;d+=1)jp(o.charCodeAt(d),f,l);return i.join("")}function dv(o,i){if(o<=127){i(o);return}else if(o<=2047){i(192|o>>6),i(128|o&63);return}else if(o<=65535){i(224|o>>12),i(128|o>>6&63),i(128|o&63);return}else if(o<=1114111){i(240|o>>18),i(128|o>>12&63),i(128|o>>6&63),i(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function fv(o,i){for(let r=0;r<o.length;r+=1){let u=o.charCodeAt(r);if(u>55295&&u<=56319){const f=(u-55296)*1024&65535;u=(o.charCodeAt(r+1)-56320&65535|f)+65536,r+=1}dv(u,i)}}function pv(o,i,r){if(i.utf8seq===0){if(o<=127){r(o);return}for(let u=1;u<6;u+=1)if((o>>7-u&1)===0){i.utf8seq=u;break}if(i.utf8seq===2)i.codepoint=o&31;else if(i.utf8seq===3)i.codepoint=o&15;else if(i.utf8seq===4)i.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|o&63,i.utf8seq-=1,i.utf8seq===0&&r(i.codepoint)}}function Qs(o){const i=[],r={queue:0,queuedBits:0},u=f=>{i.push(f)};for(let f=0;f<o.length;f+=1)jp(o.charCodeAt(f),r,u);return new Uint8Array(i)}function mv(o){const i=[];return fv(o,r=>i.push(r)),new Uint8Array(i)}function Gr(o){const i=[],r={queue:0,queuedBits:0},u=f=>{i.push(f)};return o.forEach(f=>qf(f,r,u)),qf(null,r,u),i.join("")}function _v(o){return Math.round(Date.now()/1e3)+o}function gv(){return Symbol("auth-callback")}const Lt=()=>typeof window<"u"&&typeof document<"u",Fr={tested:!1,writable:!1},Np=()=>{if(!Lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fr.tested)return Fr.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Fr.tested=!0,Fr.writable=!0}catch{Fr.tested=!0,Fr.writable=!1}return Fr.writable};function vv(o){const i={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((f,l)=>{i[l]=f})}catch{}return r.searchParams.forEach((u,f)=>{i[f]=u}),i}const Rp=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),yv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Ks=async(o,i,r)=>{await o.setItem(i,JSON.stringify(r))},Zr=async(o,i)=>{const r=await o.getItem(i);if(!r)return null;try{return JSON.parse(r)}catch{return r}},bt=async(o,i)=>{await o.removeItem(i)};class _u{constructor(){this.promise=new _u.promiseConstructor((i,r)=>{this.resolve=i,this.reject=r})}}_u.promiseConstructor=Promise;function nu(o){const i=o.split(".");if(i.length!==3)throw new wh("Invalid JWT structure");for(let u=0;u<i.length;u++)if(!sv.test(i[u]))throw new wh("JWT not in base64url format");return{header:JSON.parse(Vf(i[0])),payload:JSON.parse(Vf(i[1])),signature:Qs(i[2]),raw:{header:i[0],payload:i[1]}}}async function wv(o){return await new Promise(i=>{setTimeout(()=>i(null),o)})}function xv(o,i){return new Promise((u,f)=>{(async()=>{for(let l=0;l<1/0;l++)try{const d=await o(l);if(!i(l,null,d)){u(d);return}}catch(d){if(!i(l,d)){f(d);return}}})()})}function kv(o){return("0"+o.toString(16)).substr(-2)}function Sv(){const i=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",u=r.length;let f="";for(let l=0;l<56;l++)f+=r.charAt(Math.floor(Math.random()*u));return f}return crypto.getRandomValues(i),Array.from(i,kv).join("")}async function bv(o){const r=new TextEncoder().encode(o),u=await crypto.subtle.digest("SHA-256",r),f=new Uint8Array(u);return Array.from(f).map(l=>String.fromCharCode(l)).join("")}async function Lv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await bv(o);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zs(o,i,r=!1){const u=Sv();let f=u;r&&(f+="/PASSWORD_RECOVERY"),await Ks(o,`${i}-code-verifier`,f);const l=await Lv(u);return[l,u===l?"plain":"s256"]}const Cv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pv(o){const i=o.headers.get(vh);if(!i||!i.match(Cv))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function Ev(o){if(!o)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(o<=i)throw new Error("JWT has expired")}function Tv(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ov=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hs(o){if(!Ov.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nh(){const o={};return new Proxy(o,{get:(i,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const u=r.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jv(o,i){return new Proxy(o,{get:(r,u,f)=>{if(u==="__isInsecureUserWarningProxy")return!0;if(typeof u=="symbol"){const l=u.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,u,f)}return!i.value&&typeof u=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i.value=!0),Reflect.get(r,u,f)}})}function Gf(o){return JSON.parse(JSON.stringify(o))}const Wr=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Nv=[502,503,504];async function Kf(o){var i;if(!yv(o))throw new yh(Wr(o),0);if(Nv.includes(o.status))throw new yh(Wr(o),o.status);let r;try{r=await o.json()}catch(l){throw new Vr(Wr(l),l)}let u;const f=Pv(o);if(f&&f.getTime()>=Op["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?u=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(u=r.error_code),u){if(u==="weak_password")throw new Hf(Wr(r),o.status,((i=r.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(u==="session_not_found")throw new sn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0))throw new Hf(Wr(r),o.status,r.weak_password.reasons);throw new av(Wr(r),o.status||500,u)}const Rv=(o,i,r,u)=>{const f={method:o,headers:(i==null?void 0:i.headers)||{}};return o==="GET"?f:(f.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i==null?void 0:i.headers),f.body=JSON.stringify(u),Object.assign(Object.assign({},f),r))};async function we(o,i,r,u){var f;const l=Object.assign({},u==null?void 0:u.headers);l[vh]||(l[vh]=Op["2024-01-01"].name),u!=null&&u.jwt&&(l.Authorization=`Bearer ${u.jwt}`);const d=(f=u==null?void 0:u.query)!==null&&f!==void 0?f:{};u!=null&&u.redirectTo&&(d.redirect_to=u.redirectTo);const _=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",g=await Av(o,i,r+_,{headers:l,noResolveJson:u==null?void 0:u.noResolveJson},{},u==null?void 0:u.body);return u!=null&&u.xform?u==null?void 0:u.xform(g):{data:Object.assign({},g),error:null}}async function Av(o,i,r,u,f,l){const d=Rv(i,u,f,l);let _;try{_=await o(r,Object.assign({},d))}catch(g){throw console.error(g),new yh(Wr(g),0)}if(_.ok||await Kf(_),u!=null&&u.noResolveJson)return _;try{return await _.json()}catch(g){await Kf(g)}}function On(o){var i;let r=null;zv(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=_v(o.expires_in)));const u=(i=o.user)!==null&&i!==void 0?i:o;return{data:{session:r,user:u},error:null}}function Jf(o){const i=On(o);return!i.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,u)=>r&&typeof u=="string",!0)&&(i.data.weak_password=o.weak_password),i}function or(o){var i;return{data:{user:(i=o.user)!==null&&i!==void 0?i:o},error:null}}function Iv(o){return{data:o,error:null}}function Mv(o){const{action_link:i,email_otp:r,hashed_token:u,redirect_to:f,verification_type:l}=o,d=fu(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),_={action_link:i,email_otp:r,hashed_token:u,redirect_to:f,verification_type:l},g=Object.assign({},d);return{data:{properties:_,user:g},error:null}}function Qf(o){return o}function zv(o){return o.access_token&&o.refresh_token&&o.expires_in}const ih=["global","local","others"];class Bv{constructor({url:i="",headers:r={},fetch:u}){this.url=i,this.headers=r,this.fetch=Rp(u),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(i,r=ih[0]){if(ih.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ih.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(u){if(de(u))return{data:null,error:u};throw u}}async inviteUserByEmail(i,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:or})}catch(u){if(de(u))return{data:{user:null},error:u};throw u}}async generateLink(i){try{const{options:r}=i,u=fu(i,["options"]),f=Object.assign(Object.assign({},u),r);return"newEmail"in u&&(f.new_email=u==null?void 0:u.newEmail,delete f.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:f,headers:this.headers,xform:Mv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(de(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(i){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:or})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async listUsers(i){var r,u,f,l,d,_,g;try{const w={nextPage:null,lastPage:0,total:0},k=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(u=(r=i==null?void 0:i.page)===null||r===void 0?void 0:r.toString())!==null&&u!==void 0?u:"",per_page:(l=(f=i==null?void 0:i.perPage)===null||f===void 0?void 0:f.toString())!==null&&l!==void 0?l:""},xform:Qf});if(k.error)throw k.error;const b=await k.json(),P=(d=k.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(g=(_=k.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(j=>{const O=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(j.split(";")[1].split("=")[1]);w[`${M}Page`]=O}),w.total=parseInt(P)),{data:Object.assign(Object.assign({},b),w),error:null}}catch(w){if(de(w))return{data:{users:[]},error:w};throw w}}async getUserById(i){Hs(i);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:or})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async updateUserById(i,r){Hs(i);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:r,headers:this.headers,xform:or})}catch(u){if(de(u))return{data:{user:null},error:u};throw u}}async deleteUser(i,r=!1){Hs(i);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:r},xform:or})}catch(u){if(de(u))return{data:{user:null},error:u};throw u}}async _listFactors(i){Hs(i.userId);try{const{data:r,error:u}=await we(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:f=>({data:{factors:f},error:null})});return{data:r,error:u}}catch(r){if(de(r))return{data:null,error:r};throw r}}async _deleteFactor(i){Hs(i.userId),Hs(i.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async _listOAuthClients(i){var r,u,f,l,d,_,g;try{const w={nextPage:null,lastPage:0,total:0},k=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(u=(r=i==null?void 0:i.page)===null||r===void 0?void 0:r.toString())!==null&&u!==void 0?u:"",per_page:(l=(f=i==null?void 0:i.perPage)===null||f===void 0?void 0:f.toString())!==null&&l!==void 0?l:""},xform:Qf});if(k.error)throw k.error;const b=await k.json(),P=(d=k.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(g=(_=k.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(j=>{const O=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(j.split(";")[1].split("=")[1]);w[`${M}Page`]=O}),w.total=parseInt(P)),{data:Object.assign(Object.assign({},b),w),error:null}}catch(w){if(de(w))return{data:{clients:[]},error:w};throw w}}async _createOAuthClient(i){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _getOAuthClient(i){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _updateOAuthClient(i,r){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${i}`,{body:r,headers:this.headers,xform:u=>({data:u,error:null})})}catch(u){if(de(u))return{data:null,error:u};throw u}}async _deleteOAuthClient(i){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(i){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${i}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}}function Yf(o={}){return{getItem:i=>o[i]||null,setItem:(i,r)=>{o[i]=r},removeItem:i=>{delete o[i]}}}const Ws={debug:!!(globalThis&&Np()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ap extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class Dv extends Ap{}async function Uv(o,i,r){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,i);const u=new globalThis.AbortController;return i>0&&setTimeout(()=>{u.abort(),Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:u.signal},async f=>{if(f){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,f.name);try{return await r()}finally{Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,f.name)}}else{if(i===0)throw Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Dv(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Ws.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function $v(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ip(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function Fv(o){return parseInt(o,16)}function Zv(o){const i=new TextEncoder().encode(o);return"0x"+Array.from(i,u=>u.toString(16).padStart(2,"0")).join("")}function Hv(o){var i;const{chainId:r,domain:u,expirationTime:f,issuedAt:l=new Date,nonce:d,notBefore:_,requestId:g,resources:w,scheme:k,uri:b,version:P}=o;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(P!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${P}`);if(!((i=o.statement)===null||i===void 0)&&i.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const E=Ip(o.address),j=k?`${k}://${u}`:u,O=o.statement?`${o.statement}
`:"",M=`${j} wants you to sign in with your Ethereum account:
${E}

${O}`;let $=`URI: ${b}
Version: ${P}
Chain ID: ${r}${d?`
Nonce: ${d}`:""}
Issued At: ${l.toISOString()}`;if(f&&($+=`
Expiration Time: ${f.toISOString()}`),_&&($+=`
Not Before: ${_.toISOString()}`),g&&($+=`
Request ID: ${g}`),w){let z=`
Resources:`;for(const W of w){if(!W||typeof W!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${W}`);z+=`
- ${W}`}$+=z}return`${M}
${$}`}class ht extends Error{constructor({message:i,code:r,cause:u,name:f}){var l;super(i,{cause:u}),this.__isWebAuthnError=!0,this.name=(l=f??(u instanceof Error?u.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class lu extends ht{constructor(i,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:i}),this.name="WebAuthnUnknownError",this.originalError=r}}function Wv({error:o,options:i}){var r,u,f;const{publicKey:l}=i;if(!l)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(i.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(i.mediation==="conditional"&&((u=l.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((f=l.authenticatorSelection)===null||f===void 0?void 0:f.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new ht({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return l.pubKeyCredParams.filter(_=>_.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const d=window.location.hostname;if(Mp(d)){if(l.rp.id!==d)return new ht({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function qv({error:o,options:i}){const{publicKey:r}=i;if(!r)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(i.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new ht({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const u=window.location.hostname;if(Mp(u)){if(r.rpId!==u)return new ht({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class Vv{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const i=new AbortController;return this.controller=i,i.signal}cancelCeremony(){if(this.controller){const i=new Error("Manually cancelling existing WebAuthn API call");i.name="AbortError",this.controller.abort(i),this.controller=void 0}}}const Gv=new Vv;function Kv(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:i,user:r,excludeCredentials:u}=o,f=fu(o,["challenge","user","excludeCredentials"]),l=Qs(i).buffer,d=Object.assign(Object.assign({},r),{id:Qs(r.id).buffer}),_=Object.assign(Object.assign({},f),{challenge:l,user:d});if(u&&u.length>0){_.excludeCredentials=new Array(u.length);for(let g=0;g<u.length;g++){const w=u[g];_.excludeCredentials[g]=Object.assign(Object.assign({},w),{id:Qs(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return _}function Jv(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:i,allowCredentials:r}=o,u=fu(o,["challenge","allowCredentials"]),f=Qs(i).buffer,l=Object.assign(Object.assign({},u),{challenge:f});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const _=r[d];l.allowCredentials[d]=Object.assign(Object.assign({},_),{id:Qs(_.id).buffer,type:_.type||"public-key",transports:_.transports})}}return l}function Qv(o){var i;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o;return{id:o.id,rawId:o.id,response:{attestationObject:Gr(new Uint8Array(o.response.attestationObject)),clientDataJSON:Gr(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(i=r.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function Yv(o){var i;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const r=o,u=o.getClientExtensionResults(),f=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:Gr(new Uint8Array(f.authenticatorData)),clientDataJSON:Gr(new Uint8Array(f.clientDataJSON)),signature:Gr(new Uint8Array(f.signature)),userHandle:f.userHandle?Gr(new Uint8Array(f.userHandle)):void 0},type:"public-key",clientExtensionResults:u,authenticatorAttachment:(i=r.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function Mp(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Xf(){var o,i;return!!(Lt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator==null?void 0:navigator.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.get)=="function")}async function Xv(o){try{const i=await navigator.credentials.create(o);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new lu("Browser returned unexpected credential type",i)}:{data:null,error:new lu("Empty credential response",i)}}catch(i){return{data:null,error:Wv({error:i,options:o})}}}async function ey(o){try{const i=await navigator.credentials.get(o);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new lu("Browser returned unexpected credential type",i)}:{data:null,error:new lu("Empty credential response",i)}}catch(i){return{data:null,error:qv({error:i,options:o})}}}const ty={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ny={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uu(...o){const i=f=>f!==null&&typeof f=="object"&&!Array.isArray(f),r=f=>f instanceof ArrayBuffer||ArrayBuffer.isView(f),u={};for(const f of o)if(f)for(const l in f){const d=f[l];if(d!==void 0)if(Array.isArray(d))u[l]=d;else if(r(d))u[l]=d;else if(i(d)){const _=u[l];i(_)?u[l]=uu(_,d):u[l]=uu(d)}else u[l]=d}return u}function iy(o,i){return uu(ty,o,i||{})}function ry(o,i){return uu(ny,o,i||{})}class sy{constructor(i){this.client=i,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(i){return this.client.mfa.enroll(Object.assign(Object.assign({},i),{factorType:"webauthn"}))}async _challenge({factorId:i,webauthn:r,friendlyName:u,signal:f},l){var d;try{const{data:_,error:g}=await this.client.mfa.challenge({factorId:i,webauthn:r});if(!_)return{data:null,error:g};const w=f??Gv.createNewAbortSignal();if(_.webauthn.type==="create"){const{user:k}=_.webauthn.credential_options.publicKey;if(!k.name){const b=u;if(b)k.name=`${k.id}:${b}`;else{const E=(await this.client.getUser()).data.user,j=((d=E==null?void 0:E.user_metadata)===null||d===void 0?void 0:d.name)||(E==null?void 0:E.email)||(E==null?void 0:E.id)||"User";k.name=`${k.id}:${j}`}}k.displayName||(k.displayName=k.name)}switch(_.webauthn.type){case"create":{const k=iy(_.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:P}=await Xv({publicKey:k,signal:w});return b?{data:{factorId:i,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:b}},error:null}:{data:null,error:P}}case"request":{const k=ry(_.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:P}=await ey(Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:k,signal:w}));return b?{data:{factorId:i,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:b}},error:null}:{data:null,error:P}}}}catch(_){return de(_)?{data:null,error:_}:{data:null,error:new Vr("Unexpected error in challenge",_)}}}async _verify({challengeId:i,factorId:r,webauthn:u}){return this.client.mfa.verify({factorId:r,challengeId:i,webauthn:u})}async _authenticate({factorId:i,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:u=typeof window<"u"?[window.location.origin]:void 0,signal:f}={}},l){if(!r)return{data:null,error:new ka("rpId is required for WebAuthn authentication")};try{if(!Xf())return{data:null,error:new Vr("Browser does not support WebAuthn",null)};const{data:d,error:_}=await this.challenge({factorId:i,webauthn:{rpId:r,rpOrigins:u},signal:f},{request:l});if(!d)return{data:null,error:_};const{webauthn:g}=d;return this._verify({factorId:i,challengeId:d.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:u,credential_response:g.credential_response}})}catch(d){return de(d)?{data:null,error:d}:{data:null,error:new Vr("Unexpected error in authenticate",d)}}}async _register({friendlyName:i,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:u=typeof window<"u"?[window.location.origin]:void 0,signal:f}={}},l){if(!r)return{data:null,error:new ka("rpId is required for WebAuthn registration")};try{if(!Xf())return{data:null,error:new Vr("Browser does not support WebAuthn",null)};const{data:d,error:_}=await this._enroll({friendlyName:i});if(!d)return await this.client.mfa.listFactors().then(k=>{var b;return(b=k.data)===null||b===void 0?void 0:b.all.find(P=>P.factor_type==="webauthn"&&P.friendly_name===i&&P.status!=="unverified")}).then(k=>k?this.client.mfa.unenroll({factorId:k==null?void 0:k.id}):void 0),{data:null,error:_};const{data:g,error:w}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:r,rpOrigins:u},signal:f},{create:l});return g?this._verify({factorId:d.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:u,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:w}}catch(d){return de(d)?{data:null,error:d}:{data:null,error:new Vr("Unexpected error in register",d)}}}}$v();const oy={url:nv,storageKey:iv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ep(o,i,r){return await r()}const qs={};class Sa{get jwks(){var i,r;return(r=(i=qs[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(i){qs[this.storageKey]=Object.assign(Object.assign({},qs[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,r;return(r=(i=qs[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){qs[this.storageKey]=Object.assign(Object.assign({},qs[this.storageKey]),{cachedAt:i})}constructor(i){var r,u,f;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},oy),i);if(this.storageKey=l.storageKey,this.instanceID=(r=Sa.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Sa.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Lt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Bv({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Rp(l.fetch),this.lock=l.lock||ep,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&Lt()&&(!((u=globalThis==null?void 0:globalThis.navigator)===null||u===void 0)&&u.locks)?this.lock=Uv:this.lock=ep,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Np()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Yf(this.memoryStorage)),Lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(f=this.broadcastChannel)===null||f===void 0||f.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(_){this._debug("#broadcastChannel","error",_)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(i){if(this.throwOnError&&i&&i.error)throw i.error;return i}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Tp}) ${new Date().toISOString()}`}_debug(...i){return this.logDebugMessages&&this.logger(this._logPrefix(),...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{let r={},u="none";if(Lt()&&(r=vv(window.location.href),this._isImplicitGrantCallback(r)?u="implicit":await this._isPKCECallback(r)&&(u="pkce")),Lt()&&this.detectSessionInUrl&&u!=="none"){const{data:f,error:l}=await this._getSessionFromURL(r,u);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),uv(l)){const g=(i=l.details)===null||i===void 0?void 0:i.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:d,redirectType:_}=f;return this._debug("#_initialize()","detected session in URL",d,"redirect type",_),await this._saveSession(d),setTimeout(async()=>{_==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return de(r)?this._returnResult({error:r}):this._returnResult({error:new Vr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var r,u,f;try{const l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(u=(r=i==null?void 0:i.options)===null||r===void 0?void 0:r.data)!==null&&u!==void 0?u:{},gotrue_meta_security:{captcha_token:(f=i==null?void 0:i.options)===null||f===void 0?void 0:f.captchaToken}},xform:On}),{data:d,error:_}=l;if(_||!d)return this._returnResult({data:{user:null,session:null},error:_});const g=d.session,w=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(l){if(de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(i){var r,u,f;try{let l;if("email"in i){const{email:k,password:b,options:P}=i;let E=null,j=null;this.flowType==="pkce"&&([E,j]=await Zs(this.storage,this.storageKey)),l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:P==null?void 0:P.emailRedirectTo,body:{email:k,password:b,data:(r=P==null?void 0:P.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:P==null?void 0:P.captchaToken},code_challenge:E,code_challenge_method:j},xform:On})}else if("phone"in i){const{phone:k,password:b,options:P}=i;l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:k,password:b,data:(u=P==null?void 0:P.data)!==null&&u!==void 0?u:{},channel:(f=P==null?void 0:P.channel)!==null&&f!==void 0?f:"sms",gotrue_meta_security:{captcha_token:P==null?void 0:P.captchaToken}},xform:On})}else throw new eu("You must provide either an email or phone number and a password");const{data:d,error:_}=l;if(_||!d)return await bt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:_});const g=d.session,w=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(l){if(await bt(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(i){try{let r;if("email"in i){const{email:l,password:d,options:_}=i;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:d,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Jf})}else if("phone"in i){const{phone:l,password:d,options:_}=i;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:d,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Jf})}else throw new eu("You must provide either an email or phone number and a password");const{data:u,error:f}=r;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u||!u.session||!u.user){const l=new Fs;return this._returnResult({data:{user:null,session:null},error:l})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign({user:u.user,session:u.session},u.weak_password?{weakPassword:u.weak_password}:null),error:f})}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(i){var r,u,f,l;return await this._handleProviderSignIn(i.provider,{redirectTo:(r=i.options)===null||r===void 0?void 0:r.redirectTo,scopes:(u=i.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=i.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:(l=i.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:r}=i;switch(r){case"ethereum":return await this.signInWithEthereum(i);case"solana":return await this.signInWithSolana(i);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(i){var r,u,f,l,d,_,g,w,k,b,P;let E,j;if("message"in i)E=i.message,j=i.signature;else{const{chain:O,wallet:M,statement:$,options:z}=i;let W;if(Lt())if(typeof M=="object")W=M;else{const De=window;if("ethereum"in De&&typeof De.ethereum=="object"&&"request"in De.ethereum&&typeof De.ethereum.request=="function")W=De.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=M}const Q=new URL((r=z==null?void 0:z.url)!==null&&r!==void 0?r:window.location.href),ne=await W.request({method:"eth_requestAccounts"}).then(De=>De).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ne||ne.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const pe=Ip(ne[0]);let Ce=(u=z==null?void 0:z.signInWithEthereum)===null||u===void 0?void 0:u.chainId;if(!Ce){const De=await W.request({method:"eth_chainId"});Ce=Fv(De)}const Be={domain:Q.host,address:pe,statement:$,uri:Q.href,version:"1",chainId:Ce,nonce:(f=z==null?void 0:z.signInWithEthereum)===null||f===void 0?void 0:f.nonce,issuedAt:(d=(l=z==null?void 0:z.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(_=z==null?void 0:z.signInWithEthereum)===null||_===void 0?void 0:_.expirationTime,notBefore:(g=z==null?void 0:z.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(w=z==null?void 0:z.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(k=z==null?void 0:z.signInWithEthereum)===null||k===void 0?void 0:k.resources};E=Hv(Be),j=await W.request({method:"personal_sign",params:[Zv(E),pe]})}try{const{data:O,error:M}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:j},!((b=i.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(P=i.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:On});if(M)throw M;if(!O||!O.session||!O.user){const $=new Fs;return this._returnResult({data:{user:null,session:null},error:$})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:M})}catch(O){if(de(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async signInWithSolana(i){var r,u,f,l,d,_,g,w,k,b,P,E;let j,O;if("message"in i)j=i.message,O=i.signature;else{const{chain:M,wallet:$,statement:z,options:W}=i;let Q;if(Lt())if(typeof $=="object")Q=$;else{const pe=window;if("solana"in pe&&typeof pe.solana=="object"&&("signIn"in pe.solana&&typeof pe.solana.signIn=="function"||"signMessage"in pe.solana&&typeof pe.solana.signMessage=="function"))Q=pe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(W!=null&&W.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=$}const ne=new URL((r=W==null?void 0:W.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Q&&Q.signIn){const pe=await Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},W==null?void 0:W.signInWithSolana),{version:"1",domain:ne.host,uri:ne.href}),z?{statement:z}:null));let Ce;if(Array.isArray(pe)&&pe[0]&&typeof pe[0]=="object")Ce=pe[0];else if(pe&&typeof pe=="object"&&"signedMessage"in pe&&"signature"in pe)Ce=pe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Ce&&"signature"in Ce&&(typeof Ce.signedMessage=="string"||Ce.signedMessage instanceof Uint8Array)&&Ce.signature instanceof Uint8Array)j=typeof Ce.signedMessage=="string"?Ce.signedMessage:new TextDecoder().decode(Ce.signedMessage),O=Ce.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${ne.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${ne.href}`,`Issued At: ${(f=(u=W==null?void 0:W.signInWithSolana)===null||u===void 0?void 0:u.issuedAt)!==null&&f!==void 0?f:new Date().toISOString()}`,...!((l=W==null?void 0:W.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${W.signInWithSolana.notBefore}`]:[],...!((d=W==null?void 0:W.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${W.signInWithSolana.expirationTime}`]:[],...!((_=W==null?void 0:W.signInWithSolana)===null||_===void 0)&&_.chainId?[`Chain ID: ${W.signInWithSolana.chainId}`]:[],...!((g=W==null?void 0:W.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${W.signInWithSolana.nonce}`]:[],...!((w=W==null?void 0:W.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${W.signInWithSolana.requestId}`]:[],...!((b=(k=W==null?void 0:W.signInWithSolana)===null||k===void 0?void 0:k.resources)===null||b===void 0)&&b.length?["Resources",...W.signInWithSolana.resources.map(Ce=>`- ${Ce}`)]:[]].join(`
`);const pe=await Q.signMessage(new TextEncoder().encode(j),"utf8");if(!pe||!(pe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=pe}}try{const{data:M,error:$}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Gr(O)},!((P=i.options)===null||P===void 0)&&P.captchaToken?{gotrue_meta_security:{captcha_token:(E=i.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:On});if($)throw $;if(!M||!M.session||!M.user){const z=new Fs;return this._returnResult({data:{user:null,session:null},error:z})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:$})}catch(M){if(de(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async _exchangeCodeForSession(i){const r=await Zr(this.storage,`${this.storageKey}-code-verifier`),[u,f]=(r??"").split("/");try{if(!u&&this.flowType==="pkce")throw new cv;const{data:l,error:d}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:u},xform:On});if(await bt(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!l||!l.session||!l.user){const _=new Fs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:_})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:f??null}),error:d})}catch(l){if(await bt(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(i){try{const{options:r,provider:u,token:f,access_token:l,nonce:d}=i,_=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:u,id_token:f,access_token:l,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:On}),{data:g,error:w}=_;if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!g||!g.session||!g.user){const k=new Fs;return this._returnResult({data:{user:null,session:null},error:k})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:w})}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(i){var r,u,f,l,d;try{if("email"in i){const{email:_,options:g}=i;let w=null,k=null;this.flowType==="pkce"&&([w,k]=await Zs(this.storage,this.storageKey));const{error:b}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:_,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(u=g==null?void 0:g.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:w,code_challenge_method:k},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in i){const{phone:_,options:g}=i,{data:w,error:k}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:_,data:(f=g==null?void 0:g.data)!==null&&f!==void 0?f:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(d=g==null?void 0:g.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:w==null?void 0:w.message_id},error:k})}throw new eu("You must provide either an email or phone number.")}catch(_){if(await bt(this.storage,`${this.storageKey}-code-verifier`),de(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async verifyOtp(i){var r,u;try{let f,l;"options"in i&&(f=(r=i.options)===null||r===void 0?void 0:r.redirectTo,l=(u=i.options)===null||u===void 0?void 0:u.captchaToken);const{data:d,error:_}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:l}}),redirectTo:f,xform:On});if(_)throw _;if(!d)throw new Error("An error occurred on token verification.");const g=d.session,w=d.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(f){if(de(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithSSO(i){var r,u,f,l,d;try{let _=null,g=null;this.flowType==="pkce"&&([_,g]=await Zs(this.storage,this.storageKey));const w=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(u=(r=i.options)===null||r===void 0?void 0:r.redirectTo)!==null&&u!==void 0?u:void 0}),!((f=i==null?void 0:i.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:_,code_challenge_method:g}),headers:this.headers,xform:Iv});return!((l=w.data)===null||l===void 0)&&l.url&&Lt()&&!(!((d=i.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(w.data.url),this._returnResult(w)}catch(_){if(await bt(this.storage,`${this.storageKey}-code-verifier`),de(_))return this._returnResult({data:null,error:_});throw _}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:r},error:u}=i;if(u)throw u;if(!r)throw new sn;const{error:f}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:f})})}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async resend(i){try{const r=`${this.url}/resend`;if("email"in i){const{email:u,type:f,options:l}=i,{error:d}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:u,type:f,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in i){const{phone:u,type:f,options:l}=i,{data:d,error:_}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:u,type:f,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:_})}throw new eu("You must provide either an email or phone number and a type")}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(i,r){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const u=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),f=(async()=>(await u,await r()))();return this.pendingInLock.push((async()=>{try{await f}catch{}})()),f}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const u=r();for(this.pendingInLock.push((async()=>{try{await u}catch{}})()),await u;this.pendingInLock.length;){const f=[...this.pendingInLock];await Promise.all(f),this.pendingInLock.splice(0,f.length)}return await u}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await i(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const r=await Zr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?i=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const u=i.expires_at?i.expires_at*1e3-Date.now()<Xc:!1;if(this._debug("#__loadSession()",`session has${u?"":" not"} expired`,"expires_at",i.expires_at),!u){if(this.userStorage){const d=await Zr(this.userStorage,this.storageKey+"-user");d!=null&&d.user?i.user=d.user:i.user=nh()}if(this.storage.isServer&&i.user&&!i.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};i.user=jv(i.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:i},error:null}}const{data:f,error:l}=await this._callRefreshToken(i.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:f},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(i){if(i)return await this._getUser(i);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(i){try{return i?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:or}):await this._useSession(async r=>{var u,f,l;const{data:d,error:_}=r;if(_)throw _;return!(!((u=d.session)===null||u===void 0)&&u.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(f=d.session)===null||f===void 0?void 0:f.access_token)!==null&&l!==void 0?l:void 0,xform:or})})}catch(r){if(de(r))return eh(r)&&(await this._removeSession(),await bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(i,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(i,r))}async _updateUser(i,r={}){try{return await this._useSession(async u=>{const{data:f,error:l}=u;if(l)throw l;if(!f.session)throw new sn;const d=f.session;let _=null,g=null;this.flowType==="pkce"&&i.email!=null&&([_,g]=await Zs(this.storage,this.storageKey));const{data:w,error:k}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:_,code_challenge_method:g}),jwt:d.access_token,xform:or});if(k)throw k;return d.user=w.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(u){if(await bt(this.storage,`${this.storageKey}-code-verifier`),de(u))return this._returnResult({data:{user:null},error:u});throw u}}async setSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new sn;const r=Date.now()/1e3;let u=r,f=!0,l=null;const{payload:d}=nu(i.access_token);if(d.exp&&(u=d.exp,f=u<=r),f){const{data:_,error:g}=await this._callRefreshToken(i.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!_)return{data:{user:null,session:null},error:null};l=_}else{const{data:_,error:g}=await this._getUser(i.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});l={access_token:i.access_token,refresh_token:i.refresh_token,user:_.user,token_type:"bearer",expires_in:u-r,expires_at:u},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(de(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async r=>{var u;if(!i){const{data:d,error:_}=r;if(_)throw _;i=(u=d.session)!==null&&u!==void 0?u:void 0}if(!(i!=null&&i.refresh_token))throw new sn;const{data:f,error:l}=await this._callRefreshToken(i.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):f?this._returnResult({data:{user:f.user,session:f},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(i,r){try{if(!Lt())throw new tu("No browser detected.");if(i.error||i.error_description||i.error_code)throw new tu(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Zf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new Zf("No code detected.");const{data:z,error:W}=await this._exchangeCodeForSession(i.code);if(W)throw W;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:u,provider_refresh_token:f,access_token:l,refresh_token:d,expires_in:_,expires_at:g,token_type:w}=i;if(!l||!_||!d||!w)throw new tu("No session defined in URL");const k=Math.round(Date.now()/1e3),b=parseInt(_);let P=k+b;g&&(P=parseInt(g));const E=P-k;E*1e3<=Gs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${b}s`);const j=P-b;k-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,P,k):k-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,P,k);const{data:O,error:M}=await this._getUser(l);if(M)throw M;const $={provider_token:u,provider_refresh_token:f,access_token:l,expires_in:b,expires_at:P,refresh_token:d,token_type:w,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:$,redirectType:i.type},error:null})}catch(u){if(de(u))return this._returnResult({data:{session:null,redirectType:null},error:u});throw u}}_isImplicitGrantCallback(i){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),i):!!(i.access_token||i.error_description)}async _isPKCECallback(i){const r=await Zr(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&r)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async r=>{var u;const{data:f,error:l}=r;if(l&&!eh(l))return this._returnResult({error:l});const d=(u=f.session)===null||u===void 0?void 0:u.access_token;if(d){const{error:_}=await this.admin.signOut(d,i);if(_&&!(lv(_)&&(_.status===404||_.status===401||_.status===403)||eh(_)))return this._returnResult({error:_})}return i!=="others"&&(await this._removeSession(),await bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(i){const r=gv(),u={id:r,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,u),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:u}}}async _emitInitialSession(i){return await this._useSession(async r=>{var u,f;try{const{data:{session:l},error:d}=r;if(d)throw d;await((u=this.stateChangeEmitters.get(i))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",i,"session",l)}catch(l){await((f=this.stateChangeEmitters.get(i))===null||f===void 0?void 0:f.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",l),console.error(l)}})}async resetPasswordForEmail(i,r={}){let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Zs(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:u,code_challenge_method:f,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(await bt(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var i;try{const{data:r,error:u}=await this.getUser();if(u)throw u;return this._returnResult({data:{identities:(i=r.user.identities)!==null&&i!==void 0?i:[]},error:null})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(i){return"token"in i?this.linkIdentityIdToken(i):this.linkIdentityOAuth(i)}async linkIdentityOAuth(i){var r;try{const{data:u,error:f}=await this._useSession(async l=>{var d,_,g,w,k;const{data:b,error:P}=l;if(P)throw P;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(d=i.options)===null||d===void 0?void 0:d.redirectTo,scopes:(_=i.options)===null||_===void 0?void 0:_.scopes,queryParams:(g=i.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",E,{headers:this.headers,jwt:(k=(w=b.session)===null||w===void 0?void 0:w.access_token)!==null&&k!==void 0?k:void 0})});if(f)throw f;return Lt()&&!(!((r=i.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(u==null?void 0:u.url),this._returnResult({data:{provider:i.provider,url:u==null?void 0:u.url},error:null})}catch(u){if(de(u))return this._returnResult({data:{provider:i.provider,url:null},error:u});throw u}}async linkIdentityIdToken(i){return await this._useSession(async r=>{var u;try{const{error:f,data:{session:l}}=r;if(f)throw f;const{options:d,provider:_,token:g,access_token:w,nonce:k}=i,b=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(u=l==null?void 0:l.access_token)!==null&&u!==void 0?u:void 0,body:{provider:_,id_token:g,access_token:w,nonce:k,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:On}),{data:P,error:E}=b;return E?this._returnResult({data:{user:null,session:null},error:E}):!P||!P.session||!P.user?this._returnResult({data:{user:null,session:null},error:new Fs}):(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("USER_UPDATED",P.session)),this._returnResult({data:P,error:E}))}catch(f){if(await bt(this.storage,`${this.storageKey}-code-verifier`),de(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}})}async unlinkIdentity(i){try{return await this._useSession(async r=>{var u,f;const{data:l,error:d}=r;if(d)throw d;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(f=(u=l.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(i){const r=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(r,"begin");try{const u=Date.now();return await xv(async f=>(f>0&&await wv(200*Math.pow(2,f-1)),this._debug(r,"refreshing attempt",f),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:On})),(f,l)=>{const d=200*Math.pow(2,f);return l&&th(l)&&Date.now()+d-u<Gs})}catch(u){if(this._debug(r,"error",u),de(u))return this._returnResult({data:{session:null,user:null},error:u});throw u}finally{this._debug(r,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,r){const u=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",r,"url",u),Lt()&&!r.skipBrowserRedirect&&window.location.assign(u),{data:{provider:i,url:u},error:null}}async _recoverAndRefresh(){var i,r;const u="#_recoverAndRefresh()";this._debug(u,"begin");try{const f=await Zr(this.storage,this.storageKey);if(f&&this.userStorage){let d=await Zr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:f.user},await Ks(this.userStorage,this.storageKey+"-user",d)),f.user=(i=d==null?void 0:d.user)!==null&&i!==void 0?i:nh()}else if(f&&!f.user&&!f.user){const d=await Zr(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(f.user=d.user,await bt(this.storage,this.storageKey+"-user"),await Ks(this.storage,this.storageKey,f)):f.user=nh()}if(this._debug(u,"session from storage",f),!this._isValidSession(f)){this._debug(u,"session is not valid"),f!==null&&await this._removeSession();return}const l=((r=f.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xc;if(this._debug(u,`session has${l?"":" not"} expired with margin of ${Xc}s`),l){if(this.autoRefreshToken&&f.refresh_token){const{error:d}=await this._callRefreshToken(f.refresh_token);d&&(console.error(d),th(d)||(this._debug(u,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(f.user&&f.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:_}=await this._getUser(f.access_token);!_&&(d!=null&&d.user)?(f.user=d.user,await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)):this._debug(u,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(u,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",f)}catch(f){this._debug(u,"error",f),console.error(f);return}finally{this._debug(u,"end")}}async _callRefreshToken(i){var r,u;if(!i)throw new sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const f=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(f,"begin");try{this.refreshingDeferred=new _u;const{data:l,error:d}=await this._refreshAccessToken(i);if(d)throw d;if(!l.session)throw new sn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const _={data:l.session,error:null};return this.refreshingDeferred.resolve(_),_}catch(l){if(this._debug(f,"error",l),de(l)){const d={data:null,error:l};return th(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(u=this.refreshingDeferred)===null||u===void 0||u.reject(l),l}finally{this.refreshingDeferred=null,this._debug(f,"end")}}async _notifyAllSubscribers(i,r,u=!0){const f=`#_notifyAllSubscribers(${i})`;this._debug(f,"begin",r,`broadcast = ${u}`);try{this.broadcastChannel&&u&&this.broadcastChannel.postMessage({event:i,session:r});const l=[],d=Array.from(this.stateChangeEmitters.values()).map(async _=>{try{await _.callback(i,r)}catch(g){l.push(g)}});if(await Promise.all(d),l.length>0){for(let _=0;_<l.length;_+=1)console.error(l[_]);throw l[0]}}finally{this._debug(f,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0,await bt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},i),u=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!u&&r.user&&await Ks(this.userStorage,this.storageKey+"-user",{user:r.user});const f=Object.assign({},r);delete f.user;const l=Gf(f);await Ks(this.storage,this.storageKey,l)}else{const f=Gf(r);await Ks(this.storage,this.storageKey,f)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await bt(this.storage,this.storageKey),await bt(this.storage,this.storageKey+"-code-verifier"),await bt(this.storage,this.storageKey+"-user"),this.userStorage&&await bt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&Lt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",i)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),Gs);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async r=>{const{data:{session:u}}=r;if(!u||!u.refresh_token||!u.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const f=Math.floor((u.expires_at*1e3-i)/Gs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${f} ticks, a tick lasts ${Gs}ms, refresh threshold is ${gh} ticks`),f<=gh&&await this._callRefreshToken(u.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof Ap)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(i){this._debug("#visibilityChangedCallback","error",i)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const r=`#_onVisibilityChanged(${i})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,r,u){const f=[`provider=${encodeURIComponent(r)}`];if(u!=null&&u.redirectTo&&f.push(`redirect_to=${encodeURIComponent(u.redirectTo)}`),u!=null&&u.scopes&&f.push(`scopes=${encodeURIComponent(u.scopes)}`),this.flowType==="pkce"){const[l,d]=await Zs(this.storage,this.storageKey),_=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(d)}`});f.push(_.toString())}if(u!=null&&u.queryParams){const l=new URLSearchParams(u.queryParams);f.push(l.toString())}return u!=null&&u.skipBrowserRedirect&&f.push(`skip_http_redirect=${u.skipBrowserRedirect}`),`${i}?${f.join("&")}`}async _unenroll(i){try{return await this._useSession(async r=>{var u;const{data:f,error:l}=r;return l?this._returnResult({data:null,error:l}):await we(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(u=f==null?void 0:f.session)===null||u===void 0?void 0:u.access_token})})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(i){try{return await this._useSession(async r=>{var u,f;const{data:l,error:d}=r;if(d)return this._returnResult({data:null,error:d});const _=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:i.factorType==="totp"?{issuer:i.issuer}:{}),{data:g,error:w}=await we(this.fetch,"POST",`${this.url}/factors`,{body:_,headers:this.headers,jwt:(u=l==null?void 0:l.session)===null||u===void 0?void 0:u.access_token});return w?this._returnResult({data:null,error:w}):(i.factorType==="totp"&&g.type==="totp"&&(!((f=g==null?void 0:g.totp)===null||f===void 0)&&f.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _verify(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var u;const{data:f,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({challenge_id:i.challengeId},"webauthn"in i?{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_response:i.webauthn.type==="create"?Qv(i.webauthn.credential_response):Yv(i.webauthn.credential_response)})}:{code:i.code}),{data:_,error:g}=await we(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:d,headers:this.headers,jwt:(u=f==null?void 0:f.session)===null||u===void 0?void 0:u.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+_.expires_in},_)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",_),this._returnResult({data:_,error:g}))})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var u;const{data:f,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=await we(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:i,headers:this.headers,jwt:(u=f==null?void 0:f.session)===null||u===void 0?void 0:u.access_token});if(d.error)return d;const{data:_}=d;if(_.type!=="webauthn")return{data:_,error:null};switch(_.webauthn.type){case"create":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:Kv(_.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:Jv(_.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(i){const{data:r,error:u}=await this._challenge({factorId:i.factorId});return u?this._returnResult({data:null,error:u}):await this._verify({factorId:i.factorId,challengeId:r.id,code:i.code})}async _listFactors(){var i;const{data:{user:r},error:u}=await this.getUser();if(u)return{data:null,error:u};const f={all:[],phone:[],totp:[],webauthn:[]};for(const l of(i=r==null?void 0:r.factors)!==null&&i!==void 0?i:[])f.all.push(l),l.status==="verified"&&f[l.factor_type].push(l);return{data:f,error:null}}async _getAuthenticatorAssuranceLevel(i){var r,u,f,l;if(i)try{const{payload:E}=nu(i);let j=null;E.aal&&(j=E.aal);let O=j;const{data:{user:M},error:$}=await this.getUser(i);if($)return this._returnResult({data:null,error:$});((u=(r=M==null?void 0:M.factors)===null||r===void 0?void 0:r.filter(Q=>Q.status==="verified"))!==null&&u!==void 0?u:[]).length>0&&(O="aal2");const W=E.amr||[];return{data:{currentLevel:j,nextLevel:O,currentAuthenticationMethods:W},error:null}}catch(E){if(de(E))return this._returnResult({data:null,error:E});throw E}const{data:{session:d},error:_}=await this.getSession();if(_)return this._returnResult({data:null,error:_});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=nu(d.access_token);let w=null;g.aal&&(w=g.aal);let k=w;((l=(f=d.user.factors)===null||f===void 0?void 0:f.filter(E=>E.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(k="aal2");const P=g.amr||[];return{data:{currentLevel:w,nextLevel:k,currentAuthenticationMethods:P},error:null}}async _getAuthorizationDetails(i){try{return await this._useSession(async r=>{const{data:{session:u},error:f}=r;return f?this._returnResult({data:null,error:f}):u?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${i}`,{headers:this.headers,jwt:u.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new sn})})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(i,r){try{return await this._useSession(async u=>{const{data:{session:f},error:l}=u;if(l)return this._returnResult({data:null,error:l});if(!f)return this._returnResult({data:null,error:new sn});const d=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:f.access_token,body:{action:"approve"},xform:_=>({data:_,error:null})});return d.data&&d.data.redirect_url&&Lt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(u){if(de(u))return this._returnResult({data:null,error:u});throw u}}async _denyAuthorization(i,r){try{return await this._useSession(async u=>{const{data:{session:f},error:l}=u;if(l)return this._returnResult({data:null,error:l});if(!f)return this._returnResult({data:null,error:new sn});const d=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:f.access_token,body:{action:"deny"},xform:_=>({data:_,error:null})});return d.data&&d.data.redirect_url&&Lt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(u){if(de(u))return this._returnResult({data:null,error:u});throw u}}async _listOAuthGrants(){try{return await this._useSession(async i=>{const{data:{session:r},error:u}=i;return u?this._returnResult({data:null,error:u}):r?await we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new sn})})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async _revokeOAuthGrant(i){try{return await this._useSession(async r=>{const{data:{session:u},error:f}=r;return f?this._returnResult({data:null,error:f}):u?(await we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:u.access_token,query:{client_id:i.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new sn})})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(i,r={keys:[]}){let u=r.keys.find(_=>_.kid===i);if(u)return u;const f=Date.now();if(u=this.jwks.keys.find(_=>_.kid===i),u&&this.jwks_cached_at+ov>f)return u;const{data:l,error:d}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=f,u=l.keys.find(_=>_.kid===i),!u)?null:u}async getClaims(i,r={}){try{let u=i;if(!u){const{data:E,error:j}=await this.getSession();if(j||!E.session)return this._returnResult({data:null,error:j});u=E.session.access_token}const{header:f,payload:l,signature:d,raw:{header:_,payload:g}}=nu(u);r!=null&&r.allowExpired||Ev(l.exp);const w=!f.alg||f.alg.startsWith("HS")||!f.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(f.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!w){const{error:E}=await this.getUser(u);if(E)throw E;return{data:{claims:l,header:f,signature:d},error:null}}const k=Tv(f.alg),b=await crypto.subtle.importKey("jwk",w,k,!0,["verify"]);if(!await crypto.subtle.verify(k,b,d,mv(`${_}.${g}`)))throw new wh("Invalid JWT signature");return{data:{claims:l,header:f,signature:d},error:null}}catch(u){if(de(u))return this._returnResult({data:null,error:u});throw u}}}Sa.nextInstanceID={};const ay=Sa,ly="2.95.3";let ca="";typeof Deno<"u"?ca="deno":typeof document<"u"?ca="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ca="react-native":ca="node";const uy={"X-Client-Info":`supabase-js-${ca}/${ly}`},cy={headers:uy},hy={schema:"public"},dy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fy={};function ba(o){"@babel/helpers - typeof";return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ba(o)}function py(o,i){if(ba(o)!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var u=r.call(o,i);if(ba(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function my(o){var i=py(o,"string");return ba(i)=="symbol"?i:i+""}function _y(o,i,r){return(i=my(i))in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}function tp(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);i&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(o,f).enumerable})),r.push.apply(r,u)}return r}function at(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?tp(Object(r),!0).forEach(function(u){_y(o,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):tp(Object(r)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(r,u))})}return o}const gy=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),vy=()=>Headers,yy=(o,i,r)=>{const u=gy(r),f=vy();return async(l,d)=>{var _;const g=(_=await i())!==null&&_!==void 0?_:o;let w=new f(d==null?void 0:d.headers);return w.has("apikey")||w.set("apikey",o),w.has("Authorization")||w.set("Authorization",`Bearer ${g}`),u(l,at(at({},d),{},{headers:w}))}};function wy(o){return o.endsWith("/")?o:o+"/"}function xy(o,i){var r,u;const{db:f,auth:l,realtime:d,global:_}=o,{db:g,auth:w,realtime:k,global:b}=i,P={db:at(at({},g),f),auth:at(at({},w),l),realtime:at(at({},k),d),storage:{},global:at(at(at({},b),_),{},{headers:at(at({},(r=b==null?void 0:b.headers)!==null&&r!==void 0?r:{}),(u=_==null?void 0:_.headers)!==null&&u!==void 0?u:{})}),accessToken:async()=>""};return o.accessToken?P.accessToken=o.accessToken:delete P.accessToken,P}function ky(o){const i=o==null?void 0:o.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wy(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Sy=class extends ay{constructor(o){super(o)}},by=class{constructor(o,i,r){var u,f;this.supabaseUrl=o,this.supabaseKey=i;const l=ky(o);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,_={db:hy,realtime:fy,auth:at(at({},dy),{},{storageKey:d}),global:cy},g=xy(r??{},_);if(this.storageKey=(u=g.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(f=g.global.headers)!==null&&f!==void 0?f:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(k,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var w;this.auth=this._initSupabaseAuthClient((w=g.auth)!==null&&w!==void 0?w:{},this.headers,g.global.fetch)}this.fetch=yy(i,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(at({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(k=>this.realtime.setAuth(k)).catch(k=>console.warn("Failed to set initial Realtime auth token:",k)),this.rest=new lg(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new tv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new eg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(o){return this.rest.from(o)}schema(o){return this.rest.schema(o)}rpc(o,i={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(o,i,r)}channel(o,i={config:{}}){return this.realtime.channel(o,i)}getChannels(){return this.realtime.getChannels()}removeChannel(o){return this.realtime.removeChannel(o)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var o=this,i,r;if(o.accessToken)return await o.accessToken();const{data:u}=await o.auth.getSession();return(i=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:o.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:o,persistSession:i,detectSessionInUrl:r,storage:u,userStorage:f,storageKey:l,flowType:d,lock:_,debug:g,throwOnError:w},k,b){const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Sy({url:this.authUrl.href,headers:at(at({},P),k),storageKey:l,autoRefreshToken:o,persistSession:i,detectSessionInUrl:r,storage:u,userStorage:f,flowType:d,lock:_,debug:g,throwOnError:w,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(o){return new Lg(this.realtimeUrl.href,at(at({},o),{},{params:at(at({},{apikey:this.supabaseKey}),o==null?void 0:o.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,i)=>{this._handleTokenChanged(o,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(o,i,r){(o==="TOKEN_REFRESHED"||o==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):o==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ly=(o,i,r)=>new by(o,i,r);function Cy(){if(typeof window<"u")return!1;const o=globalThis.process;if(!o)return!1;const i=o.version;if(i==null)return!1;const r=i.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Cy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Py="https://gfxacwgmiikzbzsdfhff.supabase.co",Ey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmeGFjd2dtaWlremJ6c2RmaGZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3MTU3NzUsImV4cCI6MjA4NjI5MTc3NX0.w6lYAX4NEjIhDVLQqidrOT0hVZvBw-LumJWOM1pHX44",lr=Ly(Py,Ey);function Ty(){const[o,i]=Z.useState(null),[r,u]=Z.useState(!0);Z.useEffect(()=>{lr.auth.getSession().then(({data:{session:_}})=>{i((_==null?void 0:_.user)??null),u(!1)});const{data:{subscription:d}}=lr.auth.onAuthStateChange((_,g)=>{i((g==null?void 0:g.user)??null),u(!1)});return()=>d.unsubscribe()},[]);async function f(d,_){const{error:g}=await lr.auth.signInWithPassword({email:d,password:_});return g}async function l(){const{error:d}=await lr.auth.signOut();d&&console.error("Sign out failed:",d)}return{user:o,loading:r,signIn:f,signOut:l}}const Oy="id,numero_tiers,civilite,nom,rue,code_postal,ville,departement,zone_geographique,telephone_domicile,telephone_elevage,adresse_email,sau_estimee_ha,source_sau,sau_contrats_ha,sau_tonnages_ha,tonnage_total,certifications,latitude,longitude,annee_fidelite,score_pertinence,tc_referent",np="id,prospect_id,type,notes,created_at,created_by";function jy(){const[o,i]=Z.useState([]),[r,u]=Z.useState([]),[f,l]=Z.useState(!0),[d,_]=Z.useState(null),g=Z.useRef(null),w=Z.useCallback(async(b=!1)=>{var W;(W=g.current)==null||W.abort();const P=new AbortController;g.current=P,b||l(!0),_(null);const[E,j]=await Promise.all([lr.from("prospects").select(Oy).returns().order("score_pertinence",{ascending:!1}).limit(500).abortSignal(P.signal),lr.from("actions").select(np).returns().order("created_at",{ascending:!1}).order("id",{ascending:!1}).limit(1e3).abortSignal(P.signal)]);if(P.signal.aborted)return;if(E.error){console.error("Failed to fetch prospects:",E.error),_("Erreur chargement prospects : "+E.error.message),l(!1);return}if(j.error){console.error("Failed to fetch actions:",j.error),_("Erreur chargement actions : "+j.error.message),l(!1);return}const O=E.data??[],M=j.data??[];O.length>=500&&console.warn("[useProspects] Prospects limit (500) reached  some rows may be truncated"),M.length>=1e3&&console.warn("[useProspects] Actions limit (1000) reached  some rows may be truncated"),u(M);const $=new Map;M.forEach(Q=>{const ne=$.get(Q.prospect_id)??[];ne.push(Q),$.set(Q.prospect_id,ne)});const z=O.map(Q=>{const ne=($.get(Q.id)??[])[0]??null;return{...Q,statut:ne?ne.type:"en_attente",derniere_action:ne}});i(z),l(!1)},[]),k=Z.useCallback(async(b,P,E)=>{var z;const{data:{session:j}}=await lr.auth.getSession();if(!((z=j==null?void 0:j.user)!=null&&z.email))return{message:"Session expire  veuillez vous reconnecter",status:401};const O=j.user.email,{data:M,error:$}=await lr.from("actions").insert({prospect_id:b,type:P,notes:E??null,created_by:O}).select(np).single();if(!$&&M){const W=M;u(Q=>[W,...Q]),i(Q=>Q.map(ne=>ne.id===b?{...ne,statut:W.type,derniere_action:W}:ne))}return $},[]);return Z.useEffect(()=>(w(),()=>{var b;(b=g.current)==null||b.abort()}),[w]),{prospects:o,actions:r,loading:f,error:d,refetch:w,addAction:k}}const zp=Z.createContext(null);function Ny({children:o}){const i=jy();return x.jsx(zp.Provider,{value:i,children:o})}function gu(){const o=Z.useContext(zp);if(!o)throw new Error("useProspectsContext must be used within ProspectsProvider");return o}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bp=(...o)=>o.filter((i,r,u)=>!!i&&i.trim()!==""&&u.indexOf(i)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ay={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Z.forwardRef(({color:o="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:u,className:f="",children:l,iconNode:d,..._},g)=>Z.createElement("svg",{ref:g,...Ay,width:i,height:i,stroke:o,strokeWidth:u?Number(r)*24/Number(i):r,className:Bp("lucide",f),..._},[...d.map(([w,k])=>Z.createElement(w,k)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(o,i)=>{const r=Z.forwardRef(({className:u,...f},l)=>Z.createElement(Iy,{ref:l,iconNode:i,className:Bp(`lucide-${Ry(o)}`,u),...f}));return r.displayName=`${o}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=ze("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ze("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=ze("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=ze("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=ze("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=ze("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=ze("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=ze("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),s0=3,sp=3e4;function o0({onLogin:o}){const[i,r]=Z.useState(""),[u,f]=Z.useState(""),[l,d]=Z.useState(""),[_,g]=Z.useState(!1),w=Z.useRef(0),k=Z.useRef(0);async function b(P){P.preventDefault();const E=Date.now();if(E<k.current){const O=Math.ceil((k.current-E)/1e3);d(`Trop de tentatives. Reessayez dans ${O}s.`);return}d(""),g(!0),await o(i,u)?(w.current+=1,w.current>=s0?(k.current=Date.now()+sp,w.current=0,d(`Trop de tentatives. Reessayez dans ${sp/1e3}s.`)):d("Email ou mot de passe incorrect")):w.current=0,g(!1)}return x.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:x.jsxs("div",{className:"w-full max-w-sm",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-cooperl-100 mb-4",children:x.jsx(Rh,{size:32,className:"text-cooperl-600"})}),x.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bois & Bocage"}),x.jsx("p",{className:"text-gray-500 mt-1",children:"Prospection commerciale"})]}),x.jsxs("form",{onSubmit:b,className:"bg-white rounded-lg shadow p-6 space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),x.jsx("input",{type:"email",value:i,onChange:P=>r(P.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cooperl-500",placeholder:"demo@bois-bocage.fr"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),x.jsx("input",{type:"password",value:u,onChange:P=>f(P.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cooperl-500"})]}),l&&x.jsx("div",{className:"text-sm text-red-600 bg-red-50 rounded p-2",children:l}),x.jsxs("button",{type:"submit",disabled:_,className:"w-full flex items-center justify-center gap-2 bg-cooperl-600 text-white py-2 rounded-lg font-medium hover:bg-cooperl-700 transition-colors disabled:opacity-50",children:[x.jsx(Gy,{size:16}),_?"Connexion...":"Se connecter"]})]}),x.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Prototype  Environnement DSI simule"})]})})}const a0=[{to:"/",label:"Pipeline",icon:qy},{to:"/carte",label:"Carte",icon:Qy},{to:"/suivi",label:"Suivi",icon:Dy},{to:"/limitations",label:"Limites",icon:$p}];function l0({children:o,onSignOut:i,userEmail:r}){return x.jsxs("div",{className:"min-h-screen flex flex-col",children:[x.jsxs("header",{className:"bg-cooperl-700 text-white px-4 py-3 flex items-center gap-3 shadow-md",children:[x.jsx(Rh,{size:24}),x.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"Bois & Bocage"}),x.jsx("span",{className:"text-cooperl-200 text-sm ml-1",children:"Prospection"}),x.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[r&&x.jsx("span",{className:"text-cooperl-200 text-sm hidden sm:block",children:r}),x.jsxs("button",{onClick:i,className:"flex items-center gap-1 text-cooperl-200 hover:text-white text-sm transition-colors",children:[x.jsx(Ky,{size:14}),x.jsx("span",{className:"hidden sm:inline",children:"Deconnexion"})]})]})]}),x.jsx("nav",{className:"bg-white border-b px-4 flex gap-1",children:a0.map(({to:u,label:f,icon:l})=>x.jsxs(V_,{to:u,className:({isActive:d})=>`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${d?"border-cooperl-600 text-cooperl-700":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[x.jsx(l,{size:16}),f]},u))}),x.jsx("main",{className:"flex-1 p-4 max-w-7xl mx-auto w-full",children:o})]})}const cr={en_attente:"En attente",appele:"Appel",interesse:"Intress",refus:"Refus",rappeler:" rappeler",recrute:"Recrut"},Ys={en_attente:"bg-gray-100 text-gray-700",appele:"bg-blue-100 text-blue-700",interesse:"bg-amber-100 text-amber-700",refus:"bg-red-100 text-red-700",rappeler:"bg-purple-100 text-purple-700",recrute:"bg-emerald-100 text-emerald-700"};function u0(o){const i=o.sau_estimee_ha??0,r=o.tonnage_total??0,u=o.certifications!==null&&o.certifications!==""&&o.certifications!=="0.0"&&o.certifications!=="0",f=o.annee_fidelite??0;return[{label:"SAU > 0 ha",points:i>0?30:0,max:30,met:i>0},{label:"SAU > 50 ha",points:i>50?20:0,max:20,met:i>50},{label:"Certifi HVE/Bio",points:u?15:0,max:15,met:u},{label:"Tonnage > 100t",points:r>100?10:0,max:10,met:r>100},{label:"Fidlit >= 3 ans",points:f>=3?10:0,max:10,met:f>=3}]}function c0(){const{prospects:o,loading:i,error:r,refetch:u}=gu(),f=io(),[l,d]=Z.useState(""),[_,g]=Z.useState("score_pertinence"),[w,k]=Z.useState(!1),[b,P]=Z.useState(""),[E,j]=Z.useState(""),[O,M]=Z.useState(!1),[$,z]=Z.useState(0),W=Z.useMemo(()=>[...new Set(o.map(te=>te.departement).filter(Boolean))].sort(),[o]),Q=Z.useMemo(()=>[...new Set(o.map(te=>te.zone_geographique).filter(Boolean))].sort(),[o]),ne=Z.useMemo(()=>o.filter(te=>!(l&&!te.nom.toLowerCase().includes(l.toLowerCase())&&!te.numero_tiers.includes(l)||b&&te.departement!==b||E&&te.zone_geographique!==E||O&&(!te.certifications||te.certifications==="0.0"||te.certifications==="0")||te.score_pertinence<$)).sort((te,Ve)=>{const Ue=te[_],He=Ve[_];return Ue==null&&He==null?0:Ue==null?w?-1:1:He==null?w?1:-1:Ue<He?w?-1:1:Ue>He?w?1:-1:0}),[o,l,b,E,O,$,_,w]),{totalSau:pe,pctCert:Ce,avgScore:Be}=Z.useMemo(()=>{const te=ne.reduce((He,Ne)=>He+(Ne.sau_estimee_ha??0),0),Ve=ne.length?Math.round(ne.filter(He=>He.certifications&&He.certifications!=="0.0"&&He.certifications!=="0").length/ne.length*100):0,Ue=ne.length?Math.round(ne.reduce((He,Ne)=>He+Ne.score_pertinence,0)/ne.length):0;return{totalSau:te,pctCert:Ve,avgScore:Ue}},[ne]);function De(te){_===te?k(!w):(g(te),k(!1))}function dt(te){let Ve=te.replace(/"/g,'""');return/^[=+\-@\t\r]/.test(Ve)&&(Ve="'"+Ve),`"${Ve}"`}function qe(){const te=["numero_tiers","nom","ville","departement","zone","sau_ha","score","statut","telephone"],Ve=ne.map(q=>[q.numero_tiers,q.nom,q.ville??"",q.departement??"",q.zone_geographique??"",String(q.sau_estimee_ha??""),String(q.score_pertinence),cr[q.statut],q.telephone_elevage??q.telephone_domicile??""]),Ue=[te.map(q=>dt(q)),...Ve.map(q=>q.map(me=>dt(me)))].join(`
`),He=new Blob(["\uFEFF"+Ue],{type:"text/csv;charset=utf-8;"}),Ne=URL.createObjectURL(He),Ie=document.createElement("a");Ie.href=Ne,Ie.download="prospects_bois_bocage.csv",Ie.click(),setTimeout(()=>URL.revokeObjectURL(Ne),6e4)}return i?x.jsx("div",{className:"text-center py-12 text-gray-400",children:"Chargement..."}):x.jsxs("div",{className:"space-y-4",children:[r&&x.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center justify-between",children:[x.jsx("span",{className:"text-sm",children:r}),x.jsx("button",{onClick:()=>u(),className:"text-sm font-medium text-red-700 hover:text-red-900 underline ml-4",children:"Reessayer"})]}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[x.jsx(iu,{icon:x.jsx(Up,{size:20}),label:"Prospects",value:String(ne.length),color:"text-cooperl-600"}),x.jsx(iu,{icon:x.jsx(Xy,{size:20}),label:"SAU totale",value:`${Math.round(pe).toLocaleString("fr-FR")} ha`,color:"text-blue-600"}),x.jsx(iu,{icon:x.jsx(zy,{size:20}),label:"Certifis",value:`${Ce}%`,color:"text-amber-600"}),x.jsx(iu,{icon:x.jsx(Vy,{size:20}),label:"Score moyen",value:String(Be),color:"text-emerald-600"})]}),x.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[x.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[x.jsx(e0,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),x.jsx("input",{type:"text",placeholder:"Rechercher nom ou n tiers...",value:l,onChange:te=>d(te.target.value),className:"w-full pl-9 pr-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-cooperl-500"})]}),x.jsxs("select",{value:b,onChange:te=>P(te.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[x.jsx("option",{value:"",children:"Tous depts"}),W.map(te=>x.jsx("option",{value:te,children:te},te))]}),x.jsxs("select",{value:E,onChange:te=>j(te.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[x.jsx("option",{value:"",children:"Toutes zones"}),Q.map(te=>x.jsx("option",{value:te,children:te},te))]}),x.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[x.jsx("input",{type:"checkbox",checked:O,onChange:te=>M(te.target.checked),className:"rounded"}),"Certifis"]}),x.jsxs("select",{value:$,onChange:te=>z(Number(te.target.value)),className:"border rounded-lg px-3 py-2 text-sm",children:[x.jsx("option",{value:0,children:"Score min"}),x.jsx("option",{value:50,children:"50+"}),x.jsx("option",{value:60,children:"60+"}),x.jsx("option",{value:70,children:"70+"}),x.jsx("option",{value:80,children:"80+"})]}),x.jsxs("button",{onClick:qe,className:"flex items-center gap-1 px-3 py-2 bg-cooperl-600 text-white rounded-lg text-sm hover:bg-cooperl-700 transition-colors",children:[x.jsx(Wy,{size:14})," CSV"]})]}),x.jsxs("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:[x.jsxs("table",{className:"w-full text-sm",children:[x.jsx("thead",{className:"bg-gray-50 text-gray-600",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-3 py-2 text-left cursor-pointer select-none",onClick:()=>De("nom"),children:x.jsxs("span",{className:"flex items-center gap-1",children:["Exploitation ",x.jsx(la,{col:"nom",sortKey:_,sortAsc:w})]})}),x.jsx("th",{className:"px-3 py-2 text-left",children:"Ville"}),x.jsx("th",{className:"px-3 py-2 text-center cursor-pointer select-none",onClick:()=>De("departement"),children:x.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Dept ",x.jsx(la,{col:"departement",sortKey:_,sortAsc:w})]})}),x.jsx("th",{className:"px-3 py-2 text-center cursor-pointer select-none",onClick:()=>De("zone_geographique"),children:x.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Zone ",x.jsx(la,{col:"zone_geographique",sortKey:_,sortAsc:w})]})}),x.jsx("th",{className:"px-3 py-2 text-right cursor-pointer select-none",onClick:()=>De("sau_estimee_ha"),children:x.jsxs("span",{className:"flex items-center justify-end gap-1",children:["SAU (ha) ",x.jsx(la,{col:"sau_estimee_ha",sortKey:_,sortAsc:w})]})}),x.jsx("th",{className:"px-3 py-2 text-center cursor-pointer select-none",onClick:()=>De("score_pertinence"),children:x.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Score ",x.jsx(la,{col:"score_pertinence",sortKey:_,sortAsc:w})]})}),x.jsx("th",{className:"px-3 py-2 text-center",children:"Statut"})]})}),x.jsx("tbody",{className:"divide-y",children:ne.map(te=>x.jsxs("tr",{onClick:()=>f(`/prospect/${te.id}`),className:"hover:bg-cooperl-50 cursor-pointer transition-colors",children:[x.jsx("td",{className:"px-3 py-2 font-medium",children:te.nom}),x.jsx("td",{className:"px-3 py-2 text-gray-600",children:te.ville}),x.jsx("td",{className:"px-3 py-2 text-center",children:te.departement}),x.jsx("td",{className:"px-3 py-2 text-center",children:te.zone_geographique}),x.jsx("td",{className:"px-3 py-2 text-right",children:te.sau_estimee_ha?Math.round(te.sau_estimee_ha):"-"}),x.jsx("td",{className:"px-3 py-2 text-center",children:x.jsx(h0,{score:te.score_pertinence})}),x.jsx("td",{className:"px-3 py-2 text-center",children:x.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Ys[te.statut]}`,children:cr[te.statut]})})]},te.id))})]}),ne.length===0&&x.jsx("div",{className:"text-center py-8 text-gray-400",children:"Aucun prospect ne correspond aux filtres"})]})]})}function iu({icon:o,label:i,value:r,color:u}){return x.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex items-center gap-3",children:[x.jsx("div",{className:u,children:o}),x.jsxs("div",{children:[x.jsx("div",{className:"text-xs text-gray-500",children:i}),x.jsx("div",{className:"text-lg font-bold",children:r})]})]})}function la({col:o,sortKey:i,sortAsc:r}){return i!==o?null:r?x.jsx(Fy,{size:14}):x.jsx(Uy,{size:14})}function h0({score:o}){const i=o>=70?"bg-emerald-100 text-emerald-700":o>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700";return x.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${i}`,children:o})}function Fp(o,i){const r=Z.useRef(i);Z.useEffect(function(){i!==r.current&&o.attributionControl!=null&&(r.current!=null&&o.attributionControl.removeAttribution(r.current),i!=null&&o.attributionControl.addAttribution(i)),r.current=i},[o,i])}const d0=1;function f0(o){return Object.freeze({__version:d0,map:o})}function Zp(o,i){return Object.freeze({...o,...i})}const Hp=Z.createContext(null),Wp=Hp.Provider;function Ah(){const o=Z.useContext(Hp);if(o==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return o}function qp(o){function i(r,u){const{instance:f,context:l}=o(r).current;return Z.useImperativeHandle(u,()=>f),r.children==null?null:ma.createElement(Wp,{value:l},r.children)}return Z.forwardRef(i)}function p0(o){function i(r,u){const[f,l]=Z.useState(!1),{instance:d}=o(r,l).current;Z.useImperativeHandle(u,()=>d),Z.useEffect(function(){f&&d.update()},[d,f,r.children]);const _=d._contentNode;return _?Zm.createPortal(r.children,_):null}return Z.forwardRef(i)}function m0(o){function i(r,u){const{instance:f}=o(r).current;return Z.useImperativeHandle(u,()=>f),null}return Z.forwardRef(i)}function Ih(o,i){const r=Z.useRef();Z.useEffect(function(){return i!=null&&o.instance.on(i),r.current=i,function(){r.current!=null&&o.instance.off(r.current),r.current=null}},[o,i])}function vu(o,i){const r=o.pane??i.pane;return r?{...o,pane:r}:o}function _0(o,i){return function(u,f){const l=Ah(),d=o(vu(u,l),l);return Fp(l.map,u.attribution),Ih(d.current,u.eventHandlers),i(d.current,l,u,f),d}}var ha={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var g0=ha.exports,op;function v0(){return op||(op=1,(function(o,i){(function(r,u){u(i)})(g0,(function(r){var u="1.9.4";function f(t){var s,c,p,y;for(c=1,p=arguments.length;c<p;c++){y=arguments[c];for(s in y)t[s]=y[s]}return t}var l=Object.create||(function(){function t(){}return function(s){return t.prototype=s,new t}})();function d(t,s){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var p=c.call(arguments,2);return function(){return t.apply(s,p.length?p.concat(c.call(arguments)):arguments)}}var _=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++_),t._leaflet_id}function w(t,s,c){var p,y,C,N;return N=function(){p=!1,y&&(C.apply(c,y),y=!1)},C=function(){p?y=arguments:(t.apply(c,arguments),setTimeout(N,s),p=!0)},C}function k(t,s,c){var p=s[1],y=s[0],C=p-y;return t===p&&c?t:((t-y)%C+C)%C+y}function b(){return!1}function P(t,s){if(s===!1)return t;var c=Math.pow(10,s===void 0?6:s);return Math.round(t*c)/c}function E(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function j(t){return E(t).split(/\s+/)}function O(t,s){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?l(t.options):{});for(var c in s)t.options[c]=s[c];return t.options}function M(t,s,c){var p=[];for(var y in t)p.push(encodeURIComponent(c?y.toUpperCase():y)+"="+encodeURIComponent(t[y]));return(!s||s.indexOf("?")===-1?"?":"&")+p.join("&")}var $=/\{ *([\w_ -]+) *\}/g;function z(t,s){return t.replace($,function(c,p){var y=s[p];if(y===void 0)throw new Error("No value provided for variable "+c);return typeof y=="function"&&(y=y(s)),y})}var W=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Q(t,s){for(var c=0;c<t.length;c++)if(t[c]===s)return c;return-1}var ne="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function pe(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Ce=0;function Be(t){var s=+new Date,c=Math.max(0,16-(s-Ce));return Ce=s+c,window.setTimeout(t,c)}var De=window.requestAnimationFrame||pe("RequestAnimationFrame")||Be,dt=window.cancelAnimationFrame||pe("CancelAnimationFrame")||pe("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function qe(t,s,c){if(c&&De===Be)t.call(s);else return De.call(window,d(t,s))}function te(t){t&&dt.call(window,t)}var Ve={__proto__:null,extend:f,create:l,bind:d,get lastId(){return _},stamp:g,throttle:w,wrapNum:k,falseFn:b,formatNum:P,trim:E,splitWords:j,setOptions:O,getParamString:M,template:z,isArray:W,indexOf:Q,emptyImageUrl:ne,requestFn:De,cancelFn:dt,requestAnimFrame:qe,cancelAnimFrame:te};function Ue(){}Ue.extend=function(t){var s=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=s.__super__=this.prototype,p=l(c);p.constructor=s,s.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(s[y]=this[y]);return t.statics&&f(s,t.statics),t.includes&&(He(t.includes),f.apply(null,[p].concat(t.includes))),f(p,t),delete p.statics,delete p.includes,p.options&&(p.options=c.options?l(c.options):{},f(p.options,t.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,N=p._initHooks.length;C<N;C++)p._initHooks[C].call(this)}},s},Ue.include=function(t){var s=this.prototype.options;return f(this.prototype,t),t.options&&(this.prototype.options=s,this.mergeOptions(t.options)),this},Ue.mergeOptions=function(t){return f(this.prototype.options,t),this},Ue.addInitHook=function(t){var s=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function He(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=W(t)?t:[t];for(var s=0;s<t.length;s++)t[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ne={on:function(t,s,c){if(typeof t=="object")for(var p in t)this._on(p,t[p],s);else{t=j(t);for(var y=0,C=t.length;y<C;y++)this._on(t[y],s,c)}return this},off:function(t,s,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var p in t)this._off(p,t[p],s);else{t=j(t);for(var y=arguments.length===1,C=0,N=t.length;C<N;C++)y?this._off(t[C]):this._off(t[C],s,c)}return this},_on:function(t,s,c,p){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(t,s,c)===!1){c===this&&(c=void 0);var y={fn:s,ctx:c};p&&(y.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(y)}},_off:function(t,s,c){var p,y,C;if(this._events&&(p=this._events[t],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,C=p.length;y<C;y++)p[y].fn=b;delete this._events[t];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var N=this._listens(t,s,c);if(N!==!1){var B=p[N];this._firingCount&&(B.fn=b,this._events[t]=p=p.slice()),p.splice(N,1)}}},fire:function(t,s,c){if(!this.listens(t,c))return this;var p=f({},s,{type:t,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var y=this._events[t];if(y){this._firingCount=this._firingCount+1||1;for(var C=0,N=y.length;C<N;C++){var B=y[C],F=B.fn;B.once&&this.off(t,F,B.ctx),F.call(B.ctx||this,p)}this._firingCount--}}return c&&this._propagateEvent(p),this},listens:function(t,s,c,p){typeof t!="string"&&console.warn('"string" type argument expected');var y=s;typeof s!="function"&&(p=!!s,y=void 0,c=void 0);var C=this._events&&this._events[t];if(C&&C.length&&this._listens(t,y,c)!==!1)return!0;if(p){for(var N in this._eventParents)if(this._eventParents[N].listens(t,s,c,p))return!0}return!1},_listens:function(t,s,c){if(!this._events)return!1;var p=this._events[t]||[];if(!s)return!!p.length;c===this&&(c=void 0);for(var y=0,C=p.length;y<C;y++)if(p[y].fn===s&&p[y].ctx===c)return y;return!1},once:function(t,s,c){if(typeof t=="object")for(var p in t)this._on(p,t[p],s,!0);else{t=j(t);for(var y=0,C=t.length;y<C;y++)this._on(t[y],s,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var s in this._eventParents)this._eventParents[s].fire(t.type,f({layer:t.target,propagatedFrom:t.target},t),!0)}};Ne.addEventListener=Ne.on,Ne.removeEventListener=Ne.clearAllEventListeners=Ne.off,Ne.addOneTimeEventListener=Ne.once,Ne.fireEvent=Ne.fire,Ne.hasEventListeners=Ne.listens;var Ie=Ue.extend(Ne);function q(t,s,c){this.x=c?Math.round(t):t,this.y=c?Math.round(s):s}var me=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(t){return this.clone()._add(G(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(G(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new q(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new q(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(t){t=G(t);var s=t.x-this.x,c=t.y-this.y;return Math.sqrt(s*s+c*c)},equals:function(t){return t=G(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=G(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+P(this.x)+", "+P(this.y)+")"}};function G(t,s,c){return t instanceof q?t:W(t)?new q(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new q(t.x,t.y):new q(t,s,c)}function A(t,s){if(t)for(var c=s?[t,s]:t,p=0,y=c.length;p<y;p++)this.extend(c[p])}A.prototype={extend:function(t){var s,c;if(!t)return this;if(t instanceof q||typeof t[0]=="number"||"x"in t)s=c=G(t);else if(t=V(t),s=t.min,c=t.max,!s||!c)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=c.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var s,c;return typeof t[0]=="number"||t instanceof q?t=G(t):t=V(t),t instanceof A?(s=t.min,c=t.max):s=c=t,s.x>=this.min.x&&c.x<=this.max.x&&s.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=V(t);var s=this.min,c=this.max,p=t.min,y=t.max,C=y.x>=s.x&&p.x<=c.x,N=y.y>=s.y&&p.y<=c.y;return C&&N},overlaps:function(t){t=V(t);var s=this.min,c=this.max,p=t.min,y=t.max,C=y.x>s.x&&p.x<c.x,N=y.y>s.y&&p.y<c.y;return C&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var s=this.min,c=this.max,p=Math.abs(s.x-c.x)*t,y=Math.abs(s.y-c.y)*t;return V(G(s.x-p,s.y-y),G(c.x+p,c.y+y))},equals:function(t){return t?(t=V(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function V(t,s){return!t||t instanceof A?t:new A(t,s)}function _e(t,s){if(t)for(var c=s?[t,s]:t,p=0,y=c.length;p<y;p++)this.extend(c[p])}_e.prototype={extend:function(t){var s=this._southWest,c=this._northEast,p,y;if(t instanceof ue)p=t,y=t;else if(t instanceof _e){if(p=t._southWest,y=t._northEast,!p||!y)return this}else return t?this.extend(se(t)||fe(t)):this;return!s&&!c?(this._southWest=new ue(p.lat,p.lng),this._northEast=new ue(y.lat,y.lng)):(s.lat=Math.min(p.lat,s.lat),s.lng=Math.min(p.lng,s.lng),c.lat=Math.max(y.lat,c.lat),c.lng=Math.max(y.lng,c.lng)),this},pad:function(t){var s=this._southWest,c=this._northEast,p=Math.abs(s.lat-c.lat)*t,y=Math.abs(s.lng-c.lng)*t;return new _e(new ue(s.lat-p,s.lng-y),new ue(c.lat+p,c.lng+y))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ue||"lat"in t?t=se(t):t=fe(t);var s=this._southWest,c=this._northEast,p,y;return t instanceof _e?(p=t.getSouthWest(),y=t.getNorthEast()):p=y=t,p.lat>=s.lat&&y.lat<=c.lat&&p.lng>=s.lng&&y.lng<=c.lng},intersects:function(t){t=fe(t);var s=this._southWest,c=this._northEast,p=t.getSouthWest(),y=t.getNorthEast(),C=y.lat>=s.lat&&p.lat<=c.lat,N=y.lng>=s.lng&&p.lng<=c.lng;return C&&N},overlaps:function(t){t=fe(t);var s=this._southWest,c=this._northEast,p=t.getSouthWest(),y=t.getNorthEast(),C=y.lat>s.lat&&p.lat<c.lat,N=y.lng>s.lng&&p.lng<c.lng;return C&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,s){return t?(t=fe(t),this._southWest.equals(t.getSouthWest(),s)&&this._northEast.equals(t.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(t,s){return t instanceof _e?t:new _e(t,s)}function ue(t,s,c){if(isNaN(t)||isNaN(s))throw new Error("Invalid LatLng object: ("+t+", "+s+")");this.lat=+t,this.lng=+s,c!==void 0&&(this.alt=+c)}ue.prototype={equals:function(t,s){if(!t)return!1;t=se(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(s===void 0?1e-9:s)},toString:function(t){return"LatLng("+P(this.lat,t)+", "+P(this.lng,t)+")"},distanceTo:function(t){return Ee.distance(this,se(t))},wrap:function(){return Ee.wrapLatLng(this)},toBounds:function(t){var s=180*t/40075017,c=s/Math.cos(Math.PI/180*this.lat);return fe([this.lat-s,this.lng-c],[this.lat+s,this.lng+c])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function se(t,s,c){return t instanceof ue?t:W(t)&&typeof t[0]!="object"?t.length===3?new ue(t[0],t[1],t[2]):t.length===2?new ue(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ue(t.lat,"lng"in t?t.lng:t.lon,t.alt):s===void 0?null:new ue(t,s,c)}var je={latLngToPoint:function(t,s){var c=this.projection.project(t),p=this.scale(s);return this.transformation._transform(c,p)},pointToLatLng:function(t,s){var c=this.scale(s),p=this.transformation.untransform(t,c);return this.projection.unproject(p)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var s=this.projection.bounds,c=this.scale(t),p=this.transformation.transform(s.min,c),y=this.transformation.transform(s.max,c);return new A(p,y)},infinite:!1,wrapLatLng:function(t){var s=this.wrapLng?k(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?k(t.lat,this.wrapLat,!0):t.lat,p=t.alt;return new ue(c,s,p)},wrapLatLngBounds:function(t){var s=t.getCenter(),c=this.wrapLatLng(s),p=s.lat-c.lat,y=s.lng-c.lng;if(p===0&&y===0)return t;var C=t.getSouthWest(),N=t.getNorthEast(),B=new ue(C.lat-p,C.lng-y),F=new ue(N.lat-p,N.lng-y);return new _e(B,F)}},Ee=f({},je,{wrapLng:[-180,180],R:6371e3,distance:function(t,s){var c=Math.PI/180,p=t.lat*c,y=s.lat*c,C=Math.sin((s.lat-t.lat)*c/2),N=Math.sin((s.lng-t.lng)*c/2),B=C*C+Math.cos(p)*Math.cos(y)*N*N,F=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*F}}),We=6378137,xt={R:We,MAX_LATITUDE:85.0511287798,project:function(t){var s=Math.PI/180,c=this.MAX_LATITUDE,p=Math.max(Math.min(c,t.lat),-c),y=Math.sin(p*s);return new q(this.R*t.lng*s,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(t){var s=180/Math.PI;return new ue((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*s,t.x*s/this.R)},bounds:(function(){var t=We*Math.PI;return new A([-t,-t],[t,t])})()};function wi(t,s,c,p){if(W(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=s,this._c=c,this._d=p}wi.prototype={transform:function(t,s){return this._transform(t.clone(),s)},_transform:function(t,s){return s=s||1,t.x=s*(this._a*t.x+this._b),t.y=s*(this._c*t.y+this._d),t},untransform:function(t,s){return s=s||1,new q((t.x/s-this._b)/this._a,(t.y/s-this._d)/this._c)}};function xi(t,s,c,p){return new wi(t,s,c,p)}var ki=f({},Ee,{code:"EPSG:3857",projection:xt,transformation:(function(){var t=.5/(Math.PI*xt.R);return xi(t,.5,-t,.5)})()}),so=f({},ki,{code:"EPSG:900913"});function oo(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ao(t,s){var c="",p,y,C,N,B,F;for(p=0,C=t.length;p<C;p++){for(B=t[p],y=0,N=B.length;y<N;y++)F=B[y],c+=(y?"L":"M")+F.x+" "+F.y;c+=s?ce.svg?"z":"x":""}return c||"M0 0"}var hr=document.documentElement.style,dr="ActiveXObject"in window,lo=dr&&!document.addEventListener,Si="msLaunchUri"in navigator&&!("documentMode"in document),Rn=Ct("webkit"),Kr=Ct("android"),uo=Ct("android 2")||Ct("android 3"),Pa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ea=Kr&&Ct("Google")&&Pa<537&&!("AudioNode"in window),Jr=!!window.opera,Qr=!Si&&Ct("chrome"),fr=Ct("gecko")&&!Rn&&!Jr&&!dr,Ta=!Qr&&Ct("safari"),bi=Ct("phantom"),Li="OTransition"in hr,xu=navigator.platform.indexOf("Win")===0,co=dr&&"transition"in hr,Yr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!uo,Oa="MozPerspective"in hr,ho=!window.L_DISABLE_3D&&(co||Yr||Oa)&&!Li&&!bi,qn=typeof orientation<"u"||Ct("mobile"),fo=qn&&Rn,po=qn&&Yr,Xr=!window.PointerEvent&&window.MSPointerEvent,Vn=!!(window.PointerEvent||Xr),Gn="ontouchstart"in window||!!window.TouchEvent,ja=!window.L_NO_TOUCH&&(Gn||Vn),Na=qn&&Jr,Ra=qn&&fr,Aa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ia=(function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",b,s),window.removeEventListener("testPassiveEventSupport",b,s)}catch{}return t})(),mo=(function(){return!!document.createElement("canvas").getContext})(),es=!!(document.createElementNS&&oo("svg").createSVGRect),pr=!!es&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),_o=!es&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var s=t.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}})(),mr=navigator.platform.indexOf("Mac")===0,ku=navigator.platform.indexOf("Linux")===0;function Ct(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ce={ie:dr,ielt9:lo,edge:Si,webkit:Rn,android:Kr,android23:uo,androidStock:Ea,opera:Jr,chrome:Qr,gecko:fr,safari:Ta,phantom:bi,opera12:Li,win:xu,ie3d:co,webkit3d:Yr,gecko3d:Oa,any3d:ho,mobile:qn,mobileWebkit:fo,mobileWebkit3d:po,msPointer:Xr,pointer:Vn,touch:ja,touchNative:Gn,mobileOpera:Na,mobileGecko:Ra,retina:Aa,passiveEvents:Ia,canvas:mo,svg:es,vml:_o,inlineSvg:pr,mac:mr,linux:ku},_r=ce.msPointer?"MSPointerDown":"pointerdown",ts=ce.msPointer?"MSPointerMove":"pointermove",Ma=ce.msPointer?"MSPointerUp":"pointerup",za=ce.msPointer?"MSPointerCancel":"pointercancel",go={touchstart:_r,touchmove:ts,touchend:Ma,touchcancel:za},An={touchstart:et,touchmove:ns,touchend:ns,touchcancel:ns},Kn={},vo=!1;function Su(t,s,c){return s==="touchstart"&&bu(),An[s]?(c=An[s].bind(this,c),t.addEventListener(go[s],c,!1),c):(console.warn("wrong event specified:",s),b)}function Ba(t,s,c){if(!go[s]){console.warn("wrong event specified:",s);return}t.removeEventListener(go[s],c,!1)}function Da(t){Kn[t.pointerId]=t}function Ua(t){Kn[t.pointerId]&&(Kn[t.pointerId]=t)}function yo(t){delete Kn[t.pointerId]}function bu(){vo||(document.addEventListener(_r,Da,!0),document.addEventListener(ts,Ua,!0),document.addEventListener(Ma,yo,!0),document.addEventListener(za,yo,!0),vo=!0)}function ns(t,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var c in Kn)s.touches.push(Kn[c]);s.changedTouches=[s],t(s)}}function et(t,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&tt(s),ns(t,s)}function Lu(t){var s={},c,p;for(p in t)c=t[p],s[p]=c&&c.bind?c.bind(t):c;return t=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var wo=200;function $a(t,s){t.addEventListener("dblclick",s);var c=0,p;function y(C){if(C.detail!==1){p=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var N=Yn(C);if(!(N.some(function(F){return F instanceof HTMLLabelElement&&F.attributes.for})&&!N.some(function(F){return F instanceof HTMLInputElement||F instanceof HTMLSelectElement}))){var B=Date.now();B-c<=wo?(p++,p===2&&s(Lu(C))):p=1,c=B}}}return t.addEventListener("click",y),{dblclick:s,simDblclick:y}}function is(t,s){t.removeEventListener("dblclick",s.dblclick),t.removeEventListener("click",s.simDblclick)}var xo=Ti(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ci=Ti(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gr=Ci==="webkitTransition"||Ci==="OTransition"?Ci+"End":"transitionend";function Vt(t){return typeof t=="string"?document.getElementById(t):t}function vr(t,s){var c=t.style[s]||t.currentStyle&&t.currentStyle[s];if((!c||c==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(t,null);c=p?p[s]:null}return c==="auto"?null:c}function Le(t,s,c){var p=document.createElement(t);return p.className=s||"",c&&c.appendChild(p),p}function Qe(t){var s=t.parentNode;s&&s.removeChild(t)}function rs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Pi(t){var s=t.parentNode;s&&s.lastChild!==t&&s.appendChild(t)}function yn(t){var s=t.parentNode;s&&s.firstChild!==t&&s.insertBefore(t,s.firstChild)}function Ei(t,s){if(t.classList!==void 0)return t.classList.contains(s);var c=ss(t);return c.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(c)}function be(t,s){if(t.classList!==void 0)for(var c=j(s),p=0,y=c.length;p<y;p++)t.classList.add(c[p]);else if(!Ei(t,s)){var C=ss(t);ko(t,(C?C+" ":"")+s)}}function Ge(t,s){t.classList!==void 0?t.classList.remove(s):ko(t,E((" "+ss(t)+" ").replace(" "+s+" "," ")))}function ko(t,s){t.className.baseVal===void 0?t.className=s:t.className.baseVal=s}function ss(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Pt(t,s){"opacity"in t.style?t.style.opacity=s:"filter"in t.style&&Fa(t,s)}function Fa(t,s){var c=!1,p="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(p)}catch{if(s===1)return}s=Math.round(s*100),c?(c.Enabled=s!==100,c.Opacity=s):t.style.filter+=" progid:"+p+"(opacity="+s+")"}function Ti(t){for(var s=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in s)return t[c];return!1}function Gt(t,s,c){var p=s||new q(0,0);t.style[xo]=(ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(c?" scale("+c+")":"")}function st(t,s){t._leaflet_pos=s,ce.any3d?Gt(t,s):(t.style.left=s.x+"px",t.style.top=s.y+"px")}function wn(t){return t._leaflet_pos||new q(0,0)}var Re,Oi,os;if("onselectstart"in document)Re=function(){ke(window,"selectstart",tt)},Oi=function(){Fe(window,"selectstart",tt)};else{var Jn=Ti(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Re=function(){if(Jn){var t=document.documentElement.style;os=t[Jn],t[Jn]="none"}},Oi=function(){Jn&&(document.documentElement.style[Jn]=os,os=void 0)}}function as(){ke(window,"dragstart",tt)}function ls(){Fe(window,"dragstart",tt)}var yr,wr;function ji(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Kt(),yr=t,wr=t.style.outlineStyle,t.style.outlineStyle="none",ke(window,"keydown",Kt))}function Kt(){yr&&(yr.style.outlineStyle=wr,yr=void 0,wr=void 0,Fe(window,"keydown",Kt))}function xn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function an(t){var s=t.getBoundingClientRect();return{x:s.width/t.offsetWidth||1,y:s.height/t.offsetHeight||1,boundingClientRect:s}}var xr={__proto__:null,TRANSFORM:xo,TRANSITION:Ci,TRANSITION_END:gr,get:Vt,getStyle:vr,create:Le,remove:Qe,empty:rs,toFront:Pi,toBack:yn,hasClass:Ei,addClass:be,removeClass:Ge,setClass:ko,getClass:ss,setOpacity:Pt,testProp:Ti,setTransform:Gt,setPosition:st,getPosition:wn,get disableTextSelection(){return Re},get enableTextSelection(){return Oi},disableImageDrag:as,enableImageDrag:ls,preventOutline:ji,restoreOutline:Kt,getSizedParentNode:xn,getScale:an};function ke(t,s,c,p){if(s&&typeof s=="object")for(var y in s)bo(t,y,s[y],c);else{s=j(s);for(var C=0,N=s.length;C<N;C++)bo(t,s[C],c,p)}return this}var ft="_leaflet_events";function Fe(t,s,c,p){if(arguments.length===1)So(t),delete t[ft];else if(s&&typeof s=="object")for(var y in s)us(t,y,s[y],c);else if(s=j(s),arguments.length===2)So(t,function(B){return Q(s,B)!==-1});else for(var C=0,N=s.length;C<N;C++)us(t,s[C],c,p);return this}function So(t,s){for(var c in t[ft]){var p=c.split(/\d/)[0];(!s||s(p))&&us(t,p,null,null,c)}}var Qn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bo(t,s,c,p){var y=s+g(c)+(p?"_"+g(p):"");if(t[ft]&&t[ft][y])return this;var C=function(B){return c.call(p||t,B||window.event)},N=C;!ce.touchNative&&ce.pointer&&s.indexOf("touch")===0?C=Su(t,s,C):ce.touch&&s==="dblclick"?C=$a(t,C):"addEventListener"in t?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?t.addEventListener(Qn[s]||s,C,ce.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(C=function(B){B=B||window.event,br(t,B)&&N(B)},t.addEventListener(Qn[s],C,!1)):t.addEventListener(s,N,!1):t.attachEvent("on"+s,C),t[ft]=t[ft]||{},t[ft][y]=C}function us(t,s,c,p,y){y=y||s+g(c)+(p?"_"+g(p):"");var C=t[ft]&&t[ft][y];if(!C)return this;!ce.touchNative&&ce.pointer&&s.indexOf("touch")===0?Ba(t,s,C):ce.touch&&s==="dblclick"?is(t,C):"removeEventListener"in t?t.removeEventListener(Qn[s]||s,C,!1):t.detachEvent("on"+s,C),t[ft][y]=null}function ln(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function cs(t){return bo(t,"wheel",ln),this}function kr(t){return ke(t,"mousedown touchstart dblclick contextmenu",ln),t._leaflet_disable_click=!0,this}function tt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Jt(t){return tt(t),ln(t),this}function Yn(t){if(t.composedPath)return t.composedPath();for(var s=[],c=t.target;c;)s.push(c),c=c.parentNode;return s}function Sr(t,s){if(!s)return new q(t.clientX,t.clientY);var c=an(s),p=c.boundingClientRect;return new q((t.clientX-p.left)/c.x-s.clientLeft,(t.clientY-p.top)/c.y-s.clientTop)}var Cu=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Za(t){return ce.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Cu:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function br(t,s){var c=s.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var hs={__proto__:null,on:ke,off:Fe,stopPropagation:ln,disableScrollPropagation:cs,disableClickPropagation:kr,preventDefault:tt,stop:Jt,getPropagationPath:Yn,getMousePosition:Sr,getWheelDelta:Za,isExternalTarget:br,addListener:ke,removeListener:Fe},ds=Ie.extend({run:function(t,s,c,p){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=wn(t),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=qe(this._animate,this),this._step()},_step:function(t){var s=+new Date-this._startTime,c=this._duration*1e3;s<c?this._runFrame(this._easeOut(s/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,s){var c=this._startPos.add(this._offset.multiplyBy(t));s&&c._round(),st(this._el,c),this.fire("step")},_complete:function(){te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Oe=Ie.extend({options:{crs:ki,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,s){s=O(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(se(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ci&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ke(this._proxy,gr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,s,c){if(s=s===void 0?this._zoom:this._limitZoom(s),t=this._limitCenter(se(t),s,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=f({animate:c.animate},c.zoom),c.pan=f({animate:c.animate,duration:c.duration},c.pan));var p=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,s,c.zoom):this._tryAnimatedPan(t,c.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(t,s,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,s){return this._loaded?this.setView(this.getCenter(),t,{zoom:s}):(this._zoom=t,this)},zoomIn:function(t,s){return t=t||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,s)},zoomOut:function(t,s){return t=t||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,s)},setZoomAround:function(t,s,c){var p=this.getZoomScale(s),y=this.getSize().divideBy(2),C=t instanceof q?t:this.latLngToContainerPoint(t),N=C.subtract(y).multiplyBy(1-1/p),B=this.containerPointToLatLng(y.add(N));return this.setView(B,s,{zoom:c})},_getBoundsCenterZoom:function(t,s){s=s||{},t=t.getBounds?t.getBounds():fe(t);var c=G(s.paddingTopLeft||s.padding||[0,0]),p=G(s.paddingBottomRight||s.padding||[0,0]),y=this.getBoundsZoom(t,!1,c.add(p));if(y=typeof s.maxZoom=="number"?Math.min(s.maxZoom,y):y,y===1/0)return{center:t.getCenter(),zoom:y};var C=p.subtract(c).divideBy(2),N=this.project(t.getSouthWest(),y),B=this.project(t.getNorthEast(),y),F=this.unproject(N.add(B).divideBy(2).add(C),y);return{center:F,zoom:y}},fitBounds:function(t,s){if(t=fe(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,s);return this.setView(c.center,c.zoom,s)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,s){return this.setView(t,this._zoom,{pan:s})},panBy:function(t,s){if(t=G(t).round(),s=s||{},!t.x&&!t.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ds,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,s.duration||.25,s.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,s,c){if(c=c||{},c.animate===!1||!ce.any3d)return this.setView(t,s,c);this._stop();var p=this.project(this.getCenter()),y=this.project(t),C=this.getSize(),N=this._zoom;t=se(t),s=s===void 0?N:s;var B=Math.max(C.x,C.y),F=B*this.getZoomScale(N,s),K=y.distanceTo(p)||1,ie=1.42,ge=ie*ie;function Pe($e){var qi=$e?-1:1,Uu=$e?F:B,$u=F*F-B*B+qi*ge*ge*K*K,si=2*Uu*ge*K,oi=$u/si,ai=Math.sqrt(oi*oi+1)-oi,Cs=ai<1e-9?-18:Math.log(ai);return Cs}function pt($e){return(Math.exp($e)-Math.exp(-$e))/2}function ut($e){return(Math.exp($e)+Math.exp(-$e))/2}function Mt($e){return pt($e)/ut($e)}var Tt=Pe(0);function Hi($e){return B*(ut(Tt)/ut(Tt+ie*$e))}function Wo($e){return B*(ut(Tt)*Mt(Tt+ie*$e)-pt(Tt))/ge}function Fn($e){return 1-Math.pow(1-$e,1.5)}var cl=Date.now(),ri=(Pe(1)-Tt)/ie,dn=c.duration?1e3*c.duration:1e3*ri*.8;function Wi(){var $e=(Date.now()-cl)/dn,qi=Fn($e)*ri;$e<=1?(this._flyToFrame=qe(Wi,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(Wo(qi)/K)),N),this.getScaleZoom(B/Hi(qi),N),{flyTo:!0})):this._move(t,s)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Wi.call(this),this},flyToBounds:function(t,s){var c=this._getBoundsCenterZoom(t,s);return this.flyTo(c.center,c.zoom,s)},setMaxBounds:function(t){return t=fe(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var s=this.options.minZoom;return this.options.minZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var s=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,s){this._enforcingBounds=!0;var c=this.getCenter(),p=this._limitCenter(c,this._zoom,fe(t));return c.equals(p)||this.panTo(p,s),this._enforcingBounds=!1,this},panInside:function(t,s){s=s||{};var c=G(s.paddingTopLeft||s.padding||[0,0]),p=G(s.paddingBottomRight||s.padding||[0,0]),y=this.project(this.getCenter()),C=this.project(t),N=this.getPixelBounds(),B=V([N.min.add(c),N.max.subtract(p)]),F=B.getSize();if(!B.contains(C)){this._enforcingBounds=!0;var K=C.subtract(B.getCenter()),ie=B.extend(C).getSize().subtract(F);y.x+=K.x<0?-ie.x:ie.x,y.y+=K.y<0?-ie.y:ie.y,this.panTo(this.unproject(y),s),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=f({animate:!1,pan:!0},t===!0?{animate:!0}:t);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),p=s.divideBy(2).round(),y=c.divideBy(2).round(),C=p.subtract(y);return!C.x&&!C.y?this:(t.animate&&t.pan?this.panBy(C):(t.pan&&this._rawPanBy(C),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=f({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=d(this._handleGeolocationResponse,this),c=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,c,t):navigator.geolocation.getCurrentPosition(s,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var s=t.code,c=t.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var s=t.coords.latitude,c=t.coords.longitude,p=new ue(s,c),y=p.toBounds(t.coords.accuracy*2),C=this._locateOptions;if(C.setView){var N=this.getBoundsZoom(y);this.setView(p,C.maxZoom?Math.min(N,C.maxZoom):N)}var B={latlng:p,bounds:y,timestamp:t.timestamp};for(var F in t.coords)typeof t.coords[F]=="number"&&(B[F]=t.coords[F]);this.fire("locationfound",B)}},addHandler:function(t,s){if(!s)return this;var c=this[t]=new s(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Qe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,s){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),p=Le("div",c,s||this._mapPane);return t&&(this._panes[t]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),s=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new _e(s,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,s,c){t=fe(t),c=G(c||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),C=this.getMaxZoom(),N=t.getNorthWest(),B=t.getSouthEast(),F=this.getSize().subtract(c),K=V(this.project(B,p),this.project(N,p)).getSize(),ie=ce.any3d?this.options.zoomSnap:1,ge=F.x/K.x,Pe=F.y/K.y,pt=s?Math.max(ge,Pe):Math.min(ge,Pe);return p=this.getScaleZoom(pt,p),ie&&(p=Math.round(p/(ie/100))*(ie/100),p=s?Math.ceil(p/ie)*ie:Math.floor(p/ie)*ie),Math.max(y,Math.min(C,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,s){var c=this._getTopLeftPoint(t,s);return new A(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,s){var c=this.options.crs;return s=s===void 0?this._zoom:s,c.scale(t)/c.scale(s)},getScaleZoom:function(t,s){var c=this.options.crs;s=s===void 0?this._zoom:s;var p=c.zoom(t*c.scale(s));return isNaN(p)?1/0:p},project:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(se(t),s)},unproject:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(G(t),s)},layerPointToLatLng:function(t){var s=G(t).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(t){var s=this.project(se(t))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(se(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(fe(t))},distance:function(t,s){return this.options.crs.distance(se(t),se(s))},containerPointToLayerPoint:function(t){return G(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return G(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var s=this.containerPointToLayerPoint(G(t));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(t)))},mouseEventToContainerPoint:function(t){return Sr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var s=this._container=Vt(t);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ke(s,"scroll",this._onScroll,this),this._containerId=g(s)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,be(t,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=vr(t,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(t.markerPane,"leaflet-zoom-hide"),be(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,s,c){st(this._mapPane,new q(0,0));var p=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var y=this._zoom!==s;this._moveStart(y,c)._move(t,s)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(t,s){return t&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(t,s,c,p){s===void 0&&(s=this._zoom);var y=this._zoom!==s;return this._zoom=s,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),p?c&&c.pinch&&this.fire("zoom",c):((y||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){st(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var s=t?Fe:ke;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){te(this._resizeRequest),this._resizeRequest=qe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,s){for(var c=[],p,y=s==="mouseout"||s==="mouseover",C=t.target||t.srcElement,N=!1;C;){if(p=this._targets[g(C)],p&&(s==="click"||s==="preclick")&&this._draggableMoved(p)){N=!0;break}if(p&&p.listens(s,!0)&&(y&&!br(C,t)||(c.push(p),y))||C===this._container)break;C=C.parentNode}return!c.length&&!N&&!y&&this.listens(s,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var s=t.target||t.srcElement;if(!(!this._loaded||s._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(s))){var c=t.type;c==="mousedown"&&ji(s),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,s,c){if(t.type==="click"){var p=f({},t);p.type="preclick",this._fireDOMEvent(p,p.type,c)}var y=this._findEventTargets(t,s);if(c){for(var C=[],N=0;N<c.length;N++)c[N].listens(s,!0)&&C.push(c[N]);y=C.concat(y)}if(y.length){s==="contextmenu"&&tt(t);var B=y[0],F={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);F.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(t),F.layerPoint=this.containerPointToLayerPoint(F.containerPoint),F.latlng=K?B.getLatLng():this.layerPointToLatLng(F.layerPoint)}for(N=0;N<y.length;N++)if(y[N].fire(s,F,!0),F.originalEvent._stopped||y[N].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,s=this._handlers.length;t<s;t++)this._handlers[t].disable()},whenReady:function(t,s){return this._loaded?t.call(s||this,{target:this}):this.on("load",t,s),this},_getMapPanePos:function(){return wn(this._mapPane)||new q(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,s){var c=t&&s!==void 0?this._getNewPixelOrigin(t,s):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,s){var c=this.getSize()._divideBy(2);return this.project(t,s)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,s,c){var p=this._getNewPixelOrigin(c,s);return this.project(t,s)._subtract(p)},_latLngBoundsToNewLayerBounds:function(t,s,c){var p=this._getNewPixelOrigin(c,s);return V([this.project(t.getSouthWest(),s)._subtract(p),this.project(t.getNorthWest(),s)._subtract(p),this.project(t.getSouthEast(),s)._subtract(p),this.project(t.getNorthEast(),s)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,s,c){if(!c)return t;var p=this.project(t,s),y=this.getSize().divideBy(2),C=new A(p.subtract(y),p.add(y)),N=this._getBoundsOffset(C,c,s);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?t:this.unproject(p.add(N),s)},_limitOffset:function(t,s){if(!s)return t;var c=this.getPixelBounds(),p=new A(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(p,s))},_getBoundsOffset:function(t,s,c){var p=V(this.project(s.getNorthEast(),c),this.project(s.getSouthWest(),c)),y=p.min.subtract(t.min),C=p.max.subtract(t.max),N=this._rebound(y.x,-C.x),B=this._rebound(y.y,-C.y);return new q(N,B)},_rebound:function(t,s){return t+s>0?Math.round(t-s)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(s))},_limitZoom:function(t){var s=this.getMinZoom(),c=this.getMaxZoom(),p=ce.any3d?this.options.zoomSnap:1;return p&&(t=Math.round(t/p)*p),Math.max(s,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ge(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,s){var c=this._getCenterOffset(t)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,s),!0)},_createAnimProxy:function(){var t=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(s){var c=xo,p=this._proxy.style[c];Gt(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),p===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),s=this.getZoom();Gt(this._proxy,this.project(t,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,s,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(s),y=this._getCenterOffset(t)._divideBy(1-1/p);return c.animate!==!0&&!this.getSize().contains(y)?!1:(qe(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,s,!0)},this),!0)},_animateZoom:function(t,s,c,p){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=s,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:s,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ge(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function In(t,s){return new Oe(t,s)}var At=Ue.extend({options:{position:"topright"},initialize:function(t){O(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var s=this._map;return s&&s.removeControl(this),this.options.position=t,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var s=this._container=this.onAdd(t),c=this.getPosition(),p=t._controlCorners[c];return be(s,"leaflet-control"),c.indexOf("bottom")!==-1?p.insertBefore(s,p.firstChild):p.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Mn=function(t){return new At(t)};Oe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},s="leaflet-",c=this._controlContainer=Le("div",s+"control-container",this._container);function p(y,C){var N=s+y+" "+s+C;t[y+C]=Le("div",N,c)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Qe(this._controlCorners[t]);Qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Lo=At.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,s,c,p){return c<p?-1:p<c?1:0}},initialize:function(t,s,c){O(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in t)this._addLayer(t[p],p);for(p in s)this._addLayer(s[p],p,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return At.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,s){return this._addLayer(t,s),this._map?this._update():this},addOverlay:function(t,s){return this._addLayer(t,s,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var s=this._getLayer(g(t));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ge(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ge(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",s=this._container=Le("div",t),c=this.options.collapsed;s.setAttribute("aria-haspopup",!0),kr(s),cs(s);var p=this._section=Le("section",t+"-list");c&&(this._map.on("click",this.collapse,this),ke(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Le("a",t+"-toggle",s);y.href="#",y.title="Layers",y.setAttribute("role","button"),ke(y,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){tt(C),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Le("div",t+"-base",p),this._separator=Le("div",t+"-separator",p),this._overlaysList=Le("div",t+"-overlays",p),s.appendChild(p)},_getLayer:function(t){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&g(this._layers[s].layer)===t)return this._layers[s]},_addLayer:function(t,s,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:s,overlay:c}),this.options.sortLayers&&this._layers.sort(d(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rs(this._baseLayersList),rs(this._overlaysList),this._layerControlInputs=[];var t,s,c,p,y=0;for(c=0;c<this._layers.length;c++)p=this._layers[c],this._addItem(p),s=s||p.overlay,t=t||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(t=t&&y>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=s&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var s=this._getLayer(g(t.target)),c=s.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,s)},_createRadioElement:function(t,s){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(s?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=c,p.firstChild},_addItem:function(t){var s=document.createElement("label"),c=this._map.hasLayer(t.layer),p;t.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=c):p=this._createRadioElement("leaflet-base-layers_"+g(this),c),this._layerControlInputs.push(p),p.layerId=g(t.layer),ke(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+t.name;var C=document.createElement("span");s.appendChild(C),C.appendChild(p),C.appendChild(y);var N=t.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,s,c,p=[],y=[];this._handlingClick=!0;for(var C=t.length-1;C>=0;C--)s=t[C],c=this._getLayer(s.layerId).layer,s.checked?p.push(c):s.checked||y.push(c);for(C=0;C<y.length;C++)this._map.hasLayer(y[C])&&this._map.removeLayer(y[C]);for(C=0;C<p.length;C++)this._map.hasLayer(p[C])||this._map.addLayer(p[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,s,c,p=this._map.getZoom(),y=t.length-1;y>=0;y--)s=t[y],c=this._getLayer(s.layerId).layer,s.disabled=c.options.minZoom!==void 0&&p<c.options.minZoom||c.options.maxZoom!==void 0&&p>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,ke(t,"click",tt),this.expand();var s=this;setTimeout(function(){Fe(t,"click",tt),s._preventClick=!1})}}),fs=function(t,s,c){return new Lo(t,s,c)},Ni=At.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var s="leaflet-control-zoom",c=Le("div",s+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,s+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,s+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,s,c,p,y){var C=Le("a",c,p);return C.innerHTML=t,C.href="#",C.title=s,C.setAttribute("role","button"),C.setAttribute("aria-label",s),kr(C),ke(C,"click",Jt),ke(C,"click",y,this),ke(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var t=this._map,s="leaflet-disabled";Ge(this._zoomInButton,s),Ge(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(be(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(be(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oe.mergeOptions({zoomControl:!0}),Oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ni,this.addControl(this.zoomControl))});var Ha=function(t){return new Ni(t)},Et=At.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var s="leaflet-control-scale",c=Le("div",s),p=this.options;return this._addScales(p,s+"-line",c),t.on(p.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,s,c){t.metric&&(this._mScale=Le("div",s,c)),t.imperial&&(this._iScale=Le("div",s,c))},_update:function(){var t=this._map,s=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,s]),t.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var s=this._getRoundNum(t),c=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,c,s/t)},_updateImperial:function(t){var s=t*3.2808399,c,p,y;s>5280?(c=s/5280,p=this._getRoundNum(c),this._updateScale(this._iScale,p+" mi",p/c)):(y=this._getRoundNum(s),this._updateScale(this._iScale,y+" ft",y/s))},_updateScale:function(t,s,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=s},_getRoundNum:function(t){var s=Math.pow(10,(Math.floor(t)+"").length-1),c=t/s;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,s*c}}),Ri=function(t){return new Et(t)},Co='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Xn=At.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?Co+" ":"")+"Leaflet</a>"},initialize:function(t){O(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),kr(this._container);for(var s in t._layers)t._layers[s].getAttribution&&this.addAttribution(t._layers[s].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var s in this._attributions)this._attributions[s]&&t.push(s);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Oe.mergeOptions({attributionControl:!0}),Oe.addInitHook(function(){this.options.attributionControl&&new Xn().addTo(this)});var Pu=function(t){return new Xn(t)};At.Layers=Lo,At.Zoom=Ni,At.Scale=Et,At.Attribution=Xn,Mn.layers=fs,Mn.zoom=Ha,Mn.scale=Ri,Mn.attribution=Pu;var Dt=Ue.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Dt.addTo=function(t,s){return t.addHandler(s,this),this};var Po={Events:Ne},Ai=ce.touch?"touchstart mousedown":"mousedown",Qt=Ie.extend({options:{clickTolerance:3},initialize:function(t,s,c,p){O(this,p),this._element=t,this._dragStartTarget=s||t,this._preventOutline=c},enable:function(){this._enabled||(ke(this._dragStartTarget,Ai,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qt._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,Ai,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ei(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Qt._dragging===this&&this.finishDrag();return}if(!(Qt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Qt._dragging=this,this._preventOutline&&ji(this._element),as(),Re(),!this._moving)){this.fire("down");var s=t.touches?t.touches[0]:t,c=xn(this._element);this._startPoint=new q(s.clientX,s.clientY),this._startPos=wn(this._element),this._parentScale=an(c);var p=t.type==="mousedown";ke(document,p?"mousemove":"touchmove",this._onMove,this),ke(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var s=t.touches&&t.touches.length===1?t.touches[0]:t,c=new q(s.clientX,s.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,tt(t),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),st(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ge(document.body,"leaflet-dragging"),this._lastTarget&&(Ge(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),ls(),Oi();var s=this._moved&&this._moving;this._moving=!1,Qt._dragging=!1,s&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Eo(t,s,c){var p,y=[1,4,2,8],C,N,B,F,K,ie,ge,Pe;for(C=0,ie=t.length;C<ie;C++)t[C]._code=ei(t[C],s);for(B=0;B<4;B++){for(ge=y[B],p=[],C=0,ie=t.length,N=ie-1;C<ie;N=C++)F=t[C],K=t[N],F._code&ge?K._code&ge||(Pe=ms(K,F,ge,s,c),Pe._code=ei(Pe,s),p.push(Pe)):(K._code&ge&&(Pe=ms(K,F,ge,s,c),Pe._code=ei(Pe,s),p.push(Pe)),p.push(F));t=p}return t}function Wa(t,s){var c,p,y,C,N,B,F,K,ie;if(!t||t.length===0)throw new Error("latlngs not passed");Ut(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ge=se([0,0]),Pe=fe(t),pt=Pe.getNorthWest().distanceTo(Pe.getSouthWest())*Pe.getNorthEast().distanceTo(Pe.getNorthWest());pt<1700&&(ge=To(t));var ut=t.length,Mt=[];for(c=0;c<ut;c++){var Tt=se(t[c]);Mt.push(s.project(se([Tt.lat-ge.lat,Tt.lng-ge.lng])))}for(B=F=K=0,c=0,p=ut-1;c<ut;p=c++)y=Mt[c],C=Mt[p],N=y.y*C.x-C.y*y.x,F+=(y.x+C.x)*N,K+=(y.y+C.y)*N,B+=N*3;B===0?ie=Mt[0]:ie=[F/B,K/B];var Hi=s.unproject(G(ie));return se([Hi.lat+ge.lat,Hi.lng+ge.lng])}function To(t){for(var s=0,c=0,p=0,y=0;y<t.length;y++){var C=se(t[y]);s+=C.lat,c+=C.lng,p++}return se([s/p,c/p])}var Eu={__proto__:null,clipPolygon:Eo,polygonCenter:Wa,centroid:To};function ps(t,s){if(!s||!t.length)return t.slice();var c=s*s;return t=ju(t,c),t=Ou(t,c),t}function qa(t,s,c){return Math.sqrt(ti(t,s,c,!0))}function Tu(t,s,c){return ti(t,s,c)}function Ou(t,s){var c=t.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(c);y[0]=y[c-1]=1,Oo(t,y,s,0,c-1);var C,N=[];for(C=0;C<c;C++)y[C]&&N.push(t[C]);return N}function Oo(t,s,c,p,y){var C=0,N,B,F;for(B=p+1;B<=y-1;B++)F=ti(t[B],t[p],t[y],!0),F>C&&(N=B,C=F);C>c&&(s[N]=1,Oo(t,s,c,p,N),Oo(t,s,c,N,y))}function ju(t,s){for(var c=[t[0]],p=1,y=0,C=t.length;p<C;p++)Nu(t[p],t[y])>s&&(c.push(t[p]),y=p);return y<C-1&&c.push(t[C-1]),c}var jo;function Va(t,s,c,p,y){var C=p?jo:ei(t,c),N=ei(s,c),B,F,K;for(jo=N;;){if(!(C|N))return[t,s];if(C&N)return!1;B=C||N,F=ms(t,s,B,c,y),K=ei(F,c),B===C?(t=F,C=K):(s=F,N=K)}}function ms(t,s,c,p,y){var C=s.x-t.x,N=s.y-t.y,B=p.min,F=p.max,K,ie;return c&8?(K=t.x+C*(F.y-t.y)/N,ie=F.y):c&4?(K=t.x+C*(B.y-t.y)/N,ie=B.y):c&2?(K=F.x,ie=t.y+N*(F.x-t.x)/C):c&1&&(K=B.x,ie=t.y+N*(B.x-t.x)/C),new q(K,ie,y)}function ei(t,s){var c=0;return t.x<s.min.x?c|=1:t.x>s.max.x&&(c|=2),t.y<s.min.y?c|=4:t.y>s.max.y&&(c|=8),c}function Nu(t,s){var c=s.x-t.x,p=s.y-t.y;return c*c+p*p}function ti(t,s,c,p){var y=s.x,C=s.y,N=c.x-y,B=c.y-C,F=N*N+B*B,K;return F>0&&(K=((t.x-y)*N+(t.y-C)*B)/F,K>1?(y=c.x,C=c.y):K>0&&(y+=N*K,C+=B*K)),N=t.x-y,B=t.y-C,p?N*N+B*B:new q(y,C)}function Ut(t){return!W(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Ga(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ut(t)}function Ka(t,s){var c,p,y,C,N,B,F,K;if(!t||t.length===0)throw new Error("latlngs not passed");Ut(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ie=se([0,0]),ge=fe(t),Pe=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());Pe<1700&&(ie=To(t));var pt=t.length,ut=[];for(c=0;c<pt;c++){var Mt=se(t[c]);ut.push(s.project(se([Mt.lat-ie.lat,Mt.lng-ie.lng])))}for(c=0,p=0;c<pt-1;c++)p+=ut[c].distanceTo(ut[c+1])/2;if(p===0)K=ut[0];else for(c=0,C=0;c<pt-1;c++)if(N=ut[c],B=ut[c+1],y=N.distanceTo(B),C+=y,C>p){F=(C-p)/y,K=[B.x-F*(B.x-N.x),B.y-F*(B.y-N.y)];break}var Tt=s.unproject(G(K));return se([Tt.lat+ie.lat,Tt.lng+ie.lng])}var Ja={__proto__:null,simplify:ps,pointToSegmentDistance:qa,closestPointOnSegment:Tu,clipSegment:Va,_getEdgeIntersection:ms,_getBitCode:ei,_sqClosestPointOnSegment:ti,isFlat:Ut,_flat:Ga,polylineCenter:Ka},No={project:function(t){return new q(t.lng,t.lat)},unproject:function(t){return new ue(t.y,t.x)},bounds:new A([-180,-90],[180,90])},Ro={R:6378137,R_MINOR:6356752314245179e-9,bounds:new A([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var s=Math.PI/180,c=this.R,p=t.lat*s,y=this.R_MINOR/c,C=Math.sqrt(1-y*y),N=C*Math.sin(p),B=Math.tan(Math.PI/4-p/2)/Math.pow((1-N)/(1+N),C/2);return p=-c*Math.log(Math.max(B,1e-10)),new q(t.lng*s*c,p)},unproject:function(t){for(var s=180/Math.PI,c=this.R,p=this.R_MINOR/c,y=Math.sqrt(1-p*p),C=Math.exp(-t.y/c),N=Math.PI/2-2*Math.atan(C),B=0,F=.1,K;B<15&&Math.abs(F)>1e-7;B++)K=y*Math.sin(N),K=Math.pow((1-K)/(1+K),y/2),F=Math.PI/2-2*Math.atan(C*K)-N,N+=F;return new ue(N*s,t.x*s/c)}},Ru={__proto__:null,LonLat:No,Mercator:Ro,SphericalMercator:xt},Au=f({},Ee,{code:"EPSG:3395",projection:Ro,transformation:(function(){var t=.5/(Math.PI*Ro.R);return xi(t,.5,-t,.5)})()}),Qa=f({},Ee,{code:"EPSG:4326",projection:No,transformation:xi(1/180,1,-1/180,.5)}),Iu=f({},je,{projection:No,transformation:xi(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,s){var c=s.lng-t.lng,p=s.lat-t.lat;return Math.sqrt(c*c+p*p)},infinite:!0});je.Earth=Ee,je.EPSG3395=Au,je.EPSG3857=ki,je.EPSG900913=so,je.EPSG4326=Qa,je.Simple=Iu;var Yt=Ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var s=t.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var c=this.getEvents();s.on(c,this),this.once("remove",function(){s.off(c,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});Oe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var s=g(t);return this._layers[s]?this:(this._layers[s]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var s=g(t);return this._layers[s]?(this._loaded&&t.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,s){for(var c in this._layers)t.call(s,this._layers[c]);return this},_addLayers:function(t){t=t?W(t)?t:[t]:[];for(var s=0,c=t.length;s<c;s++)this.addLayer(t[s])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var s=g(t);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,s=-1/0,c=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;t=y.minZoom===void 0?t:Math.min(t,y.minZoom),s=y.maxZoom===void 0?s:Math.max(s,y.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var zn=Yt.extend({initialize:function(t,s){O(this,s),this._layers={};var c,p;if(t)for(c=0,p=t.length;c<p;c++)this.addLayer(t[c])},addLayer:function(t){var s=this.getLayerId(t);return this._layers[s]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var s=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(t){var s=typeof t=="number"?t:this.getLayerId(t);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var s=Array.prototype.slice.call(arguments,1),c,p;for(c in this._layers)p=this._layers[c],p[t]&&p[t].apply(p,s);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,s){for(var c in this._layers)t.call(s,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),Lr=function(t,s){return new zn(t,s)},kn=zn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),zn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),zn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new _e;for(var s in this._layers){var c=this._layers[s];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),Ya=function(t,s){return new kn(t,s)},ni=Ue.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){O(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,s){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(c,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(p,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(t,s){var c=this.options,p=c[s+"Size"];typeof p=="number"&&(p=[p,p]);var y=G(p),C=G(s==="shadow"&&c.shadowAnchor||c.iconAnchor||y&&y.divideBy(2,!0));t.className="leaflet-marker-"+s+" "+(c.className||""),C&&(t.style.marginLeft=-C.x+"px",t.style.marginTop=-C.y+"px"),y&&(t.style.width=y.x+"px",t.style.height=y.y+"px")},_createImg:function(t,s){return s=s||document.createElement("img"),s.src=t,s},_getIconUrl:function(t){return ce.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Xa(t){return new ni(t)}var Ii=ni.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ii.imagePath!="string"&&(Ii.imagePath=this._detectIconPath()),(this.options.imagePath||Ii.imagePath)+ni.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var s=function(c,p,y){var C=p.exec(c);return C&&C[y]};return t=s(t,/^url\((['"])?(.+)\1\)$/,2),t&&s(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Le("div","leaflet-default-icon-path",document.body),s=vr(t,"background-image")||vr(t,"backgroundImage");if(document.body.removeChild(t),s=this._stripUrl(s),s)return s;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Ao=Dt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Qt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ge(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var s=this._marker,c=s._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,C=wn(s._icon),N=c.getPixelBounds(),B=c.getPixelOrigin(),F=V(N.min._subtract(B).add(y),N.max._subtract(B).subtract(y));if(!F.contains(C)){var K=G((Math.max(F.max.x,C.x)-F.max.x)/(N.max.x-F.max.x)-(Math.min(F.min.x,C.x)-F.min.x)/(N.min.x-F.min.x),(Math.max(F.max.y,C.y)-F.max.y)/(N.max.y-F.max.y)-(Math.min(F.min.y,C.y)-F.min.y)/(N.min.y-F.min.y)).multiplyBy(p);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),st(s._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=qe(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(te(this._panRequest),this._panRequest=qe(this._adjustPan.bind(this,t)))},_onDrag:function(t){var s=this._marker,c=s._shadow,p=wn(s._icon),y=s._map.layerPointToLatLng(p);c&&st(c,p),s._latlng=y,t.latlng=y,t.oldLatLng=this._oldLatLng,s.fire("move",t).fire("drag",t)},_onDragEnd:function(t){te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Sn=Yt.extend({options:{icon:new Ii,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,s){O(this,s),this._latlng=se(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var s=this._latlng;return this._latlng=se(t),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),p=!1;c!==this._icon&&(this._icon&&this._removeIcon(),p=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),be(c,s),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(c,"focus",this._panOnFocus,this);var y=t.icon.createShadow(this._shadow),C=!1;y!==this._shadow&&(this._removeShadow(),C=!0),y&&(be(y,s),y.alt=""),this._shadow=y,t.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&C&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),Qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&st(this._icon,t),this._shadow&&st(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ao)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ao(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Pt(this._icon,t),this._shadow&&Pt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var s=this.options.icon.options,c=s.iconSize?G(s.iconSize):G(0,0),p=s.iconAnchor?G(s.iconAnchor):G(0,0);t.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:c.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Mu(t,s){return new Sn(t,s)}var Bn=Yt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return O(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_s=Bn.extend({options:{fill:!0,radius:10},initialize:function(t,s){O(this,s),this._latlng=se(t),this._radius=this.options.radius},setLatLng:function(t){var s=this._latlng;return this._latlng=se(t),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var s=t&&t.radius||this._radius;return Bn.prototype.setStyle.call(this,t),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,s=this._radiusY||t,c=this._clickTolerance(),p=[t+c,s+c];this._pxBounds=new A(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function el(t,s){return new _s(t,s)}var gs=_s.extend({initialize:function(t,s,c){if(typeof s=="number"&&(s=f({},c,{radius:s})),O(this,s),this._latlng=se(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new _e(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Bn.prototype.setStyle,_project:function(){var t=this._latlng.lng,s=this._latlng.lat,c=this._map,p=c.options.crs;if(p.distance===Ee.distance){var y=Math.PI/180,C=this._mRadius/Ee.R/y,N=c.project([s+C,t]),B=c.project([s-C,t]),F=N.add(B).divideBy(2),K=c.unproject(F).lat,ie=Math.acos((Math.cos(C*y)-Math.sin(s*y)*Math.sin(K*y))/(Math.cos(s*y)*Math.cos(K*y)))/y;(isNaN(ie)||ie===0)&&(ie=C/Math.cos(Math.PI/180*s)),this._point=F.subtract(c.getPixelOrigin()),this._radius=isNaN(ie)?0:F.x-c.project([K,t-ie]).x,this._radiusY=F.y-N.y}else{var ge=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ge).x}this._updateBounds()}});function Cr(t,s,c){return new gs(t,s,c)}var It=Bn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,s){O(this,s),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var s=1/0,c=null,p=ti,y,C,N=0,B=this._parts.length;N<B;N++)for(var F=this._parts[N],K=1,ie=F.length;K<ie;K++){y=F[K-1],C=F[K];var ge=p(t,y,C,!0);ge<s&&(s=ge,c=p(t,y,C))}return c&&(c.distance=Math.sqrt(s)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ka(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,s){return s=s||this._defaultShape(),t=se(t),s.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new _e,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var s=[],c=Ut(t),p=0,y=t.length;p<y;p++)c?(s[p]=se(t[p]),this._bounds.extend(s[p])):s[p]=this._convertLatLngs(t[p]);return s},_project:function(){var t=new A;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),s=new q(t,t);this._rawPxBounds&&(this._pxBounds=new A([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(t,s,c){var p=t[0]instanceof ue,y=t.length,C,N;if(p){for(N=[],C=0;C<y;C++)N[C]=this._map.latLngToLayerPoint(t[C]),c.extend(N[C]);s.push(N)}else for(C=0;C<y;C++)this._projectLatlngs(t[C],s,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,c,p,y,C,N,B,F;for(c=0,y=0,C=this._rings.length;c<C;c++)for(F=this._rings[c],p=0,N=F.length;p<N-1;p++)B=Va(F[p],F[p+1],t,p,!0),B&&(s[y]=s[y]||[],s[y].push(B[0]),(B[1]!==F[p+1]||p===N-2)&&(s[y].push(B[1]),y++))}},_simplifyPoints:function(){for(var t=this._parts,s=this.options.smoothFactor,c=0,p=t.length;c<p;c++)t[c]=ps(t[c],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,s){var c,p,y,C,N,B,F=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,C=this._parts.length;c<C;c++)for(B=this._parts[c],p=0,N=B.length,y=N-1;p<N;y=p++)if(!(!s&&p===0)&&qa(t,B[y],B[p])<=F)return!0;return!1}});function zu(t,s){return new It(t,s)}It._flat=Ga;var bn=It.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var s=It.prototype._convertLatLngs.call(this,t),c=s.length;return c>=2&&s[0]instanceof ue&&s[0].equals(s[c-1])&&s.pop(),s},_setLatLngs:function(t){It.prototype._setLatLngs.call(this,t),Ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,c=new q(s,s);if(t=new A(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,C;p<y;p++)C=Eo(this._rings[p],t,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var s=!1,c,p,y,C,N,B,F,K;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(C=0,F=this._parts.length;C<F;C++)for(c=this._parts[C],N=0,K=c.length,B=K-1;N<K;B=N++)p=c[N],y=c[B],p.y>t.y!=y.y>t.y&&t.x<(y.x-p.x)*(t.y-p.y)/(y.y-p.y)+p.x&&(s=!s);return s||It.prototype._containsPoint.call(this,t,!0)}});function Bu(t,s){return new bn(t,s)}var un=kn.extend({initialize:function(t,s){O(this,s),this._layers={},t&&this.addData(t)},addData:function(t){var s=W(t)?t:t.features,c,p,y;if(s){for(c=0,p=s.length;c<p;c++)y=s[c],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var C=this.options;if(C.filter&&!C.filter(t))return this;var N=Mi(t,C);return N?(N.feature=ks(t),N.defaultOptions=N.options,this.resetStyle(N),C.onEachFeature&&C.onEachFeature(t,N),this.addLayer(N)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=f({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(s){this._setLayerStyle(s,t)},this)},_setLayerStyle:function(t,s){t.setStyle&&(typeof s=="function"&&(s=s(t.feature)),t.setStyle(s))}});function Mi(t,s){var c=t.type==="Feature"?t.geometry:t,p=c?c.coordinates:null,y=[],C=s&&s.pointToLayer,N=s&&s.coordsToLatLng||ys,B,F,K,ie;if(!p&&!c)return null;switch(c.type){case"Point":return B=N(p),vs(C,t,B,s);case"MultiPoint":for(K=0,ie=p.length;K<ie;K++)B=N(p[K]),y.push(vs(C,t,B,s));return new kn(y);case"LineString":case"MultiLineString":return F=Pr(p,c.type==="LineString"?0:1,N),new It(F,s);case"Polygon":case"MultiPolygon":return F=Pr(p,c.type==="Polygon"?1:2,N),new bn(F,s);case"GeometryCollection":for(K=0,ie=c.geometries.length;K<ie;K++){var ge=Mi({geometry:c.geometries[K],type:"Feature",properties:t.properties},s);ge&&y.push(ge)}return new kn(y);case"FeatureCollection":for(K=0,ie=c.features.length;K<ie;K++){var Pe=Mi(c.features[K],s);Pe&&y.push(Pe)}return new kn(y);default:throw new Error("Invalid GeoJSON object.")}}function vs(t,s,c,p){return t?t(s,c):new Sn(c,p&&p.markersInheritOptions&&p)}function ys(t){return new ue(t[1],t[0],t[2])}function Pr(t,s,c){for(var p=[],y=0,C=t.length,N;y<C;y++)N=s?Pr(t[y],s-1,c):(c||ys)(t[y]),p.push(N);return p}function ws(t,s){return t=se(t),t.alt!==void 0?[P(t.lng,s),P(t.lat,s),P(t.alt,s)]:[P(t.lng,s),P(t.lat,s)]}function xs(t,s,c,p){for(var y=[],C=0,N=t.length;C<N;C++)y.push(s?xs(t[C],Ut(t[C])?0:s-1,c,p):ws(t[C],p));return!s&&c&&y.length>0&&y.push(y[0].slice()),y}function zi(t,s){return t.feature?f({},t.feature,{geometry:s}):ks(s)}function ks(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Io={toGeoJSON:function(t){return zi(this,{type:"Point",coordinates:ws(this.getLatLng(),t)})}};Sn.include(Io),gs.include(Io),_s.include(Io),It.include({toGeoJSON:function(t){var s=!Ut(this._latlngs),c=xs(this._latlngs,s?1:0,!1,t);return zi(this,{type:(s?"Multi":"")+"LineString",coordinates:c})}}),bn.include({toGeoJSON:function(t){var s=!Ut(this._latlngs),c=s&&!Ut(this._latlngs[0]),p=xs(this._latlngs,c?2:s?1:0,!0,t);return s||(p=[p]),zi(this,{type:(c?"Multi":"")+"Polygon",coordinates:p})}}),zn.include({toMultiPoint:function(t){var s=[];return this.eachLayer(function(c){s.push(c.toGeoJSON(t).geometry.coordinates)}),zi(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(t){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(t);var c=s==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var C=y.toGeoJSON(t);if(c)p.push(C.geometry);else{var N=ks(C);N.type==="FeatureCollection"?p.push.apply(p,N.features):p.push(N)}}}),c?zi(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function tl(t,s){return new un(t,s)}var Xt=tl,Dn=Yt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,s,c){this._url=t,this._bounds=fe(s),O(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Pi(this._image),this},bringToBack:function(){return this._map&&yn(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=fe(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",s=this._image=t?this._url:Le("img");if(be(s,"leaflet-image-layer"),this._zoomAnimated&&be(s,"leaflet-zoom-animated"),this.options.className&&be(s,this.options.className),s.onselectstart=b,s.onmousemove=b,s.onload=d(this.fire,this,"load"),s.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(t){var s=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Gt(this._image,c,s)},_reset:function(){var t=this._image,s=new A(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=s.getSize();st(t,s.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){Pt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),nl=function(t,s,c){return new Dn(t,s,c)},Mo=Dn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",s=this._image=t?this._url:Le("video");if(be(s,"leaflet-image-layer"),this._zoomAnimated&&be(s,"leaflet-zoom-animated"),this.options.className&&be(s,this.options.className),s.onselectstart=b,s.onmousemove=b,s.onloadeddata=d(this.fire,this,"load"),t){for(var c=s.getElementsByTagName("source"),p=[],y=0;y<c.length;y++)p.push(c[y].src);this._url=c.length>0?p:[s.src];return}W(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var N=Le("source");N.src=this._url[C],s.appendChild(N)}}});function il(t,s,c){return new Mo(t,s,c)}var zo=Dn.extend({_initImage:function(){var t=this._image=this._url;be(t,"leaflet-image-layer"),this._zoomAnimated&&be(t,"leaflet-zoom-animated"),this.options.className&&be(t,this.options.className),t.onselectstart=b,t.onmousemove=b}});function Bo(t,s,c){return new zo(t,s,c)}var cn=Yt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,s){t&&(t instanceof ue||W(t))?(this._latlng=se(t),O(this,s)):(O(this,t),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Pt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Pt(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Pt(this._container,0),this._removeTimeout=setTimeout(d(Qe,void 0,this._container),200)):Qe(this._container),this.options.interactive&&(Ge(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=se(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pi(this._container),this},bringToBack:function(){return this._map&&yn(this._container),this},_prepareOpen:function(t){var s=this._source;if(!s._map)return!1;if(s instanceof kn){s=null;var c=this._source._layers;for(var p in c)if(c[p]._map){s=c[p];break}if(!s)return!1;this._source=s}if(!t)if(s.getCenter)t=s.getCenter();else if(s.getLatLng)t=s.getLatLng();else if(s.getBounds)t=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")t.innerHTML=s;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),s=G(this.options.offset),c=this._getAnchor();this._zoomAnimated?st(this._container,t.add(c)):s=s.add(t).add(c);var p=this._containerBottom=-s.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});Oe.include({_initOverlay:function(t,s,c,p){var y=s;return y instanceof t||(y=new t(p).setContent(s)),c&&y.setLatLng(c),y}}),Yt.include({_initOverlay:function(t,s,c,p){var y=c;return y instanceof t?(O(y,p),y._source=this):(y=s&&!p?s:new t(p,this),y.setContent(c)),y}});var Ss=cn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,cn.prototype.openOn.call(this,t)},onAdd:function(t){cn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Bn||this._source.on("preclick",ln))},onRemove:function(t){cn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Bn||this._source.off("preclick",ln))},getEvents:function(){var t=cn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",s=this._container=Le("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Le("div",t+"-content-wrapper",s);if(this._contentNode=Le("div",t+"-content",c),kr(s),cs(this._contentNode),ke(s,"contextmenu",ln),this._tipContainer=Le("div",t+"-tip-container",s),this._tip=Le("div",t+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Le("a",t+"-close-button",s);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ke(p,"click",function(y){tt(y),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,s=t.style;s.width="",s.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),s.width=c+1+"px",s.whiteSpace="",s.height="";var p=t.offsetHeight,y=this.options.maxHeight,C="leaflet-popup-scrolled";y&&p>y?(s.height=y+"px",be(t,C)):Ge(t,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();st(this._container,s.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,s=parseInt(vr(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+s,p=this._containerWidth,y=new q(this._containerLeft,-c-this._containerBottom);y._add(wn(this._container));var C=t.layerPointToContainerPoint(y),N=G(this.options.autoPanPadding),B=G(this.options.autoPanPaddingTopLeft||N),F=G(this.options.autoPanPaddingBottomRight||N),K=t.getSize(),ie=0,ge=0;C.x+p+F.x>K.x&&(ie=C.x+p-K.x+F.x),C.x-ie-B.x<0&&(ie=C.x-B.x),C.y+c+F.y>K.y&&(ge=C.y+c-K.y+F.y),C.y-ge-B.y<0&&(ge=C.y-B.y),(ie||ge)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([ie,ge]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bi=function(t,s){return new Ss(t,s)};Oe.mergeOptions({closePopupOnClick:!0}),Oe.include({openPopup:function(t,s,c){return this._initOverlay(Ss,t,s,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Yt.include({bindPopup:function(t,s){return this._popup=this._initOverlay(Ss,this._popup,t,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof kn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Jt(t);var s=t.layer||t.target;if(this._popup._source===s&&!(s instanceof Bn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=s,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Di=cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){cn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){cn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=cn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",s=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var s,c,p=this._map,y=this._container,C=p.latLngToContainerPoint(p.getCenter()),N=p.layerPointToContainerPoint(t),B=this.options.direction,F=y.offsetWidth,K=y.offsetHeight,ie=G(this.options.offset),ge=this._getAnchor();B==="top"?(s=F/2,c=K):B==="bottom"?(s=F/2,c=0):B==="center"?(s=F/2,c=K/2):B==="right"?(s=0,c=K/2):B==="left"?(s=F,c=K/2):N.x<C.x?(B="right",s=0,c=K/2):(B="left",s=F+(ie.x+ge.x)*2,c=K/2),t=t.subtract(G(s,c,!0)).add(ie).add(ge),Ge(y,"leaflet-tooltip-right"),Ge(y,"leaflet-tooltip-left"),Ge(y,"leaflet-tooltip-top"),Ge(y,"leaflet-tooltip-bottom"),be(y,"leaflet-tooltip-"+B),st(y,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Pt(this._container,t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(s)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Er=function(t,s){return new Di(t,s)};Oe.include({openTooltip:function(t,s,c){return this._initOverlay(Di,t,s,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Yt.include({bindTooltip:function(t,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Di,this._tooltip,t,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var s=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[s](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof kn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&(ke(s,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),ke(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var s=t.latlng,c,p;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),p=this._map.containerPointToLayerPoint(c),s=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(s)}});var bs=ni.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var s=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?(rs(s),s.appendChild(c.html)):s.innerHTML=c.html!==!1?c.html:"",c.bgPos){var p=G(c.bgPos);s.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function rl(t){return new bs(t)}ni.Default=Ii;var Un=Yt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){O(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Qe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof q?t:new q(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var s=this.getPane().children,c=-t(-1/0,1/0),p=0,y=s.length,C;p<y;p++)C=s[p].style.zIndex,s[p]!==this._container&&C&&(c=t(c,+C));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){Pt(this._container,this.options.opacity);var t=+new Date,s=!1,c=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var C=Math.min(1,(t-y.loaded)/200);Pt(y.el,C),C<1?s=!0:(y.active?c=!0:this._onOpaqueTile(y),y.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),s&&(te(this._fadeFrame),this._fadeFrame=qe(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,s=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=s-Math.abs(t-c),this._onUpdateLevel(c)):(Qe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var p=this._levels[t],y=this._map;return p||(p=this._levels[t]={},p.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=s,p.origin=y.project(y.unproject(y.getPixelOrigin()),t).round(),p.zoom=t,this._setZoomTransform(p,y.getCenter(),y.getZoom()),b(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var t,s,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)s=this._tiles[t],s.retain=s.current;for(t in this._tiles)if(s=this._tiles[t],s.current&&!s.active){var p=s.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var s in this._tiles)this._tiles[s].coords.z===t&&this._removeTile(s)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Qe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,s,c,p){var y=Math.floor(t/2),C=Math.floor(s/2),N=c-1,B=new q(+y,+C);B.z=+N;var F=this._tileCoordsToKey(B),K=this._tiles[F];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),N>p?this._retainParent(y,C,N,p):!1)},_retainChildren:function(t,s,c,p){for(var y=2*t;y<2*t+2;y++)for(var C=2*s;C<2*s+2;C++){var N=new q(y,C);N.z=c+1;var B=this._tileCoordsToKey(N),F=this._tiles[B];if(F&&F.active){F.retain=!0;continue}else F&&F.loaded&&(F.retain=!0);c+1<p&&this._retainChildren(y,C,c+1,p)}},_resetView:function(t){var s=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var s=this.options;return s.minNativeZoom!==void 0&&t<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<t?s.maxNativeZoom:t},_setView:function(t,s,c,p){var y=Math.round(s);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var C=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||C)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,s)},_setZoomTransforms:function(t,s){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,s)},_setZoomTransform:function(t,s,c){var p=this._map.getZoomScale(c,t.zoom),y=t.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(s,c)).round();ce.any3d?Gt(t.el,y,p):st(t.el,y)},_resetGrid:function(){var t=this._map,s=t.options.crs,c=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,s.wrapLng[0]],p).x/c.x),Math.ceil(t.project([0,s.wrapLng[1]],p).x/c.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([s.wrapLat[0],0],p).y/c.x),Math.ceil(t.project([s.wrapLat[1],0],p).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var s=this._map,c=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),p=s.getZoomScale(c,this._tileZoom),y=s.project(t,this._tileZoom).floor(),C=s.getSize().divideBy(p*2);return new A(y.subtract(C),y.add(C))},_update:function(t){var s=this._map;if(s){var c=this._clampZoom(s.getZoom());if(t===void 0&&(t=s.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(t),y=this._pxBoundsToTileRange(p),C=y.getCenter(),N=[],B=this.options.keepBuffer,F=new A(y.getBottomLeft().subtract([B,-B]),y.getTopRight().add([B,-B]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ie=this._tiles[K].coords;(ie.z!==this._tileZoom||!F.contains(new q(ie.x,ie.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var ge=y.min.y;ge<=y.max.y;ge++)for(var Pe=y.min.x;Pe<=y.max.x;Pe++){var pt=new q(Pe,ge);if(pt.z=this._tileZoom,!!this._isValidTile(pt)){var ut=this._tiles[this._tileCoordsToKey(pt)];ut?ut.current=!0:N.push(pt)}}if(N.sort(function(Tt,Hi){return Tt.distanceTo(C)-Hi.distanceTo(C)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mt=document.createDocumentFragment();for(Pe=0;Pe<N.length;Pe++)this._addTile(N[Pe],Mt);this._level.el.appendChild(Mt)}}}},_isValidTile:function(t){var s=this._map.options.crs;if(!s.infinite){var c=this._globalTileRange;if(!s.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!s.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(t);return fe(this.options.bounds).overlaps(p)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var s=this._map,c=this.getTileSize(),p=t.scaleBy(c),y=p.add(c),C=s.unproject(p,t.z),N=s.unproject(y,t.z);return[C,N]},_tileCoordsToBounds:function(t){var s=this._tileCoordsToNwSe(t),c=new _e(s[0],s[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var s=t.split(":"),c=new q(+s[0],+s[1]);return c.z=+s[2],c},_removeTile:function(t){var s=this._tiles[t];s&&(Qe(s.el),delete this._tiles[t],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){be(t,"leaflet-tile");var s=this.getTileSize();t.style.width=s.x+"px",t.style.height=s.y+"px",t.onselectstart=b,t.onmousemove=b,ce.ielt9&&this.options.opacity<1&&Pt(t,this.options.opacity)},_addTile:function(t,s){var c=this._getTilePos(t),p=this._tileCoordsToKey(t),y=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(y),this.createTile.length<2&&qe(d(this._tileReady,this,t,null,y)),st(y,c),this._tiles[p]={el:y,coords:t,current:!0},s.appendChild(y),this.fire("tileloadstart",{tile:y,coords:t})},_tileReady:function(t,s,c){s&&this.fire("tileerror",{error:s,tile:c,coords:t});var p=this._tileCoordsToKey(t);c=this._tiles[p],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Pt(c.el,0),te(this._fadeFrame),this._fadeFrame=qe(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),s||(be(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?qe(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var s=new q(this._wrapX?k(t.x,this._wrapX):t.x,this._wrapY?k(t.y,this._wrapY):t.y);return s.z=t.z,s},_pxBoundsToTileRange:function(t){var s=this.getTileSize();return new A(t.min.unscaleBy(s).floor(),t.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ui(t){return new Un(t)}var $n=Un.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,s){this._url=t,s=O(this,s),s.detectRetina&&ce.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,s){return this._url===t&&s===void 0&&(s=!0),this._url=t,s||this.redraw(),this},createTile:function(t,s){var c=document.createElement("img");return ke(c,"load",d(this._tileOnLoad,this,s,c)),ke(c,"error",d(this._tileOnError,this,s,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var s={r:ce.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(s.y=c),s["-y"]=c}return z(this._url,f(s,this.options))},_tileOnLoad:function(t,s){ce.ielt9?setTimeout(d(t,this,null,s),0):t(null,s)},_tileOnError:function(t,s,c){var p=this.options.errorTileUrl;p&&s.getAttribute("src")!==p&&(s.src=p),t(c,s)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,s=this.options.maxZoom,c=this.options.zoomReverse,p=this.options.zoomOffset;return c&&(t=s-t),t+p},_getSubdomain:function(t){var s=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var t,s;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(s=this._tiles[t].el,s.onload=b,s.onerror=b,!s.complete)){s.src=ne;var c=this._tiles[t].coords;Qe(s),delete this._tiles[t],this.fire("tileabort",{tile:s,coords:c})}},_removeTile:function(t){var s=this._tiles[t];if(s)return s.el.setAttribute("src",ne),Un.prototype._removeTile.call(this,t)},_tileReady:function(t,s,c){if(!(!this._map||c&&c.getAttribute("src")===ne))return Un.prototype._tileReady.call(this,t,s,c)}});function Do(t,s){return new $n(t,s)}var Tr=$n.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var c=f({},this.defaultWmsParams);for(var p in s)p in this.options||(c[p]=s[p]);s=O(this,s);var y=s.detectRetina&&ce.retina?2:1,C=this.getTileSize();c.width=C.x*y,c.height=C.y*y,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,$n.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._tileCoordsToNwSe(t),c=this._crs,p=V(c.project(s[0]),c.project(s[1])),y=p.min,C=p.max,N=(this._wmsVersion>=1.3&&this._crs===Qa?[y.y,y.x,C.y,C.x]:[y.x,y.y,C.x,C.y]).join(","),B=$n.prototype.getTileUrl.call(this,t);return B+M(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(t,s){return f(this.wmsParams,t),s||this.redraw(),this}});function sl(t,s){return new Tr(t,s)}$n.WMS=Tr,Do.wms=sl;var hn=Yt.extend({options:{padding:.1},initialize:function(t){O(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,s){var c=this._map.getZoomScale(s,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,s),C=p.multiplyBy(-c).add(y).subtract(this._map._getNewPixelOrigin(t,s));ce.any3d?Gt(this._container,C,c):st(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,s=this._map.getSize(),c=this._map.containerPointToLayerPoint(s.multiplyBy(-t)).round();this._bounds=new A(c,c.add(s.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Uo=hn.extend({options:{tolerance:0},getEvents:function(){var t=hn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ke(t,"mousemove",this._onMouseMove,this),ke(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ke(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){te(this._redrawRequest),delete this._ctx,Qe(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var s in this._layers)t=this._layers[s],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hn.prototype._update.call(this);var t=this._bounds,s=this._container,c=t.getSize(),p=ce.retina?2:1;st(s,t.min),s.width=p*c.x,s.height=p*c.y,s.style.width=c.x+"px",s.style.height=c.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){hn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var s=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var s=t._order,c=s.next,p=s.prev;c?c.prev=p:this._drawLast=p,p?p.next=c:this._drawFirst=c,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var s=t.options.dashArray.split(/[, ]+/),c=[],p,y;for(y=0;y<s.length;y++){if(p=Number(s[y]),isNaN(p))return;c.push(p)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||qe(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var s=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new A,this._redrawBounds.extend(t._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(t._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var s=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,s=this._redrawBounds;if(this._ctx.save(),s){var c=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)t=p.layer,(!s||t._pxBounds&&t._pxBounds.intersects(s))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,s){if(this._drawing){var c,p,y,C,N=t._parts,B=N.length,F=this._ctx;if(B){for(F.beginPath(),c=0;c<B;c++){for(p=0,y=N[c].length;p<y;p++)C=N[c][p],F[p?"lineTo":"moveTo"](C.x,C.y);s&&F.closePath()}this._fillStroke(F,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var s=t._point,c=this._ctx,p=Math.max(Math.round(t._radius),1),y=(Math.max(Math.round(t._radiusY),1)||p)/p;y!==1&&(c.save(),c.scale(1,y)),c.beginPath(),c.arc(s.x,s.y/y,p,0,Math.PI*2,!1),y!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,s){var c=s.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(s.options&&s.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var s=this._map.mouseEventToLayerPoint(t),c,p,y=this._drawFirst;y;y=y.next)c=y.layer,c.options.interactive&&c._containsPoint(s)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(p=c);this._fireEvent(p?[p]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,s)}},_handleMouseOut:function(t){var s=this._hoveredLayer;s&&(Ge(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,s){if(!this._mouseHoverThrottled){for(var c,p,y=this._drawFirst;y;y=y.next)c=y.layer,c.options.interactive&&c._containsPoint(s)&&(p=c);p!==this._hoveredLayer&&(this._handleMouseOut(t),p&&(be(this._container,"leaflet-interactive"),this._fireEvent([p],t,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,s,c){this._map._fireDOMEvent(s,c||s.type,t)},_bringToFront:function(t){var s=t._order;if(s){var c=s.next,p=s.prev;if(c)c.prev=p;else return;p?p.next=c:c&&(this._drawFirst=c),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(t)}},_bringToBack:function(t){var s=t._order;if(s){var c=s.next,p=s.prev;if(p)p.next=c;else return;c?c.prev=p:p&&(this._drawLast=p),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(t)}}});function $o(t){return ce.canvas?new Uo(t):null}var $i=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ol={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var s=t._container=$i("shape");be(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",t._path=$i("path"),s.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var s=t._container;this._container.appendChild(s),t.options.interactive&&t.addInteractiveTarget(s)},_removePath:function(t){var s=t._container;Qe(s),t.removeInteractiveTarget(s),delete this._layers[g(t)]},_updateStyle:function(t){var s=t._stroke,c=t._fill,p=t.options,y=t._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(s||(s=t._stroke=$i("stroke")),y.appendChild(s),s.weight=p.weight+"px",s.color=p.color,s.opacity=p.opacity,p.dashArray?s.dashStyle=W(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=p.lineCap.replace("butt","flat"),s.joinstyle=p.lineJoin):s&&(y.removeChild(s),t._stroke=null),p.fill?(c||(c=t._fill=$i("fill")),y.appendChild(c),c.color=p.fillColor||p.color,c.opacity=p.fillOpacity):c&&(y.removeChild(c),t._fill=null)},_updateCircle:function(t){var s=t._point.round(),c=Math.round(t._radius),p=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+s.x+","+s.y+" "+c+","+p+" 0,"+65535*360)},_setPath:function(t,s){t._path.v=s},_bringToFront:function(t){Pi(t._container)},_bringToBack:function(t){yn(t._container)}},en=ce.vml?$i:oo,ii=hn.extend({_initContainer:function(){this._container=en("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=en("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qe(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hn.prototype._update.call(this);var t=this._bounds,s=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,c.setAttribute("width",s.x),c.setAttribute("height",s.y)),st(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(t){var s=t._path=en("path");t.options.className&&be(s,t.options.className),t.options.interactive&&be(s,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Qe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var s=t._path,c=t.options;s&&(c.stroke?(s.setAttribute("stroke",c.color),s.setAttribute("stroke-opacity",c.opacity),s.setAttribute("stroke-width",c.weight),s.setAttribute("stroke-linecap",c.lineCap),s.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?s.setAttribute("stroke-dasharray",c.dashArray):s.removeAttribute("stroke-dasharray"),c.dashOffset?s.setAttribute("stroke-dashoffset",c.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),c.fill?(s.setAttribute("fill",c.fillColor||c.color),s.setAttribute("fill-opacity",c.fillOpacity),s.setAttribute("fill-rule",c.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(t,s){this._setPath(t,ao(t._parts,s))},_updateCircle:function(t){var s=t._point,c=Math.max(Math.round(t._radius),1),p=Math.max(Math.round(t._radiusY),1)||c,y="a"+c+","+p+" 0 1,0 ",C=t._empty()?"M0 0":"M"+(s.x-c)+","+s.y+y+c*2+",0 "+y+-c*2+",0 ";this._setPath(t,C)},_setPath:function(t,s){t._path.setAttribute("d",s)},_bringToFront:function(t){Pi(t._path)},_bringToBack:function(t){yn(t._path)}});ce.vml&&ii.include(ol);function Ls(t){return ce.svg||ce.vml?new ii(t):null}Oe.include({getRenderer:function(t){var s=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var s=this._paneRenderers[t];return s===void 0&&(s=this._createRenderer({pane:t}),this._paneRenderers[t]=s),s},_createRenderer:function(t){return this.options.preferCanvas&&$o(t)||Ls(t)}});var al=bn.extend({initialize:function(t,s){bn.prototype.initialize.call(this,this._boundsToLatLngs(t),s)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=fe(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Du(t,s){return new al(t,s)}ii.create=en,ii.pointsToPath=ao,un.geometryToLayer=Mi,un.coordsToLatLng=ys,un.coordsToLatLngs=Pr,un.latLngToCoords=ws,un.latLngsToCoords=xs,un.getFeature=zi,un.asFeature=ks,Oe.mergeOptions({boxZoom:!0});var Fi=Dt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Re(),as(),this._startPoint=this._map.mouseEventToContainerPoint(t),ke(document,{contextmenu:Jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var s=new A(this._point,this._startPoint),c=s.getSize();st(this._box,s.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Qe(this._box),Ge(this._container,"leaflet-crosshair")),Oi(),ls(),Fe(document,{contextmenu:Jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var s=new _e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oe.addInitHook("addHandler","boxZoom",Fi),Oe.mergeOptions({doubleClickZoom:!0});var ll=Dt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var s=this._map,c=s.getZoom(),p=s.options.zoomDelta,y=t.originalEvent.shiftKey?c-p:c+p;s.options.doubleClickZoom==="center"?s.setZoom(y):s.setZoomAround(t.containerPoint,y)}});Oe.addInitHook("addHandler","doubleClickZoom",ll),Oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fo=Dt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Qt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ge(this._map._container,"leaflet-grab"),Ge(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=fe(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var s=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(s),this._prunePositions(s)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,s){return t-(t-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;t.x<s.min.x&&(t.x=this._viscousLimit(t.x,s.min.x)),t.y<s.min.y&&(t.y=this._viscousLimit(t.y,s.min.y)),t.x>s.max.x&&(t.x=this._viscousLimit(t.x,s.max.x)),t.y>s.max.y&&(t.y=this._viscousLimit(t.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,s=Math.round(t/2),c=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-s+c)%t+s-c,C=(p+s+c)%t-s-c,N=Math.abs(y+c)<Math.abs(C+c)?y:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(t){var s=this._map,c=s.options,p=!c.inertia||t.noInertia||this._times.length<2;if(s.fire("dragend",t),p)s.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,N=c.easeLinearity,B=y.multiplyBy(N/C),F=B.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,F),ie=B.multiplyBy(K/F),ge=K/(c.inertiaDeceleration*N),Pe=ie.multiplyBy(-ge/2).round();!Pe.x&&!Pe.y?s.fire("moveend"):(Pe=s._limitOffset(Pe,s.options.maxBounds),qe(function(){s.panBy(Pe,{duration:ge,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Oe.addInitHook("addHandler","dragging",Fo),Oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zo=Dt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ke(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,s=document.documentElement,c=t.scrollTop||s.scrollTop,p=t.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(p,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var s=this._panKeys={},c=this.keyCodes,p,y;for(p=0,y=c.left.length;p<y;p++)s[c.left[p]]=[-1*t,0];for(p=0,y=c.right.length;p<y;p++)s[c.right[p]]=[t,0];for(p=0,y=c.down.length;p<y;p++)s[c.down[p]]=[0,t];for(p=0,y=c.up.length;p<y;p++)s[c.up[p]]=[0,-1*t]},_setZoomDelta:function(t){var s=this._zoomKeys={},c=this.keyCodes,p,y;for(p=0,y=c.zoomIn.length;p<y;p++)s[c.zoomIn[p]]=t;for(p=0,y=c.zoomOut.length;p<y;p++)s[c.zoomOut[p]]=-t},_addHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var s=t.keyCode,c=this._map,p;if(s in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(p=this._panKeys[s],t.shiftKey&&(p=G(p).multiplyBy(3)),c.options.maxBounds&&(p=c._limitOffset(G(p),c.options.maxBounds)),c.options.worldCopyJump){var y=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(p)));c.panTo(y)}else c.panBy(p)}else if(s in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Jt(t)}}});Oe.addInitHook("addHandler","keyboard",Zo),Oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ze=Dt.extend({addHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var s=Za(t),c=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var p=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),p),Jt(t)},_performZoom:function(){var t=this._map,s=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,C=c?Math.ceil(y/c)*c:y,N=t._limitZoom(s+(this._delta>0?C:-C))-s;this._delta=0,this._startTime=null,N&&(t.options.scrollWheelZoom==="center"?t.setZoom(s+N):t.setZoomAround(this._lastMousePos,s+N))}});Oe.addInitHook("addHandler","scrollWheelZoom",Ze);var Ho=600;Oe.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var Or=Dt.extend({addHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var s=t.touches[0];this._startPos=this._newPos=new q(s.clientX,s.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(ke(document,"touchend",tt),ke(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Ho),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Fe(document,"touchend",tt),Fe(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(t){var s=t.touches[0];this._newPos=new q(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,s){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});c._simulated=!0,s.target.dispatchEvent(c)}});Oe.addInitHook("addHandler","tapHold",Or),Oe.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var Zi=Dt.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ge(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var s=this._map;if(!(!t.touches||t.touches.length!==2||s._animatingZoom||this._zooming)){var c=s.mouseEventToContainerPoint(t.touches[0]),p=s.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(c.add(p)._divideBy(2))),this._startDist=c.distanceTo(p),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),tt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var s=this._map,c=s.mouseEventToContainerPoint(t.touches[0]),p=s.mouseEventToContainerPoint(t.touches[1]),y=c.distanceTo(p)/this._startDist;if(this._zoom=s.getScaleZoom(y,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&y<1||this._zoom>s.getMaxZoom()&&y>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var C=c._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&C.x===0&&C.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),te(this._animRequest);var N=d(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=qe(N,this,!0),tt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,te(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oe.addInitHook("addHandler","touchZoom",Zi),Oe.BoxZoom=Fi,Oe.DoubleClickZoom=ll,Oe.Drag=Fo,Oe.Keyboard=Zo,Oe.ScrollWheelZoom=Ze,Oe.TapHold=Or,Oe.TouchZoom=Zi,r.Bounds=A,r.Browser=ce,r.CRS=je,r.Canvas=Uo,r.Circle=gs,r.CircleMarker=_s,r.Class=Ue,r.Control=At,r.DivIcon=bs,r.DivOverlay=cn,r.DomEvent=hs,r.DomUtil=xr,r.Draggable=Qt,r.Evented=Ie,r.FeatureGroup=kn,r.GeoJSON=un,r.GridLayer=Un,r.Handler=Dt,r.Icon=ni,r.ImageOverlay=Dn,r.LatLng=ue,r.LatLngBounds=_e,r.Layer=Yt,r.LayerGroup=zn,r.LineUtil=Ja,r.Map=Oe,r.Marker=Sn,r.Mixin=Po,r.Path=Bn,r.Point=q,r.PolyUtil=Eu,r.Polygon=bn,r.Polyline=It,r.Popup=Ss,r.PosAnimation=ds,r.Projection=Ru,r.Rectangle=al,r.Renderer=hn,r.SVG=ii,r.SVGOverlay=zo,r.TileLayer=$n,r.Tooltip=Di,r.Transformation=wi,r.Util=Ve,r.VideoOverlay=Mo,r.bind=d,r.bounds=V,r.canvas=$o,r.circle=Cr,r.circleMarker=el,r.control=Mn,r.divIcon=rl,r.extend=f,r.featureGroup=Ya,r.geoJSON=tl,r.geoJson=Xt,r.gridLayer=Ui,r.icon=Xa,r.imageOverlay=nl,r.latLng=se,r.latLngBounds=fe,r.layerGroup=Lr,r.map=In,r.marker=Mu,r.point=G,r.polygon=Bu,r.polyline=zu,r.popup=Bi,r.rectangle=Du,r.setOptions=O,r.stamp=g,r.svg=Ls,r.svgOverlay=Bo,r.tileLayer=Do,r.tooltip=Er,r.transformation=xi,r.version=u,r.videoOverlay=il;var ul=window.L;r.noConflict=function(){return window.L=ul,this},window.L=r}))})(ha,ha.exports)),ha.exports}var Ca=v0();const Vp=Ch(Ca);function yu(o,i,r){return Object.freeze({instance:o,context:i,container:r})}function wu(o,i){return i==null?function(u,f){const l=Z.useRef();return l.current||(l.current=o(u,f)),l}:function(u,f){const l=Z.useRef();l.current||(l.current=o(u,f));const d=Z.useRef(u),{instance:_}=l.current;return Z.useEffect(function(){d.current!==u&&(i(_,u,d.current),d.current=u)},[_,u,f]),l}}function Gp(o,i){Z.useEffect(function(){return(i.layerContainer??i.map).addLayer(o.instance),function(){var l;(l=i.layerContainer)==null||l.removeLayer(o.instance),i.map.removeLayer(o.instance)}},[i,o])}function Kp(o){return function(r){const u=Ah(),f=o(vu(r,u),u);return Fp(u.map,r.attribution),Ih(f.current,r.eventHandlers),Gp(f.current,u),f}}function y0(o,i){const r=Z.useRef();Z.useEffect(function(){if(i.pathOptions!==r.current){const f=i.pathOptions??{};o.instance.setStyle(f),r.current=f}},[o,i])}function w0(o){return function(r){const u=Ah(),f=o(vu(r,u),u);return Ih(f.current,r.eventHandlers),Gp(f.current,u),y0(f.current,r),f}}function x0(o,i){const r=wu(o,i),u=Kp(r);return qp(u)}function k0(o,i){const r=wu(o),u=_0(r,i);return p0(u)}function S0(o,i){const r=wu(o,i),u=w0(r);return qp(u)}function b0(o,i){const r=wu(o,i),u=Kp(r);return m0(u)}function L0(o,i,r){const{opacity:u,zIndex:f}=i;u!=null&&u!==r.opacity&&o.setOpacity(u),f!=null&&f!==r.zIndex&&o.setZIndex(f)}function kh(){return kh=Object.assign||function(o){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(o[u]=r[u])}return o},kh.apply(this,arguments)}function C0({bounds:o,boundsOptions:i,center:r,children:u,className:f,id:l,placeholder:d,style:_,whenReady:g,zoom:w,...k},b){const[P]=Z.useState({className:f,id:l,style:_}),[E,j]=Z.useState(null);Z.useImperativeHandle(b,()=>(E==null?void 0:E.map)??null,[E]);const O=Z.useCallback($=>{if($!==null&&E===null){const z=new Ca.Map($,k);r!=null&&w!=null?z.setView(r,w):o!=null&&z.fitBounds(o,i),g!=null&&z.whenReady(g),j(f0(z))}},[]);Z.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const M=E?ma.createElement(Wp,{value:E},u):d??null;return ma.createElement("div",kh({},P,{ref:O}),M)}const P0=Z.forwardRef(C0),E0=x0(function({position:i,...r},u){const f=new Ca.Marker(i,r);return yu(f,Zp(u,{overlayContainer:f}))},function(i,r,u){r.position!==u.position&&i.setLatLng(r.position),r.icon!=null&&r.icon!==u.icon&&i.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==u.zIndexOffset&&i.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==u.opacity&&i.setOpacity(r.opacity),i.dragging!=null&&r.draggable!==u.draggable&&(r.draggable===!0?i.dragging.enable():i.dragging.disable())}),T0=k0(function(i,r){const u=new Ca.Popup(i,r.overlayContainer);return yu(u,r)},function(i,r,{position:u},f){Z.useEffect(function(){const{instance:d}=i;function _(w){w.popup===d&&(d.update(),f(!0))}function g(w){w.popup===d&&f(!1)}return r.map.on({popupopen:_,popupclose:g}),r.overlayContainer==null?(u!=null&&d.setLatLng(u),d.openOn(r.map)):r.overlayContainer.bindPopup(d),function(){var k;r.map.off({popupopen:_,popupclose:g}),(k=r.overlayContainer)==null||k.unbindPopup(),r.map.removeLayer(d)}},[i,r,f,u])}),O0=b0(function({url:i,...r},u){const f=new Ca.TileLayer(i,vu(r,u));return yu(f,u)},function(i,r,u){L0(i,r,u);const{url:f}=r;f!=null&&f!==u.url&&i.setUrl(f)});var da={exports:{}},j0=da.exports,ap;function N0(){return ap||(ap=1,(function(o,i){(function(r,u){u(i)})(j0,function(r){var u=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(l){L.Util.setOptions(this,l),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var d=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,d?this._withAnimation:this._noAnimation),this._markerCluster=d?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(l){if(l instanceof L.LayerGroup)return this.addLayers([l]);if(!l.getLatLng)return this._nonPointGroup.addLayer(l),this.fire("layeradd",{layer:l}),this;if(!this._map)return this._needsClustering.push(l),this.fire("layeradd",{layer:l}),this;if(this.hasLayer(l))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(l,this._maxZoom),this.fire("layeradd",{layer:l}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var d=l,_=this._zoom;if(l.__parent)for(;d.__parent._zoom>=_;)d=d.__parent;return this._currentShownBounds.contains(d.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(l,d):this._animationAddLayerNonAnimated(l,d)),this},removeLayer:function(l){return l instanceof L.LayerGroup?this.removeLayers([l]):l.getLatLng?this._map?l.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(l)),this._removeLayer(l,!0),this.fire("layerremove",{layer:l}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),l.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(l)&&(this._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,l)&&this.hasLayer(l)&&this._needsRemoving.push({layer:l,latlng:l._latlng}),this.fire("layerremove",{layer:l}),this):(this._nonPointGroup.removeLayer(l),this.fire("layerremove",{layer:l}),this)},addLayers:function(l,d){if(!L.Util.isArray(l))return this.addLayer(l);var _=this._featureGroup,g=this._nonPointGroup,w=this.options.chunkedLoading,k=this.options.chunkInterval,b=this.options.chunkProgress,P=l.length,E=0,j=!0,O;if(this._map){var M=new Date().getTime(),$=L.bind(function(){var W=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();E<P;E++){if(w&&E%200===0){var Q=new Date().getTime()-W;if(Q>k)break}if(O=l[E],O instanceof L.LayerGroup){j&&(l=l.slice(),j=!1),this._extractNonGroupLayers(O,l),P=l.length;continue}if(!O.getLatLng){g.addLayer(O),d||this.fire("layeradd",{layer:O});continue}if(!this.hasLayer(O)&&(this._addLayer(O,this._maxZoom),d||this.fire("layeradd",{layer:O}),O.__parent&&O.__parent.getChildCount()===2)){var ne=O.__parent.getAllChildMarkers(),pe=ne[0]===O?ne[1]:ne[0];_.removeLayer(pe)}}b&&b(E,P,new Date().getTime()-M),E===P?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout($,this.options.chunkDelay)},this);$()}else for(var z=this._needsClustering;E<P;E++){if(O=l[E],O instanceof L.LayerGroup){j&&(l=l.slice(),j=!1),this._extractNonGroupLayers(O,l),P=l.length;continue}if(!O.getLatLng){g.addLayer(O);continue}this.hasLayer(O)||z.push(O)}return this},removeLayers:function(l){var d,_,g=l.length,w=this._featureGroup,k=this._nonPointGroup,b=!0;if(!this._map){for(d=0;d<g;d++){if(_=l[d],_ instanceof L.LayerGroup){b&&(l=l.slice(),b=!1),this._extractNonGroupLayers(_,l),g=l.length;continue}this._arraySplice(this._needsClustering,_),k.removeLayer(_),this.hasLayer(_)&&this._needsRemoving.push({layer:_,latlng:_._latlng}),this.fire("layerremove",{layer:_})}return this}if(this._unspiderfy){this._unspiderfy();var P=l.slice(),E=g;for(d=0;d<E;d++){if(_=P[d],_ instanceof L.LayerGroup){this._extractNonGroupLayers(_,P),E=P.length;continue}this._unspiderfyLayer(_)}}for(d=0;d<g;d++){if(_=l[d],_ instanceof L.LayerGroup){b&&(l=l.slice(),b=!1),this._extractNonGroupLayers(_,l),g=l.length;continue}if(!_.__parent){k.removeLayer(_),this.fire("layerremove",{layer:_});continue}this._removeLayer(_,!0,!0),this.fire("layerremove",{layer:_}),w.hasLayer(_)&&(w.removeLayer(_),_.clusterShow&&_.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(l){l.off(this._childMarkerEventHandlers,this),delete l.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var l=new L.LatLngBounds;this._topClusterLevel&&l.extend(this._topClusterLevel._bounds);for(var d=this._needsClustering.length-1;d>=0;d--)l.extend(this._needsClustering[d].getLatLng());return l.extend(this._nonPointGroup.getBounds()),l},eachLayer:function(l,d){var _=this._needsClustering.slice(),g=this._needsRemoving,w,k,b;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(_),k=_.length-1;k>=0;k--){for(w=!0,b=g.length-1;b>=0;b--)if(g[b].layer===_[k]){w=!1;break}w&&l.call(d,_[k])}this._nonPointGroup.eachLayer(l,d)},getLayers:function(){var l=[];return this.eachLayer(function(d){l.push(d)}),l},getLayer:function(l){var d=null;return l=parseInt(l,10),this.eachLayer(function(_){L.stamp(_)===l&&(d=_)}),d},hasLayer:function(l){if(!l)return!1;var d,_=this._needsClustering;for(d=_.length-1;d>=0;d--)if(_[d]===l)return!0;for(_=this._needsRemoving,d=_.length-1;d>=0;d--)if(_[d].layer===l)return!1;return!!(l.__parent&&l.__parent._group===this)||this._nonPointGroup.hasLayer(l)},zoomToShowLayer:function(l,d){var _=this._map;typeof d!="function"&&(d=function(){});var g=function(){(_.hasLayer(l)||_.hasLayer(l.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",g,this),this.off("animationend",g,this),_.hasLayer(l)?d():l.__parent._icon&&(this.once("spiderfied",d,this),l.__parent.spiderfy()))};l._icon&&this._map.getBounds().contains(l.getLatLng())?d():l.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",g,this),this._map.panTo(l.getLatLng())):(this._map.on("moveend",g,this),this.on("animationend",g,this),l.__parent.zoomToBounds())},onAdd:function(l){this._map=l;var d,_,g;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(l),this._nonPointGroup.addTo(l),this._gridClusters||this._generateInitialClusters(),this._maxLat=l.options.crs.projection.MAX_LATITUDE,d=0,_=this._needsRemoving.length;d<_;d++)g=this._needsRemoving[d],g.newlatlng=g.layer._latlng,g.layer._latlng=g.latlng;for(d=0,_=this._needsRemoving.length;d<_;d++)g=this._needsRemoving[d],this._removeLayer(g.layer,!0),g.layer._latlng=g.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),_=this._needsClustering,this._needsClustering=[],this.addLayers(_,!0)},onRemove:function(l){l.off("zoomend",this._zoomEnd,this),l.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(l){for(var d=l;d&&!d._icon;)d=d.__parent;return d||null},_arraySplice:function(l,d){for(var _=l.length-1;_>=0;_--)if(l[_]===d)return l.splice(_,1),!0},_removeFromGridUnclustered:function(l,d){for(var _=this._map,g=this._gridUnclustered,w=Math.floor(this._map.getMinZoom());d>=w&&g[d].removeObject(l,_.project(l.getLatLng(),d));d--);},_childMarkerDragStart:function(l){l.target.__dragStart=l.target._latlng},_childMarkerMoved:function(l){if(!this._ignoreMove&&!l.target.__dragStart){var d=l.target._popup&&l.target._popup.isOpen();this._moveChild(l.target,l.oldLatLng,l.latlng),d&&l.target.openPopup()}},_moveChild:function(l,d,_){l._latlng=d,this.removeLayer(l),l._latlng=_,this.addLayer(l)},_childMarkerDragEnd:function(l){var d=l.target.__dragStart;delete l.target.__dragStart,d&&this._moveChild(l.target,d,l.target._latlng)},_removeLayer:function(l,d,_){var g=this._gridClusters,w=this._gridUnclustered,k=this._featureGroup,b=this._map,P=Math.floor(this._map.getMinZoom());d&&this._removeFromGridUnclustered(l,this._maxZoom);var E=l.__parent,j=E._markers,O;for(this._arraySplice(j,l);E&&(E._childCount--,E._boundsNeedUpdate=!0,!(E._zoom<P));)d&&E._childCount<=1?(O=E._markers[0]===l?E._markers[1]:E._markers[0],g[E._zoom].removeObject(E,b.project(E._cLatLng,E._zoom)),w[E._zoom].addObject(O,b.project(O.getLatLng(),E._zoom)),this._arraySplice(E.__parent._childClusters,E),E.__parent._markers.push(O),O.__parent=E.__parent,E._icon&&(k.removeLayer(E),_||k.addLayer(O))):E._iconNeedsUpdate=!0,E=E.__parent;delete l.__parent},_isOrIsParent:function(l,d){for(;d;){if(l===d)return!0;d=d.parentNode}return!1},fire:function(l,d,_){if(d&&d.layer instanceof L.MarkerCluster){if(d.originalEvent&&this._isOrIsParent(d.layer._icon,d.originalEvent.relatedTarget))return;l="cluster"+l}L.FeatureGroup.prototype.fire.call(this,l,d,_)},listens:function(l,d){return L.FeatureGroup.prototype.listens.call(this,l,d)||L.FeatureGroup.prototype.listens.call(this,"cluster"+l,d)},_defaultIconCreateFunction:function(l){var d=l.getChildCount(),_=" marker-cluster-";return d<10?_+="small":d<100?_+="medium":_+="large",new L.DivIcon({html:"<div><span>"+d+"</span></div>",className:"marker-cluster"+_,iconSize:new L.Point(40,40)})},_bindEvents:function(){var l=this._map,d=this.options.spiderfyOnMaxZoom,_=this.options.showCoverageOnHover,g=this.options.zoomToBoundsOnClick,w=this.options.spiderfyOnEveryZoom;(d||g||w)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),_&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),l.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(l){var d=l.layer,_=d;if(!(l.type==="clusterkeypress"&&l.originalEvent&&l.originalEvent.keyCode!==13)){for(;_._childClusters.length===1;)_=_._childClusters[0];_._zoom===this._maxZoom&&_._childCount===d._childCount&&this.options.spiderfyOnMaxZoom?d.spiderfy():this.options.zoomToBoundsOnClick&&d.zoomToBounds(),this.options.spiderfyOnEveryZoom&&d.spiderfy(),l.originalEvent&&l.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(l){var d=this._map;this._inZoomAnimation||(this._shownPolygon&&d.removeLayer(this._shownPolygon),l.layer.getChildCount()>2&&l.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(l.layer.getConvexHull(),this.options.polygonOptions),d.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var l=this.options.spiderfyOnMaxZoom,d=this.options.showCoverageOnHover,_=this.options.zoomToBoundsOnClick,g=this.options.spiderfyOnEveryZoom,w=this._map;(l||_||g)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),d&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),w.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var l=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,l),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),l),this._currentShownBounds=l}},_generateInitialClusters:function(){var l=Math.ceil(this._map.getMaxZoom()),d=Math.floor(this._map.getMinZoom()),_=this.options.maxClusterRadius,g=_;typeof _!="function"&&(g=function(){return _}),this.options.disableClusteringAtZoom!==null&&(l=this.options.disableClusteringAtZoom-1),this._maxZoom=l,this._gridClusters={},this._gridUnclustered={};for(var w=l;w>=d;w--)this._gridClusters[w]=new L.DistanceGrid(g(w)),this._gridUnclustered[w]=new L.DistanceGrid(g(w));this._topClusterLevel=new this._markerCluster(this,d-1)},_addLayer:function(l,d){var _=this._gridClusters,g=this._gridUnclustered,w=Math.floor(this._map.getMinZoom()),k,b;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(l),l.on(this._childMarkerEventHandlers,this);d>=w;d--){k=this._map.project(l.getLatLng(),d);var P=_[d].getNearObject(k);if(P){P._addChild(l),l.__parent=P;return}if(P=g[d].getNearObject(k),P){var E=P.__parent;E&&this._removeLayer(P,!1);var j=new this._markerCluster(this,d,P,l);_[d].addObject(j,this._map.project(j._cLatLng,d)),P.__parent=j,l.__parent=j;var O=j;for(b=d-1;b>E._zoom;b--)O=new this._markerCluster(this,b,O),_[b].addObject(O,this._map.project(P.getLatLng(),b));E._addChild(O),this._removeFromGridUnclustered(P,d);return}g[d].addObject(l,k)}this._topClusterLevel._addChild(l),l.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(l){l instanceof L.MarkerCluster&&l._iconNeedsUpdate&&l._updateIcon()})},_enqueue:function(l){this._queue.push(l),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var l=0;l<this._queue.length;l++)this._queue[l].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var l=Math.round(this._map._zoom);this._processQueue(),this._zoom<l&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,l)):this._zoom>l?(this._animationStart(),this._animationZoomOut(this._zoom,l)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(l){var d=this._maxLat;return d!==void 0&&(l.getNorth()>=d&&(l._northEast.lat=1/0),l.getSouth()<=-d&&(l._southWest.lat=-1/0)),l},_animationAddLayerNonAnimated:function(l,d){if(d===l)this._featureGroup.addLayer(l);else if(d._childCount===2){d._addToMap();var _=d.getAllChildMarkers();this._featureGroup.removeLayer(_[0]),this._featureGroup.removeLayer(_[1])}else d._updateIcon()},_extractNonGroupLayers:function(l,d){var _=l.getLayers(),g=0,w;for(d=d||[];g<_.length;g++){if(w=_[g],w instanceof L.LayerGroup){this._extractNonGroupLayers(w,d);continue}d.push(w)}return d},_overrideMarkerIcon:function(l){var d=l.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[l]}});return d}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(l,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),l),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(l,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),l),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(l,d){this._animationAddLayerNonAnimated(l,d)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(l,d){var _=this._getExpandedVisibleBounds(),g=this._featureGroup,w=Math.floor(this._map.getMinZoom()),k;this._ignoreMove=!0,this._topClusterLevel._recursively(_,l,w,function(b){var P=b._latlng,E=b._markers,j;for(_.contains(P)||(P=null),b._isSingleParent()&&l+1===d?(g.removeLayer(b),b._recursivelyAddChildrenToMap(null,d,_)):(b.clusterHide(),b._recursivelyAddChildrenToMap(P,d,_)),k=E.length-1;k>=0;k--)j=E[k],_.contains(j._latlng)||g.removeLayer(j)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(_,d),g.eachLayer(function(b){!(b instanceof L.MarkerCluster)&&b._icon&&b.clusterShow()}),this._topClusterLevel._recursively(_,l,d,function(b){b._recursivelyRestoreChildPositions(d)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(_,l,w,function(b){g.removeLayer(b),b.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(l,d){this._animationZoomOutSingle(this._topClusterLevel,l-1,d),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),l,this._getExpandedVisibleBounds())},_animationAddLayer:function(l,d){var _=this,g=this._featureGroup;g.addLayer(l),d!==l&&(d._childCount>2?(d._updateIcon(),this._forceLayout(),this._animationStart(),l._setPos(this._map.latLngToLayerPoint(d.getLatLng())),l.clusterHide(),this._enqueue(function(){g.removeLayer(l),l.clusterShow(),_._animationEnd()})):(this._forceLayout(),_._animationStart(),_._animationZoomOutSingle(d,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(l,d,_){var g=this._getExpandedVisibleBounds(),w=Math.floor(this._map.getMinZoom());l._recursivelyAnimateChildrenInAndAddSelfToMap(g,w,d+1,_);var k=this;this._forceLayout(),l._recursivelyBecomeVisible(g,_),this._enqueue(function(){if(l._childCount===1){var b=l._markers[0];this._ignoreMove=!0,b.setLatLng(b.getLatLng()),this._ignoreMove=!1,b.clusterShow&&b.clusterShow()}else l._recursively(g,_,w,function(P){P._recursivelyRemoveChildrenFromMap(g,w,d+1)});k._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(l){return new L.MarkerClusterGroup(l)};var f=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(l,d,_,g){L.Marker.prototype.initialize.call(this,_?_._cLatLng||_.getLatLng():new L.LatLng(0,0),{icon:this,pane:l.options.clusterPane}),this._group=l,this._zoom=d,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,_&&this._addChild(_),g&&this._addChild(g)},getAllChildMarkers:function(l,d){l=l||[];for(var _=this._childClusters.length-1;_>=0;_--)this._childClusters[_].getAllChildMarkers(l,d);for(var g=this._markers.length-1;g>=0;g--)d&&this._markers[g].__dragStart||l.push(this._markers[g]);return l},getChildCount:function(){return this._childCount},zoomToBounds:function(l){for(var d=this._childClusters.slice(),_=this._group._map,g=_.getBoundsZoom(this._bounds),w=this._zoom+1,k=_.getZoom(),b;d.length>0&&g>w;){w++;var P=[];for(b=0;b<d.length;b++)P=P.concat(d[b]._childClusters);d=P}g>w?this._group._map.setView(this._latlng,w):g<=k?this._group._map.setView(this._latlng,k+1):this._group._map.fitBounds(this._bounds,l)},getBounds:function(){var l=new L.LatLngBounds;return l.extend(this._bounds),l},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(l,d){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(l),l instanceof L.MarkerCluster?(d||(this._childClusters.push(l),l.__parent=this),this._childCount+=l._childCount):(d||this._markers.push(l),this._childCount++),this.__parent&&this.__parent._addChild(l,!0)},_setClusterCenter:function(l){this._cLatLng||(this._cLatLng=l._cLatLng||l._latlng)},_resetBounds:function(){var l=this._bounds;l._southWest&&(l._southWest.lat=1/0,l._southWest.lng=1/0),l._northEast&&(l._northEast.lat=-1/0,l._northEast.lng=-1/0)},_recalculateBounds:function(){var l=this._markers,d=this._childClusters,_=0,g=0,w=this._childCount,k,b,P,E;if(w!==0){for(this._resetBounds(),k=0;k<l.length;k++)P=l[k]._latlng,this._bounds.extend(P),_+=P.lat,g+=P.lng;for(k=0;k<d.length;k++)b=d[k],b._boundsNeedUpdate&&b._recalculateBounds(),this._bounds.extend(b._bounds),P=b._wLatLng,E=b._childCount,_+=P.lat*E,g+=P.lng*E;this._latlng=this._wLatLng=new L.LatLng(_/w,g/w),this._boundsNeedUpdate=!1}},_addToMap:function(l){l&&(this._backupLatlng=this._latlng,this.setLatLng(l)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(l,d,_){this._recursively(l,this._group._map.getMinZoom(),_-1,function(g){var w=g._markers,k,b;for(k=w.length-1;k>=0;k--)b=w[k],b._icon&&(b._setPos(d),b.clusterHide())},function(g){var w=g._childClusters,k,b;for(k=w.length-1;k>=0;k--)b=w[k],b._icon&&(b._setPos(d),b.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(l,d,_,g){this._recursively(l,g,d,function(w){w._recursivelyAnimateChildrenIn(l,w._group._map.latLngToLayerPoint(w.getLatLng()).round(),_),w._isSingleParent()&&_-1===g?(w.clusterShow(),w._recursivelyRemoveChildrenFromMap(l,d,_)):w.clusterHide(),w._addToMap()})},_recursivelyBecomeVisible:function(l,d){this._recursively(l,this._group._map.getMinZoom(),d,null,function(_){_.clusterShow()})},_recursivelyAddChildrenToMap:function(l,d,_){this._recursively(_,this._group._map.getMinZoom()-1,d,function(g){if(d!==g._zoom)for(var w=g._markers.length-1;w>=0;w--){var k=g._markers[w];_.contains(k._latlng)&&(l&&(k._backupLatlng=k.getLatLng(),k.setLatLng(l),k.clusterHide&&k.clusterHide()),g._group._featureGroup.addLayer(k))}},function(g){g._addToMap(l)})},_recursivelyRestoreChildPositions:function(l){for(var d=this._markers.length-1;d>=0;d--){var _=this._markers[d];_._backupLatlng&&(_.setLatLng(_._backupLatlng),delete _._backupLatlng)}if(l-1===this._zoom)for(var g=this._childClusters.length-1;g>=0;g--)this._childClusters[g]._restorePosition();else for(var w=this._childClusters.length-1;w>=0;w--)this._childClusters[w]._recursivelyRestoreChildPositions(l)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(l,d,_,g){var w,k;this._recursively(l,d-1,_-1,function(b){for(k=b._markers.length-1;k>=0;k--)w=b._markers[k],(!g||!g.contains(w._latlng))&&(b._group._featureGroup.removeLayer(w),w.clusterShow&&w.clusterShow())},function(b){for(k=b._childClusters.length-1;k>=0;k--)w=b._childClusters[k],(!g||!g.contains(w._latlng))&&(b._group._featureGroup.removeLayer(w),w.clusterShow&&w.clusterShow())})},_recursively:function(l,d,_,g,w){var k=this._childClusters,b=this._zoom,P,E;if(d<=b&&(g&&g(this),w&&b===_&&w(this)),b<d||b<_)for(P=k.length-1;P>=0;P--)E=k[P],E._boundsNeedUpdate&&E._recalculateBounds(),l.intersects(E._bounds)&&E._recursively(l,d,_,g,w)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var l=this.options.opacity;return this.setOpacity(0),this.options.opacity=l,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(l){this._cellSize=l,this._sqCellSize=l*l,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(l,d){var _=this._getCoord(d.x),g=this._getCoord(d.y),w=this._grid,k=w[g]=w[g]||{},b=k[_]=k[_]||[],P=L.Util.stamp(l);this._objectPoint[P]=d,b.push(l)},updateObject:function(l,d){this.removeObject(l),this.addObject(l,d)},removeObject:function(l,d){var _=this._getCoord(d.x),g=this._getCoord(d.y),w=this._grid,k=w[g]=w[g]||{},b=k[_]=k[_]||[],P,E;for(delete this._objectPoint[L.Util.stamp(l)],P=0,E=b.length;P<E;P++)if(b[P]===l)return b.splice(P,1),E===1&&delete k[_],!0},eachObject:function(l,d){var _,g,w,k,b,P,E,j=this._grid;for(_ in j){b=j[_];for(g in b)for(P=b[g],w=0,k=P.length;w<k;w++)E=l.call(d,P[w]),E&&(w--,k--)}},getNearObject:function(l){var d=this._getCoord(l.x),_=this._getCoord(l.y),g,w,k,b,P,E,j,O,M=this._objectPoint,$=this._sqCellSize,z=null;for(g=_-1;g<=_+1;g++)if(b=this._grid[g],b){for(w=d-1;w<=d+1;w++)if(P=b[w],P)for(k=0,E=P.length;k<E;k++)j=P[k],O=this._sqDist(M[L.Util.stamp(j)],l),(O<$||O<=$&&z===null)&&($=O,z=j)}return z},_getCoord:function(l){var d=Math.floor(l/this._cellSize);return isFinite(d)?d:l},_sqDist:function(l,d){var _=d.x-l.x,g=d.y-l.y;return _*_+g*g}},(function(){L.QuickHull={getDistant:function(l,d){var _=d[1].lat-d[0].lat,g=d[0].lng-d[1].lng;return g*(l.lat-d[0].lat)+_*(l.lng-d[0].lng)},findMostDistantPointFromBaseLine:function(l,d){var _=0,g=null,w=[],k,b,P;for(k=d.length-1;k>=0;k--){if(b=d[k],P=this.getDistant(b,l),P>0)w.push(b);else continue;P>_&&(_=P,g=b)}return{maxPoint:g,newPoints:w}},buildConvexHull:function(l,d){var _=[],g=this.findMostDistantPointFromBaseLine(l,d);return g.maxPoint?(_=_.concat(this.buildConvexHull([l[0],g.maxPoint],g.newPoints)),_=_.concat(this.buildConvexHull([g.maxPoint,l[1]],g.newPoints)),_):[l[0]]},getConvexHull:function(l){var d=!1,_=!1,g=!1,w=!1,k=null,b=null,P=null,E=null,j=null,O=null,M;for(M=l.length-1;M>=0;M--){var $=l[M];(d===!1||$.lat>d)&&(k=$,d=$.lat),(_===!1||$.lat<_)&&(b=$,_=$.lat),(g===!1||$.lng>g)&&(P=$,g=$.lng),(w===!1||$.lng<w)&&(E=$,w=$.lng)}_!==d?(O=b,j=k):(O=E,j=P);var z=[].concat(this.buildConvexHull([O,j],l),this.buildConvexHull([j,O],l));return z}}})(),L.MarkerCluster.include({getConvexHull:function(){var l=this.getAllChildMarkers(),d=[],_,g;for(g=l.length-1;g>=0;g--)_=l[g].getLatLng(),d.push(_);return L.QuickHull.getConvexHull(d)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var l=this.getAllChildMarkers(null,!0),d=this._group,_=d._map,g=_.latLngToLayerPoint(this._latlng),w;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?w=this._group.options.spiderfyShapePositions(l.length,g):l.length>=this._circleSpiralSwitchover?w=this._generatePointsSpiral(l.length,g):(g.y+=10,w=this._generatePointsCircle(l.length,g)),this._animationSpiderfy(l,w)}},unspiderfy:function(l){this._group._inZoomAnimation||(this._animationUnspiderfy(l),this._group._spiderfied=null)},_generatePointsCircle:function(l,d){var _=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+l),g=_/this._2PI,w=this._2PI/l,k=[],b,P;for(g=Math.max(g,35),k.length=l,b=0;b<l;b++)P=this._circleStartAngle+b*w,k[b]=new L.Point(d.x+g*Math.cos(P),d.y+g*Math.sin(P))._round();return k},_generatePointsSpiral:function(l,d){var _=this._group.options.spiderfyDistanceMultiplier,g=_*this._spiralLengthStart,w=_*this._spiralFootSeparation,k=_*this._spiralLengthFactor*this._2PI,b=0,P=[],E;for(P.length=l,E=l;E>=0;E--)E<l&&(P[E]=new L.Point(d.x+g*Math.cos(b),d.y+g*Math.sin(b))._round()),b+=w/g+E*5e-4,g+=k/b;return P},_noanimationUnspiderfy:function(){var l=this._group,d=l._map,_=l._featureGroup,g=this.getAllChildMarkers(null,!0),w,k;for(l._ignoreMove=!0,this.setOpacity(1),k=g.length-1;k>=0;k--)w=g[k],_.removeLayer(w),w._preSpiderfyLatlng&&(w.setLatLng(w._preSpiderfyLatlng),delete w._preSpiderfyLatlng),w.setZIndexOffset&&w.setZIndexOffset(0),w._spiderLeg&&(d.removeLayer(w._spiderLeg),delete w._spiderLeg);l.fire("unspiderfied",{cluster:this,markers:g}),l._ignoreMove=!1,l._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(l,d){var _=this._group,g=_._map,w=_._featureGroup,k=this._group.options.spiderLegPolylineOptions,b,P,E,j;for(_._ignoreMove=!0,b=0;b<l.length;b++)j=g.layerPointToLatLng(d[b]),P=l[b],E=new L.Polyline([this._latlng,j],k),g.addLayer(E),P._spiderLeg=E,P._preSpiderfyLatlng=P._latlng,P.setLatLng(j),P.setZIndexOffset&&P.setZIndexOffset(1e6),w.addLayer(P);this.setOpacity(.3),_._ignoreMove=!1,_.fire("spiderfied",{cluster:this,markers:l})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(l,d){var _=this,g=this._group,w=g._map,k=g._featureGroup,b=this._latlng,P=w.latLngToLayerPoint(b),E=L.Path.SVG,j=L.extend({},this._group.options.spiderLegPolylineOptions),O=j.opacity,M,$,z,W,Q,ne;for(O===void 0&&(O=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),E?(j.opacity=0,j.className=(j.className||"")+" leaflet-cluster-spider-leg"):j.opacity=O,g._ignoreMove=!0,M=0;M<l.length;M++)$=l[M],ne=w.layerPointToLatLng(d[M]),z=new L.Polyline([b,ne],j),w.addLayer(z),$._spiderLeg=z,E&&(W=z._path,Q=W.getTotalLength()+.1,W.style.strokeDasharray=Q,W.style.strokeDashoffset=Q),$.setZIndexOffset&&$.setZIndexOffset(1e6),$.clusterHide&&$.clusterHide(),k.addLayer($),$._setPos&&$._setPos(P);for(g._forceLayout(),g._animationStart(),M=l.length-1;M>=0;M--)ne=w.layerPointToLatLng(d[M]),$=l[M],$._preSpiderfyLatlng=$._latlng,$.setLatLng(ne),$.clusterShow&&$.clusterShow(),E&&(z=$._spiderLeg,W=z._path,W.style.strokeDashoffset=0,z.setStyle({opacity:O}));this.setOpacity(.3),g._ignoreMove=!1,setTimeout(function(){g._animationEnd(),g.fire("spiderfied",{cluster:_,markers:l})},200)},_animationUnspiderfy:function(l){var d=this,_=this._group,g=_._map,w=_._featureGroup,k=l?g._latLngToNewLayerPoint(this._latlng,l.zoom,l.center):g.latLngToLayerPoint(this._latlng),b=this.getAllChildMarkers(null,!0),P=L.Path.SVG,E,j,O,M,$,z;for(_._ignoreMove=!0,_._animationStart(),this.setOpacity(1),j=b.length-1;j>=0;j--)E=b[j],E._preSpiderfyLatlng&&(E.closePopup(),E.setLatLng(E._preSpiderfyLatlng),delete E._preSpiderfyLatlng,z=!0,E._setPos&&(E._setPos(k),z=!1),E.clusterHide&&(E.clusterHide(),z=!1),z&&w.removeLayer(E),P&&(O=E._spiderLeg,M=O._path,$=M.getTotalLength()+.1,M.style.strokeDashoffset=$,O.setStyle({opacity:0})));_._ignoreMove=!1,setTimeout(function(){var W=0;for(j=b.length-1;j>=0;j--)E=b[j],E._spiderLeg&&W++;for(j=b.length-1;j>=0;j--)E=b[j],E._spiderLeg&&(E.clusterShow&&E.clusterShow(),E.setZIndexOffset&&E.setZIndexOffset(0),W>1&&w.removeLayer(E),g.removeLayer(E._spiderLeg),delete E._spiderLeg);_._animationEnd(),_.fire("unspiderfied",{cluster:d,markers:b})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(l){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(l))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(l){this._spiderfied&&this._spiderfied.unspiderfy(l)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(l){l._spiderLeg&&(this._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow(),l.setZIndexOffset&&l.setZIndexOffset(0),this._map.removeLayer(l._spiderLeg),delete l._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(l){return l?l instanceof L.MarkerClusterGroup?l=l._topClusterLevel.getAllChildMarkers():l instanceof L.LayerGroup?l=l._layers:l instanceof L.MarkerCluster?l=l.getAllChildMarkers():l instanceof L.Marker&&(l=[l]):l=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(l),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(l),this},_flagParentsIconsNeedUpdate:function(l){var d,_;for(d in l)for(_=l[d].__parent;_;)_._iconNeedsUpdate=!0,_=_.__parent},_refreshSingleMarkerModeMarkers:function(l){var d,_;for(d in l)_=l[d],this.hasLayer(_)&&_.setIcon(this._overrideMarkerIcon(_))}}),L.Marker.include({refreshIconOptions:function(l,d){var _=this.options.icon;return L.setOptions(_,l),this.setIcon(_),d&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),r.MarkerClusterGroup=u,r.MarkerCluster=f,Object.defineProperty(r,"__esModule",{value:!0})})})(da,da.exports)),da.exports}N0();function Sh(o){let i={},r={};const{children:u,...f}=o;return Object.entries(f).forEach(([l,d])=>{l.startsWith("on")?r={...r,[l]:d}:i={...i,[l]:d}}),{clusterProps:i,clusterEvents:r}}function R0(o,i){const{clusterProps:r,clusterEvents:u}=Sh(o),f=new Vp.MarkerClusterGroup(r);return Object.entries(u).forEach(([l,d])=>{const _=`cluster${l.substring(2).toLowerCase()}`;f.on(_,d)}),yu(f,Zp(i,{layerContainer:f}))}var A0=(o,i,r)=>{const{clusterProps:u,clusterEvents:f}=Sh(i),{clusterProps:l,clusterEvents:d}=Sh(r);Object.keys(u).forEach(_=>{u[_]!==l[_]&&(o.options[_]=u[_])}),Object.entries(d).forEach(([_,g])=>{const w=`cluster${_.substring(2).toLowerCase()}`;o.off(w,g)}),Object.entries(f).forEach(([_,g])=>{const w=`cluster${_.substring(2).toLowerCase()}`;o.on(w,g)})},I0=S0(R0,A0),M0=I0;const oh=new Map;function z0(o){const i=o>=70?"#16a34a":o>=50?"#d97706":"#dc2626";return oh.has(i)||oh.set(i,Vp.divIcon({className:"",iconSize:[12,12],iconAnchor:[6,6],html:`<div style="width:12px;height:12px;border-radius:50%;background:${i};border:2px solid white;box-shadow:0 1px 3px rgba(0,0,0,.3)"></div>`})),oh.get(i)}function B0(){const{prospects:o,loading:i,error:r,refetch:u}=gu(),f=io(),l=Z.useMemo(()=>o.filter(d=>d.latitude!=null&&d.longitude!=null),[o]);return i?x.jsx("div",{className:"text-center py-12 text-gray-400",children:"Chargement..."}):x.jsxs("div",{className:"space-y-3",children:[r&&x.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center justify-between",children:[x.jsx("span",{className:"text-sm",children:r}),x.jsx("button",{onClick:()=>u(),className:"text-sm font-medium text-red-700 hover:text-red-900 underline ml-4",children:"Reessayer"})]}),x.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[x.jsxs("span",{children:[l.length," prospects golocaliss"]}),x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx("span",{className:"inline-block w-3 h-3 rounded-full bg-emerald-600"})," 70+"]}),x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx("span",{className:"inline-block w-3 h-3 rounded-full bg-amber-500"})," 50-69"]}),x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx("span",{className:"inline-block w-3 h-3 rounded-full bg-red-600"})," <50"]})]}),x.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",style:{height:"calc(100vh - 200px)"},children:x.jsxs(P0,{center:[48.1,-2.8],zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[x.jsx(O0,{attribution:' <a href="https://www.openstreetmap.org/copyright">OSM</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.jsx(M0,{chunkedLoading:!0,children:l.map(d=>x.jsx(E0,{position:[d.latitude,d.longitude],icon:z0(d.score_pertinence),children:x.jsx(T0,{children:x.jsxs("div",{className:"text-sm space-y-1 min-w-[180px]",children:[x.jsx("div",{className:"font-bold",children:d.nom}),x.jsxs("div",{className:"text-gray-600",children:[d.ville," (",d.departement,")"]}),x.jsxs("div",{children:["SAU: ",x.jsxs("strong",{children:[d.sau_estimee_ha?Math.round(d.sau_estimee_ha):"-"," ha"]})]}),x.jsxs("div",{children:["Score: ",x.jsx("strong",{children:d.score_pertinence})]}),x.jsx("button",{onClick:()=>f(`/prospect/${d.id}`),className:"mt-1 text-xs text-cooperl-600 hover:underline",children:"Voir la fiche "})]})})},d.id))})]})})]})}const bh="[DOC] Plaquette de sensibilisation",Lh="[DOC] Dossier d'engagement",ru=[{key:"contact",label:"Prise de contact",statuts:["appele","interesse","rappeler","recrute"]},{key:"sensibilisation",label:"Plaquette envoyee",tag:bh},{key:"interet",label:"Interet confirme",statuts:["interesse","recrute"]},{key:"engagement",label:"Dossier envoye",tag:Lh},{key:"recrute",label:"Recrutement",statuts:["recrute"]}];function D0({prospect:o,actions:i,onSendDoc:r,disabled:u}){const[f,l]=Z.useState(null),[d,_]=Z.useState(!1),g=Z.useMemo(()=>i.filter(j=>j.prospect_id===o.id),[i,o.id]),w=g.some(j=>{var O;return(O=j.notes)==null?void 0:O.includes(bh)}),k=g.some(j=>{var O;return(O=j.notes)==null?void 0:O.includes(Lh)}),b=Z.useMemo(()=>ru.map(j=>j.tag?g.some(O=>{var M;return(M=O.notes)==null?void 0:M.includes(j.tag)}):j.statuts?j.statuts.includes(o.statut):!1),[o.statut,g]),P=b.lastIndexOf(!0);async function E(j){_(!0),j==="sensibilisation"?await r("appele",`${bh} envoyee par email`):await r("interesse",`${Lh} envoye par email`),_(!1)}return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-white rounded-lg shadow p-5 space-y-4",children:[x.jsx("h3",{className:"font-semibold",children:"Parcours commercial"}),x.jsx("div",{className:"flex items-center gap-1",children:ru.map((j,O)=>x.jsxs("div",{className:"flex items-center flex-1 last:flex-none",children:[x.jsx("div",{className:`flex items-center justify-center w-7 h-7 rounded-full text-xs font-bold shrink-0 ${b[O]?"bg-cooperl-600 text-white":O===P+1?"bg-cooperl-100 text-cooperl-700 ring-2 ring-cooperl-300":"bg-gray-100 text-gray-400"}`,children:b[O]?x.jsx(rh,{size:14}):O+1}),O<ru.length-1&&x.jsx("div",{className:`flex-1 h-0.5 mx-1 ${O<=P?"bg-cooperl-400":"bg-gray-200"}`})]},j.key))}),x.jsx("div",{className:"flex justify-between text-[10px] text-gray-500 px-0.5",children:ru.map(j=>x.jsx("span",{className:"text-center w-14",children:j.label},j.key))}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-2",children:[x.jsxs("div",{className:`border rounded-lg p-4 space-y-3 ${w?"border-cooperl-200 bg-cooperl-50/30":"border-gray-200"}`,children:[x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:`p-2 rounded-lg ${w?"bg-cooperl-100":"bg-gray-100"}`,children:x.jsx(xh,{size:20,className:w?"text-cooperl-600":"text-gray-400"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-medium text-sm",children:"Plaquette de sensibilisation"}),x.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"Programme Bois & Bocage, credits carbone, remuneration"})]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>l("sensibilisation"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs border rounded-lg hover:bg-gray-50 transition-colors",children:[x.jsx(ip,{size:12})," Voir"]}),w?x.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1.5 text-xs text-cooperl-700 bg-cooperl-100 rounded-lg",children:[x.jsx(rh,{size:12})," Envoyee"]}):x.jsxs("button",{disabled:u||d,onClick:()=>E("sensibilisation"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-cooperl-600 text-white rounded-lg hover:bg-cooperl-700 transition-colors disabled:opacity-50",children:[x.jsx(sh,{size:12})," Envoyer par email"]})]})]}),x.jsxs("div",{className:`border rounded-lg p-4 space-y-3 ${k?"border-cooperl-200 bg-cooperl-50/30":"border-gray-200"}`,children:[x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:`p-2 rounded-lg ${k?"bg-cooperl-100":"bg-gray-100"}`,children:x.jsx(xh,{size:20,className:k?"text-cooperl-600":"text-gray-400"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-medium text-sm",children:"Dossier d'engagement"}),x.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"Conditions contractuelles, diagnostic 15 ans, obligations"})]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>l("engagement"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs border rounded-lg hover:bg-gray-50 transition-colors",children:[x.jsx(ip,{size:12})," Voir"]}),k?x.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1.5 text-xs text-cooperl-700 bg-cooperl-100 rounded-lg",children:[x.jsx(rh,{size:12})," Envoye"]}):x.jsxs("button",{disabled:u||d,onClick:()=>E("engagement"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-cooperl-600 text-white rounded-lg hover:bg-cooperl-700 transition-colors disabled:opacity-50",children:[x.jsx(sh,{size:12})," Envoyer par email"]})]})]})]})]}),f&&x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[85vh] flex flex-col",children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[x.jsx("h3",{className:"font-semibold",children:f==="sensibilisation"?"Plaquette de sensibilisation":"Dossier d'engagement"}),x.jsx("button",{onClick:()=>l(null),className:"p-1 hover:bg-gray-100 rounded-lg",children:x.jsx(r0,{size:18})})]}),x.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 text-sm text-gray-700",children:f==="sensibilisation"?x.jsx(U0,{nom:o.nom}):x.jsx($0,{nom:o.nom})}),x.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[x.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 text-sm border rounded-lg hover:bg-gray-50",children:"Fermer"}),(f==="sensibilisation"&&!w||f==="engagement"&&!k)&&x.jsxs("button",{disabled:u||d,onClick:()=>{E(f),l(null)},className:"flex items-center gap-2 px-4 py-2 text-sm bg-cooperl-600 text-white rounded-lg hover:bg-cooperl-700 disabled:opacity-50",children:[x.jsx(sh,{size:14})," Envoyer a ",o.nom]})]})]})})]})}function U0({nom:o}){return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"text-center space-y-2 pb-4 border-b",children:[x.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Document de sensibilisation"}),x.jsx("h2",{className:"text-xl font-bold text-cooperl-800",children:"Programme Bois & Bocage"}),x.jsx("p",{className:"text-gray-500",children:"Valorisez vos haies, generez des credits carbone"})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(_i,{title:"Le programme en bref",children:x.jsx("p",{children:"Le programme Bois & Bocage accompagne les exploitants agricoles dans la gestion durable de leurs haies bocageres. En vous engageant sur un diagnostic de 15 ans, vous beneficiez d'un accompagnement technique et d'une remuneration via les credits carbone."})}),x.jsx(_i,{title:"Vos avantages",children:x.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Remuneration"}),"  Vente de credits carbone issus de la sequestration par vos haies"]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Accompagnement technique"}),"  Diagnostic initial et suivi annuel par un technicien specialise"]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Valorisation du bois"}),"  Achat garanti du bois issu de l'entretien des haies"]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Certification"}),"  Label reconnu pour vos demarches environnementales (HVE, Bio)"]})]})}),x.jsx(_i,{title:"Comment ca marche ?",children:x.jsxs("div",{className:"space-y-2",children:[x.jsx(ua,{n:1,text:"Diagnostic initial de vos haies par un technicien (gratuit)"}),x.jsx(ua,{n:2,text:"Plan de gestion sur 15 ans adapte a votre exploitation"}),x.jsx(ua,{n:3,text:"Entretien annuel selon le plan  le bois est rachete"}),x.jsx(ua,{n:4,text:"Credits carbone generes et vendus chaque annee"}),x.jsx(ua,{n:5,text:"Remuneration directe sur votre compte"})]})}),x.jsx(_i,{title:"Chiffres cles",children:x.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[x.jsxs("div",{className:"bg-cooperl-50 rounded-lg p-3",children:[x.jsx("div",{className:"text-lg font-bold text-cooperl-700",children:"150-400"}),x.jsx("div",{className:"text-xs text-gray-500",children:"euros/km/an"})]}),x.jsxs("div",{className:"bg-cooperl-50 rounded-lg p-3",children:[x.jsx("div",{className:"text-lg font-bold text-cooperl-700",children:"15 ans"}),x.jsx("div",{className:"text-xs text-gray-500",children:"duree engagement"})]}),x.jsxs("div",{className:"bg-cooperl-50 rounded-lg p-3",children:[x.jsx("div",{className:"text-lg font-bold text-cooperl-700",children:"0"}),x.jsx("div",{className:"text-xs text-gray-500",children:"euros de frais"})]})]})})]}),x.jsxs("div",{className:"text-center text-xs text-gray-400 pt-4 border-t",children:["Document a destination de ",o,"  Programme Bois & Bocage"]})]})}function $0({nom:o}){return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"text-center space-y-2 pb-4 border-b",children:[x.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Dossier d'engagement"}),x.jsx("h2",{className:"text-xl font-bold text-cooperl-800",children:"Conditions contractuelles"}),x.jsx("p",{className:"text-gray-500",children:"Diagnostic haies et credits carbone  15 ans"})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(_i,{title:"Objet du contrat",children:x.jsx("p",{children:"Le present dossier formalise l'engagement de l'exploitant dans le programme Bois & Bocage pour une duree de 15 ans. Il couvre le diagnostic des haies, le plan de gestion, l'entretien, le rachat du bois et la commercialisation des credits carbone."})}),x.jsx(_i,{title:"Engagements de l'exploitant",children:x.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[x.jsx("li",{children:"Maintenir les haies existantes sur la duree du contrat"}),x.jsx("li",{children:"Realiser l'entretien selon le plan de gestion valide"}),x.jsx("li",{children:"Autoriser l'acces au technicien pour le suivi annuel"}),x.jsx("li",{children:"Ne pas arracher de haies sans accord prealable"}),x.jsx("li",{children:"Fournir les informations necessaires au calcul des credits carbone"})]})}),x.jsx(_i,{title:"Engagements du programme",children:x.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[x.jsx("li",{children:"Realiser le diagnostic initial dans les 3 mois suivant la signature"}),x.jsx("li",{children:"Fournir un plan de gestion personnalise"}),x.jsx("li",{children:"Racheter le bois d'entretien au prix convenu"}),x.jsx("li",{children:"Commercialiser les credits carbone et reverser la part exploitant"}),x.jsx("li",{children:"Assurer un suivi technique annuel"})]})}),x.jsx(_i,{title:"Remuneration",children:x.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:"Credits carbone (part exploitant)"}),x.jsx("span",{className:"font-semibold",children:"70%"})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:"Rachat bois d'oeuvre"}),x.jsx("span",{className:"font-semibold",children:"Prix marche"})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:"Rachat bois energie"}),x.jsx("span",{className:"font-semibold",children:"45 euros/tonne"})]}),x.jsxs("div",{className:"flex justify-between border-t pt-2 font-semibold text-cooperl-700",children:[x.jsx("span",{children:"Estimation annuelle"}),x.jsx("span",{children:"150 - 400 euros/km"})]})]})}),x.jsx(_i,{title:"Resiliation",children:x.jsx("p",{children:"Le contrat peut etre resilie par l'une ou l'autre des parties avec un preavis de 12 mois. En cas de resiliation anticipee par l'exploitant, les credits carbone deja emis restent acquis. Aucune penalite financiere n'est appliquee."})})]}),x.jsxs("div",{className:"text-center text-xs text-gray-400 pt-4 border-t",children:["Dossier d'engagement a destination de ",o,"  Programme Bois & Bocage"]})]})}function _i({title:o,children:i}){return x.jsxs("div",{children:[x.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[x.jsx($y,{size:14,className:"text-cooperl-500"}),o]}),x.jsx("div",{className:"pl-5",children:i})]})}function ua({n:o,text:i}){return x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-cooperl-100 text-cooperl-700 text-xs font-bold shrink-0",children:o}),x.jsx("span",{children:i})]})}const F0=[{type:"appele",label:"Appel",className:"bg-blue-500 hover:bg-blue-600 text-white"},{type:"interesse",label:"Intress",className:"bg-amber-500 hover:bg-amber-600 text-white"},{type:"rappeler",label:"Rappeler",className:"bg-purple-500 hover:bg-purple-600 text-white"},{type:"refus",label:"Refus",className:"bg-red-500 hover:bg-red-600 text-white"},{type:"recrute",label:"Recrut",className:"bg-emerald-600 hover:bg-emerald-700 text-white"}];function Z0(){const{prospects:o,actions:i,addAction:r,loading:u}=gu(),{id:f}=v_(),l=io(),[d,_]=Z.useState(!1),[g,w]=Z.useState(null),k=f?parseInt(f,10):NaN,P=Z.useMemo(()=>new Map(o.map(z=>[z.id,z])),[o]).get(k),E=Z.useMemo(()=>i.filter(z=>z.prospect_id===k),[i,k]);if(u)return x.jsx("div",{className:"text-center py-12 text-gray-400",children:"Chargement..."});if(!P)return x.jsxs("div",{className:"text-center py-12",children:[x.jsx("p",{className:"text-gray-400",children:"Prospect non trouv"}),x.jsx("button",{onClick:()=>l("/"),className:"mt-2 text-cooperl-600 hover:underline",children:"Retour"})]});async function j(z){if(!P)return;_(!0);const W=await r(P.id,z);_(!1),W&&alert(`Erreur lors de l'enregistrement : ${W.message??"Erreur inconnue"}`)}function O(z){P&&(z==="refus"||z==="recrute"?w(z):j(z))}const M=u0(P),$=M.reduce((z,W)=>z+W.points,0);return x.jsxs("div",{className:"space-y-4 max-w-3xl mx-auto",children:[x.jsxs("button",{onClick:()=>l("/"),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700",children:[x.jsx(My,{size:16})," Retour"]}),x.jsxs("div",{className:"bg-white rounded-lg shadow p-5 space-y-4",children:[x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[x.jsx(Rh,{size:20,className:"text-cooperl-600"}),P.civilite&&x.jsx("span",{className:"text-gray-500 font-normal",children:P.civilite}),P.nom]}),x.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:["N ",P.numero_tiers," | Zone ",P.zone_geographique]})]}),x.jsx("span",{className:`text-sm px-3 py-1 rounded-full ${Ys[P.statut]}`,children:cr[P.statut]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx(Jy,{size:16,className:"text-gray-400 mt-0.5 shrink-0"}),x.jsxs("div",{children:[P.rue&&x.jsx("div",{children:P.rue}),x.jsxs("div",{children:[P.code_postal," ",P.ville]}),x.jsxs("div",{className:"text-gray-500",children:["Dept ",P.departement]})]})]}),x.jsxs("div",{className:"space-y-1",children:[P.telephone_elevage&&x.jsxs("a",{href:`tel:${P.telephone_elevage}`,className:"flex items-center gap-2 text-cooperl-600 hover:underline",children:[x.jsx(rp,{size:14})," ",P.telephone_elevage," ",x.jsx("span",{className:"text-gray-400",children:"(levage)"})]}),P.telephone_domicile&&x.jsxs("a",{href:`tel:${P.telephone_domicile}`,className:"flex items-center gap-2 text-cooperl-600 hover:underline",children:[x.jsx(rp,{size:14})," ",P.telephone_domicile," ",x.jsx("span",{className:"text-gray-400",children:"(domicile)"})]}),P.adresse_email&&x.jsxs("a",{href:`mailto:${P.adresse_email}`,className:"flex items-center gap-2 text-cooperl-600 hover:underline",children:[x.jsx(Dp,{size:14})," ",P.adresse_email]})]})]}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 bg-gray-50 rounded-lg p-3 text-sm",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-gray-500",children:"SAU estime"}),x.jsx("div",{className:"font-bold",children:P.sau_estimee_ha?`${Math.round(P.sau_estimee_ha)} ha`:"-"}),x.jsxs("div",{className:"text-xs text-gray-400",children:["via ",P.source_sau]})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-gray-500",children:"Tonnage"}),x.jsx("div",{className:"font-bold",children:P.tonnage_total?`${Math.round(P.tonnage_total)} t`:"-"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-gray-500",children:"Certifications"}),x.jsx("div",{className:"font-bold",children:P.certifications&&P.certifications!=="0.0"&&P.certifications!=="0"?"Oui":"Non"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-gray-500",children:"Fidlit"}),x.jsx("div",{className:"font-bold",children:P.annee_fidelite?`${Math.round(P.annee_fidelite)} ans`:"-"})]})]})]}),x.jsxs("div",{className:"bg-white rounded-lg shadow p-5 space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"font-semibold",children:"Score de pertinence"}),x.jsx("span",{className:"text-2xl font-bold text-cooperl-700",children:P.score_pertinence})]}),x.jsxs("div",{className:"space-y-2",children:[M.map(z=>x.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[x.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center text-xs ${z.met?"bg-cooperl-500 text-white":"bg-gray-200 text-gray-400"}`,children:z.met?"":""}),x.jsx("div",{className:"flex-1",children:z.label}),x.jsxs("div",{className:"font-mono text-right w-16",children:[z.points," / ",z.max]})]},z.label)),x.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold text-sm",children:[x.jsx("span",{children:"Total calcul"}),x.jsxs("span",{className:"font-mono",children:[$," / 85"]})]}),$!==P.score_pertinence&&x.jsxs("div",{className:"text-xs text-amber-600",children:["Ecart de ",P.score_pertinence-$," pts (critres supplmentaires non dcomposs)"]})]})]}),x.jsx(D0,{prospect:P,actions:i,onSendDoc:async(z,W)=>{await r(P.id,z,W)},disabled:d}),x.jsxs("div",{className:"bg-white rounded-lg shadow p-5 space-y-3",children:[x.jsx("h3",{className:"font-semibold",children:"Actions"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:F0.map(z=>x.jsx("button",{disabled:d,onClick:()=>O(z.type),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 ${z.className}`,children:z.label},z.type))}),E.length>0&&x.jsxs("div",{className:"mt-4 space-y-2",children:[x.jsx("h4",{className:"text-sm text-gray-500",children:"Historique"}),E.map(z=>x.jsxs("div",{className:"flex items-center gap-3 text-sm py-1 border-b border-gray-100 last:border-0",children:[x.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Ys[z.type]}`,children:cr[z.type]}),x.jsx("span",{className:"text-gray-400",children:new Date(z.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),z.notes&&x.jsx("span",{className:"text-gray-600",children:z.notes})]},z.id))]})]}),g&&x.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full space-y-4",children:[x.jsx("h3",{className:"font-semibold text-lg",children:"Confirmer l'action"}),x.jsxs("p",{className:"text-gray-600",children:["Marquer ",x.jsx("strong",{children:P.nom})," comme ",x.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs ${Ys[g]}`,children:cr[g]})," ?"]}),x.jsxs("div",{className:"flex gap-3 justify-end",children:[x.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 rounded-lg text-sm border hover:bg-gray-50 transition-colors",children:"Annuler"}),x.jsx("button",{onClick:()=>{const z=g;w(null),j(z)},className:"px-4 py-2 rounded-lg text-sm bg-cooperl-600 text-white hover:bg-cooperl-700 transition-colors",children:"Confirmer"})]})]})})]})}const lp=40,up=["recrute","interesse","appele","rappeler","refus","en_attente"];function H0(){const{prospects:o,actions:i,loading:r}=gu(),u=io(),f=Z.useMemo(()=>{const w={en_attente:0,appele:0,interesse:0,refus:0,rappeler:0,recrute:0};return o.forEach(k=>{w[k.statut]=(w[k.statut]??0)+1}),w},[o]),l=f.recrute??0,d=Math.min(100,Math.round(l/lp*100)),_=Z.useMemo(()=>new Map(o.map(w=>[w.id,w])),[o]),g=Z.useMemo(()=>i.slice(0,20).map(w=>({...w,prospect:_.get(w.prospect_id)})),[i,_]);return r?x.jsx("div",{className:"text-center py-12 text-gray-400",children:"Chargement..."}):x.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[x.jsxs("div",{className:"bg-white rounded-lg shadow p-5",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Up,{size:20,className:"text-cooperl-600"}),x.jsx("h3",{className:"font-semibold",children:"Objectif annuel"})]}),x.jsxs("span",{className:"text-2xl font-bold text-cooperl-700",children:[l," / ",lp]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full transition-all duration-500 bg-gradient-to-r from-cooperl-400 to-cooperl-600",style:{width:`${d}%`}})}),x.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[d,"% de l'objectif"]})]}),x.jsxs("div",{className:"bg-white rounded-lg shadow p-5",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(t0,{size:20,className:"text-blue-600"}),x.jsx("h3",{className:"font-semibold",children:"Pipeline"})]}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:up.map(w=>x.jsxs("div",{className:"rounded-lg p-3 text-center border",children:[x.jsx("div",{className:"text-2xl font-bold",children:f[w]??0}),x.jsx("div",{className:`text-xs mt-1 inline-block px-2 py-0.5 rounded-full ${Ys[w]}`,children:cr[w]})]},w))}),x.jsx("div",{className:"mt-4 flex rounded-full overflow-hidden h-3",children:up.filter(w=>(f[w]??0)>0).map(w=>{const k=o.length>0?(f[w]??0)/o.length*100:0,b={recrute:"bg-emerald-500",interesse:"bg-amber-400",appele:"bg-blue-400",rappeler:"bg-purple-400",refus:"bg-red-400",en_attente:"bg-gray-300"};return x.jsx("div",{className:`${b[w]} transition-all`,style:{width:`${k}%`},title:`${cr[w]}: ${f[w]}`},w)})})]}),x.jsxs("div",{className:"bg-white rounded-lg shadow p-5",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Zy,{size:20,className:"text-gray-500"}),x.jsx("h3",{className:"font-semibold",children:"Actions rcentes"})]}),g.length===0?x.jsx("div",{className:"text-center py-8 text-gray-400",children:"Aucune action enregistre. Commencez par appeler des prospects depuis le Pipeline."}):x.jsx("div",{className:"space-y-2",children:g.map(w=>{var k;return x.jsxs("div",{className:"flex items-center gap-3 text-sm py-2 border-b border-gray-100 last:border-0 hover:bg-gray-50 cursor-pointer",onClick:()=>w.prospect&&u(`/prospect/${w.prospect.id}`),children:[x.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full shrink-0 ${Ys[w.type]}`,children:cr[w.type]}),x.jsx("span",{className:"font-medium truncate",children:((k=w.prospect)==null?void 0:k.nom)??`#${w.prospect_id}`}),x.jsx("span",{className:"text-gray-400 ml-auto shrink-0",children:new Date(w.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},w.id)})})]})]})}const W0=[{icon:Dp,title:"Rappels et relances automatiques",description:"Envoyer un email automatique quand un prospect n'a pas ete contacte depuis 15 jours, ou envoyer un bilan hebdomadaire a l'equipe.",impact:"L'equipe doit verifier manuellement qui n'a pas ete relance."},{icon:xh,title:"Fiches prospect en PDF",description:"Generer une fiche imprimable avec toutes les infos d'un prospect pour un rendez-vous terrain.",impact:"Il faut faire un copier-coller manuel ou une capture ecran."},{icon:n0,title:"Import et mise a jour des donnees",description:"Importer un fichier Excel pour mettre a jour les prospects en masse (nouvelles SAU, nouveaux adherents, changements de TC).",impact:"Les mises a jour doivent etre faites une par une dans la base de donnees."},{icon:By,title:"Notifications entre collegues",description:'Etre prevenu quand un collegue a mis a jour un prospect ou quand un prospect passe au statut "interesse".',impact:"Il faut ouvrir l'application pour voir les changements."},{icon:i0,title:"Droits d'acces par profil",description:"Un technicien ne voit que ses prospects, un responsable voit toute sa zone, la direction voit tout et peut exporter.",impact:"Aujourd'hui tout le monde voit tout  pas de cloisonnement."},{icon:Yy,title:"Synchronisation automatique avec le SI",description:"Recuperer automatiquement les donnees a jour depuis le systeme d'information de la cooperative (adherents, tonnages, certifications, SAU).",impact:"Les donnees sont figees au moment du chargement initial."},{icon:Hy,title:"Historique et statistiques avancees",description:"Generer des rapports de performance par TC, par zone ou par periode. Comparer les campagnes entre elles.",impact:"Le suivi se limite aux compteurs en temps reel, pas d'historique."}];function q0(){return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[x.jsx($p,{className:"text-amber-600 shrink-0 mt-0.5",size:20}),x.jsxs("div",{children:[x.jsx("h2",{className:"font-semibold text-amber-900",children:"Fonctionnalites non disponibles sur cette version"}),x.jsx("p",{className:"text-amber-700 text-sm mt-1",children:"Cette application est un prototype deploye sur GitHub Pages avec Supabase comme backend. Les fonctionnalites ci-dessous necessitent un serveur applicatif dedie."})]})]}),x.jsx("div",{className:"grid gap-4",children:W0.map(({icon:o,title:i,description:r,impact:u})=>x.jsxs("div",{className:"bg-white border rounded-lg p-4 flex items-start gap-4",children:[x.jsx("div",{className:"bg-gray-100 rounded-lg p-2.5 shrink-0",children:x.jsx(o,{className:"text-gray-500",size:20})}),x.jsxs("div",{className:"min-w-0",children:[x.jsx("h3",{className:"font-medium text-gray-900",children:i}),x.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r}),x.jsxs("p",{className:"text-sm text-red-600 mt-2 flex items-center gap-1.5",children:[x.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-red-400 rounded-full shrink-0"}),u]})]})]},i))}),x.jsxs("div",{className:"bg-cooperl-50 border border-cooperl-200 rounded-lg p-4 text-sm text-cooperl-800",children:[x.jsx("p",{className:"font-medium",children:"Avec l'infrastructure cible (serveur applicatif + base de donnees) :"}),x.jsx("p",{className:"mt-1",children:"Toutes ces fonctionnalites deviennent realisables. L'application est concue pour migrer vers cette architecture sans repartir de zero."})]})]})}function V0({onSignOut:o,userEmail:i}){return x.jsx(Ny,{children:x.jsx(l0,{onSignOut:o,userEmail:i,children:x.jsxs(I_,{children:[x.jsx(Hr,{path:"/",element:x.jsx(c0,{})}),x.jsx(Hr,{path:"/carte",element:x.jsx(B0,{})}),x.jsx(Hr,{path:"/prospect/:id",element:x.jsx(Z0,{})}),x.jsx(Hr,{path:"/suivi",element:x.jsx(H0,{})}),x.jsx(Hr,{path:"/limitations",element:x.jsx(q0,{})}),x.jsx(Hr,{path:"*",element:x.jsx(R_,{to:"/",replace:!0})})]})})})}function G0(){const{user:o,loading:i,signIn:r,signOut:u}=Ty();return i?x.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Chargement..."}):o?x.jsx(V0,{onSignOut:u,userEmail:o.email}):x.jsx(o0,{onLogin:r})}const Jp=document.getElementById("root");if(!Jp)throw new Error("Root element #root not found");Fm.createRoot(Jp).render(x.jsx(ma.StrictMode,{children:x.jsx(Z_,{children:x.jsx(G0,{})})}));
